KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115219.359302
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115219.359302, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2541893)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115219.359302 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115219.359302            && sh ms_avg_99p_lat.sh 20240229-115219.359302            && sh ms_total_even_odd_numreq.sh 20240229-115219.359302            && sh latency_cdf.sh 20240229-115219.359302
DONE
PARSING 20240229-115219.359302 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115219.359302
DONE
PARSING 20240229-115219.359302 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115219.359302
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115219.359302, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115253.371091
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115253.371091, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2543361)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115253.371091 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115253.371091            && sh ms_avg_99p_lat.sh 20240229-115253.371091            && sh ms_total_even_odd_numreq.sh 20240229-115253.371091            && sh latency_cdf.sh 20240229-115253.371091
DONE
PARSING 20240229-115253.371091 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115253.371091
DONE
PARSING 20240229-115253.371091 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115253.371091
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115253.371091, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '120000:25000,600000:30000,120000:20000/120000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115553.875497
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115553.875497, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2545110)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115553.875497 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115553.875497            && sh ms_avg_99p_lat.sh 20240229-115553.875497            && sh ms_total_even_odd_numreq.sh 20240229-115553.875497            && sh latency_cdf.sh 20240229-115553.875497
DONE
PARSING 20240229-115553.875497 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115553.875497
DONE
PARSING 20240229-115553.875497 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115553.875497
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115553.875497, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '120000:25000,600000:30000,120000:20000/120000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115625.820302
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115625.820302, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2546549)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115625.820302 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115625.820302            && sh ms_avg_99p_lat.sh 20240229-115625.820302            && sh ms_total_even_odd_numreq.sh 20240229-115625.820302            && sh latency_cdf.sh 20240229-115625.820302
DONE
PARSING 20240229-115625.820302 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115625.820302
DONE
PARSING 20240229-115625.820302 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115625.820302
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115625.820302, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '120000:25000,600000:30000,120000:20000/120000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115725.071178
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115725.071178, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2548064)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115725.071178 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115725.071178            && sh ms_avg_99p_lat.sh 20240229-115725.071178            && sh ms_total_even_odd_numreq.sh 20240229-115725.071178            && sh latency_cdf.sh 20240229-115725.071178
DONE
PARSING 20240229-115725.071178 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115725.071178
DONE
PARSING 20240229-115725.071178 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115725.071178
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115725.071178, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '120000:25000,600000:30000,120000:20000/300000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115835.123631
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115835.123631, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2549583)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115835.123631 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115835.123631            && sh ms_avg_99p_lat.sh 20240229-115835.123631            && sh ms_total_even_odd_numreq.sh 20240229-115835.123631            && sh latency_cdf.sh 20240229-115835.123631
DONE
PARSING 20240229-115835.123631 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115835.123631
DONE
PARSING 20240229-115835.123631 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115835.123631
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115835.123631, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '120000:25000,600000:30000,120000:20000/300000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-115906.299454
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-115906.299454, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2551021)
KILLED CAPYBARA PROCESSES
PARSING 20240229-115906.299454 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-115906.299454            && sh ms_avg_99p_lat.sh 20240229-115906.299454            && sh ms_total_even_odd_numreq.sh 20240229-115906.299454            && sh latency_cdf.sh 20240229-115906.299454
DONE
PARSING 20240229-115906.299454 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-115906.299454
DONE
PARSING 20240229-115906.299454 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-115906.299454
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-115906.299454, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '300000:25000,600000:30000,300000:20000/300000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-120018.588133
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-120018.588133, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2552571)
KILLED CAPYBARA PROCESSES
PARSING 20240229-120018.588133 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-120018.588133            && sh ms_avg_99p_lat.sh 20240229-120018.588133            && sh ms_total_even_odd_numreq.sh 20240229-120018.588133            && sh latency_cdf.sh 20240229-120018.588133
DONE
PARSING 20240229-120018.588133 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-120018.588133
DONE
PARSING 20240229-120018.588133 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-120018.588133
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-120018.588133, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = '300000:25000,600000:30000,300000:20000/300000:75000'
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240229-120049.923160
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240229-120049.923160, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2554009)
KILLED CAPYBARA PROCESSES
PARSING 20240229-120049.923160 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240229-120049.923160            && sh ms_avg_99p_lat.sh 20240229-120049.923160            && sh ms_total_even_odd_numreq.sh 20240229-120049.923160            && sh latency_cdf.sh 20240229-120049.923160
DONE
PARSING 20240229-120049.923160 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240229-120049.923160
DONE
PARSING 20240229-120049.923160 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240229-120049.923160
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240229-120049.923160, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-060645.226799
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-060739.663855
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'thread 'thread 'main<unnamed><unnamed>thread '' panicked at ' panicked at ' panicked at <unnamed>src/main.rssrc/main.rssrc/main.rs' panicked at ::src/main.rs910:910::thread '910:91083:<unnamed>83:83:
' panicked at :
83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }src/main.rs:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }

:

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
bash: line 1: 2710697 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=50 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-060739.663855 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-060739.663855.client
================ TEST COMPLETE =================

[RESULT]20240301-060739.663855, 2, 50, 0, 10000, 100, N/A



iokerneld killed (pid 2710462)
KILLED CAPYBARA PROCESSES
PARSING 20240301-060739.663855 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-060739.663855            && sh ms_avg_99p_lat.sh 20240301-060739.663855            && sh ms_total_even_odd_numreq.sh 20240301-060739.663855            && sh latency_cdf.sh 20240301-060739.663855
ERROR: cat: /homes/inho/capybara-data/20240301-060739.663855.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-060739.663855.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-060739.663855.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-060739.663855.latency_trace: No such file or directory



PARSING 20240301-060739.663855 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-060739.663855
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-060739.663855, 2, 50, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-062657.567851
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'thread 'thread 'main<unnamed><unnamed>' panicked at ' panicked at ' panicked at src/main.rssrc/main.rssrc/main.rs::thread '910910:thread ':<unnamed>910:83<unnamed>' panicked at :83' panicked at :
83src/main.rs:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }:src/main.rs:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }

910::called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
91083
::
83called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }:

called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
bash: line 1: 2720620 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=50 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-062657.567851 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-062657.567851.client
================ TEST COMPLETE =================

[RESULT]20240301-062657.567851, 2, 50, 0, 10000, 100, N/A



iokerneld killed (pid 2720393)
KILLED CAPYBARA PROCESSES
PARSING 20240301-062657.567851 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-062657.567851            && sh ms_avg_99p_lat.sh 20240301-062657.567851            && sh ms_total_even_odd_numreq.sh 20240301-062657.567851            && sh latency_cdf.sh 20240301-062657.567851
ERROR: cat: /homes/inho/capybara-data/20240301-062657.567851.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-062657.567851.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-062657.567851.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-062657.567851.latency_trace: No such file or directory



PARSING 20240301-062657.567851 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-062657.567851
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-062657.567851, 2, 50, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-064146.124008
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'thread 'thread 'thread 'thread '<unnamed><unnamed><unnamed><unnamed>' panicked at <unnamed>' panicked at ' panicked at src/main.rs' panicked at :src/main.rs910' panicked at src/main.rssrc/main.rs:::src/main.rs910:910:83910::
::8391083called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }83:
::

:
83note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
:


called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
bash: line 1: 2723970 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=50 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-064146.124008 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-064146.124008.client
================ TEST COMPLETE =================

[RESULT]20240301-064146.124008, 2, 50, 0, 10000, 100, N/A



iokerneld killed (pid 2723744)
KILLED CAPYBARA PROCESSES
PARSING 20240301-064146.124008 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-064146.124008            && sh ms_avg_99p_lat.sh 20240301-064146.124008            && sh ms_total_even_odd_numreq.sh 20240301-064146.124008            && sh latency_cdf.sh 20240301-064146.124008
ERROR: cat: /homes/inho/capybara-data/20240301-064146.124008.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-064146.124008.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-064146.124008.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-064146.124008.latency_trace: No such file or directory



PARSING 20240301-064146.124008 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-064146.124008
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-064146.124008, 2, 50, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
  File "run_eval.py", line 130
    {f"CONFIG_PATH={CAPYBARA_PATH}/config/node9_config.yaml" if SERVER_APP == "http-server" else ""} 
                                                                                                    ^
SyntaxError: EOL while scanning string literal
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-064455.019537
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:thread '1079main:' panicked at 67:
src/main.rscalled `Option::unwrap()` on a `None` value:
1079note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
:67:
called `Option::unwrap()` on a `None` value
thread '<unnamed>' panicked at bash: line 1: 2725779 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=50 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-064455.019537 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-064455.019537.client
================ TEST COMPLETE =================

[RESULT]20240301-064455.019537, 2, 50, 0, 10000, 100, N/A



iokerneld killed (pid 2725553)
KILLED CAPYBARA PROCESSES
PARSING 20240301-064455.019537 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-064455.019537            && sh ms_avg_99p_lat.sh 20240301-064455.019537            && sh ms_total_even_odd_numreq.sh 20240301-064455.019537            && sh latency_cdf.sh 20240301-064455.019537
ERROR: cat: /homes/inho/capybara-data/20240301-064455.019537.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-064455.019537.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-064455.019537.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-064455.019537.latency_trace: No such file or directory



PARSING 20240301-064455.019537 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-064455.019537
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-064455.019537, 2, 50, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-064955.808387
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'thread '<unnamed>main' panicked at ' panicked at src/main.rssrc/main.rs::10791079::6767:
:
called `Option::unwrap()` on a `None` valuecalled `Option::unwrap()` on a `None` value

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
thread '<unnamed>' panicked at src/main.rs:1079:67:
called `Option::unwrap()` on a `None` value
thread '<unnamed>' panicked at bash: line 1: 2727796 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=50 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-064955.808387 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-064955.808387.client
================ TEST COMPLETE =================

[RESULT]20240301-064955.808387, 1, 50, 0, 10000, 100, N/A



iokerneld killed (pid 2727570)
KILLED CAPYBARA PROCESSES
PARSING 20240301-064955.808387 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-064955.808387            && sh ms_avg_99p_lat.sh 20240301-064955.808387            && sh ms_total_even_odd_numreq.sh 20240301-064955.808387            && sh latency_cdf.sh 20240301-064955.808387
ERROR: cat: /homes/inho/capybara-data/20240301-064955.808387.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-064955.808387.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-064955.808387.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-064955.808387.latency_trace: No such file or directory



PARSING 20240301-064955.808387 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-064955.808387
ERROR: paste: /homes/inho/capybara-data/20240301-064955.808387.be1_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-064955.808387, 1, 50, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-085404.316102
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240301-085404.316102, 2, 100, 0, 10000, 100, exponential, 250000, 0, 0, 0, 1709283258



iokerneld killed (pid 2744827)
KILLED CAPYBARA PROCESSES
PARSING 20240301-085404.316102 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-085404.316102            && sh ms_avg_99p_lat.sh 20240301-085404.316102            && sh ms_total_even_odd_numreq.sh 20240301-085404.316102            && sh latency_cdf.sh 20240301-085404.316102
ERROR: cat: /homes/inho/capybara-data/20240301-085404.316102.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-085404.316102.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-085404.316102.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-085404.316102.latency_trace: No such file or directory



PARSING 20240301-085404.316102 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-085404.316102
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-085404.316102, 2, 100, 0, 10000, 100, exponential, 250000, 0, 0, 0, 1709283258

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-085609.191852
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-085609.191852, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 11.0, 33.0, 13027.0, 15223.0, 1709283383, 0



iokerneld killed (pid 2746467)
KILLED CAPYBARA PROCESSES
PARSING 20240301-085609.191852 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-085609.191852            && sh ms_avg_99p_lat.sh 20240301-085609.191852            && sh ms_total_even_odd_numreq.sh 20240301-085609.191852            && sh latency_cdf.sh 20240301-085609.191852
ERROR: cat: /homes/inho/capybara-data/20240301-085609.191852.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-085609.191852.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-085609.191852.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-085609.191852.latency_trace: No such file or directory



PARSING 20240301-085609.191852 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-085609.191852
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-085609.191852, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 11.0, 33.0, 13027.0, 15223.0, 1709283383, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-085939.540059
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240301-085939.540059, 2, 100, 0, 10000, 100, exponential, 250000, 0, 0, 0, 1709283593



iokerneld killed (pid 2748340)
KILLED CAPYBARA PROCESSES
PARSING 20240301-085939.540059 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-085939.540059            && sh ms_avg_99p_lat.sh 20240301-085939.540059            && sh ms_total_even_odd_numreq.sh 20240301-085939.540059            && sh latency_cdf.sh 20240301-085939.540059
ERROR: cat: /homes/inho/capybara-data/20240301-085939.540059.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-085939.540059.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-085939.540059.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-085939.540059.latency_trace: No such file or directory



PARSING 20240301-085939.540059 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-085939.540059
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-085939.540059, 2, 100, 0, 10000, 100, exponential, 250000, 0, 0, 0, 1709283593

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-090025.358691
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-090025.358691, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 11.0, 33.0, 13214.0, 15238.0, 1709283639, 0



iokerneld killed (pid 2749824)
KILLED CAPYBARA PROCESSES
PARSING 20240301-090025.358691 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-090025.358691            && sh ms_avg_99p_lat.sh 20240301-090025.358691            && sh ms_total_even_odd_numreq.sh 20240301-090025.358691            && sh latency_cdf.sh 20240301-090025.358691
ERROR: cat: /homes/inho/capybara-data/20240301-090025.358691.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-090025.358691.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-090025.358691.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-090025.358691.latency_trace: No such file or directory



PARSING 20240301-090025.358691 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-090025.358691
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-090025.358691, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 11.0, 33.0, 13214.0, 15238.0, 1709283639, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-090110.459538
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-090110.459538, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 11.0, 35.0, 13103.0, 15467.0, 1709283685, 0



iokerneld killed (pid 2751285)
KILLED CAPYBARA PROCESSES
PARSING 20240301-090110.459538 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-090110.459538            && sh ms_avg_99p_lat.sh 20240301-090110.459538            && sh ms_total_even_odd_numreq.sh 20240301-090110.459538            && sh latency_cdf.sh 20240301-090110.459538
ERROR: cat: /homes/inho/capybara-data/20240301-090110.459538.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-090110.459538.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-090110.459538.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-090110.459538.latency_trace: No such file or directory



PARSING 20240301-090110.459538 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-090110.459538
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-090110.459538, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 11.0, 35.0, 13103.0, 15467.0, 1709283685, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-090715.335991
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-090715.335991, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 10.0, 31.0, 11638.0, 15163.0, 1709284050, 0



iokerneld killed (pid 2764133)
KILLED CAPYBARA PROCESSES
PARSING 20240301-090715.335991 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-090715.335991            && sh ms_avg_99p_lat.sh 20240301-090715.335991            && sh ms_total_even_odd_numreq.sh 20240301-090715.335991            && sh latency_cdf.sh 20240301-090715.335991
ERROR: cat: /homes/inho/capybara-data/20240301-090715.335991.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-090715.335991.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-090715.335991.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-090715.335991.latency_trace: No such file or directory



PARSING 20240301-090715.335991 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-090715.335991
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-090715.335991, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 10.0, 31.0, 11638.0, 15163.0, 1709284050, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-091150.255449
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-091150.255449, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 10.0, 31.0, 11655.0, 15122.0, 1709284324, 0



iokerneld killed (pid 2766133)
KILLED CAPYBARA PROCESSES
PARSING 20240301-091150.255449 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-091150.255449            && sh ms_avg_99p_lat.sh 20240301-091150.255449            && sh ms_total_even_odd_numreq.sh 20240301-091150.255449            && sh latency_cdf.sh 20240301-091150.255449
ERROR: cat: /homes/inho/capybara-data/20240301-091150.255449.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-091150.255449.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-091150.255449.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-091150.255449.latency_trace: No such file or directory



PARSING 20240301-091150.255449 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-091150.255449
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-091150.255449, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 10.0, 10.0, 31.0, 11655.0, 15122.0, 1709284324, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-091605.799438
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-091605.799438, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 9.0, 10.0, 11.0, 6767.0, 13633.0, 1709284580, 0



iokerneld killed (pid 2773805)
KILLED CAPYBARA PROCESSES
PARSING 20240301-091605.799438 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-091605.799438            && sh ms_avg_99p_lat.sh 20240301-091605.799438            && sh ms_total_even_odd_numreq.sh 20240301-091605.799438            && sh latency_cdf.sh 20240301-091605.799438
ERROR: cat: /homes/inho/capybara-data/20240301-091605.799438.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-091605.799438.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-091605.799438.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-091605.799438.latency_trace: No such file or directory



PARSING 20240301-091605.799438 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-091605.799438
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-091605.799438, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 9.0, 10.0, 11.0, 6767.0, 13633.0, 1709284580, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-091927.735157
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11240


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-091927.735157, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 9.0, 10.0, 11.0, 12.0, 13.0, 1709284783, 0



iokerneld killed (pid 2775615)
KILLED CAPYBARA PROCESSES
PARSING 20240301-091927.735157 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-091927.735157            && sh ms_avg_99p_lat.sh 20240301-091927.735157            && sh ms_total_even_odd_numreq.sh 20240301-091927.735157            && sh latency_cdf.sh 20240301-091927.735157
ERROR: cat: /homes/inho/capybara-data/20240301-091927.735157.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-091927.735157.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-091927.735157.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-091927.735157.latency_trace: No such file or directory



PARSING 20240301-091927.735157 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-091927.735157
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-091927.735157, 2, 100, 0, 10000, 100, exponential, 2500, 2366, 2366, 0, 0, 9.0, 10.0, 11.0, 12.0, 13.0, 1709284783, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-092022.995261
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123710


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-092022.995261, 2, 100, 0, 10000, 100, exponential, 250000, 247725, 247725, 0, 28, 9.0, 13.0, 17.0, 22.0, 27.0, 1709284838, 0



iokerneld killed (pid 2777125)
KILLED CAPYBARA PROCESSES
PARSING 20240301-092022.995261 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-092022.995261            && sh ms_avg_99p_lat.sh 20240301-092022.995261            && sh ms_total_even_odd_numreq.sh 20240301-092022.995261            && sh latency_cdf.sh 20240301-092022.995261
ERROR: cat: /homes/inho/capybara-data/20240301-092022.995261.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-092022.995261.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-092022.995261.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-092022.995261.latency_trace: No such file or directory



PARSING 20240301-092022.995261 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-092022.995261
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-092022.995261, 2, 100, 0, 10000, 100, exponential, 250000, 247725, 247725, 0, 28, 9.0, 13.0, 17.0, 22.0, 27.0, 1709284838, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-092955.328234
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123723


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-092955.328234, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247728, 0, 15, 9.0, 13.0, 17.0, 22.0, 36.0, 1709285411, 0



iokerneld killed (pid 2785536)
KILLED CAPYBARA PROCESSES
PARSING 20240301-092955.328234 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-092955.328234            && sh ms_avg_99p_lat.sh 20240301-092955.328234            && sh ms_total_even_odd_numreq.sh 20240301-092955.328234            && sh latency_cdf.sh 20240301-092955.328234
ERROR: cat: /homes/inho/capybara-data/20240301-092955.328234.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-092955.328234.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-092955.328234.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-092955.328234.latency_trace: No such file or directory



PARSING 20240301-092955.328234 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-092955.328234
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-092955.328234, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247728, 0, 15, 9.0, 13.0, 17.0, 22.0, 36.0, 1709285411, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-093032.527450
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123721


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-093032.527450, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247727, 0, 17, 9.0, 13.0, 17.0, 22.0, 36.0, 1709285448, 0



iokerneld killed (pid 2786992)
KILLED CAPYBARA PROCESSES
PARSING 20240301-093032.527450 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-093032.527450            && sh ms_avg_99p_lat.sh 20240301-093032.527450            && sh ms_total_even_odd_numreq.sh 20240301-093032.527450            && sh latency_cdf.sh 20240301-093032.527450
ERROR: cat: /homes/inho/capybara-data/20240301-093032.527450.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-093032.527450.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-093032.527450.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-093032.527450.latency_trace: No such file or directory



PARSING 20240301-093032.527450 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-093032.527450
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-093032.527450, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247727, 0, 17, 9.0, 13.0, 17.0, 22.0, 36.0, 1709285448, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-093145.875500
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123721


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-093145.875500, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247727, 0, 17, 9.0, 13.0, 17.0, 22.0, 37.0, 1709285521, 0



iokerneld killed (pid 2788526)
KILLED CAPYBARA PROCESSES
PARSING 20240301-093145.875500 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-093145.875500            && sh ms_avg_99p_lat.sh 20240301-093145.875500            && sh ms_total_even_odd_numreq.sh 20240301-093145.875500            && sh latency_cdf.sh 20240301-093145.875500
ERROR: cat: /homes/inho/capybara-data/20240301-093145.875500.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-093145.875500.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-093145.875500.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-093145.875500.latency_trace: No such file or directory



PARSING 20240301-093145.875500 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-093145.875500
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-093145.875500, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247727, 0, 17, 9.0, 13.0, 17.0, 22.0, 37.0, 1709285521, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-125516.719399
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240301-125516.719399, 2, 100, 0, 10000, 100, exponential, 250000, 0, 0, 0, 1709297731



iokerneld killed (pid 2815903)
KILLED CAPYBARA PROCESSES
PARSING 20240301-125516.719399 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-125516.719399            && sh ms_avg_99p_lat.sh 20240301-125516.719399            && sh ms_total_even_odd_numreq.sh 20240301-125516.719399            && sh latency_cdf.sh 20240301-125516.719399
ERROR: cat: /homes/inho/capybara-data/20240301-125516.719399.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-125516.719399.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-125516.719399.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-125516.719399.latency_trace: No such file or directory



PARSING 20240301-125516.719399 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-125516.719399
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-125516.719399, 2, 100, 0, 10000, 100, exponential, 250000, 0, 0, 0, 1709297731

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-130256.939538
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123725


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-130256.939538, 2, 100, 0, 10000, 100, exponential, 250000, 247729, 247728, 0, 13, 9.0, 12.0, 17.0, 22.0, 34.0, 1709298192, 0



iokerneld killed (pid 2818247)
KILLED CAPYBARA PROCESSES
PARSING 20240301-130256.939538 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-130256.939538            && sh ms_avg_99p_lat.sh 20240301-130256.939538            && sh ms_total_even_odd_numreq.sh 20240301-130256.939538            && sh latency_cdf.sh 20240301-130256.939538
ERROR: cat: /homes/inho/capybara-data/20240301-130256.939538.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-130256.939538.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130256.939538.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130256.939538.latency_trace: No such file or directory



PARSING 20240301-130256.939538 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-130256.939538
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-130256.939538, 2, 100, 0, 10000, 100, exponential, 250000, 247729, 247728, 0, 13, 9.0, 12.0, 17.0, 22.0, 34.0, 1709298192, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-130419.779550
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123716


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-130419.779550, 2, 100, 0, 10000, 100, exponential, 250000, 247727, 247726, 0, 22, 10.0, 13.0, 18.0, 23.0, 37.0, 1709298275, 0



iokerneld killed (pid 2819782)
KILLED CAPYBARA PROCESSES
PARSING 20240301-130419.779550 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-130419.779550            && sh ms_avg_99p_lat.sh 20240301-130419.779550            && sh ms_total_even_odd_numreq.sh 20240301-130419.779550            && sh latency_cdf.sh 20240301-130419.779550
ERROR: cat: /homes/inho/capybara-data/20240301-130419.779550.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-130419.779550.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130419.779550.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130419.779550.latency_trace: No such file or directory



PARSING 20240301-130419.779550 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-130419.779550
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-130419.779550, 2, 100, 0, 10000, 100, exponential, 250000, 247727, 247726, 0, 22, 10.0, 13.0, 18.0, 23.0, 37.0, 1709298275, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-130617.483942
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123722


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-130617.483942, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247728, 0, 16, 9.0, 13.0, 17.0, 23.0, 42.0, 1709298392, 0



iokerneld killed (pid 2821401)
KILLED CAPYBARA PROCESSES
PARSING 20240301-130617.483942 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-130617.483942            && sh ms_avg_99p_lat.sh 20240301-130617.483942            && sh ms_total_even_odd_numreq.sh 20240301-130617.483942            && sh latency_cdf.sh 20240301-130617.483942
ERROR: cat: /homes/inho/capybara-data/20240301-130617.483942.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-130617.483942.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130617.483942.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130617.483942.latency_trace: No such file or directory



PARSING 20240301-130617.483942 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-130617.483942
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-130617.483942, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247728, 0, 16, 9.0, 13.0, 17.0, 23.0, 42.0, 1709298392, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-130734.571417
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123727


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-130734.571417, 2, 100, 0, 10000, 100, exponential, 250000, 247729, 247729, 0, 11, 9.0, 13.0, 17.0, 22.0, 37.0, 1709298469, 0



iokerneld killed (pid 2822951)
KILLED CAPYBARA PROCESSES
PARSING 20240301-130734.571417 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-130734.571417            && sh ms_avg_99p_lat.sh 20240301-130734.571417            && sh ms_total_even_odd_numreq.sh 20240301-130734.571417            && sh latency_cdf.sh 20240301-130734.571417
ERROR: cat: /homes/inho/capybara-data/20240301-130734.571417.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-130734.571417.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130734.571417.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130734.571417.latency_trace: No such file or directory



PARSING 20240301-130734.571417 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-130734.571417
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-130734.571417, 2, 100, 0, 10000, 100, exponential, 250000, 247729, 247729, 0, 11, 9.0, 13.0, 17.0, 22.0, 37.0, 1709298469, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-130829.975478
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread 'main' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2824795 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-130829.975478 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-130829.975478.client
================ TEST COMPLETE =================

[RESULT]20240301-130829.975478, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2824568)
KILLED CAPYBARA PROCESSES
PARSING 20240301-130829.975478 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-130829.975478            && sh ms_avg_99p_lat.sh 20240301-130829.975478            && sh ms_total_even_odd_numreq.sh 20240301-130829.975478            && sh latency_cdf.sh 20240301-130829.975478
ERROR: cat: /homes/inho/capybara-data/20240301-130829.975478.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-130829.975478.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130829.975478.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-130829.975478.latency_trace: No such file or directory



PARSING 20240301-130829.975478 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-130829.975478
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-130829.975478, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-131313.684055
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2826856 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-131313.684055 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-131313.684055.client
================ TEST COMPLETE =================

[RESULT]20240301-131313.684055, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2826630)
KILLED CAPYBARA PROCESSES
PARSING 20240301-131313.684055 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-131313.684055            && sh ms_avg_99p_lat.sh 20240301-131313.684055            && sh ms_total_even_odd_numreq.sh 20240301-131313.684055            && sh latency_cdf.sh 20240301-131313.684055
ERROR: cat: /homes/inho/capybara-data/20240301-131313.684055.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-131313.684055.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-131313.684055.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-131313.684055.latency_trace: No such file or directory



PARSING 20240301-131313.684055 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-131313.684055
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-131313.684055, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-132313.123928
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123719


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-132313.123928, 2, 100, 0, 10000, 100, exponential, 250000, 247727, 247727, 0, 19, 9.0, 13.0, 17.0, 22.0, 35.0, 1709299408, 0



iokerneld killed (pid 2829349)
KILLED CAPYBARA PROCESSES
PARSING 20240301-132313.123928 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-132313.123928            && sh ms_avg_99p_lat.sh 20240301-132313.123928            && sh ms_total_even_odd_numreq.sh 20240301-132313.123928            && sh latency_cdf.sh 20240301-132313.123928
ERROR: cat: /homes/inho/capybara-data/20240301-132313.123928.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-132313.123928.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-132313.123928.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-132313.123928.latency_trace: No such file or directory



PARSING 20240301-132313.123928 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-132313.123928
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-132313.123928, 2, 100, 0, 10000, 100, exponential, 250000, 247727, 247727, 0, 19, 9.0, 13.0, 17.0, 22.0, 35.0, 1709299408, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-132414.943710
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread 'main' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2831223 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-132414.943710 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-132414.943710.client
================ TEST COMPLETE =================

[RESULT]20240301-132414.943710, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2830997)
KILLED CAPYBARA PROCESSES
PARSING 20240301-132414.943710 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-132414.943710            && sh ms_avg_99p_lat.sh 20240301-132414.943710            && sh ms_total_even_odd_numreq.sh 20240301-132414.943710            && sh latency_cdf.sh 20240301-132414.943710
ERROR: cat: /homes/inho/capybara-data/20240301-132414.943710.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-132414.943710.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-132414.943710.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-132414.943710.latency_trace: No such file or directory



PARSING 20240301-132414.943710 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-132414.943710
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-132414.943710, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-132729.819000
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread 'main' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2838683 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-132729.819000 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-132729.819000.client
================ TEST COMPLETE =================

[RESULT]20240301-132729.819000, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2838458)
KILLED CAPYBARA PROCESSES
PARSING 20240301-132729.819000 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-132729.819000            && sh ms_avg_99p_lat.sh 20240301-132729.819000            && sh ms_total_even_odd_numreq.sh 20240301-132729.819000            && sh latency_cdf.sh 20240301-132729.819000
ERROR: cat: /homes/inho/capybara-data/20240301-132729.819000.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-132729.819000.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-132729.819000.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-132729.819000.latency_trace: No such file or directory



PARSING 20240301-132729.819000 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-132729.819000
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-132729.819000, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-133344.418955
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread '<unnamed>' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2840949 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-133344.418955 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-133344.418955.client
================ TEST COMPLETE =================

[RESULT]20240301-133344.418955, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2840722)
KILLED CAPYBARA PROCESSES
PARSING 20240301-133344.418955 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-133344.418955            && sh ms_avg_99p_lat.sh 20240301-133344.418955            && sh ms_total_even_odd_numreq.sh 20240301-133344.418955            && sh latency_cdf.sh 20240301-133344.418955
ERROR: cat: /homes/inho/capybara-data/20240301-133344.418955.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-133344.418955.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-133344.418955.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-133344.418955.latency_trace: No such file or directory



PARSING 20240301-133344.418955 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-133344.418955
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-133344.418955, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-134944.951578
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread '<unnamed>' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2850358 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-134944.951578 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-134944.951578.client
================ TEST COMPLETE =================

[RESULT]20240301-134944.951578, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2850131)
KILLED CAPYBARA PROCESSES
PARSING 20240301-134944.951578 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-134944.951578            && sh ms_avg_99p_lat.sh 20240301-134944.951578            && sh ms_total_even_odd_numreq.sh 20240301-134944.951578            && sh latency_cdf.sh 20240301-134944.951578
ERROR: cat: /homes/inho/capybara-data/20240301-134944.951578.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-134944.951578.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-134944.951578.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-134944.951578.latency_trace: No such file or directory



PARSING 20240301-134944.951578 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-134944.951578
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-134944.951578, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-135317.731416
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
['cd /homes/inho/Capybara/capybara &&                                  sudo -E                 CAPY_LOG=all                 LIBOS=catnip                 RECV_QUEUE_THRESHOLD=50                 SESSION_DATA_SIZE=0                 MAX_STAT_MIGS=10000                 MTU=1500                 MSS=1500                 NUM_CORES=4                 RUST_BACKTRACE=full                 CORE_ID=1                 MIG_DELAY=0                 MIG_PER_N=100                                  CONF=redis0                 LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu                 PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig                 numactl -m0                 make run-redis-server                 > /homes/inho/capybara-data/20240301-135317.731416.be0 2>&1']
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc

dpdk-ctrl.elf killed (pid 2091962)
KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-135816.979676
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread '<unnamed>' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2853347 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-135816.979676 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-135816.979676.client
================ TEST COMPLETE =================

[RESULT]20240301-135816.979676, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2853121)
KILLED CAPYBARA PROCESSES
PARSING 20240301-135816.979676 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-135816.979676            && sh ms_avg_99p_lat.sh 20240301-135816.979676            && sh ms_total_even_odd_numreq.sh 20240301-135816.979676            && sh latency_cdf.sh 20240301-135816.979676
ERROR: cat: /homes/inho/capybara-data/20240301-135816.979676.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-135816.979676.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-135816.979676.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-135816.979676.latency_trace: No such file or directory



PARSING 20240301-135816.979676 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-135816.979676
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-135816.979676, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-140650.815923
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread '<unnamed>' panicked at src/resp.rs:249:21:
Preload command failed: -MISCONF Errors writing to the AOF file: Bad file descriptor

Command:
*3
$3
SET
$7
string1
$1
1

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2861878 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-140650.815923 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-140650.815923.client
================ TEST COMPLETE =================

[RESULT]20240301-140650.815923, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2861651)
KILLED CAPYBARA PROCESSES
PARSING 20240301-140650.815923 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-140650.815923            && sh ms_avg_99p_lat.sh 20240301-140650.815923            && sh ms_total_even_odd_numreq.sh 20240301-140650.815923            && sh latency_cdf.sh 20240301-140650.815923
ERROR: cat: /homes/inho/capybara-data/20240301-140650.815923.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-140650.815923.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-140650.815923.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-140650.815923.latency_trace: No such file or directory



PARSING 20240301-140650.815923 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-140650.815923
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-140650.815923, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-141506.799720
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
thread 'main' panicked at src/resp.rs:249:21:
Preload command failed: -LOADING Redis is loading the dataset in memory

Command:
*3
$3
SET
$7
string0
$1
0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2870165 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --transport=tcp --samples=1 --pps=250000 --threads=100 --runtime=5 --discard_pct=10 --output=buckets --rampup=0 --exptid=/homes/inho/capybara-data/20240301-141506.799720 --protocol=resp --redis-string=100 > /homes/inho/capybara-data/20240301-141506.799720.client
================ TEST COMPLETE =================

[RESULT]20240301-141506.799720, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2869937)
KILLED CAPYBARA PROCESSES
PARSING 20240301-141506.799720 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-141506.799720            && sh ms_avg_99p_lat.sh 20240301-141506.799720            && sh ms_total_even_odd_numreq.sh 20240301-141506.799720            && sh latency_cdf.sh 20240301-141506.799720
ERROR: cat: /homes/inho/capybara-data/20240301-141506.799720.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-141506.799720.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-141506.799720.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-141506.799720.latency_trace: No such file or directory



PARSING 20240301-141506.799720 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-141506.799720
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-141506.799720, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
Traceback (most recent call last):
  File "run_eval.py", line 727, in <module>
    --exptid={DATA_PATH}/{experiment_id} \
NameError: name 'experiment_id' is not defined
Traceback (most recent call last):
  File "run_eval.py", line 727, in <module>
    --exptid={DATA_PATH}/{experiment_id} \
NameError: name 'experiment_id' is not defined
['sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic                                             10.0.1.8:10000                                             --config /homes/inho/Capybara/caladan/client.config                                             --mode runtime-client                                             --transport=tcp                                             --samples=1                                             --pps=10                                             --threads=1                                             --runtime=5                                             --discard_pct=10                                             --output=buckets                                             --rampup=0                                             --protocol=resp                                             --redis-string=100']
['sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic                                             10.0.1.8:10000                                             --config /homes/inho/Capybara/caladan/client.config                                             --mode runtime-client                                             --transport=tcp                                             --samples=1                                             --pps=10                                             --threads=1                                             --runtime=5                                             --discard_pct=10                                             --output=buckets                                             --rampup=0                                             --protocol=resp                                             --redis-string=100']
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240301-142509.035727
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
Total # latencies: 1123723


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240301-142509.035727, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247727, 0, 15, 14.0, 24.0, 37.0, 51.0, 66.0, 1709303125, 0



iokerneld killed (pid 2873052)
KILLED CAPYBARA PROCESSES
PARSING 20240301-142509.035727 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240301-142509.035727            && sh ms_avg_99p_lat.sh 20240301-142509.035727            && sh ms_total_even_odd_numreq.sh 20240301-142509.035727            && sh latency_cdf.sh 20240301-142509.035727
ERROR: cat: /homes/inho/capybara-data/20240301-142509.035727.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240301-142509.035727.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-142509.035727.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240301-142509.035727.latency_trace: No such file or directory



PARSING 20240301-142509.035727 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240301-142509.035727
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240301-142509.035727, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247727, 0, 15, 14.0, 24.0, 37.0, 51.0, 66.0, 1709303125, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 2
TOTAL_TIME = 5000 # Always in multiples of phase
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
PHASE_INTERVAL = 100
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-072811.184295
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
preload 10.0.1.8:10000
Total # latencies: 1123724


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-072811.184295, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247728, 0, 14, 14.0, 24.0, 37.0, 50.0, 66.0, 1709537306, 0



iokerneld killed (pid 3464052)
KILLED CAPYBARA PROCESSES
PARSING 20240304-072811.184295 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-072811.184295            && sh ms_avg_99p_lat.sh 20240304-072811.184295            && sh ms_total_even_odd_numreq.sh 20240304-072811.184295            && sh latency_cdf.sh 20240304-072811.184295
ERROR: cat: /homes/inho/capybara-data/20240304-072811.184295.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-072811.184295.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-072811.184295.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-072811.184295.latency_trace: No such file or directory



PARSING 20240304-072811.184295 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-072811.184295
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-072811.184295, 2, 100, 0, 10000, 100, exponential, 250000, 247728, 247728, 0, 14, 14.0, 24.0, 37.0, 50.0, 66.0, 1709537306, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
dpdk-ctrl.elf killed (pid 2141013)
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
NUM_BACKENDS = 1
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-122730.239264
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1123771


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-122730.239264, 2, 50, 0, 0, 100, exponential, 250000, 248600, 248599, 0, 19, 19.0, 35.0, 61.0, 94.0, 170.0, 1709555265, 0



iokerneld killed (pid 3538690)
KILLED CAPYBARA PROCESSES
PARSING 20240304-122730.239264 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-122730.239264            && sh ms_avg_99p_lat.sh 20240304-122730.239264            && sh ms_total_even_odd_numreq.sh 20240304-122730.239264            && sh latency_cdf.sh 20240304-122730.239264
ERROR: cat: /homes/inho/capybara-data/20240304-122730.239264.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-122730.239264.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-122730.239264.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-122730.239264.latency_trace: No such file or directory



PARSING 20240304-122730.239264 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-122730.239264
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-122730.239264, 2, 50, 0, 0, 100, exponential, 250000, 248600, 248599, 0, 19, 19.0, 35.0, 61.0, 94.0, 170.0, 1709555265, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(450000, 450000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-123122.171179
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240304-123122.171179, 1, 50, 0, 0, 100, exponential, 450000, 0, 0, 0, 1709555496



iokerneld killed (pid 3540606)
KILLED CAPYBARA PROCESSES
PARSING 20240304-123122.171179 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-123122.171179            && sh ms_avg_99p_lat.sh 20240304-123122.171179            && sh ms_total_even_odd_numreq.sh 20240304-123122.171179            && sh latency_cdf.sh 20240304-123122.171179
ERROR: cat: /homes/inho/capybara-data/20240304-123122.171179.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-123122.171179.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123122.171179.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123122.171179.latency_trace: No such file or directory



PARSING 20240304-123122.171179 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-123122.171179
ERROR: paste: /homes/inho/capybara-data/20240304-123122.171179.be1_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-123122.171179, 1, 50, 0, 0, 100, exponential, 450000, 0, 0, 0, 1709555496

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(300000, 300000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-123207.431625
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1348208


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-123207.431625, 1, 50, 0, 0, 100, exponential, 300000, 298445, 298443, 0, 23, 32.0, 72.0, 140.0, 243.0, 456.0, 1709555542, 0



iokerneld killed (pid 3542084)
KILLED CAPYBARA PROCESSES
PARSING 20240304-123207.431625 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-123207.431625            && sh ms_avg_99p_lat.sh 20240304-123207.431625            && sh ms_total_even_odd_numreq.sh 20240304-123207.431625            && sh latency_cdf.sh 20240304-123207.431625
ERROR: cat: /homes/inho/capybara-data/20240304-123207.431625.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-123207.431625.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123207.431625.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123207.431625.latency_trace: No such file or directory



PARSING 20240304-123207.431625 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-123207.431625
ERROR: paste: /homes/inho/capybara-data/20240304-123207.431625.be1_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-123207.431625, 1, 50, 0, 0, 100, exponential, 300000, 298445, 298443, 0, 23, 32.0, 72.0, 140.0, 243.0, 456.0, 1709555542, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(330000, 330000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-123353.235327
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1483525


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-123353.235327, 1, 50, 0, 0, 100, exponential, 330000, 328542, 328536, 0, 24, 108.0, 289.0, 668.0, 1205.0, 1961.0, 1709555648, 0



iokerneld killed (pid 3543696)
KILLED CAPYBARA PROCESSES
PARSING 20240304-123353.235327 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-123353.235327            && sh ms_avg_99p_lat.sh 20240304-123353.235327            && sh ms_total_even_odd_numreq.sh 20240304-123353.235327            && sh latency_cdf.sh 20240304-123353.235327
ERROR: cat: /homes/inho/capybara-data/20240304-123353.235327.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-123353.235327.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123353.235327.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123353.235327.latency_trace: No such file or directory



PARSING 20240304-123353.235327 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-123353.235327
ERROR: paste: /homes/inho/capybara-data/20240304-123353.235327.be1_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-123353.235327, 1, 50, 0, 0, 100, exponential, 330000, 328542, 328536, 0, 24, 108.0, 289.0, 668.0, 1205.0, 1961.0, 1709555648, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(600000, 600000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-123553.499121
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2699166


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-123553.499121, 2, 50, 0, 0, 100, exponential, 600000, 597826, 597823, 0, 87, 24.0, 52.0, 103.0, 173.0, 313.0, 1709555768, 0



iokerneld killed (pid 3545334)
KILLED CAPYBARA PROCESSES
PARSING 20240304-123553.499121 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-123553.499121            && sh ms_avg_99p_lat.sh 20240304-123553.499121            && sh ms_total_even_odd_numreq.sh 20240304-123553.499121            && sh latency_cdf.sh 20240304-123553.499121
ERROR: cat: /homes/inho/capybara-data/20240304-123553.499121.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-123553.499121.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123553.499121.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-123553.499121.latency_trace: No such file or directory



PARSING 20240304-123553.499121 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-123553.499121
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-123553.499121, 2, 50, 0, 0, 100, exponential, 600000, 597826, 597823, 0, 87, 24.0, 52.0, 103.0, 173.0, 313.0, 1709555768, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(620000, 620000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-124037.467575
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2789153


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-124037.467575, 2, 50, 0, 0, 100, exponential, 620000, 617733, 617729, 0, 111, 30.0, 70.0, 149.0, 300.0, 1220.0, 1709556052, 0



iokerneld killed (pid 3547310)
KILLED CAPYBARA PROCESSES
PARSING 20240304-124037.467575 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-124037.467575            && sh ms_avg_99p_lat.sh 20240304-124037.467575            && sh ms_total_even_odd_numreq.sh 20240304-124037.467575            && sh latency_cdf.sh 20240304-124037.467575
ERROR: cat: /homes/inho/capybara-data/20240304-124037.467575.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-124037.467575.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-124037.467575.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-124037.467575.latency_trace: No such file or directory



PARSING 20240304-124037.467575 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-124037.467575
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-124037.467575, 2, 50, 0, 0, 100, exponential, 620000, 617733, 617729, 0, 111, 30.0, 70.0, 149.0, 300.0, 1220.0, 1709556052, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(620000, 620000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-124139.378795
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2787607


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-124139.378795, 2, 100, 0, 0, 100, exponential, 620000, 617163, 617158, 0, 73, 41.0, 95.0, 194.0, 330.0, 494.0, 1709556114, 0



iokerneld killed (pid 3548830)
KILLED CAPYBARA PROCESSES
PARSING 20240304-124139.378795 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-124139.378795            && sh ms_avg_99p_lat.sh 20240304-124139.378795            && sh ms_total_even_odd_numreq.sh 20240304-124139.378795            && sh latency_cdf.sh 20240304-124139.378795
ERROR: cat: /homes/inho/capybara-data/20240304-124139.378795.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-124139.378795.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-124139.378795.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-124139.378795.latency_trace: No such file or directory



PARSING 20240304-124139.378795 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-124139.378795
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-124139.378795, 2, 100, 0, 0, 100, exponential, 620000, 617163, 617158, 0, 73, 41.0, 95.0, 194.0, 330.0, 494.0, 1709556114, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240304-124224.083262
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2922607


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240304-124224.083262, 2, 100, 0, 0, 100, exponential, 650000, 647022, 647003, 0, 102, 81.0, 207.0, 493.0, 974.0, 1742.0, 1709556159, 0



iokerneld killed (pid 3550307)
KILLED CAPYBARA PROCESSES
PARSING 20240304-124224.083262 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240304-124224.083262            && sh ms_avg_99p_lat.sh 20240304-124224.083262            && sh ms_total_even_odd_numreq.sh 20240304-124224.083262            && sh latency_cdf.sh 20240304-124224.083262
ERROR: cat: /homes/inho/capybara-data/20240304-124224.083262.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240304-124224.083262.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-124224.083262.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240304-124224.083262.latency_trace: No such file or directory



PARSING 20240304-124224.083262 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240304-124224.083262
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240304-124224.083262, 2, 100, 0, 0, 100, exponential, 650000, 647022, 647003, 0, 102, 81.0, 207.0, 493.0, 974.0, 1742.0, 1709556159, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240306-134340.799752
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2922592


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240306-134340.799752, 2, 100, 0, 0, 100, exponential, 650000, 647019, 647001, 0, 117, 63.0, 158.0, 354.0, 645.0, 1034.0, 1709732635, 0



iokerneld killed (pid 3920239)
KILLED CAPYBARA PROCESSES
PARSING 20240306-134340.799752 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240306-134340.799752            && sh ms_avg_99p_lat.sh 20240306-134340.799752            && sh ms_total_even_odd_numreq.sh 20240306-134340.799752            && sh latency_cdf.sh 20240306-134340.799752
ERROR: cat: /homes/inho/capybara-data/20240306-134340.799752.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240306-134340.799752.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240306-134340.799752.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240306-134340.799752.latency_trace: No such file or directory



PARSING 20240306-134340.799752 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240306-134340.799752
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240306-134340.799752, 2, 100, 0, 0, 100, exponential, 650000, 647019, 647001, 0, 117, 63.0, 158.0, 354.0, 645.0, 1034.0, 1709732635, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240306-134454.011078
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2922617


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240306-134454.011078, 2, 100, 0, 0, 100, exponential, 650000, 647025, 647001, 0, 92, 75.0, 200.0, 478.0, 886.0, 1398.0, 1709732709, 0



iokerneld killed (pid 3921790)
KILLED CAPYBARA PROCESSES
PARSING 20240306-134454.011078 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240306-134454.011078            && sh ms_avg_99p_lat.sh 20240306-134454.011078            && sh ms_total_even_odd_numreq.sh 20240306-134454.011078            && sh latency_cdf.sh 20240306-134454.011078
ERROR: cat: /homes/inho/capybara-data/20240306-134454.011078.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240306-134454.011078.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240306-134454.011078.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240306-134454.011078.latency_trace: No such file or directory



PARSING 20240306-134454.011078 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240306-134454.011078
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240306-134454.011078, 2, 100, 0, 0, 100, exponential, 650000, 647025, 647001, 0, 92, 75.0, 200.0, 478.0, 886.0, 1398.0, 1709732709, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240306-134614.935838
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 291433


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240306-134614.935838, 2, 100, 0, 0, 100, exponential, 65000, 64038, 64038, 0, 2, 10.0, 12.0, 15.0, 19.0, 44.0, 1709732789, 0



iokerneld killed (pid 3923362)
KILLED CAPYBARA PROCESSES
PARSING 20240306-134614.935838 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240306-134614.935838            && sh ms_avg_99p_lat.sh 20240306-134614.935838            && sh ms_total_even_odd_numreq.sh 20240306-134614.935838            && sh latency_cdf.sh 20240306-134614.935838
ERROR: cat: /homes/inho/capybara-data/20240306-134614.935838.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240306-134614.935838.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240306-134614.935838.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240306-134614.935838.latency_trace: No such file or directory



PARSING 20240306-134614.935838 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240306-134614.935838
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240306-134614.935838, 2, 100, 0, 0, 100, exponential, 65000, 64038, 64038, 0, 2, 10.0, 12.0, 15.0, 19.0, 44.0, 1709732789, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240306-135058.335698
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240306-135058.335698, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 3931070)
KILLED CAPYBARA PROCESSES
PARSING 20240306-135058.335698 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240306-135058.335698            && sh ms_avg_99p_lat.sh 20240306-135058.335698            && sh ms_total_even_odd_numreq.sh 20240306-135058.335698            && sh latency_cdf.sh 20240306-135058.335698
DONE
PARSING 20240306-135058.335698 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240306-135058.335698
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240306-135058.335698, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-055034.166686
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240307-055034.166686.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-055102.451588
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240307-055102.451588.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-055102.451588, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4057847)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240307-055102.451588.pcap
[0;33mParsing /local/inho/capybara-pcap/20240307-055102.451588.pcap --> /local/inho/capybara-pcap/20240307-055102.451588.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240307-055102.451588.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-chbtfmic ; wait'
PARSING 20240307-055102.451588 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-055102.451588            && sh ms_avg_99p_lat.sh 20240307-055102.451588            && sh ms_total_even_odd_numreq.sh 20240307-055102.451588            && sh latency_cdf.sh 20240307-055102.451588
DONE
PARSING 20240307-055102.451588 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-055102.451588
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-055102.451588, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-060236.067740
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240307-060236.067740.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-060236.067740, 2, 100, 0, 0, 100, exponential, 65000, 64944, 64943, 0, 1, 10.0, 13.0, 17.0, 22.0, 49.0, 1709791366, 0



iokerneld killed (pid 4060696)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240307-060236.067740.pcap
[0;33mParsing /local/inho/capybara-pcap/20240307-060236.067740.pcap --> /local/inho/capybara-pcap/20240307-060236.067740.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240307-060236.067740.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-01op0xis ; wait'
PARSING 20240307-060236.067740 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-060236.067740            && sh ms_avg_99p_lat.sh 20240307-060236.067740            && sh ms_total_even_odd_numreq.sh 20240307-060236.067740            && sh latency_cdf.sh 20240307-060236.067740
DONE
PARSING 20240307-060236.067740 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-060236.067740
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-060236.067740, 2, 100, 0, 0, 100, exponential, 65000, 64944, 64943, 0, 1, 10.0, 13.0, 17.0, 22.0, 49.0, 1709791366, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-060736.838775
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240307-060736.838775.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-060736.838775, 2, 100, 0, 0, 100, exponential, 65000, 64946, 64944, 0, 0, 10.0, 13.0, 16.0, 24.0, 51.0, 1709791667, 0



iokerneld killed (pid 4068393)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240307-060736.838775.pcap
[0;33mParsing /local/inho/capybara-pcap/20240307-060736.838775.pcap --> /local/inho/capybara-pcap/20240307-060736.838775.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240307-060736.838775.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-813oejd0 ; wait'
PARSING 20240307-060736.838775 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-060736.838775            && sh ms_avg_99p_lat.sh 20240307-060736.838775            && sh ms_total_even_odd_numreq.sh 20240307-060736.838775            && sh latency_cdf.sh 20240307-060736.838775
DONE
PARSING 20240307-060736.838775 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-060736.838775
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-060736.838775, 2, 100, 0, 0, 100, exponential, 65000, 64946, 64944, 0, 0, 10.0, 13.0, 16.0, 24.0, 51.0, 1709791667, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-061218.683380
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240307-061218.683380.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-061218.683380, 2, 100, 0, 0, 100, exponential, 65000, 64946, 64944, 0, 0, 10.0, 13.0, 16.0, 23.0, 49.0, 1709791949, 0



iokerneld killed (pid 4070358)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240307-061218.683380.pcap
[0;33mParsing /local/inho/capybara-pcap/20240307-061218.683380.pcap --> /local/inho/capybara-pcap/20240307-061218.683380.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240307-061218.683380.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-njs9mzrh ; wait'
PARSING 20240307-061218.683380 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-061218.683380            && sh ms_avg_99p_lat.sh 20240307-061218.683380            && sh ms_total_even_odd_numreq.sh 20240307-061218.683380            && sh latency_cdf.sh 20240307-061218.683380
DONE
PARSING 20240307-061218.683380 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-061218.683380
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-061218.683380, 2, 100, 0, 0, 100, exponential, 65000, 64946, 64944, 0, 0, 10.0, 13.0, 16.0, 23.0, 49.0, 1709791949, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-061312.526757
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-061312.526757, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4071863)
KILLED CAPYBARA PROCESSES
PARSING 20240307-061312.526757 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-061312.526757            && sh ms_avg_99p_lat.sh 20240307-061312.526757            && sh ms_total_even_odd_numreq.sh 20240307-061312.526757            && sh latency_cdf.sh 20240307-061312.526757
DONE
PARSING 20240307-061312.526757 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-061312.526757
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-061312.526757, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-064327.627377
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-064327.627377, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4083598)
KILLED CAPYBARA PROCESSES
PARSING 20240307-064327.627377 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-064327.627377            && sh ms_avg_99p_lat.sh 20240307-064327.627377            && sh ms_total_even_odd_numreq.sh 20240307-064327.627377            && sh latency_cdf.sh 20240307-064327.627377
DONE
PARSING 20240307-064327.627377 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-064327.627377
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-064327.627377, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-074820.571570
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4100431 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-45000:5000,45000:12000,45000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-16000:7000,16000:9000,16000-33000:9000,33000:5000,33000-23000:9000,23000:16000,23000-10000:5000,10000:6000,10000-10000:5000,10000:11000,10000-9000:5000,9000:18000,9000-9000:5000,9000:9000,9000-9000:7000,9000:9000,9000-9000:6000,9000:14000,9000-33000:5000,33000:9000,33000-14000:5000,14000:7000,14000-19000:10000,19000:12000,19000-21000:9000,21000:12000,21000-26000:6000,26000:12000,26000-26000:6000,26000:7000,26000-99000:5000,99000:20000,99000-57000:9000,57000:19000,57000-66000:8000,66000:20000,66000-48000:9000,48000:10000,48000-15000:5000,15000:19000,15000-14000:6000,14000:20000,14000-13000:8000,13000:6000,13000-11000:6000,11000:6000,11000-11000:6000,11000:5000,11000-15000:10000,15000:3000,15000-10000:5000,10000:10000,10000-10000:10000,10000:16000,10000-10000:10000,10000:5000,10000-9000:10000,9000:13000,9000-10000:7000,10000:14000,10000-502000:5000,502000:8000,502000-390000:5000,390000:19000,390000-240000:7000,240000:8000,240000-483000:6000,483000:9000,483000-494000:5000,494000:19000,494000-381000:7000,381000:2000,381000-372000:5000,372000:9000,372000-88000:6000,88000:8000,88000-332000:8000,332000:14000,332000-372000:6000,372000:10000,372000-309000:5000,309000:9000,309000-276000:6000,276000:14000,276000-195000:5000,195000:18000,195000-165000:7000,165000:5000,165000-175000:5000,175000:5000,175000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:10000,29000-502000:5000,502000:19000,502000-365000:10000,365000:19000,365000-469000:9000,469000:7000,469000-202000:7000,202000:10000,202000-272000:10000,272000:4000,272000-502000:5000,502000:9000,502000-263000:9000,263000:16000,263000-277000:9000,277000:16000,277000-482000:5000,482000:5000,482000-318000:10000,318000:16000,318000-97000:5000,97000:17000,97000-39000:9000,39000:18000,39000-90000:9000,90000:16000,90000-89000:6000,89000:9000,89000-68000:8000,68000:3000,68000-164000:5000,164000:11000,164000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:9000,82000-129000:8000,129000:17000,129000-428000:5000,428000:20000,428000-300000:10000,300000:20000,300000-345000:7000,345000:13000,345000-372000:8000,372000:8000,372000-359000:8000,359000:1000,359000-78000:5000,78000:19000,78000-36000:10000,36000:17000,36000-38000:5000,38000:9000,38000-17000:6000,17000:20000,17000-44000:5000,44000:4000,44000-362000:5000,362000:7000,362000-207000:8000,207000:16000,207000-293000:8000,293000:16000,293000-349000:8000,349000:18000,349000-203000:6000,203000:8000,203000-114000:5000,114000:18000,114000-98000:9000,98000:6000,98000-30000:5000,30000:10000,30000-107000:10000,107000:20000,107000-97000:8000,97000:9000,97000-344000:5000,344000:13000,344000-232000:9000,232000:20000,232000-104000:6000,104000:11000,104000-289000:6000,289000:13000,289000-85000:9000,85000:8000,85000-415000:5000,415000:10000,415000-281000:5000,281000:20000,281000-225000:10000,225000:7000,225000-371000:10000,371000:11000,371000-207000:6000,207000:5000,207000-123000:9000,123000:2000,123000-502000:5000,502000:16000,502000-502000:10000,502000:9000,502000-255000:10000,255000:11000,255000-259000:9000,259000:20000,259000-373000:6000,373000:4000,373000-29000:5000,29000:5000,29000-28000:9000,28000:7000,28000-26000:5000,26000:14000,26000-26000:8000,26000:8000,26000-21000:6000,21000:18000,21000-14000:7000,14000:8000,14000-77000:5000,77000:7000,77000-18000:6000,18000:10000,18000-37000:6000,37000:10000,37000-26000:10000,26000:6000,26000-34000:8000,34000:6000,34000-53000:8000,53000:18000,53000-32000:5000,32000:8000,32000-27000:7000,27000:8000,27000-13000:9000,13000:10000,13000-11000:7000,11000:6000,11000-26000:10000,26000:5000,26000-23000:7000,23000:18000,23000-10000:5000,10000:18000,10000-10000:8000,10000:13000,10000-10000:8000,10000:7000,10000-10000:10000,10000:13000,10000-10000:10000,10000:8000,10000-30000:5000,30000:5000,30000-29000:7000,29000:9000,29000-25000:7000,25000:14000,25000-18000:7000,18000:7000,18000-30000:6000,30000:7000,30000-12000:10000,12000:16000,12000-359000:5000,359000:10000,359000-342000:5000,342000:15000,342000-291000:7000,291000:5000,291000-158000:8000,158000:20000,158000-338000:9000,338000:16000,338000-122000:5000,122000:16000,122000-71000:5000,71000:8000,71000-79000:9000,79000:14000,79000-97000:6000,97000:10000,97000-120000:9000,120000:18000,120000-95000:5000,95000:16000,95000-57000:7000,57000:13000,57000-12000:8000,12000:14000,12000-91000:5000,91000:12000,91000-42000:5000,42000:15000,42000-201000:5000,201000:11000,201000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:17000,173000-21000:5000,21000:12000,21000-10000:7000,10000:7000,10000-10000:9000,10000:12000,10000-11000:8000,11000:17000,11000-11000:6000,11000:17000,11000-173000:5000,173000:9000,173000-166000:6000,166000:15000,166000-124000:5000,124000:10000,124000-41000:9000,41000:13000,41000-54000:10000,54000:18000,54000-502000:5000,502000:18000,502000-456000:5000,456000:5000,456000-318000:9000,318000:15000,318000-430000:8000,430000:6000,430000-363000:8000,363000:21000,363000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-499000:5000,499000:11000,499000-341000:5000,341000:16000,341000-252000:8000,252000:5000,252000-406000:9000,406000:19000,406000-237000:7000,237000:15000,237000-304000:5000,304000:9000,304000-298000:6000,298000:16000,298000-127000:8000,127000:13000,127000-108000:10000,108000:13000,108000-127000:6000,127000:14000,127000-388000:5000,388000:14000,388000-355000:6000,355000:9000,355000-141000:10000,141000:14000,141000-144000:8000,144000:19000,144000-128000:8000,128000:7000,128000-212000:5000,212000:12000,212000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-132000:5000,132000:10000,132000-51000:5000,51000:2000,51000-10000:5000,10000:14000,10000-10000:10000,10000:16000,10000-9000:6000,9000:5000,9000-10000:8000,10000:19000,10000-10000:10000,10000:7000,10000-502000:5000,502000:16000,502000-476000:5000,476000:11000,476000-294000:5000,294000:16000,294000-302000:10000,302000:7000,302000-274000:5000,274000:20000,274000-448000:5000,448000:9000,448000-173000:7000,173000:14000,173000-234000:7000,234000:20000,234000-390000:6000,390000:7000,390000-411000:9000,411000:16000,411000-316000:5000,316000:9000,316000-203000:6000,203000:19000,203000-233000:7000,233000:5000,233000-302000:8000,302000:8000,302000-227000:6000,227000:6000,227000-89000:10000,89000:11000,89000-379000:5000,379000:12000,379000-287000:5000,287000:10000,287000-276000:8000,276000:6000,276000-94000:7000,94000:18000,94000-374000:7000,374000:11000,374000-248000:7000,248000:4000,248000-87000:5000,87000:11000,87000-45000:7000,45000:15000,45000-77000:10000,77000:8000,77000-18000:7000,18000:15000,18000-81000:5000,81000:17000,81000-371000:5000,371000:20000,371000-365000:9000,365000:12000,365000-177000:6000,177000:13000,177000-167000:7000,167000:7000,167000-201000:6000,201000:15000,201000-10000:5000,10000:17000,10000-10000:5000,10000:15000,10000-10000:10000,10000:6000,10000-10000:9000,10000:16000,10000-9000:5000,9000:12000,9000-488000:5000,488000:12000,488000-223000:6000,223000:10000,223000-419000:6000,419000:9000,419000-247000:6000,247000:15000,247000-252000:7000,252000:15000,252000-191000:7000,191000:2000,191000-471000:5000,471000:16000,471000-252000:6000,252000:17000,252000-470000:9000,470000:12000,470000-347000:7000,347000:20000,347000-457000:7000,457000:1000,457000-472000:5000,472000:12000,472000-268000:8000,268000:15000,268000-464000:8000,464000:14000,464000-196000:5000,196000:5000,196000-259000:7000,259000:21000,259000-494000:5000,494000:19000,494000-313000:9000,313000:16000,313000-274000:10000,274000:10000,274000-436000:6000,436000:25000/100000:100000,100000-467000:5000,467000:8000,467000-263000:7000,263000:16000,263000-298000:10000,298000:16000,298000-453000:5000,453000:6000,453000-182000:6000,182000:12000,182000-317000:8000,317000:1000,317000-502000:5000,502000:7000,502000-312000:7000,312000:14000,312000-247000:6000,247000:9000,247000-353000:7000,353000:6000,353000-459000:7000,459000:11000,459000-336000:6000,336000:5000,336000-235000:7000,235000:3000,235000-479000:5000,479000:16000,479000-312000:9000,312000:7000,312000-232000:7000,232000:18000,232000-462000:9000,462000:16000,462000-257000:8000,257000:5000,257000-413000:5000,413000:8000,413000-199000:7000,199000:20000,199000-180000:8000,180000:20000,180000-264000:5000,264000:5000,264000-410000:6000,410000:16000,410000-497000:5000,497000:7000,497000-249000:5000,249000:8000,249000-197000:8000,197000:20000,197000-367000:7000,367000:5000,367000-393000:8000,393000:12000,393000-277000:5000,277000:10000,277000-502000:5000,502000:7000,502000-398000:6000,398000:8000,398000-339000:6000,339000:17000,339000-262000:6000,262000:20000,262000-412000:7000,412000:18000,412000-10000:5000,10000:11000,10000-9000:5000,9000:19000,9000-9000:9000,9000:18000,9000-10000:5000,10000:6000,10000-10000:7000,10000:15000,10000-140000:5000,140000:18000,140000-103000:10000,103000:13000,103000-138000:6000,138000:8000,138000-80000:9000,80000:18000,80000-105000:5000,105000:8000,105000-317000:5000,317000:12000,317000-84000:5000,84000:12000,84000-248000:9000,248000:17000,248000-248000:7000,248000:18000,248000-26000:10000,26000:5000,26000-10000:5000,10000:15000,10000-9000:5000,9000:15000,9000-10000:9000,10000:15000,10000-10000:7000,10000:7000,10000-10000:8000,10000:14000,10000-10000:5000,10000:7000,10000-9000:9000,9000:10000,9000-9000:7000,9000:18000,9000-10000:6000,10000:14000,10000-10000:8000,10000:16000,10000-415000:5000,415000:5000,415000-166000:8000,166000:15000,166000-322000:10000,322000:19000,322000-304000:8000,304000:16000,304000-256000:10000,256000:4000,256000-348000:5000,348000:20000,348000-271000:6000,271000:11000,271000-311000:9000,311000:8000,311000-81000:7000,81000:17000,81000-274000:6000,274000:11000,274000-84000:5000,84000:14000,84000-79000:9000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:19000,13000-434000:5000,434000:17000,434000-171000:10000,171000:16000,171000-360000:10000,360000:19000,360000-295000:10000,295000:13000,295000-150000:5000,150000:18000,150000-36000:7000,36000:13000,36000-85000:7000,85000:20000,85000-49000:8000,49000:22000,49000-398000:5000,398000:14000,398000-150000:9000,150000:13000,150000-98000:8000,98000:20000,98000-111000:6000,111000:5000,111000-347000:8000,347000:12000,347000-168000:5000,168000:18000,168000-121000:6000,121000:6000,121000-144000:5000,144000:8000,144000-107000:9000,107000:5000,107000-156000:6000,156000:9000,156000-146000:10000,146000:13000,146000-97000:5000,97000:15000,97000-70000:5000,70000:8000,70000-11000:5000,11000:9000,11000-94000:9000,94000:6000,94000-32000:7000,32000:5000,32000-68000:5000,68000:21000,68000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:8000,10000:7000,10000-10000:7000,10000:17000,10000-10000:6000,10000:19000,10000-483000:5000,483000:19000,483000-475000:8000,475000:13000,475000-270000:10000,270000:20000,270000-449000:10000,449000:15000,449000-435000:5000,435000:5000,435000-323000:8000,323000:18000,323000-192000:10000,192000:19000,192000-349000:7000,349000:17000,349000-157000:9000,157000:2000,157000-480000:5000,480000:19000,480000-413000:9000,413000:7000,413000-206000:8000,206000:17000,206000-431000:9000,431000:26000,431000-502000:5000,502000:14000,502000-266000:8000,266000:9000,266000-345000:5000,345000:18000,345000-400000:7000,400000:19000,400000-484000:8000,484000:7000,484000-482000:5000,482000:18000,482000-309000:8000,309000:20000,309000-325000:9000,325000:9000,325000-209000:8000,209000:10000,209000-186000:9000,186000:4000,186000-153000:5000,153000:18000,153000-145000:9000,145000:15000,145000-66000:8000,66000:11000,66000-77000:9000,77000:5000,77000-141000:7000,141000:13000,141000-390000:5000,390000:11000,390000-330000:6000,330000:10000,330000-164000:10000,164000:8000,164000-149000:8000,149000:12000,149000-189000:6000,189000:24000,189000-417000:5000,417000:9000,417000-203000:8000,203000:15000,203000-274000:5000,274000:19000,274000-333000:8000,333000:7000,333000-195000:6000,195000:18000,195000-311000:5000,311000:8000,311000-102000:7000,102000:10000,102000-195000:8000,195000:20000,195000-42000:9000,42000:10000,42000-79000:7000,79000:16000,79000-491000:5000,491000:14000,491000-297000:5000,297000:17000,297000-320000:7000,320000:7000,320000-216000:9000,216000:8000,216000-436000:6000,436000:5000,436000-315000:6000,315000:11000,315000-339000:5000,339000:13000,339000-77000:9000,77000:18000,77000-261000:9000,261000:20000,261000-83000:6000,83000:12000,83000-200000:7000,200000:1000,200000-10000:5000,10000:5000,10000-9000:10000,9000:19000,9000-9000:7000,9000:19000,9000-9000:10000,9000:14000,9000-9000:6000,9000:5000,9000-502000:5000,502000:15000,502000-303000:6000,303000:13000,303000-309000:5000,309000:12000,309000-330000:5000,330000:8000,330000-363000:8000,363000:5000,363000-301000:5000,301000:13000,301000-13000:5000,13000:19000,13000-12000:10000,12000:17000,12000-10000:7000,10000:17000,10000-13000:7000,13000:18000,13000-208000:5000,208000:20000,208000-184000:8000,184000:17000,184000-86000:9000,86000:11000,86000-181000:10000,181000:20000,181000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-300000:5000,300000:6000,300000-277000:8000,277000:16000,277000-56000:7000,56000:19000,56000-247000:6000,247000:18000,247000-254000:6000,254000:9000,254000-502000:5000,502000:15000,502000-422000:9000,422000:19000,422000-458000:7000,458000:19000,458000-346000:5000,346000:21000,346000-10000:5000,10000:9000,10000-10000:9000,10000:13000,10000-10000:6000,10000:14000,10000-9000:9000,9000:15000,9000-9000:8000,9000:12000,9000-64000:5000,64000:9000,64000-46000:10000,46000:16000,46000-28000:9000,28000:12000,28000-45000:7000,45000:7000,45000-11000:9000,11000:16000,11000-196000:5000,196000:16000,196000-170000:10000,170000:11000,170000-82000:5000,82000:19000,82000-168000:6000,168000:7000,168000-117000:9000,117000:12000,117000-133000:5000,133000:9000,133000-93000:5000,93000:7000,93000-95000:5000,95000:11000,95000-43000:10000,43000:13000,43000-21000:8000,21000:17000,21000-12000:7000,12000:3000,12000-425000:5000,425000:12000,425000-333000:8000,333000:7000,333000-389000:7000,389000:12000,389000-293000:5000,293000:16000,293000-204000:5000,204000:17000,204000-213000:5000,213000:1000,213000-141000:5000,141000:12000,141000-81000:5000,81000:7000,81000-110000:5000,110000:12000,110000-96000:9000,96000:19000,96000-10000:9000,10000:5000,10000-43000:10000,43000:2000,43000-502000:5000,502000:8000,502000-299000:7000,299000:16000,299000-448000:9000,448000:11000,448000-412000:6000,412000:15000,412000-250000:5000,250000:9000,250000-318000:6000,318000:3000,318000-24000:5000,24000:13000,24000-19000:10000,19000:16000,19000-15000:7000,15000:18000,15000-21000:9000,21000:13000,21000-22000:6000,22000:3000,22000-41000:5000,41000:6000,41000-31000:8000,31000:17000,31000-32000:6000,32000:17000,32000-27000:5000,27000:14000,27000-26000:6000,26000:16000,26000-40000:5000,40000:8000,40000-32000:7000,32000:9000,32000-33000:7000,33000:16000,33000-37000:5000,37000:12000,37000-22000:10000,22000:21000,22000-18000:5000,18000:11000,18000-15000:5000,15000:20000,15000-16000:7000,16000:19000,16000-12000:6000,12000:27000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-074820.571570 > /homes/inho/capybara-data/20240307-074820.571570.client
================ TEST COMPLETE =================

[RESULT]20240307-074820.571570, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4100205)
KILLED CAPYBARA PROCESSES
PARSING 20240307-074820.571570 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-074820.571570            && sh ms_avg_99p_lat.sh 20240307-074820.571570            && sh ms_total_even_odd_numreq.sh 20240307-074820.571570            && sh latency_cdf.sh 20240307-074820.571570
ERROR: cat: /homes/inho/capybara-data/20240307-074820.571570.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-074820.571570.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-074820.571570.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-074820.571570.latency_trace: No such file or directory



PARSING 20240307-074820.571570 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-074820.571570
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-074820.571570, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075134.975957
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4107948 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-45000:5000,45000:12000,45000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-16000:7000,16000:9000,16000-33000:9000,33000:5000,33000-23000:9000,23000:16000,23000-10000:5000,10000:6000,10000-10000:5000,10000:11000,10000-9000:5000,9000:18000,9000-9000:5000,9000:9000,9000-9000:7000,9000:9000,9000-9000:6000,9000:14000,9000-33000:5000,33000:9000,33000-14000:5000,14000:7000,14000-19000:10000,19000:12000,19000-21000:9000,21000:12000,21000-26000:6000,26000:12000,26000-26000:6000,26000:7000,26000-99000:5000,99000:20000,99000-57000:9000,57000:19000,57000-66000:8000,66000:20000,66000-48000:9000,48000:10000,48000-15000:5000,15000:19000,15000-14000:6000,14000:20000,14000-13000:8000,13000:6000,13000-11000:6000,11000:6000,11000-11000:6000,11000:5000,11000-15000:10000,15000:3000,15000-10000:5000,10000:10000,10000-10000:10000,10000:16000,10000-10000:10000,10000:5000,10000-9000:10000,9000:13000,9000-10000:7000,10000:14000,10000-502000:5000,502000:8000,502000-390000:5000,390000:19000,390000-240000:7000,240000:8000,240000-483000:6000,483000:9000,483000-494000:5000,494000:19000,494000-381000:7000,381000:2000,381000-372000:5000,372000:9000,372000-88000:6000,88000:8000,88000-332000:8000,332000:14000,332000-372000:6000,372000:10000,372000-309000:5000,309000:9000,309000-276000:6000,276000:14000,276000-195000:5000,195000:18000,195000-165000:7000,165000:5000,165000-175000:5000,175000:5000,175000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:10000,29000-502000:5000,502000:19000,502000-365000:10000,365000:19000,365000-469000:9000,469000:7000,469000-202000:7000,202000:10000,202000-272000:10000,272000:4000,272000-502000:5000,502000:9000,502000-263000:9000,263000:16000,263000-277000:9000,277000:16000,277000-482000:5000,482000:5000,482000-318000:10000,318000:16000,318000-97000:5000,97000:17000,97000-39000:9000,39000:18000,39000-90000:9000,90000:16000,90000-89000:6000,89000:9000,89000-68000:8000,68000:3000,68000-164000:5000,164000:11000,164000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:9000,82000-129000:8000,129000:17000,129000-428000:5000,428000:20000,428000-300000:10000,300000:20000,300000-345000:7000,345000:13000,345000-372000:8000,372000:8000,372000-359000:8000,359000:1000,359000-78000:5000,78000:19000,78000-36000:10000,36000:17000,36000-38000:5000,38000:9000,38000-17000:6000,17000:20000,17000-44000:5000,44000:4000,44000-362000:5000,362000:7000,362000-207000:8000,207000:16000,207000-293000:8000,293000:16000,293000-349000:8000,349000:18000,349000-203000:6000,203000:8000,203000-114000:5000,114000:18000,114000-98000:9000,98000:6000,98000-30000:5000,30000:10000,30000-107000:10000,107000:20000,107000-97000:8000,97000:9000,97000-344000:5000,344000:13000,344000-232000:9000,232000:20000,232000-104000:6000,104000:11000,104000-289000:6000,289000:13000,289000-85000:9000,85000:8000,85000-415000:5000,415000:10000,415000-281000:5000,281000:20000,281000-225000:10000,225000:7000,225000-371000:10000,371000:11000,371000-207000:6000,207000:5000,207000-123000:9000,123000:2000,123000-502000:5000,502000:16000,502000-502000:10000,502000:9000,502000-255000:10000,255000:11000,255000-259000:9000,259000:20000,259000-373000:6000,373000:4000,373000-29000:5000,29000:5000,29000-28000:9000,28000:7000,28000-26000:5000,26000:14000,26000-26000:8000,26000:8000,26000-21000:6000,21000:18000,21000-14000:7000,14000:8000,14000-77000:5000,77000:7000,77000-18000:6000,18000:10000,18000-37000:6000,37000:10000,37000-26000:10000,26000:6000,26000-34000:8000,34000:6000,34000-53000:8000,53000:18000,53000-32000:5000,32000:8000,32000-27000:7000,27000:8000,27000-13000:9000,13000:10000,13000-11000:7000,11000:6000,11000-26000:10000,26000:5000,26000-23000:7000,23000:18000,23000-10000:5000,10000:18000,10000-10000:8000,10000:13000,10000-10000:8000,10000:7000,10000-10000:10000,10000:13000,10000-10000:10000,10000:8000,10000-30000:5000,30000:5000,30000-29000:7000,29000:9000,29000-25000:7000,25000:14000,25000-18000:7000,18000:7000,18000-30000:6000,30000:7000,30000-12000:10000,12000:16000,12000-359000:5000,359000:10000,359000-342000:5000,342000:15000,342000-291000:7000,291000:5000,291000-158000:8000,158000:20000,158000-338000:9000,338000:16000,338000-122000:5000,122000:16000,122000-71000:5000,71000:8000,71000-79000:9000,79000:14000,79000-97000:6000,97000:10000,97000-120000:9000,120000:18000,120000-95000:5000,95000:16000,95000-57000:7000,57000:13000,57000-12000:8000,12000:14000,12000-91000:5000,91000:12000,91000-42000:5000,42000:15000,42000-201000:5000,201000:11000,201000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:17000,173000-21000:5000,21000:12000,21000-10000:7000,10000:7000,10000-10000:9000,10000:12000,10000-11000:8000,11000:17000,11000-11000:6000,11000:17000,11000-173000:5000,173000:9000,173000-166000:6000,166000:15000,166000-124000:5000,124000:10000,124000-41000:9000,41000:13000,41000-54000:10000,54000:18000,54000-502000:5000,502000:18000,502000-456000:5000,456000:5000,456000-318000:9000,318000:15000,318000-430000:8000,430000:6000,430000-363000:8000,363000:21000,363000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-499000:5000,499000:11000,499000-341000:5000,341000:16000,341000-252000:8000,252000:5000,252000-406000:9000,406000:19000,406000-237000:7000,237000:15000,237000-304000:5000,304000:9000,304000-298000:6000,298000:16000,298000-127000:8000,127000:13000,127000-108000:10000,108000:13000,108000-127000:6000,127000:14000,127000-388000:5000,388000:14000,388000-355000:6000,355000:9000,355000-141000:10000,141000:14000,141000-144000:8000,144000:19000,144000-128000:8000,128000:7000,128000-212000:5000,212000:12000,212000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-132000:5000,132000:10000,132000-51000:5000,51000:2000,51000-10000:5000,10000:14000,10000-10000:10000,10000:16000,10000-9000:6000,9000:5000,9000-10000:8000,10000:19000,10000-10000:10000,10000:7000,10000-502000:5000,502000:16000,502000-476000:5000,476000:11000,476000-294000:5000,294000:16000,294000-302000:10000,302000:7000,302000-274000:5000,274000:20000,274000-448000:5000,448000:9000,448000-173000:7000,173000:14000,173000-234000:7000,234000:20000,234000-390000:6000,390000:7000,390000-411000:9000,411000:16000,411000-316000:5000,316000:9000,316000-203000:6000,203000:19000,203000-233000:7000,233000:5000,233000-302000:8000,302000:8000,302000-227000:6000,227000:6000,227000-89000:10000,89000:11000,89000-379000:5000,379000:12000,379000-287000:5000,287000:10000,287000-276000:8000,276000:6000,276000-94000:7000,94000:18000,94000-374000:7000,374000:11000,374000-248000:7000,248000:4000,248000-87000:5000,87000:11000,87000-45000:7000,45000:15000,45000-77000:10000,77000:8000,77000-18000:7000,18000:15000,18000-81000:5000,81000:17000,81000-371000:5000,371000:20000,371000-365000:9000,365000:12000,365000-177000:6000,177000:13000,177000-167000:7000,167000:7000,167000-201000:6000,201000:15000,201000-10000:5000,10000:17000,10000-10000:5000,10000:15000,10000-10000:10000,10000:6000,10000-10000:9000,10000:16000,10000-9000:5000,9000:12000,9000-488000:5000,488000:12000,488000-223000:6000,223000:10000,223000-419000:6000,419000:9000,419000-247000:6000,247000:15000,247000-252000:7000,252000:15000,252000-191000:7000,191000:2000,191000-471000:5000,471000:16000,471000-252000:6000,252000:17000,252000-470000:9000,470000:12000,470000-347000:7000,347000:20000,347000-457000:7000,457000:1000,457000-472000:5000,472000:12000,472000-268000:8000,268000:15000,268000-464000:8000,464000:14000,464000-196000:5000,196000:5000,196000-259000:7000,259000:21000,259000-494000:5000,494000:19000,494000-313000:9000,313000:16000,313000-274000:10000,274000:10000,274000-436000:6000,436000:25000/100000:100000,100000-467000:5000,467000:8000,467000-263000:7000,263000:16000,263000-298000:10000,298000:16000,298000-453000:5000,453000:6000,453000-182000:6000,182000:12000,182000-317000:8000,317000:1000,317000-502000:5000,502000:7000,502000-312000:7000,312000:14000,312000-247000:6000,247000:9000,247000-353000:7000,353000:6000,353000-459000:7000,459000:11000,459000-336000:6000,336000:5000,336000-235000:7000,235000:3000,235000-479000:5000,479000:16000,479000-312000:9000,312000:7000,312000-232000:7000,232000:18000,232000-462000:9000,462000:16000,462000-257000:8000,257000:5000,257000-413000:5000,413000:8000,413000-199000:7000,199000:20000,199000-180000:8000,180000:20000,180000-264000:5000,264000:5000,264000-410000:6000,410000:16000,410000-497000:5000,497000:7000,497000-249000:5000,249000:8000,249000-197000:8000,197000:20000,197000-367000:7000,367000:5000,367000-393000:8000,393000:12000,393000-277000:5000,277000:10000,277000-502000:5000,502000:7000,502000-398000:6000,398000:8000,398000-339000:6000,339000:17000,339000-262000:6000,262000:20000,262000-412000:7000,412000:18000,412000-10000:5000,10000:11000,10000-9000:5000,9000:19000,9000-9000:9000,9000:18000,9000-10000:5000,10000:6000,10000-10000:7000,10000:15000,10000-140000:5000,140000:18000,140000-103000:10000,103000:13000,103000-138000:6000,138000:8000,138000-80000:9000,80000:18000,80000-105000:5000,105000:8000,105000-317000:5000,317000:12000,317000-84000:5000,84000:12000,84000-248000:9000,248000:17000,248000-248000:7000,248000:18000,248000-26000:10000,26000:5000,26000-10000:5000,10000:15000,10000-9000:5000,9000:15000,9000-10000:9000,10000:15000,10000-10000:7000,10000:7000,10000-10000:8000,10000:14000,10000-10000:5000,10000:7000,10000-9000:9000,9000:10000,9000-9000:7000,9000:18000,9000-10000:6000,10000:14000,10000-10000:8000,10000:16000,10000-415000:5000,415000:5000,415000-166000:8000,166000:15000,166000-322000:10000,322000:19000,322000-304000:8000,304000:16000,304000-256000:10000,256000:4000,256000-348000:5000,348000:20000,348000-271000:6000,271000:11000,271000-311000:9000,311000:8000,311000-81000:7000,81000:17000,81000-274000:6000,274000:11000,274000-84000:5000,84000:14000,84000-79000:9000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:19000,13000-434000:5000,434000:17000,434000-171000:10000,171000:16000,171000-360000:10000,360000:19000,360000-295000:10000,295000:13000,295000-150000:5000,150000:18000,150000-36000:7000,36000:13000,36000-85000:7000,85000:20000,85000-49000:8000,49000:22000,49000-398000:5000,398000:14000,398000-150000:9000,150000:13000,150000-98000:8000,98000:20000,98000-111000:6000,111000:5000,111000-347000:8000,347000:12000,347000-168000:5000,168000:18000,168000-121000:6000,121000:6000,121000-144000:5000,144000:8000,144000-107000:9000,107000:5000,107000-156000:6000,156000:9000,156000-146000:10000,146000:13000,146000-97000:5000,97000:15000,97000-70000:5000,70000:8000,70000-11000:5000,11000:9000,11000-94000:9000,94000:6000,94000-32000:7000,32000:5000,32000-68000:5000,68000:21000,68000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:8000,10000:7000,10000-10000:7000,10000:17000,10000-10000:6000,10000:19000,10000-483000:5000,483000:19000,483000-475000:8000,475000:13000,475000-270000:10000,270000:20000,270000-449000:10000,449000:15000,449000-435000:5000,435000:5000,435000-323000:8000,323000:18000,323000-192000:10000,192000:19000,192000-349000:7000,349000:17000,349000-157000:9000,157000:2000,157000-480000:5000,480000:19000,480000-413000:9000,413000:7000,413000-206000:8000,206000:17000,206000-431000:9000,431000:26000,431000-502000:5000,502000:14000,502000-266000:8000,266000:9000,266000-345000:5000,345000:18000,345000-400000:7000,400000:19000,400000-484000:8000,484000:7000,484000-482000:5000,482000:18000,482000-309000:8000,309000:20000,309000-325000:9000,325000:9000,325000-209000:8000,209000:10000,209000-186000:9000,186000:4000,186000-153000:5000,153000:18000,153000-145000:9000,145000:15000,145000-66000:8000,66000:11000,66000-77000:9000,77000:5000,77000-141000:7000,141000:13000,141000-390000:5000,390000:11000,390000-330000:6000,330000:10000,330000-164000:10000,164000:8000,164000-149000:8000,149000:12000,149000-189000:6000,189000:24000,189000-417000:5000,417000:9000,417000-203000:8000,203000:15000,203000-274000:5000,274000:19000,274000-333000:8000,333000:7000,333000-195000:6000,195000:18000,195000-311000:5000,311000:8000,311000-102000:7000,102000:10000,102000-195000:8000,195000:20000,195000-42000:9000,42000:10000,42000-79000:7000,79000:16000,79000-491000:5000,491000:14000,491000-297000:5000,297000:17000,297000-320000:7000,320000:7000,320000-216000:9000,216000:8000,216000-436000:6000,436000:5000,436000-315000:6000,315000:11000,315000-339000:5000,339000:13000,339000-77000:9000,77000:18000,77000-261000:9000,261000:20000,261000-83000:6000,83000:12000,83000-200000:7000,200000:1000,200000-10000:5000,10000:5000,10000-9000:10000,9000:19000,9000-9000:7000,9000:19000,9000-9000:10000,9000:14000,9000-9000:6000,9000:5000,9000-502000:5000,502000:15000,502000-303000:6000,303000:13000,303000-309000:5000,309000:12000,309000-330000:5000,330000:8000,330000-363000:8000,363000:5000,363000-301000:5000,301000:13000,301000-13000:5000,13000:19000,13000-12000:10000,12000:17000,12000-10000:7000,10000:17000,10000-13000:7000,13000:18000,13000-208000:5000,208000:20000,208000-184000:8000,184000:17000,184000-86000:9000,86000:11000,86000-181000:10000,181000:20000,181000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-300000:5000,300000:6000,300000-277000:8000,277000:16000,277000-56000:7000,56000:19000,56000-247000:6000,247000:18000,247000-254000:6000,254000:9000,254000-502000:5000,502000:15000,502000-422000:9000,422000:19000,422000-458000:7000,458000:19000,458000-346000:5000,346000:21000,346000-10000:5000,10000:9000,10000-10000:9000,10000:13000,10000-10000:6000,10000:14000,10000-9000:9000,9000:15000,9000-9000:8000,9000:12000,9000-64000:5000,64000:9000,64000-46000:10000,46000:16000,46000-28000:9000,28000:12000,28000-45000:7000,45000:7000,45000-11000:9000,11000:16000,11000-196000:5000,196000:16000,196000-170000:10000,170000:11000,170000-82000:5000,82000:19000,82000-168000:6000,168000:7000,168000-117000:9000,117000:12000,117000-133000:5000,133000:9000,133000-93000:5000,93000:7000,93000-95000:5000,95000:11000,95000-43000:10000,43000:13000,43000-21000:8000,21000:17000,21000-12000:7000,12000:3000,12000-425000:5000,425000:12000,425000-333000:8000,333000:7000,333000-389000:7000,389000:12000,389000-293000:5000,293000:16000,293000-204000:5000,204000:17000,204000-213000:5000,213000:1000,213000-141000:5000,141000:12000,141000-81000:5000,81000:7000,81000-110000:5000,110000:12000,110000-96000:9000,96000:19000,96000-10000:9000,10000:5000,10000-43000:10000,43000:2000,43000-502000:5000,502000:8000,502000-299000:7000,299000:16000,299000-448000:9000,448000:11000,448000-412000:6000,412000:15000,412000-250000:5000,250000:9000,250000-318000:6000,318000:3000,318000-24000:5000,24000:13000,24000-19000:10000,19000:16000,19000-15000:7000,15000:18000,15000-21000:9000,21000:13000,21000-22000:6000,22000:3000,22000-41000:5000,41000:6000,41000-31000:8000,31000:17000,31000-32000:6000,32000:17000,32000-27000:5000,27000:14000,27000-26000:6000,26000:16000,26000-40000:5000,40000:8000,40000-32000:7000,32000:9000,32000-33000:7000,33000:16000,33000-37000:5000,37000:12000,37000-22000:10000,22000:21000,22000-18000:5000,18000:11000,18000-15000:5000,15000:20000,15000-16000:7000,16000:19000,16000-12000:6000,12000:27000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-075134.975957 > /homes/inho/capybara-data/20240307-075134.975957.client
================ TEST COMPLETE =================

[RESULT]20240307-075134.975957, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4107720)
KILLED CAPYBARA PROCESSES
PARSING 20240307-075134.975957 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-075134.975957            && sh ms_avg_99p_lat.sh 20240307-075134.975957            && sh ms_total_even_odd_numreq.sh 20240307-075134.975957            && sh latency_cdf.sh 20240307-075134.975957
ERROR: cat: /homes/inho/capybara-data/20240307-075134.975957.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-075134.975957.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075134.975957.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075134.975957.latency_trace: No such file or directory



PARSING 20240307-075134.975957 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-075134.975957
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-075134.975957, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075258.979529
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4109519 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-45000:5000,45000:12000,45000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-16000:7000,16000:9000,16000-33000:9000,33000:5000,33000-23000:9000,23000:16000,23000-10000:5000,10000:6000,10000-10000:5000,10000:11000,10000-9000:5000,9000:18000,9000-9000:5000,9000:9000,9000-9000:7000,9000:9000,9000-9000:6000,9000:14000,9000-33000:5000,33000:9000,33000-14000:5000,14000:7000,14000-19000:10000,19000:12000,19000-21000:9000,21000:12000,21000-26000:6000,26000:12000,26000-26000:6000,26000:7000,26000-99000:5000,99000:20000,99000-57000:9000,57000:19000,57000-66000:8000,66000:20000,66000-48000:9000,48000:10000,48000-15000:5000,15000:19000,15000-14000:6000,14000:20000,14000-13000:8000,13000:6000,13000-11000:6000,11000:6000,11000-11000:6000,11000:5000,11000-15000:10000,15000:3000,15000-10000:5000,10000:10000,10000-10000:10000,10000:16000,10000-10000:10000,10000:5000,10000-9000:10000,9000:13000,9000-10000:7000,10000:14000,10000-502000:5000,502000:8000,502000-390000:5000,390000:19000,390000-240000:7000,240000:8000,240000-483000:6000,483000:9000,483000-494000:5000,494000:19000,494000-381000:7000,381000:2000,381000-372000:5000,372000:9000,372000-88000:6000,88000:8000,88000-332000:8000,332000:14000,332000-372000:6000,372000:10000,372000-309000:5000,309000:9000,309000-276000:6000,276000:14000,276000-195000:5000,195000:18000,195000-165000:7000,165000:5000,165000-175000:5000,175000:5000,175000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:10000,29000-502000:5000,502000:19000,502000-365000:10000,365000:19000,365000-469000:9000,469000:7000,469000-202000:7000,202000:10000,202000-272000:10000,272000:4000,272000-502000:5000,502000:9000,502000-263000:9000,263000:16000,263000-277000:9000,277000:16000,277000-482000:5000,482000:5000,482000-318000:10000,318000:16000,318000-97000:5000,97000:17000,97000-39000:9000,39000:18000,39000-90000:9000,90000:16000,90000-89000:6000,89000:9000,89000-68000:8000,68000:3000,68000-164000:5000,164000:11000,164000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:9000,82000-129000:8000,129000:17000,129000-428000:5000,428000:20000,428000-300000:10000,300000:20000,300000-345000:7000,345000:13000,345000-372000:8000,372000:8000,372000-359000:8000,359000:1000,359000-78000:5000,78000:19000,78000-36000:10000,36000:17000,36000-38000:5000,38000:9000,38000-17000:6000,17000:20000,17000-44000:5000,44000:4000,44000-362000:5000,362000:7000,362000-207000:8000,207000:16000,207000-293000:8000,293000:16000,293000-349000:8000,349000:18000,349000-203000:6000,203000:8000,203000-114000:5000,114000:18000,114000-98000:9000,98000:6000,98000-30000:5000,30000:10000,30000-107000:10000,107000:20000,107000-97000:8000,97000:9000,97000-344000:5000,344000:13000,344000-232000:9000,232000:20000,232000-104000:6000,104000:11000,104000-289000:6000,289000:13000,289000-85000:9000,85000:8000,85000-415000:5000,415000:10000,415000-281000:5000,281000:20000,281000-225000:10000,225000:7000,225000-371000:10000,371000:11000,371000-207000:6000,207000:5000,207000-123000:9000,123000:2000,123000-502000:5000,502000:16000,502000-502000:10000,502000:9000,502000-255000:10000,255000:11000,255000-259000:9000,259000:20000,259000-373000:6000,373000:4000,373000-29000:5000,29000:5000,29000-28000:9000,28000:7000,28000-26000:5000,26000:14000,26000-26000:8000,26000:8000,26000-21000:6000,21000:18000,21000-14000:7000,14000:8000,14000-77000:5000,77000:7000,77000-18000:6000,18000:10000,18000-37000:6000,37000:10000,37000-26000:10000,26000:6000,26000-34000:8000,34000:6000,34000-53000:8000,53000:18000,53000-32000:5000,32000:8000,32000-27000:7000,27000:8000,27000-13000:9000,13000:10000,13000-11000:7000,11000:6000,11000-26000:10000,26000:5000,26000-23000:7000,23000:18000,23000-10000:5000,10000:18000,10000-10000:8000,10000:13000,10000-10000:8000,10000:7000,10000-10000:10000,10000:13000,10000-10000:10000,10000:8000,10000-30000:5000,30000:5000,30000-29000:7000,29000:9000,29000-25000:7000,25000:14000,25000-18000:7000,18000:7000,18000-30000:6000,30000:7000,30000-12000:10000,12000:16000,12000-359000:5000,359000:10000,359000-342000:5000,342000:15000,342000-291000:7000,291000:5000,291000-158000:8000,158000:20000,158000-338000:9000,338000:16000,338000-122000:5000,122000:16000,122000-71000:5000,71000:8000,71000-79000:9000,79000:14000,79000-97000:6000,97000:10000,97000-120000:9000,120000:18000,120000-95000:5000,95000:16000,95000-57000:7000,57000:13000,57000-12000:8000,12000:14000,12000-91000:5000,91000:12000,91000-42000:5000,42000:15000,42000-201000:5000,201000:11000,201000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:17000,173000-21000:5000,21000:12000,21000-10000:7000,10000:7000,10000-10000:9000,10000:12000,10000-11000:8000,11000:17000,11000-11000:6000,11000:17000,11000-173000:5000,173000:9000,173000-166000:6000,166000:15000,166000-124000:5000,124000:10000,124000-41000:9000,41000:13000,41000-54000:10000,54000:18000,54000-502000:5000,502000:18000,502000-456000:5000,456000:5000,456000-318000:9000,318000:15000,318000-430000:8000,430000:6000,430000-363000:8000,363000:21000,363000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-499000:5000,499000:11000,499000-341000:5000,341000:16000,341000-252000:8000,252000:5000,252000-406000:9000,406000:19000,406000-237000:7000,237000:15000,237000-304000:5000,304000:9000,304000-298000:6000,298000:16000,298000-127000:8000,127000:13000,127000-108000:10000,108000:13000,108000-127000:6000,127000:14000,127000-388000:5000,388000:14000,388000-355000:6000,355000:9000,355000-141000:10000,141000:14000,141000-144000:8000,144000:19000,144000-128000:8000,128000:7000,128000-212000:5000,212000:12000,212000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-132000:5000,132000:10000,132000-51000:5000,51000:2000,51000-10000:5000,10000:14000,10000-10000:10000,10000:16000,10000-9000:6000,9000:5000,9000-10000:8000,10000:19000,10000-10000:10000,10000:7000,10000-502000:5000,502000:16000,502000-476000:5000,476000:11000,476000-294000:5000,294000:16000,294000-302000:10000,302000:7000,302000-274000:5000,274000:20000,274000-448000:5000,448000:9000,448000-173000:7000,173000:14000,173000-234000:7000,234000:20000,234000-390000:6000,390000:7000,390000-411000:9000,411000:16000,411000-316000:5000,316000:9000,316000-203000:6000,203000:19000,203000-233000:7000,233000:5000,233000-302000:8000,302000:8000,302000-227000:6000,227000:6000,227000-89000:10000,89000:11000,89000-379000:5000,379000:12000,379000-287000:5000,287000:10000,287000-276000:8000,276000:6000,276000-94000:7000,94000:18000,94000-374000:7000,374000:11000,374000-248000:7000,248000:4000,248000-87000:5000,87000:11000,87000-45000:7000,45000:15000,45000-77000:10000,77000:8000,77000-18000:7000,18000:15000,18000-81000:5000,81000:17000,81000-371000:5000,371000:20000,371000-365000:9000,365000:12000,365000-177000:6000,177000:13000,177000-167000:7000,167000:7000,167000-201000:6000,201000:15000,201000-10000:5000,10000:17000,10000-10000:5000,10000:15000,10000-10000:10000,10000:6000,10000-10000:9000,10000:16000,10000-9000:5000,9000:12000,9000-488000:5000,488000:12000,488000-223000:6000,223000:10000,223000-419000:6000,419000:9000,419000-247000:6000,247000:15000,247000-252000:7000,252000:15000,252000-191000:7000,191000:2000,191000-471000:5000,471000:16000,471000-252000:6000,252000:17000,252000-470000:9000,470000:12000,470000-347000:7000,347000:20000,347000-457000:7000,457000:1000,457000-472000:5000,472000:12000,472000-268000:8000,268000:15000,268000-464000:8000,464000:14000,464000-196000:5000,196000:5000,196000-259000:7000,259000:21000,259000-494000:5000,494000:19000,494000-313000:9000,313000:16000,313000-274000:10000,274000:10000,274000-436000:6000,436000:25000/100000:100000,100000-467000:5000,467000:8000,467000-263000:7000,263000:16000,263000-298000:10000,298000:16000,298000-453000:5000,453000:6000,453000-182000:6000,182000:12000,182000-317000:8000,317000:1000,317000-502000:5000,502000:7000,502000-312000:7000,312000:14000,312000-247000:6000,247000:9000,247000-353000:7000,353000:6000,353000-459000:7000,459000:11000,459000-336000:6000,336000:5000,336000-235000:7000,235000:3000,235000-479000:5000,479000:16000,479000-312000:9000,312000:7000,312000-232000:7000,232000:18000,232000-462000:9000,462000:16000,462000-257000:8000,257000:5000,257000-413000:5000,413000:8000,413000-199000:7000,199000:20000,199000-180000:8000,180000:20000,180000-264000:5000,264000:5000,264000-410000:6000,410000:16000,410000-497000:5000,497000:7000,497000-249000:5000,249000:8000,249000-197000:8000,197000:20000,197000-367000:7000,367000:5000,367000-393000:8000,393000:12000,393000-277000:5000,277000:10000,277000-502000:5000,502000:7000,502000-398000:6000,398000:8000,398000-339000:6000,339000:17000,339000-262000:6000,262000:20000,262000-412000:7000,412000:18000,412000-10000:5000,10000:11000,10000-9000:5000,9000:19000,9000-9000:9000,9000:18000,9000-10000:5000,10000:6000,10000-10000:7000,10000:15000,10000-140000:5000,140000:18000,140000-103000:10000,103000:13000,103000-138000:6000,138000:8000,138000-80000:9000,80000:18000,80000-105000:5000,105000:8000,105000-317000:5000,317000:12000,317000-84000:5000,84000:12000,84000-248000:9000,248000:17000,248000-248000:7000,248000:18000,248000-26000:10000,26000:5000,26000-10000:5000,10000:15000,10000-9000:5000,9000:15000,9000-10000:9000,10000:15000,10000-10000:7000,10000:7000,10000-10000:8000,10000:14000,10000-10000:5000,10000:7000,10000-9000:9000,9000:10000,9000-9000:7000,9000:18000,9000-10000:6000,10000:14000,10000-10000:8000,10000:16000,10000-415000:5000,415000:5000,415000-166000:8000,166000:15000,166000-322000:10000,322000:19000,322000-304000:8000,304000:16000,304000-256000:10000,256000:4000,256000-348000:5000,348000:20000,348000-271000:6000,271000:11000,271000-311000:9000,311000:8000,311000-81000:7000,81000:17000,81000-274000:6000,274000:11000,274000-84000:5000,84000:14000,84000-79000:9000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:19000,13000-434000:5000,434000:17000,434000-171000:10000,171000:16000,171000-360000:10000,360000:19000,360000-295000:10000,295000:13000,295000-150000:5000,150000:18000,150000-36000:7000,36000:13000,36000-85000:7000,85000:20000,85000-49000:8000,49000:22000,49000-398000:5000,398000:14000,398000-150000:9000,150000:13000,150000-98000:8000,98000:20000,98000-111000:6000,111000:5000,111000-347000:8000,347000:12000,347000-168000:5000,168000:18000,168000-121000:6000,121000:6000,121000-144000:5000,144000:8000,144000-107000:9000,107000:5000,107000-156000:6000,156000:9000,156000-146000:10000,146000:13000,146000-97000:5000,97000:15000,97000-70000:5000,70000:8000,70000-11000:5000,11000:9000,11000-94000:9000,94000:6000,94000-32000:7000,32000:5000,32000-68000:5000,68000:21000,68000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:8000,10000:7000,10000-10000:7000,10000:17000,10000-10000:6000,10000:19000,10000-483000:5000,483000:19000,483000-475000:8000,475000:13000,475000-270000:10000,270000:20000,270000-449000:10000,449000:15000,449000-435000:5000,435000:5000,435000-323000:8000,323000:18000,323000-192000:10000,192000:19000,192000-349000:7000,349000:17000,349000-157000:9000,157000:2000,157000-480000:5000,480000:19000,480000-413000:9000,413000:7000,413000-206000:8000,206000:17000,206000-431000:9000,431000:26000,431000-502000:5000,502000:14000,502000-266000:8000,266000:9000,266000-345000:5000,345000:18000,345000-400000:7000,400000:19000,400000-484000:8000,484000:7000,484000-482000:5000,482000:18000,482000-309000:8000,309000:20000,309000-325000:9000,325000:9000,325000-209000:8000,209000:10000,209000-186000:9000,186000:4000,186000-153000:5000,153000:18000,153000-145000:9000,145000:15000,145000-66000:8000,66000:11000,66000-77000:9000,77000:5000,77000-141000:7000,141000:13000,141000-390000:5000,390000:11000,390000-330000:6000,330000:10000,330000-164000:10000,164000:8000,164000-149000:8000,149000:12000,149000-189000:6000,189000:24000,189000-417000:5000,417000:9000,417000-203000:8000,203000:15000,203000-274000:5000,274000:19000,274000-333000:8000,333000:7000,333000-195000:6000,195000:18000,195000-311000:5000,311000:8000,311000-102000:7000,102000:10000,102000-195000:8000,195000:20000,195000-42000:9000,42000:10000,42000-79000:7000,79000:16000,79000-491000:5000,491000:14000,491000-297000:5000,297000:17000,297000-320000:7000,320000:7000,320000-216000:9000,216000:8000,216000-436000:6000,436000:5000,436000-315000:6000,315000:11000,315000-339000:5000,339000:13000,339000-77000:9000,77000:18000,77000-261000:9000,261000:20000,261000-83000:6000,83000:12000,83000-200000:7000,200000:1000,200000-10000:5000,10000:5000,10000-9000:10000,9000:19000,9000-9000:7000,9000:19000,9000-9000:10000,9000:14000,9000-9000:6000,9000:5000,9000-502000:5000,502000:15000,502000-303000:6000,303000:13000,303000-309000:5000,309000:12000,309000-330000:5000,330000:8000,330000-363000:8000,363000:5000,363000-301000:5000,301000:13000,301000-13000:5000,13000:19000,13000-12000:10000,12000:17000,12000-10000:7000,10000:17000,10000-13000:7000,13000:18000,13000-208000:5000,208000:20000,208000-184000:8000,184000:17000,184000-86000:9000,86000:11000,86000-181000:10000,181000:20000,181000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-300000:5000,300000:6000,300000-277000:8000,277000:16000,277000-56000:7000,56000:19000,56000-247000:6000,247000:18000,247000-254000:6000,254000:9000,254000-502000:5000,502000:15000,502000-422000:9000,422000:19000,422000-458000:7000,458000:19000,458000-346000:5000,346000:21000,346000-10000:5000,10000:9000,10000-10000:9000,10000:13000,10000-10000:6000,10000:14000,10000-9000:9000,9000:15000,9000-9000:8000,9000:12000,9000-64000:5000,64000:9000,64000-46000:10000,46000:16000,46000-28000:9000,28000:12000,28000-45000:7000,45000:7000,45000-11000:9000,11000:16000,11000-196000:5000,196000:16000,196000-170000:10000,170000:11000,170000-82000:5000,82000:19000,82000-168000:6000,168000:7000,168000-117000:9000,117000:12000,117000-133000:5000,133000:9000,133000-93000:5000,93000:7000,93000-95000:5000,95000:11000,95000-43000:10000,43000:13000,43000-21000:8000,21000:17000,21000-12000:7000,12000:3000,12000-425000:5000,425000:12000,425000-333000:8000,333000:7000,333000-389000:7000,389000:12000,389000-293000:5000,293000:16000,293000-204000:5000,204000:17000,204000-213000:5000,213000:1000,213000-141000:5000,141000:12000,141000-81000:5000,81000:7000,81000-110000:5000,110000:12000,110000-96000:9000,96000:19000,96000-10000:9000,10000:5000,10000-43000:10000,43000:2000,43000-502000:5000,502000:8000,502000-299000:7000,299000:16000,299000-448000:9000,448000:11000,448000-412000:6000,412000:15000,412000-250000:5000,250000:9000,250000-318000:6000,318000:3000,318000-24000:5000,24000:13000,24000-19000:10000,19000:16000,19000-15000:7000,15000:18000,15000-21000:9000,21000:13000,21000-22000:6000,22000:3000,22000-41000:5000,41000:6000,41000-31000:8000,31000:17000,31000-32000:6000,32000:17000,32000-27000:5000,27000:14000,27000-26000:6000,26000:16000,26000-40000:5000,40000:8000,40000-32000:7000,32000:9000,32000-33000:7000,33000:16000,33000-37000:5000,37000:12000,37000-22000:10000,22000:21000,22000-18000:5000,18000:11000,18000-15000:5000,15000:20000,15000-16000:7000,16000:19000,16000-12000:6000,12000:27000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-075258.979529 > /homes/inho/capybara-data/20240307-075258.979529.client
================ TEST COMPLETE =================

[RESULT]20240307-075258.979529, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4109293)
KILLED CAPYBARA PROCESSES
PARSING 20240307-075258.979529 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-075258.979529            && sh ms_avg_99p_lat.sh 20240307-075258.979529            && sh ms_total_even_odd_numreq.sh 20240307-075258.979529            && sh latency_cdf.sh 20240307-075258.979529
ERROR: cat: /homes/inho/capybara-data/20240307-075258.979529.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-075258.979529.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075258.979529.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075258.979529.latency_trace: No such file or directory



PARSING 20240307-075258.979529 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-075258.979529
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-075258.979529, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075424.371548
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:2403:13:
ZIPF distribution was selected with only 1 thread.
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4111106 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=1 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-075424.371548 > /homes/inho/capybara-data/20240307-075424.371548.client
================ TEST COMPLETE =================

[RESULT]20240307-075424.371548, 2, 1, 0, 0, 100, N/A



iokerneld killed (pid 4110880)
KILLED CAPYBARA PROCESSES
PARSING 20240307-075424.371548 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-075424.371548            && sh ms_avg_99p_lat.sh 20240307-075424.371548            && sh ms_total_even_odd_numreq.sh 20240307-075424.371548            && sh latency_cdf.sh 20240307-075424.371548
ERROR: cat: /homes/inho/capybara-data/20240307-075424.371548.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-075424.371548.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075424.371548.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075424.371548.latency_trace: No such file or directory



PARSING 20240307-075424.371548 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-075424.371548
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-075424.371548, 2, 1, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075549.220467
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075738.503804
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075808.803429
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:2403:13:
ZIPF distribution was selected with only 1 thread.
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4119224 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=1 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-075808.803429 > /homes/inho/capybara-data/20240307-075808.803429.client
================ TEST COMPLETE =================

[RESULT]20240307-075808.803429, 2, 1, 0, 0, 100, N/A



iokerneld killed (pid 4118998)
KILLED CAPYBARA PROCESSES
PARSING 20240307-075808.803429 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-075808.803429            && sh ms_avg_99p_lat.sh 20240307-075808.803429            && sh ms_total_even_odd_numreq.sh 20240307-075808.803429            && sh latency_cdf.sh 20240307-075808.803429
ERROR: cat: /homes/inho/capybara-data/20240307-075808.803429.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-075808.803429.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075808.803429.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075808.803429.latency_trace: No such file or directory



PARSING 20240307-075808.803429 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-075808.803429
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-075808.803429, 2, 1, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075849.495400
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


45287    19712    

thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4120689 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=2 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-075849.495400 > /homes/inho/capybara-data/20240307-075849.495400.client
================ TEST COMPLETE =================

[RESULT]20240307-075849.495400, 2, 2, 0, 0, 100, N/A



iokerneld killed (pid 4120463)
KILLED CAPYBARA PROCESSES
PARSING 20240307-075849.495400 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-075849.495400            && sh ms_avg_99p_lat.sh 20240307-075849.495400            && sh ms_total_even_odd_numreq.sh 20240307-075849.495400            && sh latency_cdf.sh 20240307-075849.495400
ERROR: cat: /homes/inho/capybara-data/20240307-075849.495400.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-075849.495400.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075849.495400.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075849.495400.latency_trace: No such file or directory



PARSING 20240307-075849.495400 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-075849.495400
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-075849.495400, 2, 2, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-075948.647065
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    

thread 'main' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4122200 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-075948.647065 > /homes/inho/capybara-data/20240307-075948.647065.client
================ TEST COMPLETE =================

[RESULT]20240307-075948.647065, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4121974)
KILLED CAPYBARA PROCESSES
PARSING 20240307-075948.647065 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-075948.647065            && sh ms_avg_99p_lat.sh 20240307-075948.647065            && sh ms_total_even_odd_numreq.sh 20240307-075948.647065            && sh latency_cdf.sh 20240307-075948.647065
ERROR: cat: /homes/inho/capybara-data/20240307-075948.647065.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-075948.647065.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075948.647065.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-075948.647065.latency_trace: No such file or directory



PARSING 20240307-075948.647065 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-075948.647065
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-075948.647065, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-080121.007848
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    

thread 'main' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4123792 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240307-080121.007848 > /homes/inho/capybara-data/20240307-080121.007848.client
================ TEST COMPLETE =================

[RESULT]20240307-080121.007848, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 4123567)
KILLED CAPYBARA PROCESSES
PARSING 20240307-080121.007848 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-080121.007848            && sh ms_avg_99p_lat.sh 20240307-080121.007848            && sh ms_total_even_odd_numreq.sh 20240307-080121.007848            && sh latency_cdf.sh 20240307-080121.007848
ERROR: cat: /homes/inho/capybara-data/20240307-080121.007848.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240307-080121.007848.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-080121.007848.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240307-080121.007848.latency_trace: No such file or directory



PARSING 20240307-080121.007848 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-080121.007848
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-080121.007848, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-080324.936514
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-080324.936514, 2, 100, 0, 0, 100, exponential, 65000, 64779, 64779, 0, 4, 10.0, 13.0, 17.0, 39.0, 1282.0, 1709798619, 0



iokerneld killed (pid 4125247)
KILLED CAPYBARA PROCESSES
PARSING 20240307-080324.936514 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-080324.936514            && sh ms_avg_99p_lat.sh 20240307-080324.936514            && sh ms_total_even_odd_numreq.sh 20240307-080324.936514            && sh latency_cdf.sh 20240307-080324.936514
DONE
PARSING 20240307-080324.936514 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-080324.936514
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-080324.936514, 2, 100, 0, 0, 100, exponential, 65000, 64779, 64779, 0, 4, 10.0, 13.0, 17.0, 39.0, 1282.0, 1709798619, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-081019.315888
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


18040    7852    4827    3418    2615    2101    1746    1487    1291    1138    1015    914    830    760    699    647    602    562    526    495    467    441    418    398    379    361    345    330    317    304    292    281    271    262    253    244    236    229    222    215    209    203    197    192    187    182    177    173    169    164    161    157    153    150    147    144    140    138    135    132    129    127    125    122    120    118    116    114    112    110    108    106    104    103    101    99    98    96    95    93    92    91    89    88    87    86    84    83    82    81    80    79    78    77    76    75    74    73    72    71    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240307-081019.315888, 2, 100, 0, 0, 100, exponential, 65000, 64777, 64776, 0, 8, 10.0, 13.0, 17.0, 41.0, 1598.0, 1709799034, 0



iokerneld killed (pid 4135781)
KILLED CAPYBARA PROCESSES
PARSING 20240307-081019.315888 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240307-081019.315888            && sh ms_avg_99p_lat.sh 20240307-081019.315888            && sh ms_total_even_odd_numreq.sh 20240307-081019.315888            && sh latency_cdf.sh 20240307-081019.315888
DONE
PARSING 20240307-081019.315888 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240307-081019.315888
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240307-081019.315888, 2, 100, 0, 0, 100, exponential, 65000, 64777, 64776, 0, 8, 10.0, 13.0, 17.0, 41.0, 1598.0, 1709799034, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 320 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (300, 550)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240307-081132.507389
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-110949.459987
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240308-110949.459987, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 283746)
KILLED CAPYBARA PROCESSES
PARSING 20240308-110949.459987 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-110949.459987            && sh ms_avg_99p_lat.sh 20240308-110949.459987            && sh ms_total_even_odd_numreq.sh 20240308-110949.459987            && sh latency_cdf.sh 20240308-110949.459987
DONE
PARSING 20240308-110949.459987 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-110949.459987
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-110949.459987, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [2]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(5, 5 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-111241.715508
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240308-111241.715508, 2, 1, 0, 1, 2, exponential, 5, 0, 0, 0, 1709896377



iokerneld killed (pid 291176)
KILLED CAPYBARA PROCESSES
PARSING 20240308-111241.715508 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-111241.715508            && sh ms_avg_99p_lat.sh 20240308-111241.715508            && sh ms_total_even_odd_numreq.sh 20240308-111241.715508            && sh latency_cdf.sh 20240308-111241.715508
ERROR: cat: /homes/inho/capybara-data/20240308-111241.715508.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240308-111241.715508.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-111241.715508.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-111241.715508.latency_trace: No such file or directory



PARSING 20240308-111241.715508 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-111241.715508
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-111241.715508, 2, 1, 0, 1, 2, exponential, 5, 0, 0, 0, 1709896377

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-111704.311489
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240308-111704.311489, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 299571)
KILLED CAPYBARA PROCESSES
PARSING 20240308-111704.311489 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-111704.311489            && sh ms_avg_99p_lat.sh 20240308-111704.311489            && sh ms_total_even_odd_numreq.sh 20240308-111704.311489            && sh latency_cdf.sh 20240308-111704.311489
DONE
PARSING 20240308-111704.311489 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-111704.311489
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-111704.311489, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-112025.975484
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240308-112025.975484, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 307099)
KILLED CAPYBARA PROCESSES
PARSING 20240308-112025.975484 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-112025.975484            && sh ms_avg_99p_lat.sh 20240308-112025.975484            && sh ms_total_even_odd_numreq.sh 20240308-112025.975484            && sh latency_cdf.sh 20240308-112025.975484
DONE
PARSING 20240308-112025.975484 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-112025.975484
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-112025.975484, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-112306.539115
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240308-112306.539115, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 314511)
KILLED CAPYBARA PROCESSES
PARSING 20240308-112306.539115 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-112306.539115            && sh ms_avg_99p_lat.sh 20240308-112306.539115            && sh ms_total_even_odd_numreq.sh 20240308-112306.539115            && sh latency_cdf.sh 20240308-112306.539115
DONE
PARSING 20240308-112306.539115 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-112306.539115
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-112306.539115, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-112621.487602
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240308-112621.487602, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 316308)
KILLED CAPYBARA PROCESSES
PARSING 20240308-112621.487602 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-112621.487602            && sh ms_avg_99p_lat.sh 20240308-112621.487602            && sh ms_total_even_odd_numreq.sh 20240308-112621.487602            && sh latency_cdf.sh 20240308-112621.487602
DONE
PARSING 20240308-112621.487602 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-112621.487602
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-112621.487602, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
Traceback (most recent call last):
  File "run_eval.py", line 727, in <module>
    run_eval()
  File "run_eval.py", line 519, in run_eval
    if CLIENT_APP == 'caladan' and LOADSHIFTS.count('|') != 0 and LOADSHIFTS.count('|') != NUM_BACKENDS - 1:
NameError: name 'LOADSHIFTS' is not defined
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc

KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '0' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-113118.431941
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:2406:13:
Alpha = 0 is a uniform distribution.
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 325197 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=65000 --threads=2 --runtime=2 --discard_pct=10 --output=trace --rampup=0 --zipf=0 --exptid=/homes/inho/capybara-data/20240308-113118.431941 > /homes/inho/capybara-data/20240308-113118.431941.client
================ TEST COMPLETE =================

[RESULT]20240308-113118.431941, 2, 2, 0, 0, 100, N/A



iokerneld killed (pid 324970)
KILLED CAPYBARA PROCESSES
PARSING 20240308-113118.431941 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-113118.431941            && sh ms_avg_99p_lat.sh 20240308-113118.431941            && sh ms_total_even_odd_numreq.sh 20240308-113118.431941            && sh latency_cdf.sh 20240308-113118.431941
ERROR: cat: /homes/inho/capybara-data/20240308-113118.431941.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240308-113118.431941.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113118.431941.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113118.431941.latency_trace: No such file or directory



PARSING 20240308-113118.431941 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-113118.431941
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-113118.431941, 2, 2, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-113159.571982
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240308-113159.571982, 2, 2, 0, 0, 100, exponential, 65000, 0, 0, 0, 1709897534



iokerneld killed (pid 326436)
KILLED CAPYBARA PROCESSES
PARSING 20240308-113159.571982 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-113159.571982            && sh ms_avg_99p_lat.sh 20240308-113159.571982            && sh ms_total_even_odd_numreq.sh 20240308-113159.571982            && sh latency_cdf.sh 20240308-113159.571982
ERROR: cat: /homes/inho/capybara-data/20240308-113159.571982.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240308-113159.571982.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113159.571982.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113159.571982.latency_trace: No such file or directory



PARSING 20240308-113159.571982 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-113159.571982
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-113159.571982, 2, 2, 0, 0, 100, exponential, 65000, 0, 0, 0, 1709897534

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-113325.091976
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240308-113325.091976, 2, 2, 0, 0, 100, exponential, 1000, 0, 0, 0, 1709897619



iokerneld killed (pid 328003)
KILLED CAPYBARA PROCESSES
PARSING 20240308-113325.091976 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-113325.091976            && sh ms_avg_99p_lat.sh 20240308-113325.091976            && sh ms_total_even_odd_numreq.sh 20240308-113325.091976            && sh latency_cdf.sh 20240308-113325.091976
ERROR: cat: /homes/inho/capybara-data/20240308-113325.091976.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240308-113325.091976.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113325.091976.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113325.091976.latency_trace: No such file or directory



PARSING 20240308-113325.091976 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-113325.091976
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-113325.091976, 2, 2, 0, 0, 100, exponential, 1000, 0, 0, 0, 1709897619

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240308-113514.279016
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240308-113514.279016, 2, 1, 0, 0, 100, exponential, 10, 0, 0, 0, 1709897729



iokerneld killed (pid 329612)
KILLED CAPYBARA PROCESSES
PARSING 20240308-113514.279016 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240308-113514.279016            && sh ms_avg_99p_lat.sh 20240308-113514.279016            && sh ms_total_even_odd_numreq.sh 20240308-113514.279016            && sh latency_cdf.sh 20240308-113514.279016
ERROR: cat: /homes/inho/capybara-data/20240308-113514.279016.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240308-113514.279016.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113514.279016.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240308-113514.279016.latency_trace: No such file or directory



PARSING 20240308-113514.279016 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240308-113514.279016
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240308-113514.279016, 2, 1, 0, 0, 100, exponential, 10, 0, 0, 0, 1709897729

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-080607.203129
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-080607.203129, 2, 1, 0, 0, 100, exponential, 10, 0, 0, 0, 1709971581



iokerneld killed (pid 490531)
KILLED CAPYBARA PROCESSES
PARSING 20240309-080607.203129 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-080607.203129            && sh ms_avg_99p_lat.sh 20240309-080607.203129            && sh ms_total_even_odd_numreq.sh 20240309-080607.203129            && sh latency_cdf.sh 20240309-080607.203129
ERROR: cat: /homes/inho/capybara-data/20240309-080607.203129.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-080607.203129.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-080607.203129.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-080607.203129.latency_trace: No such file or directory



PARSING 20240309-080607.203129 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-080607.203129
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-080607.203129, 2, 1, 0, 0, 100, exponential, 10, 0, 0, 0, 1709971581

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-080919.751869
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 31


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-080919.751869, 2, 1, 0, 0, 100, exponential, 10, 16, 16, 0, 0, 101.0, 104.0, 106.0, 106.0, 106.0, 1709971774, 0



iokerneld killed (pid 498334)
KILLED CAPYBARA PROCESSES
PARSING 20240309-080919.751869 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-080919.751869            && sh ms_avg_99p_lat.sh 20240309-080919.751869            && sh ms_total_even_odd_numreq.sh 20240309-080919.751869            && sh latency_cdf.sh 20240309-080919.751869
DONE
PARSING 20240309-080919.751869 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-080919.751869
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-080919.751869, 2, 1, 0, 0, 100, exponential, 10, 16, 16, 0, 0, 101.0, 104.0, 106.0, 106.0, 106.0, 1709971774, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-081526.206994
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-081526.206994, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 506410)
KILLED CAPYBARA PROCESSES
PARSING 20240309-081526.206994 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-081526.206994            && sh ms_avg_99p_lat.sh 20240309-081526.206994            && sh ms_total_even_odd_numreq.sh 20240309-081526.206994            && sh latency_cdf.sh 20240309-081526.206994
DONE
PARSING 20240309-081526.206994 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-081526.206994
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-081526.206994, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-081717.620001
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-081717.620001, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 507995)
KILLED CAPYBARA PROCESSES
PARSING 20240309-081717.620001 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-081717.620001            && sh ms_avg_99p_lat.sh 20240309-081717.620001            && sh ms_total_even_odd_numreq.sh 20240309-081717.620001            && sh latency_cdf.sh 20240309-081717.620001
DONE
PARSING 20240309-081717.620001 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-081717.620001
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-081717.620001, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-082505.887597
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 521944 Killed                  sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=100 --runtime=2 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,10000-19000:5000,19000:12000,19000-6000:5000,6000:7000,6000-4000:8000,4000:8000,4000-19000:7000,19000:8000,19000-14000:6000,14000:17000,14000-14000:5000,14000:12000,14000-20000:5000,20000:14000,20000-20000:10000,20000:12000,20000-6000:8000,6000:6000,6000-12000:5000,12000:11000,12000-14000:5000,14000:7000,14000-0:8000,0:9000,0-23000:5000,23000:14000,23000-3000:6000,3000:9000,3000-19000:7000,19000:14000,19000-22000:10000,22000:6000,22000-13000:7000,13000:11000,13000-7000:6000,7000:5000,7000-25000:5000,25000:10000,25000-15000:9000,15000:19000,15000-14000:7000,14000:13000,14000-13000:10000,13000:7000,13000-24000:7000,24000:13000,24000-25000:5000,25000:14000,25000-3000:7000,3000:15000,3000-5000:9000,5000:20000,5000-4000:8000,4000:22000,4000-18000:5000,18000:11000,18000-2000:7000,2000:12000,2000-1000:7000,1000:16000,1000-2000:5000,2000:8000,2000-3000:10000,3000:19000,3000-29000:5000,29000:5000,29000-4000:10000,4000:13000,4000-19000:7000,19000:19000,19000-10000:5000,10000:17000,10000-12000:5000,12000:14000,12000-26000:5000,26000:9000,26000-23000:5000,23000:13000,23000-18000:7000,18000:11000,18000-0:5000,0:19000,0-10000:9000,10000:17000,10000-25000:5000,25000:8000,25000-13000:8000,13000:14000,13000-24000:6000,24000:10000,24000-12000:5000,12000:9000,12000-11000:6000,11000:19000,11000-21000:8000,21000:2000,21000-29000:5000,29000:13000,29000-0:9000,0:6000,0-26000:10000,26000:5000,26000-8000:10000,8000:20000,8000-10000:9000,10000:13000,10000-18000:5000,18000:14000,18000-12000:8000,12000:15000,12000-14000:10000,14000:19000,14000-14000:9000,14000:7000,14000-0:7000,0:6000,0-18000:5000,18000:19000,18000-17000:8000,17000:9000,17000-3000:9000,3000:16000,3000-4000:9000,4000:16000,4000-18000:5000,18000:4000,18000-30000:5000,30000:12000,30000-29000:8000,29000:16000,29000-7000:6000,7000:20000,7000-15000:8000,15000:5000,15000-6000:8000,6000:12000,6000-19000:5000,19000:20000,19000-15000:7000,15000:13000,15000-8000:9000,8000:9000,8000-12000:8000,12000:15000,12000-1000:8000,1000:6000,1000-26000:5000,26000:20000,26000-18000:10000,18000:20000,18000-22000:7000,22000:13000,22000-25000:8000,25000:8000,25000-24000:8000,24000:1000,24000-21000:5000,21000:19000,21000-14000:10000,14000:11000,14000-14000:9000,14000:17000,14000-6000:5000,6000:9000,6000-2000:6000,2000:9000,2000-23000:5000,23000:7000,23000-8000:8000,8000:16000,8000-12000:8000,12000:16000,12000-15000:8000,15000:18000,15000-19000:6000,19000:8000,19000-23000:5000,23000:18000,23000-18000:9000,18000:6000,18000-5000:5000,5000:10000,5000-20000:10000,20000:20000,20000-18000:8000,18000:9000,18000-22000:5000,22000:13000,22000-10000:9000,10000:20000,10000-3000:6000,3000:11000,3000-13000:6000,13000:13000,13000-22000:9000,22000:8000,22000-25000:5000,25000:10000,25000-9000:5000,9000:20000,9000-22000:10000,22000:11000,22000-3000:9000,3000:11000,3000-5000:6000,5000:13000,5000-30000:5000,30000:16000,30000-8000:10000,8000:8000,8000-10000:10000,10000:8000,10000-9000:8000,9000:15000,9000-16000:7000,16000:13000,16000-27000:5000,27000:8000,27000-15000:9000,15000:18000,15000-7000:10000,7000:9000,7000-21000:8000,21000:16000,21000-7000:6000,7000:11000,7000-21000:5000,21000:7000,21000-2000:6000,2000:10000,2000-6000:6000,6000:10000,6000-4000:10000,4000:6000,4000-6000:8000,6000:6000,6000-9000:8000,9000:18000,9000-19000:5000,19000:8000,19000-15000:7000,15000:8000,15000-4000:9000,4000:10000,4000-2000:7000,2000:6000,2000-15000:10000,15000:5000,15000-12000:7000,12000:18000,12000-19000:5000,19000:18000,19000-8000:8000,8000:13000,8000-13000:8000,13000:16000,13000-19000:5000,19000:27000,19000-25000:5000,25000:9000,25000-8000:5000,8000:9000,8000-14000:7000,14000:14000,14000-8000:7000,8000:7000,8000-18000:6000,18000:7000,18000-19000:10000,19000:14000,19000-20000:5000,20000:10000,20000-15000:5000,15000:15000,15000-12000:7000,12000:5000,12000-5000:8000,5000:20000,5000-14000:9000,14000:16000,14000-23000:5000,23000:16000,23000-13000:5000,13000:8000,13000-14000:9000,14000:14000,14000-18000:6000,18000:10000,18000-23000:9000,23000:18000,23000-24000:5000,24000:12000,24000-10000:9000,10000:16000,10000-7000:8000,7000:17000,7000-17000:5000,17000:14000,17000-17000:5000,17000:9000,17000-29000:5000,29000:18000,29000-7000:5000,7000:9000,7000-7000:7000,7000:17000,7000-3000:7000,3000:13000,3000-11000:6000,11000:13000,11000-17000:5000,17000:10000,17000-4000:7000,4000:9000,4000-1000:10000,1000:9000,1000-8000:10000,8000:7000,8000-9000:6000,9000:8000,9000-15000:5000,15000:14000,15000-25000:5000,25000:7000,25000-18000:9000,18000:6000,18000-21000:5000,21000:10000,21000-19000:10000,19000:20000,19000-6000:5000,6000:12000,6000-21000:10000,21000:1000,21000-22000:5000,22000:18000,22000-12000:9000,12000:20000,12000-17000:6000,17000:7000,17000-6000:10000,6000:14000,6000-10000:7000,10000:4000,10000-24000:5000,24000:12000,24000-17000:5000,17000:8000,17000-12000:9000,12000:14000,12000-12000:5000,12000:10000,12000-5000:7000,5000:9000,5000-14000:10000,14000:6000,14000-23000:5000,23000:11000,23000-1000:7000,1000:11000,1000-2000:6000,2000:13000,2000-10000:5000,10000:15000,10000-1000:10000,1000:6000,1000-5000:10000,5000:1000,5000-18000:5000,18000:8000,18000-3000:10000,3000:14000,3000-18000:8000,18000:20000,18000-9000:8000,9000:9000,9000-10000:9000,10000:9000,10000-22000:5000,22000:17000,22000-11000:8000,11000:17000,11000-8000:9000,8000:11000,8000-18000:10000,18000:11000,18000-10000:10000,10000:2000,10000-22000:5000,22000:10000,22000-19000:8000,19000:11000,19000-22000:6000,22000:17000,22000-11000:8000,11000:10000,11000-4000:6000,4000:10000,4000-18000:5000,18000:4000,18000-20000:5000,20000:6000,20000-2000:6000,2000:6000,2000-15000:8000,15000:16000,15000-3000:7000,3000:19000,3000-12000:6000,12000:21000,12000-25000:5000,25000:5000,25000-11000:7000,11000:18000,11000-17000:8000,17000:16000,17000-1000:7000,1000:11000,1000-5000:5000,5000:18000,5000-24000:5000,24000:15000,24000-1000:8000,1000:20000,1000-22000:9000,22000:18000,22000-7000:6000,7000:6000,7000-8000:7000,8000:6000,8000-17000:5000,17000:16000,17000-3000:9000,3000:6000,3000-11000:9000,11000:7000,11000-8000:8000,8000:9000,8000-10000:6000,10000:25000,10000-20000:5000,20000:10000,20000-15000:9000,15000:7000,15000-11000:9000,11000:11000,11000-1000:9000,1000:12000,1000-8000:7000,8000:12000,8000-11000:5000,11000:4000,11000-19000:5000,19000:11000,19000-7000:10000,7000:13000,7000-3000:8000,3000:17000,3000-1000:7000,1000:12000,1000-17000:8000,17000:9000,17000-29000:5000,29000:18000,29000-4000:9000,4000:14000,4000-13000:9000,13000:5000,13000-19000:7000,19000:7000,19000-8000:10000,8000:16000,8000-20000:5000,20000:16000,20000-3000:6000,3000:14000,3000-3000:5000,3000:17000,3000-6000:9000,6000:15000,6000-14000:8000,14000:5000,14000-20000:5000,20000:16000,20000-1000:5000,1000:8000,1000-15000:8000,15000:15000,15000-15000:5000,15000:8000,15000-5000:7000,5000:23000,5000-22000:5000,22000:9000,22000-17000:6000,17000:8000,17000-7000:7000,7000:9000,7000-8000:7000,8000:5000,8000-14000:7000,14000:13000,14000-22000:10000,22000:14000,22000-24000:5000,24000:9000,24000-11000:6000,11000:12000,11000-18000:7000,18000:16000,18000-22000:8000,22000:16000,22000-11000:9000,11000:12000/100000:100000,10000-28000:5000,28000:18000,28000-18000:5000,18000:11000,18000-18000:10000,18000:13000,18000-19000:10000,19000:8000,19000-4000:10000,4000:10000,4000-23000:5000,23000:9000,23000-16000:7000,16000:5000,16000-4000:10000,4000:11000,4000-15000:6000,15000:6000,15000-21000:9000,21000:18000,21000-19000:9000,19000:5000,19000-21000:5000,21000:16000,21000-11000:5000,11000:12000,11000-7000:9000,7000:9000,7000-5000:5000,5000:7000,5000-9000:10000,9000:12000,9000-10000:9000,10000:1000,10000-22000:5000,22000:19000,22000-17000:6000,17000:11000,17000-13000:8000,13000:5000,13000-22000:8000,22000:17000,22000-12000:9000,12000:12000,12000-22000:5000,22000:12000,22000-14000:9000,14000:6000,14000-17000:10000,17000:7000,17000-7000:6000,7000:19000,7000-20000:6000,20000:20000,20000-30000:5000,30000:5000,30000-19000:8000,19000:15000,19000-23000:5000,23000:17000,23000-4000:6000,4000:10000,4000-14000:7000,14000:12000,14000-9000:9000,9000:1000,9000-18000:5000,18000:20000,18000-11000:7000,11000:20000,11000-12000:5000,12000:8000,12000-10000:5000,10000:19000,10000-17000:7000,17000:4000,17000-21000:5000,21000:7000,21000-2000:8000,2000:15000,2000-20000:10000,20000:20000,20000-8000:8000,8000:14000,8000-17000:10000,17000:3000,17000-22000:5000,22000:13000,22000-19000:6000,19000:8000,19000-8000:9000,8000:18000,8000-10000:5000,10000:7000,10000-15000:8000,15000:9000,15000-2000:5000,2000:7000,2000-18000:5000,18000:7000,18000-6000:9000,6000:12000,6000-16000:5000,16000:9000,16000-16000:6000,16000:19000,16000-7000:8000,7000:20000,7000-29000:5000,29000:9000,29000-17000:8000,17000:6000,17000-16000:5000,16000:15000,16000-14000:7000,14000:13000,14000-20000:5000,20000:16000,20000-9000:10000,9000:1000,9000-29000:5000,29000:12000,29000-5000:8000,5000:8000,5000-9000:9000,9000:16000,9000-22000:5000,22000:9000,22000-16000:7000,16000:21000,16000-18000:5000,18000:17000,18000-13000:8000,13000:16000,13000-7000:7000,7000:19000,7000-16000:6000,16000:8000,16000-14000:6000,14000:8000,14000-28000:5000,28000:20000,28000-23000:6000,23000:11000,23000-27000:9000,27000:8000,27000-4000:7000,4000:17000,4000-23000:6000,23000:11000,23000-21000:5000,21000:14000,21000-18000:9000,18000:13000,18000-3000:5000,3000:14000,3000-14000:9000,14000:7000,14000-1000:5000,1000:19000,1000-26000:5000,26000:5000,26000-22000:7000,22000:17000,22000-4000:10000,4000:16000,4000-23000:10000,23000:19000,23000-17000:10000,17000:1000,17000-24000:5000,24000:9000,24000-7000:8000,7000:8000,7000-9000:7000,9000:14000,9000-12000:8000,12000:10000,12000-6000:8000,6000:11000,6000-13000:10000,13000:2000,13000-24000:5000,24000:14000,24000-3000:9000,3000:13000,3000-0:8000,0:20000,0-1000:6000,1000:5000,1000-13000:8000,13000:12000,13000-22000:5000,22000:9000,22000-15000:8000,15000:6000,15000-14000:5000,14000:8000,14000-21000:9000,21000:17000,21000-1000:10000,1000:10000,1000-4000:9000,4000:4000,4000-22000:5000,22000:15000,22000-13000:5000,13000:8000,13000-1000:5000,1000:9000,1000-19000:9000,19000:6000,19000-5000:7000,5000:5000,5000-12000:5000,12000:21000,12000-17000:5000,17000:6000,17000-12000:6000,12000:14000,12000-8000:5000,8000:13000,8000-5000:8000,5000:17000,5000-11000:7000,11000:19000,11000-20000:5000,20000:20000,20000-18000:10000,18000:13000,18000-5000:10000,5000:20000,5000-14000:10000,14000:12000,14000-26000:5000,26000:5000,26000-19000:8000,19000:18000,19000-6000:10000,6000:19000,6000-22000:7000,22000:17000,22000-3000:9000,3000:2000,3000-29000:5000,29000:19000,29000-24000:9000,24000:7000,24000-3000:8000,3000:17000,3000-26000:9000,26000:26000,26000-28000:5000,28000:10000,28000-27000:9000,27000:14000,27000-7000:8000,7000:9000,7000-15000:5000,15000:18000,15000-20000:7000,20000:15000,20000-22000:5000,22000:8000,22000-11000:8000,11000:12000,11000-20000:8000,20000:13000,20000-18000:9000,18000:9000,18000-20000:8000,20000:6000,20000-16000:6000,16000:8000,16000-27000:5000,27000:18000,27000-17000:9000,17000:18000,17000-11000:6000,11000:13000,11000-14000:5000,14000:12000,14000-25000:10000,25000:4000,25000-24000:5000,24000:11000,24000-12000:6000,12000:10000,12000-4000:10000,4000:8000,4000-3000:8000,3000:12000,3000-16000:6000,16000:11000,16000-15000:8000,15000:5000,15000-23000:5000,23000:5000,23000-3000:7000,3000:18000,3000-4000:6000,4000:18000,4000-20000:10000,20000:10000,20000-1000:7000,1000:14000,1000-18000:5000,18000:10000,18000-13000:5000,13000:10000,13000-7000:10000,7000:7000,7000-10000:8000,10000:8000,10000-5000:7000,5000:10000,5000-10000:8000,10000:12000,10000-30000:5000,30000:19000,30000-20000:6000,20000:11000,20000-13000:6000,13000:16000,13000-26000:8000,26000:15000,26000-2000:7000,2000:7000,2000-23000:5000,23000:9000,23000-1000:6000,1000:9000,1000-18000:6000,18000:15000,18000-12000:5000,12000:10000,12000-19000:9000,19000:9000,19000-19000:7000,19000:10000,19000-25000:5000,25000:16000,25000-3000:8000,3000:20000,3000-14000:5000,14000:12000,14000-10000:7000,10000:19000,10000-11000:5000,11000:3000,11000-23000:5000,23000:5000,23000-19000:9000,19000:11000,19000-17000:6000,17000:9000,17000-1000:6000,1000:7000,1000-4000:5000,4000:6000,4000-22000:6000,22000:25000,22000-24000:5000,24000:14000,24000-7000:7000,7000:9000,7000-5000:8000,5000:6000,5000-13000:7000,13000:16000,13000-3000:8000,3000:5000,3000-11000:9000,11000:6000,11000-29000:5000,29000:14000,29000-27000:6000,27000:6000,27000-11000:5000,11000:15000,11000-7000:9000,7000:12000,7000-18000:9000,18000:19000,18000-23000:5000,23000:16000,23000-19000:9000,19000:19000,19000-5000:7000,5000:9000,5000-3000:10000,3000:14000,3000-3000:8000,3000:3000,3000-25000:5000,25000:12000,25000-15000:8000,15000:17000,15000-20000:7000,20000:15000,20000-10000:5000,10000:9000,10000-25000:5000,25000:17000,25000-27000:5000,27000:8000,27000-17000:7000,17000:16000,17000-8000:6000,8000:5000,8000-25000:8000,25000:19000,25000-25000:10000,25000:16000,25000-22000:5000,22000:7000,22000-21000:6000,21000:13000,21000-4000:10000,4000:20000,4000-14000:6000,14000:15000,14000-6000:7000,6000:11000,6000-23000:5000,23000:20000,23000-13000:6000,13000:7000,13000-14000:9000,14000:14000,14000-8000:6000,8000:8000,8000-19000:6000,19000:19000,19000-31000:5000,31000:19000,31000-6000:9000,6000:10000,6000-3000:8000,3000:9000,3000-26000:8000,26000:16000,26000-28000:10000,28000:6000,28000-23000:5000,23000:20000,23000-13000:8000,13000:6000,13000-1000:7000,1000:18000,1000-15000:7000,15000:11000,15000-9000:7000,9000:11000,9000-28000:5000,28000:11000,28000-15000:7000,15000:15000,15000-28000:10000,28000:8000,28000-4000:7000,4000:15000,4000-27000:5000,27000:17000,27000-18000:5000,18000:7000,18000-16000:6000,16000:15000,16000-7000:7000,7000:15000,7000-13000:10000,13000:12000,13000-6000:6000,6000:17000,6000-22000:5000,22000:5000,22000-4000:10000,4000:20000,4000-6000:5000,6000:17000,6000-15000:5000,15000:13000,15000-18000:7000,18000:13000,18000-27000:5000,27000:9000,27000-17000:8000,17000:5000,17000-8000:5000,8000:12000,8000-12000:9000,12000:16000,12000-24000:10000,24000:13000,24000-9000:6000,9000:2000,9000-22000:5000,22000:16000,22000-20000:7000,20000:11000,20000-12000:10000,12000:17000,12000-6000:7000,6000:18000,6000-18000:8000,18000:1000,18000-24000:5000,24000:9000,24000-11000:7000,11000:6000,11000-8000:7000,8000:10000,8000-3000:7000,3000:17000,3000-22000:9000,22000:5000,22000-20000:10000,20000:8000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240309-082505.887597 > /homes/inho/capybara-data/20240309-082505.887597.client
================ TEST COMPLETE =================

[RESULT]20240309-082505.887597, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 521720)
KILLED CAPYBARA PROCESSES
PARSING 20240309-082505.887597 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-082505.887597            && sh ms_avg_99p_lat.sh 20240309-082505.887597            && sh ms_total_even_odd_numreq.sh 20240309-082505.887597            && sh latency_cdf.sh 20240309-082505.887597
ERROR: cat: /homes/inho/capybara-data/20240309-082505.887597.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-082505.887597.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-082505.887597.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-082505.887597.latency_trace: No such file or directory



PARSING 20240309-082505.887597 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-082505.887597
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-082505.887597, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-082822.659596
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 529759 Killed                  sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=100 --runtime=2 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,10000-19000:5000,19000:12000,19000-6000:5000,6000:7000,6000-4000:8000,4000:8000,4000-19000:7000,19000:8000,19000-14000:6000,14000:17000,14000-14000:5000,14000:12000,14000-20000:5000,20000:14000,20000-20000:10000,20000:12000,20000-6000:8000,6000:6000,6000-12000:5000,12000:11000,12000-14000:5000,14000:7000,14000-0:8000,0:9000,0-23000:5000,23000:14000,23000-3000:6000,3000:9000,3000-19000:7000,19000:14000,19000-22000:10000,22000:6000,22000-13000:7000,13000:11000,13000-7000:6000,7000:5000,7000-25000:5000,25000:10000,25000-15000:9000,15000:19000,15000-14000:7000,14000:13000,14000-13000:10000,13000:7000,13000-24000:7000,24000:13000,24000-25000:5000,25000:14000,25000-3000:7000,3000:15000,3000-5000:9000,5000:20000,5000-4000:8000,4000:22000,4000-18000:5000,18000:11000,18000-2000:7000,2000:12000,2000-1000:7000,1000:16000,1000-2000:5000,2000:8000,2000-3000:10000,3000:19000,3000-29000:5000,29000:5000,29000-4000:10000,4000:13000,4000-19000:7000,19000:19000,19000-10000:5000,10000:17000,10000-12000:5000,12000:14000,12000-26000:5000,26000:9000,26000-23000:5000,23000:13000,23000-18000:7000,18000:11000,18000-0:5000,0:19000,0-10000:9000,10000:17000,10000-25000:5000,25000:8000,25000-13000:8000,13000:14000,13000-24000:6000,24000:10000,24000-12000:5000,12000:9000,12000-11000:6000,11000:19000,11000-21000:8000,21000:2000,21000-29000:5000,29000:13000,29000-0:9000,0:6000,0-26000:10000,26000:5000,26000-8000:10000,8000:20000,8000-10000:9000,10000:13000,10000-18000:5000,18000:14000,18000-12000:8000,12000:15000,12000-14000:10000,14000:19000,14000-14000:9000,14000:7000,14000-0:7000,0:6000,0-18000:5000,18000:19000,18000-17000:8000,17000:9000,17000-3000:9000,3000:16000,3000-4000:9000,4000:16000,4000-18000:5000,18000:4000,18000-30000:5000,30000:12000,30000-29000:8000,29000:16000,29000-7000:6000,7000:20000,7000-15000:8000,15000:5000,15000-6000:8000,6000:12000,6000-19000:5000,19000:20000,19000-15000:7000,15000:13000,15000-8000:9000,8000:9000,8000-12000:8000,12000:15000,12000-1000:8000,1000:6000,1000-26000:5000,26000:20000,26000-18000:10000,18000:20000,18000-22000:7000,22000:13000,22000-25000:8000,25000:8000,25000-24000:8000,24000:1000,24000-21000:5000,21000:19000,21000-14000:10000,14000:11000,14000-14000:9000,14000:17000,14000-6000:5000,6000:9000,6000-2000:6000,2000:9000,2000-23000:5000,23000:7000,23000-8000:8000,8000:16000,8000-12000:8000,12000:16000,12000-15000:8000,15000:18000,15000-19000:6000,19000:8000,19000-23000:5000,23000:18000,23000-18000:9000,18000:6000,18000-5000:5000,5000:10000,5000-20000:10000,20000:20000,20000-18000:8000,18000:9000,18000-22000:5000,22000:13000,22000-10000:9000,10000:20000,10000-3000:6000,3000:11000,3000-13000:6000,13000:13000,13000-22000:9000,22000:8000,22000-25000:5000,25000:10000,25000-9000:5000,9000:20000,9000-22000:10000,22000:11000,22000-3000:9000,3000:11000,3000-5000:6000,5000:13000,5000-30000:5000,30000:16000,30000-8000:10000,8000:8000,8000-10000:10000,10000:8000,10000-9000:8000,9000:15000,9000-16000:7000,16000:13000,16000-27000:5000,27000:8000,27000-15000:9000,15000:18000,15000-7000:10000,7000:9000,7000-21000:8000,21000:16000,21000-7000:6000,7000:11000,7000-21000:5000,21000:7000,21000-2000:6000,2000:10000,2000-6000:6000,6000:10000,6000-4000:10000,4000:6000,4000-6000:8000,6000:6000,6000-9000:8000,9000:18000,9000-19000:5000,19000:8000,19000-15000:7000,15000:8000,15000-4000:9000,4000:10000,4000-2000:7000,2000:6000,2000-15000:10000,15000:5000,15000-12000:7000,12000:18000,12000-19000:5000,19000:18000,19000-8000:8000,8000:13000,8000-13000:8000,13000:16000,13000-19000:5000,19000:27000,19000-25000:5000,25000:9000,25000-8000:5000,8000:9000,8000-14000:7000,14000:14000,14000-8000:7000,8000:7000,8000-18000:6000,18000:7000,18000-19000:10000,19000:14000,19000-20000:5000,20000:10000,20000-15000:5000,15000:15000,15000-12000:7000,12000:5000,12000-5000:8000,5000:20000,5000-14000:9000,14000:16000,14000-23000:5000,23000:16000,23000-13000:5000,13000:8000,13000-14000:9000,14000:14000,14000-18000:6000,18000:10000,18000-23000:9000,23000:18000,23000-24000:5000,24000:12000,24000-10000:9000,10000:16000,10000-7000:8000,7000:17000,7000-17000:5000,17000:14000,17000-17000:5000,17000:9000,17000-29000:5000,29000:18000,29000-7000:5000,7000:9000,7000-7000:7000,7000:17000,7000-3000:7000,3000:13000,3000-11000:6000,11000:13000,11000-17000:5000,17000:10000,17000-4000:7000,4000:9000,4000-1000:10000,1000:9000,1000-8000:10000,8000:7000,8000-9000:6000,9000:8000,9000-15000:5000,15000:14000,15000-25000:5000,25000:7000,25000-18000:9000,18000:6000,18000-21000:5000,21000:10000,21000-19000:10000,19000:20000,19000-6000:5000,6000:12000,6000-21000:10000,21000:1000,21000-22000:5000,22000:18000,22000-12000:9000,12000:20000,12000-17000:6000,17000:7000,17000-6000:10000,6000:14000,6000-10000:7000,10000:4000,10000-24000:5000,24000:12000,24000-17000:5000,17000:8000,17000-12000:9000,12000:14000,12000-12000:5000,12000:10000,12000-5000:7000,5000:9000,5000-14000:10000,14000:6000,14000-23000:5000,23000:11000,23000-1000:7000,1000:11000,1000-2000:6000,2000:13000,2000-10000:5000,10000:15000,10000-1000:10000,1000:6000,1000-5000:10000,5000:1000,5000-18000:5000,18000:8000,18000-3000:10000,3000:14000,3000-18000:8000,18000:20000,18000-9000:8000,9000:9000,9000-10000:9000,10000:9000,10000-22000:5000,22000:17000,22000-11000:8000,11000:17000,11000-8000:9000,8000:11000,8000-18000:10000,18000:11000,18000-10000:10000,10000:2000,10000-22000:5000,22000:10000,22000-19000:8000,19000:11000,19000-22000:6000,22000:17000,22000-11000:8000,11000:10000,11000-4000:6000,4000:10000,4000-18000:5000,18000:4000,18000-20000:5000,20000:6000,20000-2000:6000,2000:6000,2000-15000:8000,15000:16000,15000-3000:7000,3000:19000,3000-12000:6000,12000:21000,12000-25000:5000,25000:5000,25000-11000:7000,11000:18000,11000-17000:8000,17000:16000,17000-1000:7000,1000:11000,1000-5000:5000,5000:18000,5000-24000:5000,24000:15000,24000-1000:8000,1000:20000,1000-22000:9000,22000:18000,22000-7000:6000,7000:6000,7000-8000:7000,8000:6000,8000-17000:5000,17000:16000,17000-3000:9000,3000:6000,3000-11000:9000,11000:7000,11000-8000:8000,8000:9000,8000-10000:6000,10000:25000,10000-20000:5000,20000:10000,20000-15000:9000,15000:7000,15000-11000:9000,11000:11000,11000-1000:9000,1000:12000,1000-8000:7000,8000:12000,8000-11000:5000,11000:4000,11000-19000:5000,19000:11000,19000-7000:10000,7000:13000,7000-3000:8000,3000:17000,3000-1000:7000,1000:12000,1000-17000:8000,17000:9000,17000-29000:5000,29000:18000,29000-4000:9000,4000:14000,4000-13000:9000,13000:5000,13000-19000:7000,19000:7000,19000-8000:10000,8000:16000,8000-20000:5000,20000:16000,20000-3000:6000,3000:14000,3000-3000:5000,3000:17000,3000-6000:9000,6000:15000,6000-14000:8000,14000:5000,14000-20000:5000,20000:16000,20000-1000:5000,1000:8000,1000-15000:8000,15000:15000,15000-15000:5000,15000:8000,15000-5000:7000,5000:23000,5000-22000:5000,22000:9000,22000-17000:6000,17000:8000,17000-7000:7000,7000:9000,7000-8000:7000,8000:5000,8000-14000:7000,14000:13000,14000-22000:10000,22000:14000,22000-24000:5000,24000:9000,24000-11000:6000,11000:12000,11000-18000:7000,18000:16000,18000-22000:8000,22000:16000,22000-11000:9000,11000:12000/100000:100000,10000-28000:5000,28000:18000,28000-18000:5000,18000:11000,18000-18000:10000,18000:13000,18000-19000:10000,19000:8000,19000-4000:10000,4000:10000,4000-23000:5000,23000:9000,23000-16000:7000,16000:5000,16000-4000:10000,4000:11000,4000-15000:6000,15000:6000,15000-21000:9000,21000:18000,21000-19000:9000,19000:5000,19000-21000:5000,21000:16000,21000-11000:5000,11000:12000,11000-7000:9000,7000:9000,7000-5000:5000,5000:7000,5000-9000:10000,9000:12000,9000-10000:9000,10000:1000,10000-22000:5000,22000:19000,22000-17000:6000,17000:11000,17000-13000:8000,13000:5000,13000-22000:8000,22000:17000,22000-12000:9000,12000:12000,12000-22000:5000,22000:12000,22000-14000:9000,14000:6000,14000-17000:10000,17000:7000,17000-7000:6000,7000:19000,7000-20000:6000,20000:20000,20000-30000:5000,30000:5000,30000-19000:8000,19000:15000,19000-23000:5000,23000:17000,23000-4000:6000,4000:10000,4000-14000:7000,14000:12000,14000-9000:9000,9000:1000,9000-18000:5000,18000:20000,18000-11000:7000,11000:20000,11000-12000:5000,12000:8000,12000-10000:5000,10000:19000,10000-17000:7000,17000:4000,17000-21000:5000,21000:7000,21000-2000:8000,2000:15000,2000-20000:10000,20000:20000,20000-8000:8000,8000:14000,8000-17000:10000,17000:3000,17000-22000:5000,22000:13000,22000-19000:6000,19000:8000,19000-8000:9000,8000:18000,8000-10000:5000,10000:7000,10000-15000:8000,15000:9000,15000-2000:5000,2000:7000,2000-18000:5000,18000:7000,18000-6000:9000,6000:12000,6000-16000:5000,16000:9000,16000-16000:6000,16000:19000,16000-7000:8000,7000:20000,7000-29000:5000,29000:9000,29000-17000:8000,17000:6000,17000-16000:5000,16000:15000,16000-14000:7000,14000:13000,14000-20000:5000,20000:16000,20000-9000:10000,9000:1000,9000-29000:5000,29000:12000,29000-5000:8000,5000:8000,5000-9000:9000,9000:16000,9000-22000:5000,22000:9000,22000-16000:7000,16000:21000,16000-18000:5000,18000:17000,18000-13000:8000,13000:16000,13000-7000:7000,7000:19000,7000-16000:6000,16000:8000,16000-14000:6000,14000:8000,14000-28000:5000,28000:20000,28000-23000:6000,23000:11000,23000-27000:9000,27000:8000,27000-4000:7000,4000:17000,4000-23000:6000,23000:11000,23000-21000:5000,21000:14000,21000-18000:9000,18000:13000,18000-3000:5000,3000:14000,3000-14000:9000,14000:7000,14000-1000:5000,1000:19000,1000-26000:5000,26000:5000,26000-22000:7000,22000:17000,22000-4000:10000,4000:16000,4000-23000:10000,23000:19000,23000-17000:10000,17000:1000,17000-24000:5000,24000:9000,24000-7000:8000,7000:8000,7000-9000:7000,9000:14000,9000-12000:8000,12000:10000,12000-6000:8000,6000:11000,6000-13000:10000,13000:2000,13000-24000:5000,24000:14000,24000-3000:9000,3000:13000,3000-0:8000,0:20000,0-1000:6000,1000:5000,1000-13000:8000,13000:12000,13000-22000:5000,22000:9000,22000-15000:8000,15000:6000,15000-14000:5000,14000:8000,14000-21000:9000,21000:17000,21000-1000:10000,1000:10000,1000-4000:9000,4000:4000,4000-22000:5000,22000:15000,22000-13000:5000,13000:8000,13000-1000:5000,1000:9000,1000-19000:9000,19000:6000,19000-5000:7000,5000:5000,5000-12000:5000,12000:21000,12000-17000:5000,17000:6000,17000-12000:6000,12000:14000,12000-8000:5000,8000:13000,8000-5000:8000,5000:17000,5000-11000:7000,11000:19000,11000-20000:5000,20000:20000,20000-18000:10000,18000:13000,18000-5000:10000,5000:20000,5000-14000:10000,14000:12000,14000-26000:5000,26000:5000,26000-19000:8000,19000:18000,19000-6000:10000,6000:19000,6000-22000:7000,22000:17000,22000-3000:9000,3000:2000,3000-29000:5000,29000:19000,29000-24000:9000,24000:7000,24000-3000:8000,3000:17000,3000-26000:9000,26000:26000,26000-28000:5000,28000:10000,28000-27000:9000,27000:14000,27000-7000:8000,7000:9000,7000-15000:5000,15000:18000,15000-20000:7000,20000:15000,20000-22000:5000,22000:8000,22000-11000:8000,11000:12000,11000-20000:8000,20000:13000,20000-18000:9000,18000:9000,18000-20000:8000,20000:6000,20000-16000:6000,16000:8000,16000-27000:5000,27000:18000,27000-17000:9000,17000:18000,17000-11000:6000,11000:13000,11000-14000:5000,14000:12000,14000-25000:10000,25000:4000,25000-24000:5000,24000:11000,24000-12000:6000,12000:10000,12000-4000:10000,4000:8000,4000-3000:8000,3000:12000,3000-16000:6000,16000:11000,16000-15000:8000,15000:5000,15000-23000:5000,23000:5000,23000-3000:7000,3000:18000,3000-4000:6000,4000:18000,4000-20000:10000,20000:10000,20000-1000:7000,1000:14000,1000-18000:5000,18000:10000,18000-13000:5000,13000:10000,13000-7000:10000,7000:7000,7000-10000:8000,10000:8000,10000-5000:7000,5000:10000,5000-10000:8000,10000:12000,10000-30000:5000,30000:19000,30000-20000:6000,20000:11000,20000-13000:6000,13000:16000,13000-26000:8000,26000:15000,26000-2000:7000,2000:7000,2000-23000:5000,23000:9000,23000-1000:6000,1000:9000,1000-18000:6000,18000:15000,18000-12000:5000,12000:10000,12000-19000:9000,19000:9000,19000-19000:7000,19000:10000,19000-25000:5000,25000:16000,25000-3000:8000,3000:20000,3000-14000:5000,14000:12000,14000-10000:7000,10000:19000,10000-11000:5000,11000:3000,11000-23000:5000,23000:5000,23000-19000:9000,19000:11000,19000-17000:6000,17000:9000,17000-1000:6000,1000:7000,1000-4000:5000,4000:6000,4000-22000:6000,22000:25000,22000-24000:5000,24000:14000,24000-7000:7000,7000:9000,7000-5000:8000,5000:6000,5000-13000:7000,13000:16000,13000-3000:8000,3000:5000,3000-11000:9000,11000:6000,11000-29000:5000,29000:14000,29000-27000:6000,27000:6000,27000-11000:5000,11000:15000,11000-7000:9000,7000:12000,7000-18000:9000,18000:19000,18000-23000:5000,23000:16000,23000-19000:9000,19000:19000,19000-5000:7000,5000:9000,5000-3000:10000,3000:14000,3000-3000:8000,3000:3000,3000-25000:5000,25000:12000,25000-15000:8000,15000:17000,15000-20000:7000,20000:15000,20000-10000:5000,10000:9000,10000-25000:5000,25000:17000,25000-27000:5000,27000:8000,27000-17000:7000,17000:16000,17000-8000:6000,8000:5000,8000-25000:8000,25000:19000,25000-25000:10000,25000:16000,25000-22000:5000,22000:7000,22000-21000:6000,21000:13000,21000-4000:10000,4000:20000,4000-14000:6000,14000:15000,14000-6000:7000,6000:11000,6000-23000:5000,23000:20000,23000-13000:6000,13000:7000,13000-14000:9000,14000:14000,14000-8000:6000,8000:8000,8000-19000:6000,19000:19000,19000-31000:5000,31000:19000,31000-6000:9000,6000:10000,6000-3000:8000,3000:9000,3000-26000:8000,26000:16000,26000-28000:10000,28000:6000,28000-23000:5000,23000:20000,23000-13000:8000,13000:6000,13000-1000:7000,1000:18000,1000-15000:7000,15000:11000,15000-9000:7000,9000:11000,9000-28000:5000,28000:11000,28000-15000:7000,15000:15000,15000-28000:10000,28000:8000,28000-4000:7000,4000:15000,4000-27000:5000,27000:17000,27000-18000:5000,18000:7000,18000-16000:6000,16000:15000,16000-7000:7000,7000:15000,7000-13000:10000,13000:12000,13000-6000:6000,6000:17000,6000-22000:5000,22000:5000,22000-4000:10000,4000:20000,4000-6000:5000,6000:17000,6000-15000:5000,15000:13000,15000-18000:7000,18000:13000,18000-27000:5000,27000:9000,27000-17000:8000,17000:5000,17000-8000:5000,8000:12000,8000-12000:9000,12000:16000,12000-24000:10000,24000:13000,24000-9000:6000,9000:2000,9000-22000:5000,22000:16000,22000-20000:7000,20000:11000,20000-12000:10000,12000:17000,12000-6000:7000,6000:18000,6000-18000:8000,18000:1000,18000-24000:5000,24000:9000,24000-11000:7000,11000:6000,11000-8000:7000,8000:10000,8000-3000:7000,3000:17000,3000-22000:9000,22000:5000,22000-20000:10000,20000:8000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240309-082822.659596 > /homes/inho/capybara-data/20240309-082822.659596.client
================ TEST COMPLETE =================

[RESULT]20240309-082822.659596, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 529536)
KILLED CAPYBARA PROCESSES
PARSING 20240309-082822.659596 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-082822.659596            && sh ms_avg_99p_lat.sh 20240309-082822.659596            && sh ms_total_even_odd_numreq.sh 20240309-082822.659596            && sh latency_cdf.sh 20240309-082822.659596
ERROR: cat: /homes/inho/capybara-data/20240309-082822.659596.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-082822.659596.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-082822.659596.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-082822.659596.latency_trace: No such file or directory



PARSING 20240309-082822.659596 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-082822.659596
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-082822.659596, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-082937.056353
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1921


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-082937.056353, 2, 100, 0, 1, 100, exponential, 1000, 960, 960, 0, 0, 103.0, 178.0, 322.0, 11245.0, 13299.0, 1709972991, 0



iokerneld killed (pid 531059)
KILLED CAPYBARA PROCESSES
PARSING 20240309-082937.056353 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-082937.056353            && sh ms_avg_99p_lat.sh 20240309-082937.056353            && sh ms_total_even_odd_numreq.sh 20240309-082937.056353            && sh latency_cdf.sh 20240309-082937.056353
DONE
PARSING 20240309-082937.056353 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-082937.056353
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-082937.056353, 2, 100, 0, 1, 100, exponential, 1000, 960, 960, 0, 0, 103.0, 178.0, 322.0, 11245.0, 13299.0, 1709972991, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-083222.631566
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1921


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-083222.631566, 2, 100, 0, 1, 100, exponential, 1000, 960, 960, 0, 0, 103.0, 174.0, 306.0, 13852.0, 15700.0, 1709973157, 0



iokerneld killed (pid 538711)
KILLED CAPYBARA PROCESSES
PARSING 20240309-083222.631566 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-083222.631566            && sh ms_avg_99p_lat.sh 20240309-083222.631566            && sh ms_total_even_odd_numreq.sh 20240309-083222.631566            && sh latency_cdf.sh 20240309-083222.631566
DONE
PARSING 20240309-083222.631566 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-083222.631566
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-083222.631566, 2, 100, 0, 1, 100, exponential, 1000, 960, 960, 0, 0, 103.0, 174.0, 306.0, 13852.0, 15700.0, 1709973157, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-083347.955482
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 31


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-083347.955482, 2, 1, 0, 1, 100, exponential, 10, 16, 16, 0, 0, 102.0, 106.0, 107.0, 107.0, 107.0, 1709973242, 0



iokerneld killed (pid 540249)
KILLED CAPYBARA PROCESSES
PARSING 20240309-083347.955482 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-083347.955482            && sh ms_avg_99p_lat.sh 20240309-083347.955482            && sh ms_total_even_odd_numreq.sh 20240309-083347.955482            && sh latency_cdf.sh 20240309-083347.955482
DONE
PARSING 20240309-083347.955482 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-083347.955482
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-083347.955482, 2, 1, 0, 1, 100, exponential, 10, 16, 16, 0, 0, 102.0, 106.0, 107.0, 107.0, 107.0, 1709973242, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-083909.875128
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-083909.875128, 2, 1, 0, 3, 100, exponential, 10, 0, 0, 0, 1709973564



iokerneld killed (pid 543376)
KILLED CAPYBARA PROCESSES
PARSING 20240309-083909.875128 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-083909.875128            && sh ms_avg_99p_lat.sh 20240309-083909.875128            && sh ms_total_even_odd_numreq.sh 20240309-083909.875128            && sh latency_cdf.sh 20240309-083909.875128
ERROR: cat: /homes/inho/capybara-data/20240309-083909.875128.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-083909.875128.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-083909.875128.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-083909.875128.latency_trace: No such file or directory



PARSING 20240309-083909.875128 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-083909.875128
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-083909.875128, 2, 1, 0, 3, 100, exponential, 10, 0, 0, 0, 1709973564

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '1.2' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-100205.099621
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '1.2' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-100240.147203
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-100240.147203, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 568727)
KILLED CAPYBARA PROCESSES
PARSING 20240309-100240.147203 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-100240.147203            && sh ms_avg_99p_lat.sh 20240309-100240.147203            && sh ms_total_even_odd_numreq.sh 20240309-100240.147203            && sh latency_cdf.sh 20240309-100240.147203
DONE
PARSING 20240309-100240.147203 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-100240.147203
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-100240.147203, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '1.2' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-100356.127919
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-100356.127919, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 570237)
KILLED CAPYBARA PROCESSES
PARSING 20240309-100356.127919 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-100356.127919            && sh ms_avg_99p_lat.sh 20240309-100356.127919            && sh ms_total_even_odd_numreq.sh 20240309-100356.127919            && sh latency_cdf.sh 20240309-100356.127919
DONE
PARSING 20240309-100356.127919 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-100356.127919
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-100356.127919, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '1.2' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-100444.511953
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-100444.511953, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 571682)
KILLED CAPYBARA PROCESSES
PARSING 20240309-100444.511953 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-100444.511953            && sh ms_avg_99p_lat.sh 20240309-100444.511953            && sh ms_total_even_odd_numreq.sh 20240309-100444.511953            && sh latency_cdf.sh 20240309-100444.511953
DONE
PARSING 20240309-100444.511953 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-100444.511953
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-100444.511953, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-100944.814858
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 31


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-100944.814858, 2, 1, 0, 3, 100, exponential, 10, 16, 16, 0, 0, 101.0, 106.0, 110.0, 110.0, 110.0, 1709978999, 0



iokerneld killed (pid 579476)
KILLED CAPYBARA PROCESSES
PARSING 20240309-100944.814858 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-100944.814858            && sh ms_avg_99p_lat.sh 20240309-100944.814858            && sh ms_total_even_odd_numreq.sh 20240309-100944.814858            && sh latency_cdf.sh 20240309-100944.814858
DONE
PARSING 20240309-100944.814858 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-100944.814858
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-100944.814858, 2, 1, 0, 3, 100, exponential, 10, 16, 16, 0, 0, 101.0, 106.0, 110.0, 110.0, 110.0, 1709978999, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-101353.466799
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 91


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-101353.466799, 2, 100, 0, 3, 100, exponential, 10, 18, 18, 0, 1, 108.0, 6048.0, 6686.0, 6686.0, 6686.0, 1709979247, 0



iokerneld killed (pid 581352)
KILLED CAPYBARA PROCESSES
PARSING 20240309-101353.466799 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-101353.466799            && sh ms_avg_99p_lat.sh 20240309-101353.466799            && sh ms_total_even_odd_numreq.sh 20240309-101353.466799            && sh latency_cdf.sh 20240309-101353.466799
DONE
PARSING 20240309-101353.466799 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-101353.466799
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-101353.466799, 2, 100, 0, 3, 100, exponential, 10, 18, 18, 0, 1, 108.0, 6048.0, 6686.0, 6686.0, 6686.0, 1709979247, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-101550.835621
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2279


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-101550.835621, 2, 100, 0, 3, 100, exponential, 1000, 469, 469, 1, 0, 102.0, 130.0, 72546.0, 287421.0, inf, 1709979365, 0



iokerneld killed (pid 582951)
KILLED CAPYBARA PROCESSES
PARSING 20240309-101550.835621 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-101550.835621            && sh ms_avg_99p_lat.sh 20240309-101550.835621            && sh ms_total_even_odd_numreq.sh 20240309-101550.835621            && sh latency_cdf.sh 20240309-101550.835621
DONE
PARSING 20240309-101550.835621 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-101550.835621
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-101550.835621, 2, 100, 0, 3, 100, exponential, 1000, 469, 469, 1, 0, 102.0, 130.0, 72546.0, 287421.0, inf, 1709979365, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-101630.567926
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-101630.567926, 2, 10, 0, 3, 100, exponential, 1000, 983, 983, 0, 0, 101.0, 108.0, 270.0, 30781.0, 38087.0, 1709979405, 0



iokerneld killed (pid 584373)
KILLED CAPYBARA PROCESSES
PARSING 20240309-101630.567926 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-101630.567926            && sh ms_avg_99p_lat.sh 20240309-101630.567926            && sh ms_total_even_odd_numreq.sh 20240309-101630.567926            && sh latency_cdf.sh 20240309-101630.567926
DONE
PARSING 20240309-101630.567926 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-101630.567926
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-101630.567926, 2, 10, 0, 3, 100, exponential, 1000, 983, 983, 0, 0, 101.0, 108.0, 270.0, 30781.0, 38087.0, 1709979405, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-101921.915130
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2284


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-101921.915130, 2, 50, 0, 3, 100, exponential, 1000, 480, 480, 1, 0, 101.0, 162.0, 67787.0, 132295.0, inf, 1709979576, 0



iokerneld killed (pid 586083)
KILLED CAPYBARA PROCESSES
PARSING 20240309-101921.915130 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-101921.915130            && sh ms_avg_99p_lat.sh 20240309-101921.915130            && sh ms_total_even_odd_numreq.sh 20240309-101921.915130            && sh latency_cdf.sh 20240309-101921.915130
DONE
PARSING 20240309-101921.915130 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-101921.915130
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-101921.915130, 2, 50, 0, 3, 100, exponential, 1000, 480, 480, 1, 0, 101.0, 162.0, 67787.0, 132295.0, inf, 1709979576, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [30]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-102902.918882
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2429


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-102902.918882, 2, 30, 0, 3, 100, exponential, 1000, 509, 508, 2, 0, 103.0, 206.0, 94122.0, 199270.0, inf, 1709980157, 0



iokerneld killed (pid 588634)
KILLED CAPYBARA PROCESSES
PARSING 20240309-102902.918882 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-102902.918882            && sh ms_avg_99p_lat.sh 20240309-102902.918882            && sh ms_total_even_odd_numreq.sh 20240309-102902.918882            && sh latency_cdf.sh 20240309-102902.918882
DONE
PARSING 20240309-102902.918882 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-102902.918882
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-102902.918882, 2, 30, 0, 3, 100, exponential, 1000, 509, 508, 2, 0, 103.0, 206.0, 94122.0, 199270.0, inf, 1709980157, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-102951.107448
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-102951.107448, 2, 10, 0, 3, 100, exponential, 1000, 983, 983, 0, 0, 101.0, 107.0, 235.0, 326.0, 444.0, 1709980206, 0



iokerneld killed (pid 590086)
KILLED CAPYBARA PROCESSES
PARSING 20240309-102951.107448 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-102951.107448            && sh ms_avg_99p_lat.sh 20240309-102951.107448            && sh ms_total_even_odd_numreq.sh 20240309-102951.107448            && sh latency_cdf.sh 20240309-102951.107448
DONE
PARSING 20240309-102951.107448 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-102951.107448
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-102951.107448, 2, 10, 0, 3, 100, exponential, 1000, 983, 983, 0, 0, 101.0, 107.0, 235.0, 326.0, 444.0, 1709980206, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [20]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-103040.459387
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2596


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-103040.459387, 2, 20, 0, 3, 100, exponential, 1000, 551, 551, 1, 0, 101.0, 375.0, 44727.0, 71247.0, inf, 1709980255, 0



iokerneld killed (pid 591540)
KILLED CAPYBARA PROCESSES
PARSING 20240309-103040.459387 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-103040.459387            && sh ms_avg_99p_lat.sh 20240309-103040.459387            && sh ms_total_even_odd_numreq.sh 20240309-103040.459387            && sh latency_cdf.sh 20240309-103040.459387
DONE
PARSING 20240309-103040.459387 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-103040.459387
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-103040.459387, 2, 20, 0, 3, 100, exponential, 1000, 551, 551, 1, 0, 101.0, 375.0, 44727.0, 71247.0, inf, 1709980255, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [15]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-103120.504431
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4595


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-103120.504431, 2, 15, 0, 3, 100, exponential, 1000, 969, 969, 0, 0, 101.0, 122.0, 302.0, 22697.0, 31340.0, 1709980295, 0



iokerneld killed (pid 592956)
KILLED CAPYBARA PROCESSES
PARSING 20240309-103120.504431 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-103120.504431            && sh ms_avg_99p_lat.sh 20240309-103120.504431            && sh ms_total_even_odd_numreq.sh 20240309-103120.504431            && sh latency_cdf.sh 20240309-103120.504431
DONE
PARSING 20240309-103120.504431 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-103120.504431
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-103120.504431, 2, 15, 0, 3, 100, exponential, 1000, 969, 969, 0, 0, 101.0, 122.0, 302.0, 22697.0, 31340.0, 1709980295, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [15]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-103159.906970
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 932


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-103159.906970, 2, 15, 0, 3, 100, exponential, 1000, 201, 201, 2, 0, 90.0, 35455.0, 86533.0, inf, inf, 1709980335, 0



iokerneld killed (pid 594372)
KILLED CAPYBARA PROCESSES
PARSING 20240309-103159.906970 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-103159.906970            && sh ms_avg_99p_lat.sh 20240309-103159.906970            && sh ms_total_even_odd_numreq.sh 20240309-103159.906970            && sh latency_cdf.sh 20240309-103159.906970
DONE
PARSING 20240309-103159.906970 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-103159.906970
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-103159.906970, 2, 15, 0, 3, 100, exponential, 1000, 201, 201, 2, 0, 90.0, 35455.0, 86533.0, inf, inf, 1709980335, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-103248.423380
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1356


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-103248.423380, 2, 10, 0, 3, 100, exponential, 1000, 299, 299, 1, 0, 90.0, 11718.0, 33660.0, 65519.0, inf, 1709980383, 0



iokerneld killed (pid 595823)
KILLED CAPYBARA PROCESSES
PARSING 20240309-103248.423380 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-103248.423380            && sh ms_avg_99p_lat.sh 20240309-103248.423380            && sh ms_total_even_odd_numreq.sh 20240309-103248.423380            && sh latency_cdf.sh 20240309-103248.423380
DONE
PARSING 20240309-103248.423380 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-103248.423380
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-103248.423380, 2, 10, 0, 3, 100, exponential, 1000, 299, 299, 1, 0, 90.0, 11718.0, 33660.0, 65519.0, inf, 1709980383, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [5]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-103331.928112
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2704


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-103331.928112, 2, 5, 0, 3, 100, exponential, 1000, 597, 597, 1, 0, 90.0, 6520.0, 19029.0, 31455.0, inf, 1709980427, 0



iokerneld killed (pid 597258)
KILLED CAPYBARA PROCESSES
PARSING 20240309-103331.928112 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-103331.928112            && sh ms_avg_99p_lat.sh 20240309-103331.928112            && sh ms_total_even_odd_numreq.sh 20240309-103331.928112            && sh latency_cdf.sh 20240309-103331.928112
DONE
PARSING 20240309-103331.928112 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-103331.928112
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-103331.928112, 2, 5, 0, 3, 100, exponential, 1000, 597, 597, 1, 0, 90.0, 6520.0, 19029.0, 31455.0, inf, 1709980427, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-103411.972116
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-103411.972116, 2, 1, 0, 3, 100, exponential, 1000, 0, 0, 0, 1709980466



iokerneld killed (pid 598669)
KILLED CAPYBARA PROCESSES
PARSING 20240309-103411.972116 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-103411.972116            && sh ms_avg_99p_lat.sh 20240309-103411.972116            && sh ms_total_even_odd_numreq.sh 20240309-103411.972116            && sh latency_cdf.sh 20240309-103411.972116
ERROR: cat: /homes/inho/capybara-data/20240309-103411.972116.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-103411.972116.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-103411.972116.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-103411.972116.latency_trace: No such file or directory



PARSING 20240309-103411.972116 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-103411.972116
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-103411.972116, 2, 1, 0, 3, 100, exponential, 1000, 0, 0, 0, 1709980466

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(500, 500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123156.995971
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-123156.995971, 2, 1, 0, 3, 100, exponential, 500, 0, 0, 0, 1709987531



iokerneld killed (pid 614468)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123156.995971 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123156.995971            && sh ms_avg_99p_lat.sh 20240309-123156.995971            && sh ms_total_even_odd_numreq.sh 20240309-123156.995971            && sh latency_cdf.sh 20240309-123156.995971
ERROR: cat: /homes/inho/capybara-data/20240309-123156.995971.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-123156.995971.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-123156.995971.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-123156.995971.latency_trace: No such file or directory



PARSING 20240309-123156.995971 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123156.995971
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123156.995971, 2, 1, 0, 3, 100, exponential, 500, 0, 0, 0, 1709987531

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(500, 500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123300.271747
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-123300.271747, 2, 1, 0, 3, 100, exponential, 500, 0, 0, 0, 1709987594



iokerneld killed (pid 615953)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123300.271747 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123300.271747            && sh ms_avg_99p_lat.sh 20240309-123300.271747            && sh ms_total_even_odd_numreq.sh 20240309-123300.271747            && sh latency_cdf.sh 20240309-123300.271747
ERROR: cat: /homes/inho/capybara-data/20240309-123300.271747.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-123300.271747.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-123300.271747.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-123300.271747.latency_trace: No such file or directory



PARSING 20240309-123300.271747 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123300.271747
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123300.271747, 2, 1, 0, 3, 100, exponential, 500, 0, 0, 0, 1709987594

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123413.559176
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4543


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-123413.559176, 2, 1, 0, 3, 100, exponential, 1000, 1005, 1003, 6, 0, 5784.0, 9475.0, 14866.0, inf, inf, 1709987668, 0



iokerneld killed (pid 617457)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123413.559176 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123413.559176            && sh ms_avg_99p_lat.sh 20240309-123413.559176            && sh ms_total_even_odd_numreq.sh 20240309-123413.559176            && sh latency_cdf.sh 20240309-123413.559176
DONE
PARSING 20240309-123413.559176 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123413.559176
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123413.559176, 2, 1, 0, 3, 100, exponential, 1000, 1005, 1003, 6, 0, 5784.0, 9475.0, 14866.0, inf, inf, 1709987668, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123503.475554
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-123503.475554, 2, 1, 0, 3, 100, exponential, 1000, 0, 0, 0, 1709987718



iokerneld killed (pid 618919)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123503.475554 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123503.475554            && sh ms_avg_99p_lat.sh 20240309-123503.475554            && sh ms_total_even_odd_numreq.sh 20240309-123503.475554            && sh latency_cdf.sh 20240309-123503.475554
ERROR: cat: /homes/inho/capybara-data/20240309-123503.475554.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-123503.475554.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-123503.475554.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-123503.475554.latency_trace: No such file or directory



PARSING 20240309-123503.475554 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123503.475554
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123503.475554, 2, 1, 0, 3, 100, exponential, 1000, 0, 0, 0, 1709987718

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [3]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123629.399725
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4549


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-123629.399725, 2, 1, 0, 3, 100, exponential, 1000, 1005, 1005, 0, 0, 101.0, 169.0, 351.0, 31756.0, 34302.0, 1709987804, 0



iokerneld killed (pid 620440)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123629.399725 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123629.399725            && sh ms_avg_99p_lat.sh 20240309-123629.399725            && sh ms_total_even_odd_numreq.sh 20240309-123629.399725            && sh latency_cdf.sh 20240309-123629.399725
DONE
PARSING 20240309-123629.399725 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123629.399725
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123629.399725, 2, 1, 0, 3, 100, exponential, 1000, 1005, 1005, 0, 0, 101.0, 169.0, 351.0, 31756.0, 34302.0, 1709987804, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123720.623128
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4542


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-123720.623128, 2, 1, 0, 10, 100, exponential, 1000, 1005, 1003, 7, 0, 6750.0, 10915.0, 17509.0, inf, inf, 1709987855, 0



iokerneld killed (pid 621893)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123720.623128 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123720.623128            && sh ms_avg_99p_lat.sh 20240309-123720.623128            && sh ms_total_even_odd_numreq.sh 20240309-123720.623128            && sh latency_cdf.sh 20240309-123720.623128
DONE
PARSING 20240309-123720.623128 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123720.623128
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123720.623128, 2, 1, 0, 10, 100, exponential, 1000, 1005, 1003, 7, 0, 6750.0, 10915.0, 17509.0, inf, inf, 1709987855, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(500, 500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123805.076288
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2296


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-123805.076288, 2, 1, 0, 10, 100, exponential, 500, 509, 509, 2, 0, 3364.0, 7747.0, 13736.0, 25690.0, inf, 1709987900, 0



iokerneld killed (pid 623324)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123805.076288 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123805.076288            && sh ms_avg_99p_lat.sh 20240309-123805.076288            && sh ms_total_even_odd_numreq.sh 20240309-123805.076288            && sh latency_cdf.sh 20240309-123805.076288
DONE
PARSING 20240309-123805.076288 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123805.076288
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123805.076288, 2, 1, 0, 10, 100, exponential, 500, 509, 509, 2, 0, 3364.0, 7747.0, 13736.0, 25690.0, inf, 1709987900, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(500, 500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-123912.843997
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4548


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-123912.843997, 2, 1, 0, 10, 100, exponential, 500, 502, 502, 1, 0, 1470.0, 4761.0, 9329.0, 15207.0, inf, 1709987968, 0



iokerneld killed (pid 624817)
KILLED CAPYBARA PROCESSES
PARSING 20240309-123912.843997 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-123912.843997            && sh ms_avg_99p_lat.sh 20240309-123912.843997            && sh ms_total_even_odd_numreq.sh 20240309-123912.843997            && sh latency_cdf.sh 20240309-123912.843997
DONE
PARSING 20240309-123912.843997 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-123912.843997
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-123912.843997, 2, 1, 0, 10, 100, exponential, 500, 502, 502, 1, 0, 1470.0, 4761.0, 9329.0, 15207.0, inf, 1709987968, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(500, 500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-124036.283557
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4548


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-124036.283557, 2, 1, 0, 10, 100, exponential, 500, 502, 502, 1, 0, 1467.0, 4753.0, 9082.0, 14675.0, inf, 1709988051, 0



iokerneld killed (pid 626337)
KILLED CAPYBARA PROCESSES
PARSING 20240309-124036.283557 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-124036.283557            && sh ms_avg_99p_lat.sh 20240309-124036.283557            && sh ms_total_even_odd_numreq.sh 20240309-124036.283557            && sh latency_cdf.sh 20240309-124036.283557
DONE
PARSING 20240309-124036.283557 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-124036.283557
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-124036.283557, 2, 1, 0, 10, 100, exponential, 500, 502, 502, 1, 0, 1467.0, 4753.0, 9082.0, 14675.0, inf, 1709988051, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-124121.455220
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9059


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-124121.455220, 2, 1, 0, 10, 100, exponential, 1000, 1002, 1002, 4, 0, 3791.0, 6867.0, 10718.0, 37982.0, inf, 1709988097, 0



iokerneld killed (pid 627776)
KILLED CAPYBARA PROCESSES
PARSING 20240309-124121.455220 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-124121.455220            && sh ms_avg_99p_lat.sh 20240309-124121.455220            && sh ms_total_even_odd_numreq.sh 20240309-124121.455220            && sh latency_cdf.sh 20240309-124121.455220
DONE
PARSING 20240309-124121.455220 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-124121.455220
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-124121.455220, 2, 1, 0, 10, 100, exponential, 1000, 1002, 1002, 4, 0, 3791.0, 6867.0, 10718.0, 37982.0, inf, 1709988097, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-124425.148407
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 105


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-124425.148407, 2, 1, 0, 10, 100, exponential, 10, 11, 11, 0, 0, 100.0, 104.0, 109.0, 114.0, 114.0, 1709988280, 0



iokerneld killed (pid 629507)
KILLED CAPYBARA PROCESSES
PARSING 20240309-124425.148407 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-124425.148407            && sh ms_avg_99p_lat.sh 20240309-124425.148407            && sh ms_total_even_odd_numreq.sh 20240309-124425.148407            && sh latency_cdf.sh 20240309-124425.148407
DONE
PARSING 20240309-124425.148407 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-124425.148407
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-124425.148407, 2, 1, 0, 10, 100, exponential, 10, 11, 11, 0, 0, 100.0, 104.0, 109.0, 114.0, 114.0, 1709988280, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-124639.099346
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-124639.099346, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988413



iokerneld killed (pid 631180)
KILLED CAPYBARA PROCESSES
PARSING 20240309-124639.099346 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-124639.099346            && sh ms_avg_99p_lat.sh 20240309-124639.099346            && sh ms_total_even_odd_numreq.sh 20240309-124639.099346            && sh latency_cdf.sh 20240309-124639.099346
ERROR: cat: /homes/inho/capybara-data/20240309-124639.099346.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-124639.099346.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-124639.099346.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-124639.099346.latency_trace: No such file or directory



PARSING 20240309-124639.099346 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-124639.099346
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-124639.099346, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988413

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-124823.327357
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9054


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-124823.327357, 2, 1, 0, 10, 100, exponential, 1000, 1002, 1001, 9, 0, 8756.0, 13200.0, 17610.0, 22832.0, inf, 1709988518, 0



iokerneld killed (pid 632747)
KILLED CAPYBARA PROCESSES
PARSING 20240309-124823.327357 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-124823.327357            && sh ms_avg_99p_lat.sh 20240309-124823.327357            && sh ms_total_even_odd_numreq.sh 20240309-124823.327357            && sh latency_cdf.sh 20240309-124823.327357
DONE
PARSING 20240309-124823.327357 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-124823.327357
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-124823.327357, 2, 1, 0, 10, 100, exponential, 1000, 1002, 1001, 9, 0, 8756.0, 13200.0, 17610.0, 22832.0, inf, 1709988518, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-125139.651203
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-125139.651203, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988713



iokerneld killed (pid 634509)
KILLED CAPYBARA PROCESSES
PARSING 20240309-125139.651203 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-125139.651203            && sh ms_avg_99p_lat.sh 20240309-125139.651203            && sh ms_total_even_odd_numreq.sh 20240309-125139.651203            && sh latency_cdf.sh 20240309-125139.651203
ERROR: cat: /homes/inho/capybara-data/20240309-125139.651203.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-125139.651203.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-125139.651203.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-125139.651203.latency_trace: No such file or directory



PARSING 20240309-125139.651203 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-125139.651203
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-125139.651203, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988713

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-125246.883123
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-125246.883123, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988781



iokerneld killed (pid 635995)
KILLED CAPYBARA PROCESSES
PARSING 20240309-125246.883123 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-125246.883123            && sh ms_avg_99p_lat.sh 20240309-125246.883123            && sh ms_total_even_odd_numreq.sh 20240309-125246.883123            && sh latency_cdf.sh 20240309-125246.883123
ERROR: cat: /homes/inho/capybara-data/20240309-125246.883123.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-125246.883123.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-125246.883123.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-125246.883123.latency_trace: No such file or directory



PARSING 20240309-125246.883123 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-125246.883123
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-125246.883123, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988781

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-125408.015099
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240309-125408.015099, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988862



iokerneld killed (pid 637514)
KILLED CAPYBARA PROCESSES
PARSING 20240309-125408.015099 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-125408.015099            && sh ms_avg_99p_lat.sh 20240309-125408.015099            && sh ms_total_even_odd_numreq.sh 20240309-125408.015099            && sh latency_cdf.sh 20240309-125408.015099
ERROR: cat: /homes/inho/capybara-data/20240309-125408.015099.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240309-125408.015099.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-125408.015099.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240309-125408.015099.latency_trace: No such file or directory



PARSING 20240309-125408.015099 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-125408.015099
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-125408.015099, 2, 1, 0, 10, 100, exponential, 1000, 0, 0, 0, 1709988862

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240309-125454.303425
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9062


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240309-125454.303425, 2, 1, 0, 10, 100, exponential, 1000, 1002, 1002, 1, 0, 778.0, 2474.0, 5315.0, 25792.0, inf, 1709988909, 0



iokerneld killed (pid 638949)
KILLED CAPYBARA PROCESSES
PARSING 20240309-125454.303425 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240309-125454.303425            && sh ms_avg_99p_lat.sh 20240309-125454.303425            && sh ms_total_even_odd_numreq.sh 20240309-125454.303425            && sh latency_cdf.sh 20240309-125454.303425
DONE
PARSING 20240309-125454.303425 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240309-125454.303425
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240309-125454.303425, 2, 1, 0, 10, 100, exponential, 1000, 1002, 1002, 1, 0, 778.0, 2474.0, 5315.0, 25792.0, inf, 1709988909, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-002737.559637
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240312-002737.559637, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 1212155)
KILLED CAPYBARA PROCESSES
PARSING 20240312-002737.559637 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-002737.559637            && sh ms_avg_99p_lat.sh 20240312-002737.559637            && sh ms_total_even_odd_numreq.sh 20240312-002737.559637            && sh latency_cdf.sh 20240312-002737.559637
DONE
PARSING 20240312-002737.559637 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-002737.559637
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-002737.559637, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-002846.903275
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240312-002846.903275, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 1213648)
KILLED CAPYBARA PROCESSES
PARSING 20240312-002846.903275 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-002846.903275            && sh ms_avg_99p_lat.sh 20240312-002846.903275            && sh ms_total_even_odd_numreq.sh 20240312-002846.903275            && sh latency_cdf.sh 20240312-002846.903275
DONE
PARSING 20240312-002846.903275 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-002846.903275
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-002846.903275, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-003522.551775
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9063


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240312-003522.551775, 2, 1, 0, 10000, 100, exponential, 1000, 1002, 1002, 0, 0, 9.0, 10.0, 11.0, 29.0, 59.0, 1710203737, 0



iokerneld killed (pid 1218439)
KILLED CAPYBARA PROCESSES
PARSING 20240312-003522.551775 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-003522.551775            && sh ms_avg_99p_lat.sh 20240312-003522.551775            && sh ms_total_even_odd_numreq.sh 20240312-003522.551775            && sh latency_cdf.sh 20240312-003522.551775
DONE
PARSING 20240312-003522.551775 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-003522.551775
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-003522.551775, 2, 1, 0, 10000, 100, exponential, 1000, 1002, 1002, 0, 0, 9.0, 10.0, 11.0, 29.0, 59.0, 1710203737, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-003957.919131
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8395


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-003957.919131.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1226362 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=1000 --threads=1 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-003957.919131 > /homes/inho/capybara-data2/20240312-003957.919131.client
================ TEST COMPLETE =================

[RESULT]20240312-003957.919131, 2, 1, 0, 10000, 100, exponential, 1000, 1002, 928, 668, 0, 402952.0, 654892.0, inf, inf, inf, 1710204013, 0



iokerneld killed (pid 1226138)
KILLED CAPYBARA PROCESSES
PARSING 20240312-003957.919131 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-003957.919131            && sh ms_avg_99p_lat.sh 20240312-003957.919131            && sh ms_total_even_odd_numreq.sh 20240312-003957.919131            && sh latency_cdf.sh 20240312-003957.919131
ERROR: cat: /homes/inho/capybara-data/20240312-003957.919131.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-003957.919131.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-003957.919131.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-003957.919131.latency_trace: No such file or directory



PARSING 20240312-003957.919131 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-003957.919131
ERROR: paste: /homes/inho/capybara-data/20240312-003957.919131.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-003957.919131, 2, 1, 0, 10000, 100, exponential, 1000, 1002, 928, 668, 0, 402952.0, 654892.0, inf, inf, inf, 1710204013, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010201.927834
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 868


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010201.927834.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1230595 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=1000 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010201.927834 > /homes/inho/capybara-data2/20240312-010201.927834.client
================ TEST COMPLETE =================

[RESULT]20240312-010201.927834, 2, 1, 0, 10000, 100, exponential, 1000, 1050, 956, 85, 0, 53124.0, 81801.0, inf, inf, inf, 1710205336, 0



iokerneld killed (pid 1230371)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010201.927834 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010201.927834            && sh ms_avg_99p_lat.sh 20240312-010201.927834            && sh ms_total_even_odd_numreq.sh 20240312-010201.927834            && sh latency_cdf.sh 20240312-010201.927834
ERROR: cat: /homes/inho/capybara-data/20240312-010201.927834.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010201.927834.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010201.927834.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010201.927834.latency_trace: No such file or directory



PARSING 20240312-010201.927834 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010201.927834
ERROR: paste: /homes/inho/capybara-data/20240312-010201.927834.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010201.927834, 2, 1, 0, 10000, 100, exponential, 1000, 1050, 956, 85, 0, 53124.0, 81801.0, inf, inf, inf, 1710205336, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010244.139932
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010244.139932.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1232040 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010244.139932 > /homes/inho/capybara-data2/20240312-010244.139932.client
================ TEST COMPLETE =================

[RESULT]20240312-010244.139932, 2, 1, 0, 10000, 100, exponential, 10, 24, 24, 0, 0, 105.0, 112.0, 112.0, 112.0, 112.0, 1710205378, 0



iokerneld killed (pid 1231817)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010244.139932 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010244.139932            && sh ms_avg_99p_lat.sh 20240312-010244.139932            && sh ms_total_even_odd_numreq.sh 20240312-010244.139932            && sh latency_cdf.sh 20240312-010244.139932
ERROR: cat: /homes/inho/capybara-data/20240312-010244.139932.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010244.139932.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010244.139932.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010244.139932.latency_trace: No such file or directory



PARSING 20240312-010244.139932 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010244.139932
ERROR: paste: /homes/inho/capybara-data/20240312-010244.139932.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010244.139932, 2, 1, 0, 10000, 100, exponential, 10, 24, 24, 0, 0, 105.0, 112.0, 112.0, 112.0, 112.0, 1710205378, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(100, 100 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010349.155687
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 104


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010349.155687.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1233526 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=100 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010349.155687 > /homes/inho/capybara-data2/20240312-010349.155687.client
================ TEST COMPLETE =================

[RESULT]20240312-010349.155687, 2, 1, 0, 10000, 100, exponential, 100, 114, 113, 1, 0, 5368.0, 20479.0, 41553.0, inf, inf, 1710205443, 0



iokerneld killed (pid 1233304)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010349.155687 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010349.155687            && sh ms_avg_99p_lat.sh 20240312-010349.155687            && sh ms_total_even_odd_numreq.sh 20240312-010349.155687            && sh latency_cdf.sh 20240312-010349.155687
ERROR: cat: /homes/inho/capybara-data/20240312-010349.155687.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010349.155687.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010349.155687.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010349.155687.latency_trace: No such file or directory



PARSING 20240312-010349.155687 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010349.155687
ERROR: paste: /homes/inho/capybara-data/20240312-010349.155687.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010349.155687, 2, 1, 0, 10000, 100, exponential, 100, 114, 113, 1, 0, 5368.0, 20479.0, 41553.0, inf, inf, 1710205443, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(100, 100 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010435.983148
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 104


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010435.983148.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1234969 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=100 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010435.983148 > /homes/inho/capybara-data2/20240312-010435.983148.client
================ TEST COMPLETE =================

[RESULT]20240312-010435.983148, 2, 1, 0, 10, 100, exponential, 100, 114, 113, 1, 0, 5371.0, 20476.0, 41549.0, inf, inf, 1710205490, 0



iokerneld killed (pid 1234746)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010435.983148 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010435.983148            && sh ms_avg_99p_lat.sh 20240312-010435.983148            && sh ms_total_even_odd_numreq.sh 20240312-010435.983148            && sh latency_cdf.sh 20240312-010435.983148
ERROR: cat: /homes/inho/capybara-data/20240312-010435.983148.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010435.983148.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010435.983148.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010435.983148.latency_trace: No such file or directory



PARSING 20240312-010435.983148 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010435.983148
ERROR: paste: /homes/inho/capybara-data/20240312-010435.983148.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010435.983148, 2, 1, 0, 10, 100, exponential, 100, 114, 113, 1, 0, 5371.0, 20476.0, 41549.0, inf, inf, 1710205490, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [5]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(100, 100 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010516.903677
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 105


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010516.903677.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1236399 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=100 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010516.903677 > /homes/inho/capybara-data2/20240312-010516.903677.client
================ TEST COMPLETE =================

[RESULT]20240312-010516.903677, 2, 1, 0, 5, 100, exponential, 100, 114, 114, 0, 0, 100.0, 103.0, 125.0, 172.0, 172.0, 1710205531, 0



iokerneld killed (pid 1236177)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010516.903677 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010516.903677            && sh ms_avg_99p_lat.sh 20240312-010516.903677            && sh ms_total_even_odd_numreq.sh 20240312-010516.903677            && sh latency_cdf.sh 20240312-010516.903677
ERROR: cat: /homes/inho/capybara-data/20240312-010516.903677.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010516.903677.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010516.903677.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010516.903677.latency_trace: No such file or directory



PARSING 20240312-010516.903677 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010516.903677
ERROR: paste: /homes/inho/capybara-data/20240312-010516.903677.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010516.903677, 2, 1, 0, 5, 100, exponential, 100, 114, 114, 0, 0, 100.0, 103.0, 125.0, 172.0, 172.0, 1710205531, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(90, 90 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010604.891691
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 94


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010604.891691.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1237847 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=90 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010604.891691 > /homes/inho/capybara-data2/20240312-010604.891691.client
================ TEST COMPLETE =================

[RESULT]20240312-010604.891691, 2, 1, 0, 10, 100, exponential, 90, 101, 100, 1, 0, 6649.0, 21603.0, inf, inf, inf, 1710205579, 0



iokerneld killed (pid 1237625)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010604.891691 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010604.891691            && sh ms_avg_99p_lat.sh 20240312-010604.891691            && sh ms_total_even_odd_numreq.sh 20240312-010604.891691            && sh latency_cdf.sh 20240312-010604.891691
ERROR: cat: /homes/inho/capybara-data/20240312-010604.891691.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010604.891691.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010604.891691.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010604.891691.latency_trace: No such file or directory



PARSING 20240312-010604.891691 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010604.891691
ERROR: paste: /homes/inho/capybara-data/20240312-010604.891691.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010604.891691, 2, 1, 0, 10, 100, exponential, 90, 101, 100, 1, 0, 6649.0, 21603.0, inf, inf, inf, 1710205579, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010640.819138
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 75


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010640.819138.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1239258 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010640.819138 > /homes/inho/capybara-data2/20240312-010640.819138.client
================ TEST COMPLETE =================

[RESULT]20240312-010640.819138, 2, 1, 0, 10, 100, exponential, 70, 80, 79, 1, 0, 7454.0, 27747.0, inf, inf, inf, 1710205615, 0



iokerneld killed (pid 1239035)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010640.819138 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010640.819138            && sh ms_avg_99p_lat.sh 20240312-010640.819138            && sh ms_total_even_odd_numreq.sh 20240312-010640.819138            && sh latency_cdf.sh 20240312-010640.819138
ERROR: cat: /homes/inho/capybara-data/20240312-010640.819138.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010640.819138.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010640.819138.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010640.819138.latency_trace: No such file or directory



PARSING 20240312-010640.819138 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010640.819138
ERROR: paste: /homes/inho/capybara-data/20240312-010640.819138.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010640.819138, 2, 1, 0, 10, 100, exponential, 70, 80, 79, 1, 0, 7454.0, 27747.0, inf, inf, inf, 1710205615, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(50, 50 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010720.511749
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010720.511749.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1240690 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=50 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010720.511749 > /homes/inho/capybara-data2/20240312-010720.511749.client
================ TEST COMPLETE =================

[RESULT]20240312-010720.511749, 2, 1, 0, 10, 100, exponential, 50, 56, 56, 0, 0, 101.0, 109.0, 146.0, 146.0, 146.0, 1710205655, 0



iokerneld killed (pid 1240467)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010720.511749 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010720.511749            && sh ms_avg_99p_lat.sh 20240312-010720.511749            && sh ms_total_even_odd_numreq.sh 20240312-010720.511749            && sh latency_cdf.sh 20240312-010720.511749
ERROR: cat: /homes/inho/capybara-data/20240312-010720.511749.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010720.511749.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010720.511749.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010720.511749.latency_trace: No such file or directory



PARSING 20240312-010720.511749 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010720.511749
ERROR: paste: /homes/inho/capybara-data/20240312-010720.511749.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010720.511749, 2, 1, 0, 10, 100, exponential, 50, 56, 56, 0, 0, 101.0, 109.0, 146.0, 146.0, 146.0, 1710205655, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [7]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010800.559901
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010800.559901.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1242110 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010800.559901 > /homes/inho/capybara-data2/20240312-010800.559901.client
================ TEST COMPLETE =================

[RESULT]20240312-010800.559901, 2, 1, 0, 7, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 107.0, 107.0, 107.0, 1710205695, 0



iokerneld killed (pid 1241888)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010800.559901 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010800.559901            && sh ms_avg_99p_lat.sh 20240312-010800.559901            && sh ms_total_even_odd_numreq.sh 20240312-010800.559901            && sh latency_cdf.sh 20240312-010800.559901
ERROR: cat: /homes/inho/capybara-data/20240312-010800.559901.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010800.559901.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010800.559901.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010800.559901.latency_trace: No such file or directory



PARSING 20240312-010800.559901 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010800.559901
ERROR: paste: /homes/inho/capybara-data/20240312-010800.559901.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010800.559901, 2, 1, 0, 7, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 107.0, 107.0, 107.0, 1710205695, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [9]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010835.211062
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010835.211062.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1243506 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010835.211062 > /homes/inho/capybara-data2/20240312-010835.211062.client
================ TEST COMPLETE =================

[RESULT]20240312-010835.211062, 2, 1, 0, 9, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 158.0, 158.0, 158.0, 1710205729, 0



iokerneld killed (pid 1243283)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010835.211062 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010835.211062            && sh ms_avg_99p_lat.sh 20240312-010835.211062            && sh ms_total_even_odd_numreq.sh 20240312-010835.211062            && sh latency_cdf.sh 20240312-010835.211062
ERROR: cat: /homes/inho/capybara-data/20240312-010835.211062.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010835.211062.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010835.211062.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010835.211062.latency_trace: No such file or directory



PARSING 20240312-010835.211062 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010835.211062
ERROR: paste: /homes/inho/capybara-data/20240312-010835.211062.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010835.211062, 2, 1, 0, 9, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 158.0, 158.0, 158.0, 1710205729, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-010933.795742
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-010933.795742.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1244970 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-010933.795742 > /homes/inho/capybara-data2/20240312-010933.795742.client
================ TEST COMPLETE =================

[RESULT]20240312-010933.795742, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 118.0, 118.0, 118.0, 1710205788, 0



iokerneld killed (pid 1244748)
KILLED CAPYBARA PROCESSES
PARSING 20240312-010933.795742 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-010933.795742            && sh ms_avg_99p_lat.sh 20240312-010933.795742            && sh ms_total_even_odd_numreq.sh 20240312-010933.795742            && sh latency_cdf.sh 20240312-010933.795742
ERROR: cat: /homes/inho/capybara-data/20240312-010933.795742.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-010933.795742.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010933.795742.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-010933.795742.latency_trace: No such file or directory



PARSING 20240312-010933.795742 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-010933.795742
ERROR: paste: /homes/inho/capybara-data/20240312-010933.795742.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-010933.795742, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 118.0, 118.0, 118.0, 1710205788, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011028.171444
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-011028.171444.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1246417 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011028.171444 > /homes/inho/capybara-data2/20240312-011028.171444.client
================ TEST COMPLETE =================

[RESULT]20240312-011028.171444, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 158.0, 158.0, 158.0, 1710205842, 0



iokerneld killed (pid 1246194)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011028.171444 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011028.171444            && sh ms_avg_99p_lat.sh 20240312-011028.171444            && sh ms_total_even_odd_numreq.sh 20240312-011028.171444            && sh latency_cdf.sh 20240312-011028.171444
ERROR: cat: /homes/inho/capybara-data/20240312-011028.171444.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011028.171444.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011028.171444.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011028.171444.latency_trace: No such file or directory



PARSING 20240312-011028.171444 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011028.171444
ERROR: paste: /homes/inho/capybara-data/20240312-011028.171444.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011028.171444, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 158.0, 158.0, 158.0, 1710205842, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011113.823067
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-011113.823067.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1247850 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011113.823067 > /homes/inho/capybara-data2/20240312-011113.823067.client
================ TEST COMPLETE =================

[RESULT]20240312-011113.823067, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 163.0, 163.0, 163.0, 1710205888, 0



iokerneld killed (pid 1247625)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011113.823067 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011113.823067            && sh ms_avg_99p_lat.sh 20240312-011113.823067            && sh ms_total_even_odd_numreq.sh 20240312-011113.823067            && sh latency_cdf.sh 20240312-011113.823067
ERROR: cat: /homes/inho/capybara-data/20240312-011113.823067.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011113.823067.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011113.823067.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011113.823067.latency_trace: No such file or directory



PARSING 20240312-011113.823067 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011113.823067
ERROR: paste: /homes/inho/capybara-data/20240312-011113.823067.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011113.823067, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 163.0, 163.0, 163.0, 1710205888, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011156.423606
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-011156.423606.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1249266 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011156.423606 > /homes/inho/capybara-data2/20240312-011156.423606.client
================ TEST COMPLETE =================

[RESULT]20240312-011156.423606, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 104.0, 115.0, 115.0, 115.0, 1710205931, 0



iokerneld killed (pid 1249043)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011156.423606 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011156.423606            && sh ms_avg_99p_lat.sh 20240312-011156.423606            && sh ms_total_even_odd_numreq.sh 20240312-011156.423606            && sh latency_cdf.sh 20240312-011156.423606
ERROR: cat: /homes/inho/capybara-data/20240312-011156.423606.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011156.423606.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011156.423606.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011156.423606.latency_trace: No such file or directory



PARSING 20240312-011156.423606 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011156.423606
ERROR: paste: /homes/inho/capybara-data/20240312-011156.423606.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011156.423606, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 104.0, 115.0, 115.0, 115.0, 1710205931, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011233.392209
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-011233.392209.latency
thread '<unnamed>' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1250661 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011233.392209 > /homes/inho/capybara-data2/20240312-011233.392209.client
================ TEST COMPLETE =================

[RESULT]20240312-011233.392209, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 133.0, 133.0, 133.0, 1710205968, 0



iokerneld killed (pid 1250439)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011233.392209 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011233.392209            && sh ms_avg_99p_lat.sh 20240312-011233.392209            && sh ms_total_even_odd_numreq.sh 20240312-011233.392209            && sh latency_cdf.sh 20240312-011233.392209
ERROR: cat: /homes/inho/capybara-data/20240312-011233.392209.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011233.392209.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011233.392209.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011233.392209.latency_trace: No such file or directory



PARSING 20240312-011233.392209 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011233.392209
ERROR: paste: /homes/inho/capybara-data/20240312-011233.392209.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011233.392209, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 133.0, 133.0, 133.0, 1710205968, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011308.639077
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-011308.639077.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1252063 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011308.639077 > /homes/inho/capybara-data2/20240312-011308.639077.client
================ TEST COMPLETE =================

[RESULT]20240312-011308.639077, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 122.0, 122.0, 122.0, 1710206003, 0



iokerneld killed (pid 1251841)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011308.639077 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011308.639077            && sh ms_avg_99p_lat.sh 20240312-011308.639077            && sh ms_total_even_odd_numreq.sh 20240312-011308.639077            && sh latency_cdf.sh 20240312-011308.639077
ERROR: cat: /homes/inho/capybara-data/20240312-011308.639077.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011308.639077.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011308.639077.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011308.639077.latency_trace: No such file or directory



PARSING 20240312-011308.639077 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011308.639077
ERROR: paste: /homes/inho/capybara-data/20240312-011308.639077.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011308.639077, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 100.0, 105.0, 122.0, 122.0, 122.0, 1710206003, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011343.755986
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/backend.rs:120:88:
called `Result::unwrap()` on an `Err` value: -1
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1253325 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011343.755986 > /homes/inho/capybara-data2/20240312-011343.755986.client
================ TEST COMPLETE =================

[RESULT]20240312-011343.755986, 2, 1, 0, 10, 100, N/A



iokerneld killed (pid 1253331)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011343.755986 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011343.755986            && sh ms_avg_99p_lat.sh 20240312-011343.755986            && sh ms_total_even_odd_numreq.sh 20240312-011343.755986            && sh latency_cdf.sh 20240312-011343.755986
ERROR: cat: /homes/inho/capybara-data/20240312-011343.755986.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011343.755986.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011343.755986.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011343.755986.latency_trace: No such file or directory



PARSING 20240312-011343.755986 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011343.755986
ERROR: paste: /homes/inho/capybara-data/20240312-011343.755986.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011343.755986, 2, 1, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011417.339397
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 76


 Writing data into files...
Failed to create file /homes/inho/capybara-data2/20240312-011417.339397.latency
thread 'main' panicked at src/main.rs:624:42:
Failed to open file: Os { code: 13, kind: PermissionDenied, message: "Permission denied" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1254937 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=70 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data2/20240312-011417.339397 > /homes/inho/capybara-data2/20240312-011417.339397.client
================ TEST COMPLETE =================

[RESULT]20240312-011417.339397, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 102.0, 106.0, 109.0, 109.0, 109.0, 1710206072, 0



iokerneld killed (pid 1254714)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011417.339397 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011417.339397            && sh ms_avg_99p_lat.sh 20240312-011417.339397            && sh ms_total_even_odd_numreq.sh 20240312-011417.339397            && sh latency_cdf.sh 20240312-011417.339397
ERROR: cat: /homes/inho/capybara-data/20240312-011417.339397.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011417.339397.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011417.339397.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011417.339397.latency_trace: No such file or directory



PARSING 20240312-011417.339397 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011417.339397
ERROR: paste: /homes/inho/capybara-data/20240312-011417.339397.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011417.339397, 2, 1, 0, 10, 100, exponential, 70, 80, 80, 0, 0, 102.0, 106.0, 109.0, 109.0, 109.0, 1710206072, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'

### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240312-011527.048145
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 75


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240312-011527.048145, 2, 1, 0, 10, 100, exponential, 70, 80, 79, 1, 0, 9373.0, 27748.0, inf, inf, inf, 1710206141, 0



iokerneld killed (pid 1256297)
KILLED CAPYBARA PROCESSES
PARSING 20240312-011527.048145 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240312-011527.048145            && sh ms_avg_99p_lat.sh 20240312-011527.048145            && sh ms_total_even_odd_numreq.sh 20240312-011527.048145            && sh latency_cdf.sh 20240312-011527.048145
ERROR: cat: /homes/inho/capybara-data/20240312-011527.048145.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240312-011527.048145.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011527.048145.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240312-011527.048145.latency_trace: No such file or directory



PARSING 20240312-011527.048145 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240312-011527.048145
ERROR: paste: /homes/inho/capybara-data/20240312-011527.048145.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240312-011527.048145, 2, 1, 0, 10, 100, exponential, 70, 80, 79, 1, 0, 9373.0, 27748.0, inf, inf, inf, 1710206141, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-073949.699090
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-073949.699090, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 1657993)
KILLED CAPYBARA PROCESSES
PARSING 20240313-073949.699090 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-073949.699090            && sh ms_avg_99p_lat.sh 20240313-073949.699090            && sh ms_total_even_odd_numreq.sh 20240313-073949.699090            && sh latency_cdf.sh 20240313-073949.699090
ERROR: cat: /homes/inho/capybara-data/20240313-073949.699090.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-073949.699090.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-073949.699090.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-073949.699090.latency_trace: No such file or directory



PARSING 20240313-073949.699090 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-073949.699090
ERROR: paste: /homes/inho/capybara-data/20240313-073949.699090.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-073949.699090, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(70, 70 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074151.495587
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-074151.495587, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 1659821)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074151.495587 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074151.495587            && sh ms_avg_99p_lat.sh 20240313-074151.495587            && sh ms_total_even_odd_numreq.sh 20240313-074151.495587            && sh latency_cdf.sh 20240313-074151.495587
ERROR: cat: /homes/inho/capybara-data/20240313-074151.495587.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074151.495587.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074151.495587.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074151.495587.latency_trace: No such file or directory



PARSING 20240313-074151.495587 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074151.495587
ERROR: paste: /homes/inho/capybara-data/20240313-074151.495587.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074151.495587, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074309.227618
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 42299


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-074309.227618, 2, 1, 0, 10000, 100, exponential, 200000, 46960, 45738, 0, 137048, 37176.0, 41916.0, 42420.0, 42542.0, 42686.0, 1710315803, 0



iokerneld killed (pid 1661372)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074309.227618 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074309.227618            && sh ms_avg_99p_lat.sh 20240313-074309.227618            && sh ms_total_even_odd_numreq.sh 20240313-074309.227618            && sh latency_cdf.sh 20240313-074309.227618
ERROR: cat: /homes/inho/capybara-data/20240313-074309.227618.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074309.227618.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074309.227618.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074309.227618.latency_trace: No such file or directory



PARSING 20240313-074309.227618 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074309.227618
ERROR: paste: /homes/inho/capybara-data/20240313-074309.227618.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074309.227618, 2, 1, 0, 10000, 100, exponential, 200000, 46960, 45738, 0, 137048, 37176.0, 41916.0, 42420.0, 42542.0, 42686.0, 1710315803, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074356.407189
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89888


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-074356.407189, 2, 2, 0, 10000, 100, exponential, 200000, 99866, 99863, 0, 8, 21.0, 57.0, 112.0, 181.0, 215.0, 1710315851, 0



iokerneld killed (pid 1662802)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074356.407189 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074356.407189            && sh ms_avg_99p_lat.sh 20240313-074356.407189            && sh ms_total_even_odd_numreq.sh 20240313-074356.407189            && sh latency_cdf.sh 20240313-074356.407189
ERROR: cat: /homes/inho/capybara-data/20240313-074356.407189.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074356.407189.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074356.407189.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074356.407189.latency_trace: No such file or directory



PARSING 20240313-074356.407189 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074356.407189
ERROR: paste: /homes/inho/capybara-data/20240313-074356.407189.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074356.407189, 2, 2, 0, 10000, 100, exponential, 200000, 99866, 99863, 0, 8, 21.0, 57.0, 112.0, 181.0, 215.0, 1710315851, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074432.904042
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240313-074432.904042, 2, 10, 0, 10000, 100, exponential, 200000, 0, 0, 0, 1710315887



iokerneld killed (pid 1664216)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074432.904042 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074432.904042            && sh ms_avg_99p_lat.sh 20240313-074432.904042            && sh ms_total_even_odd_numreq.sh 20240313-074432.904042            && sh latency_cdf.sh 20240313-074432.904042
ERROR: cat: /homes/inho/capybara-data/20240313-074432.904042.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074432.904042.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074432.904042.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074432.904042.latency_trace: No such file or directory



PARSING 20240313-074432.904042 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074432.904042
ERROR: paste: /homes/inho/capybara-data/20240313-074432.904042.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074432.904042, 2, 10, 0, 10000, 100, exponential, 200000, 0, 0, 0, 1710315887

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074514.139696
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240313-074514.139696, 2, 10, 0, 0, 100, exponential, 200000, 0, 0, 0, 1710315928



iokerneld killed (pid 1665660)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074514.139696 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074514.139696            && sh ms_avg_99p_lat.sh 20240313-074514.139696            && sh ms_total_even_odd_numreq.sh 20240313-074514.139696            && sh latency_cdf.sh 20240313-074514.139696
ERROR: cat: /homes/inho/capybara-data/20240313-074514.139696.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074514.139696.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074514.139696.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074514.139696.latency_trace: No such file or directory



PARSING 20240313-074514.139696 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074514.139696
ERROR: paste: /homes/inho/capybara-data/20240313-074514.139696.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074514.139696, 2, 10, 0, 0, 100, exponential, 200000, 0, 0, 0, 1710315928

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074552.487988
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240313-074552.487988, 2, 10, 0, 0, 100, exponential, 200000, 0, 0, 0, 1710315966



iokerneld killed (pid 1667091)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074552.487988 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074552.487988            && sh ms_avg_99p_lat.sh 20240313-074552.487988            && sh ms_total_even_odd_numreq.sh 20240313-074552.487988            && sh latency_cdf.sh 20240313-074552.487988
ERROR: cat: /homes/inho/capybara-data/20240313-074552.487988.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074552.487988.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074552.487988.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074552.487988.latency_trace: No such file or directory



PARSING 20240313-074552.487988 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074552.487988
ERROR: paste: /homes/inho/capybara-data/20240313-074552.487988.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074552.487988, 2, 10, 0, 0, 100, exponential, 200000, 0, 0, 0, 1710315966

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074639.083457
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-074639.083457, 2, 10, 0, 0, 100, exponential, 20, 17, 24, 5, 0, 15.0, inf, inf, inf, inf, 1710316013, 0



dpdk-ctrl.elf killed (pid 2706334)
iokerneld killed (pid 1668579)
redis-server killed (pid 2706464)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074639.083457 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074639.083457            && sh ms_avg_99p_lat.sh 20240313-074639.083457            && sh ms_total_even_odd_numreq.sh 20240313-074639.083457            && sh latency_cdf.sh 20240313-074639.083457
ERROR: cat: /homes/inho/capybara-data/20240313-074639.083457.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074639.083457.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074639.083457.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074639.083457.latency_trace: No such file or directory



PARSING 20240313-074639.083457 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074639.083457
ERROR: paste: /homes/inho/capybara-data/20240313-074639.083457.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074639.083457, 2, 10, 0, 0, 100, exponential, 20, 17, 24, 5, 0, 15.0, inf, inf, inf, inf, 1710316013, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-074936.751545
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 27


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-074936.751545, 2, 10, 0, 0, 100, exponential, 20, 30, 30, 0, 0, 104.0, 964.0, 1031.0, 1031.0, 1031.0, 1710316191, 0



iokerneld killed (pid 1678595)
KILLED CAPYBARA PROCESSES
PARSING 20240313-074936.751545 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-074936.751545            && sh ms_avg_99p_lat.sh 20240313-074936.751545            && sh ms_total_even_odd_numreq.sh 20240313-074936.751545            && sh latency_cdf.sh 20240313-074936.751545
ERROR: cat: /homes/inho/capybara-data/20240313-074936.751545.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-074936.751545.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074936.751545.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-074936.751545.latency_trace: No such file or directory



PARSING 20240313-074936.751545 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-074936.751545
ERROR: paste: /homes/inho/capybara-data/20240313-074936.751545.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-074936.751545, 2, 10, 0, 0, 100, exponential, 20, 30, 30, 0, 0, 104.0, 964.0, 1031.0, 1031.0, 1031.0, 1710316191, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075013.884075
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 27


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075013.884075, 2, 10, 0, 0, 100, exponential, 20, 30, 30, 0, 0, 104.0, 962.0, 992.0, 992.0, 992.0, 1710316228, 0



iokerneld killed (pid 1679998)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075013.884075 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075013.884075            && sh ms_avg_99p_lat.sh 20240313-075013.884075            && sh ms_total_even_odd_numreq.sh 20240313-075013.884075            && sh latency_cdf.sh 20240313-075013.884075
ERROR: cat: /homes/inho/capybara-data/20240313-075013.884075.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075013.884075.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075013.884075.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075013.884075.latency_trace: No such file or directory



PARSING 20240313-075013.884075 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075013.884075
ERROR: paste: /homes/inho/capybara-data/20240313-075013.884075.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075013.884075, 2, 10, 0, 0, 100, exponential, 20, 30, 30, 0, 0, 104.0, 962.0, 992.0, 992.0, 992.0, 1710316228, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [20]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075050.719473
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 43


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075050.719473, 2, 20, 0, 0, 100, exponential, 20, 44, 44, 0, 0, 105.0, 1919.0, 1969.0, 1969.0, 1969.0, 1710316265, 0



iokerneld killed (pid 1681407)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075050.719473 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075050.719473            && sh ms_avg_99p_lat.sh 20240313-075050.719473            && sh ms_total_even_odd_numreq.sh 20240313-075050.719473            && sh latency_cdf.sh 20240313-075050.719473
ERROR: cat: /homes/inho/capybara-data/20240313-075050.719473.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075050.719473.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075050.719473.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075050.719473.latency_trace: No such file or directory



PARSING 20240313-075050.719473 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075050.719473
ERROR: paste: /homes/inho/capybara-data/20240313-075050.719473.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075050.719473, 2, 20, 0, 0, 100, exponential, 20, 44, 44, 0, 0, 105.0, 1919.0, 1969.0, 1969.0, 1969.0, 1710316265, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [20]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075126.479840
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 43


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075126.479840, 2, 20, 0, 0, 100, exponential, 20, 44, 44, 0, 0, 105.0, 1845.0, 1932.0, 1932.0, 1932.0, 1710316301, 0



iokerneld killed (pid 1682796)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075126.479840 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075126.479840            && sh ms_avg_99p_lat.sh 20240313-075126.479840            && sh ms_total_even_odd_numreq.sh 20240313-075126.479840            && sh latency_cdf.sh 20240313-075126.479840
ERROR: cat: /homes/inho/capybara-data/20240313-075126.479840.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075126.479840.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075126.479840.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075126.479840.latency_trace: No such file or directory



PARSING 20240313-075126.479840 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075126.479840
ERROR: paste: /homes/inho/capybara-data/20240313-075126.479840.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075126.479840, 2, 20, 0, 0, 100, exponential, 20, 44, 44, 0, 0, 105.0, 1845.0, 1932.0, 1932.0, 1932.0, 1710316301, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075201.526732
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 37


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075201.526732, 2, 100, 0, 0, 100, exponential, 20, 38, 38, 0, 0, 114.0, 9482.0, 9737.0, 9737.0, 9737.0, 1710316337, 0



iokerneld killed (pid 1684172)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075201.526732 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075201.526732            && sh ms_avg_99p_lat.sh 20240313-075201.526732            && sh ms_total_even_odd_numreq.sh 20240313-075201.526732            && sh latency_cdf.sh 20240313-075201.526732
ERROR: cat: /homes/inho/capybara-data/20240313-075201.526732.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075201.526732.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075201.526732.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075201.526732.latency_trace: No such file or directory



PARSING 20240313-075201.526732 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075201.526732
ERROR: paste: /homes/inho/capybara-data/20240313-075201.526732.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075201.526732, 2, 100, 0, 0, 100, exponential, 20, 38, 38, 0, 0, 114.0, 9482.0, 9737.0, 9737.0, 9737.0, 1710316337, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = '' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075237.111434
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 37


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075237.111434, 2, 100, 0, 0, 100, exponential, 20, 38, 38, 0, 0, 16.0, 570.0, 595.0, 595.0, 595.0, 1710316372, 0



iokerneld killed (pid 1685571)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075237.111434 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075237.111434            && sh ms_avg_99p_lat.sh 20240313-075237.111434            && sh ms_total_even_odd_numreq.sh 20240313-075237.111434            && sh latency_cdf.sh 20240313-075237.111434
ERROR: cat: /homes/inho/capybara-data/20240313-075237.111434.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075237.111434.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075237.111434.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075237.111434.latency_trace: No such file or directory



PARSING 20240313-075237.111434 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075237.111434
ERROR: paste: /homes/inho/capybara-data/20240313-075237.111434.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075237.111434, 2, 100, 0, 0, 100, exponential, 20, 38, 38, 0, 0, 16.0, 570.0, 595.0, 595.0, 595.0, 1710316372, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = '' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075315.944389
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:445:56:
called `Result::unwrap()` on an `Err` value: ParseIntError { kind: InvalidDigit }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1687211 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=20 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-197000:5000,197000:12000,197000-66000:5000,66000:7000,66000-42000:8000,42000:8000,42000-192000:7000,192000:8000,192000-146000:6000,146000:17000,146000-141000:5000,141000:12000,141000-203000:5000,203000:14000,203000-202000:10000,202000:12000,202000-68000:8000,68000:6000,68000-123000:5000,123000:11000,123000-140000:5000,140000:7000,140000-9000:8000,9000:9000,9000-238000:5000,238000:14000,238000-31000:6000,31000:9000,31000-191000:7000,191000:14000,191000-221000:10000,221000:6000,221000-137000:7000,137000:11000,137000-76000:6000,76000:5000,76000-255000:5000,255000:10000,255000-151000:9000,151000:19000,151000-144000:7000,144000:13000,144000-137000:10000,137000:7000,137000-249000:7000,249000:13000,249000-257000:5000,257000:14000,257000-33000:7000,33000:15000,33000-52000:9000,52000:20000,52000-42000:8000,42000:22000,42000-180000:5000,180000:11000,180000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-36000:10000,36000:19000,36000-293000:5000,293000:5000,293000-46000:10000,46000:13000,46000-197000:7000,197000:19000,197000-105000:5000,105000:17000,105000-121000:5000,121000:14000,121000-266000:5000,266000:9000,266000-234000:5000,234000:13000,234000-183000:7000,183000:11000,183000-9000:5000,9000:19000,9000-109000:9000,109000:17000,109000-258000:5000,258000:8000,258000-139000:8000,139000:14000,139000-241000:6000,241000:10000,241000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:2000,218000-293000:5000,293000:13000,293000-9000:9000,9000:6000,9000-266000:10000,266000:5000,266000-81000:10000,81000:20000,81000-102000:9000,102000:13000,102000-187000:5000,187000:14000,187000-127000:8000,127000:15000,127000-143000:10000,143000:19000,143000-142000:9000,142000:7000,142000-9000:7000,9000:6000,9000-189000:5000,189000:19000,189000-178000:8000,178000:9000,178000-39000:9000,39000:16000,39000-46000:9000,46000:16000,46000-182000:5000,182000:4000,182000-300000:5000,300000:12000,300000-291000:8000,291000:16000,291000-76000:6000,76000:20000,76000-157000:8000,157000:5000,157000-60000:8000,60000:12000,60000-193000:5000,193000:20000,193000-157000:7000,157000:13000,157000-82000:9000,82000:9000,82000-129000:8000,129000:15000,129000-13000:8000,13000:6000,13000-264000:5000,264000:20000,264000-181000:10000,181000:20000,181000-226000:7000,226000:13000,226000-253000:8000,253000:8000,253000-240000:8000,240000:1000,240000-213000:5000,213000:19000,213000-149000:10000,149000:11000,149000-140000:9000,140000:17000,140000-67000:5000,67000:9000,67000-26000:6000,26000:9000,26000-231000:5000,231000:7000,231000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-231000:5000,231000:18000,231000-187000:9000,187000:6000,187000-52000:5000,52000:10000,52000-206000:10000,206000:20000,206000-185000:8000,185000:9000,185000-222000:5000,222000:13000,222000-103000:9000,103000:20000,103000-39000:6000,39000:11000,39000-131000:6000,131000:13000,131000-221000:9000,221000:8000,221000-257000:5000,257000:10000,257000-92000:5000,92000:20000,92000-222000:10000,222000:11000,222000-32000:9000,32000:11000,32000-55000:6000,55000:13000,55000-302000:5000,302000:16000,302000-87000:10000,87000:8000,87000-109000:10000,109000:8000,109000-98000:8000,98000:15000,98000-164000:7000,164000:13000,164000-277000:5000,277000:8000,277000-159000:9000,159000:18000,159000-72000:10000,72000:9000,72000-217000:8000,217000:16000,217000-74000:6000,74000:11000,74000-210000:5000,210000:7000,210000-28000:6000,28000:10000,28000-65000:6000,65000:10000,65000-44000:10000,44000:6000,44000-60000:8000,60000:6000,60000-97000:8000,97000:18000,97000-190000:5000,190000:8000,190000-158000:7000,158000:8000,158000-43000:9000,43000:10000,43000-27000:7000,27000:6000,27000-150000:10000,150000:5000,150000-125000:7000,125000:18000,125000-194000:5000,194000:18000,194000-86000:8000,86000:13000,86000-137000:8000,137000:16000,137000-193000:5000,193000:27000,193000-257000:5000,257000:9000,257000-82000:5000,82000:9000,82000-142000:7000,142000:14000,142000-85000:7000,85000:7000,85000-184000:6000,184000:7000,184000-196000:10000,196000:14000,196000-201000:5000,201000:10000,201000-150000:5000,150000:15000,150000-125000:7000,125000:5000,125000-58000:8000,58000:20000,58000-148000:9000,148000:16000,148000-235000:5000,235000:16000,235000-133000:5000,133000:8000,133000-149000:9000,149000:14000,149000-185000:6000,185000:10000,185000-232000:9000,232000:18000,232000-242000:5000,242000:12000,242000-101000:9000,101000:16000,101000-76000:8000,76000:17000,76000-171000:5000,171000:14000,171000-174000:5000,174000:9000,174000-294000:5000,294000:18000,294000-77000:5000,77000:9000,77000-73000:7000,73000:17000,73000-31000:7000,31000:13000,31000-114000:6000,114000:13000,114000-172000:5000,172000:10000,172000-43000:7000,43000:9000,43000-17000:10000,17000:9000,17000-88000:10000,88000:7000,88000-99000:6000,99000:8000,99000-154000:5000,154000:14000,154000-250000:5000,250000:7000,250000-184000:9000,184000:6000,184000-214000:5000,214000:10000,214000-197000:10000,197000:20000,197000-68000:5000,68000:12000,68000-211000:10000,211000:1000,211000-222000:5000,222000:18000,222000-120000:9000,120000:20000,120000-171000:6000,171000:7000,171000-65000:10000,65000:14000,65000-106000:7000,106000:4000,106000-247000:5000,247000:12000,247000-170000:5000,170000:8000,170000-122000:9000,122000:14000,122000-123000:5000,123000:10000,123000-50000:7000,50000:9000,50000-142000:10000,142000:6000,142000-238000:5000,238000:11000,238000-18000:7000,18000:11000,18000-28000:6000,28000:13000,28000-106000:5000,106000:15000,106000-14000:10000,14000:6000,14000-58000:10000,58000:1000,58000-182000:5000,182000:8000,182000-31000:10000,31000:14000,31000-181000:8000,181000:20000,181000-99000:8000,99000:9000,99000-106000:9000,106000:9000,106000-222000:5000,222000:17000,222000-116000:8000,116000:17000,116000-86000:9000,86000:11000,86000-181000:10000,181000:11000,181000-101000:10000,101000:2000,101000-227000:5000,227000:10000,227000-191000:8000,191000:11000,191000-224000:6000,224000:17000,224000-112000:8000,112000:10000,112000-47000:6000,47000:10000,47000-185000:5000,185000:4000,185000-207000:5000,207000:6000,207000-20000:6000,20000:6000,20000-155000:8000,155000:16000,155000-32000:7000,32000:19000,32000-128000:6000,128000:21000,128000-258000:5000,258000:5000,258000-116000:7000,116000:18000,116000-172000:8000,172000:16000,172000-12000:7000,12000:11000,12000-55000:5000,55000:18000,55000-241000:5000,241000:15000,241000-15000:8000,15000:20000,15000-228000:9000,228000:18000,228000-77000:6000,77000:6000,77000-81000:7000,81000:6000,81000-170000:5000,170000:16000,170000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-102000:6000,102000:25000,102000-200000:5000,200000:10000,200000-155000:9000,155000:7000,155000-117000:9000,117000:11000,117000-11000:9000,11000:12000,11000-86000:7000,86000:12000,86000-113000:5000,113000:4000,113000-196000:5000,196000:11000,196000-77000:10000,77000:13000,77000-33000:8000,33000:17000,33000-16000:7000,16000:12000,16000-175000:8000,175000:9000,175000-295000:5000,295000:18000,295000-41000:9000,41000:14000,41000-131000:9000,131000:5000,131000-193000:7000,193000:7000,193000-88000:10000,88000:16000,88000-209000:5000,209000:16000,209000-36000:6000,36000:14000,36000-30000:5000,30000:17000,30000-69000:9000,69000:15000,69000-143000:8000,143000:5000,143000-207000:5000,207000:16000,207000-13000:5000,13000:8000,13000-158000:8000,158000:15000,158000-156000:5000,156000:8000,156000-57000:7000,57000:23000,57000-221000:5000,221000:9000,221000-170000:6000,170000:8000,170000-77000:7000,77000:9000,77000-86000:7000,86000:5000,86000-147000:7000,147000:13000,147000-221000:10000,221000:14000,221000-240000:5000,240000:9000,240000-110000:6000,110000:12000,110000-187000:7000,187000:16000,187000-224000:8000,224000:16000,224000-111000:9000,111000:12000/100000:100000,100000-283000:5000,283000:18000,283000-187000:5000,187000:11000,187000-185000:10000,185000:13000,185000-197000:10000,197000:8000,197000-40000:10000,40000:10000,40000-231000:5000,231000:9000,231000-161000:7000,161000:5000,161000-42000:10000,42000:11000,42000-159000:6000,159000:6000,159000-218000:9000,218000:18000,218000-191000:9000,191000:5000,191000-210000:5000,210000:16000,210000-118000:5000,118000:12000,118000-72000:9000,72000:9000,72000-51000:5000,51000:7000,51000-96000:10000,96000:12000,96000-105000:9000,105000:1000,105000-225000:5000,225000:19000,225000-173000:6000,173000:11000,173000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:12000,128000-223000:5000,223000:12000,223000-144000:9000,144000:6000,144000-171000:10000,171000:7000,171000-72000:6000,72000:19000,72000-200000:6000,200000:20000,200000-300000:5000,300000:5000,300000-194000:8000,194000:15000,194000-239000:5000,239000:17000,239000-48000:6000,48000:10000,48000-149000:7000,149000:12000,149000-97000:9000,97000:1000,97000-187000:5000,187000:20000,187000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:19000,103000-175000:7000,175000:4000,175000-214000:5000,214000:7000,214000-20000:8000,20000:15000,20000-200000:10000,200000:20000,200000-81000:8000,81000:14000,81000-173000:10000,173000:3000,173000-222000:5000,222000:13000,222000-193000:6000,193000:8000,193000-80000:9000,80000:18000,80000-105000:5000,105000:7000,105000-154000:8000,154000:9000,154000-26000:5000,26000:7000,26000-187000:5000,187000:7000,187000-61000:9000,61000:12000,61000-163000:5000,163000:9000,163000-168000:6000,168000:19000,168000-74000:8000,74000:20000,74000-293000:5000,293000:9000,293000-178000:8000,178000:6000,178000-169000:5000,169000:15000,169000-141000:7000,141000:13000,141000-202000:5000,202000:16000,202000-96000:10000,96000:1000,96000-291000:5000,291000:12000,291000-54000:8000,54000:8000,54000-93000:9000,93000:16000,93000-221000:5000,221000:9000,221000-164000:7000,164000:21000,164000-180000:5000,180000:17000,180000-133000:8000,133000:16000,133000-79000:7000,79000:19000,79000-166000:6000,166000:8000,166000-140000:6000,140000:8000,140000-287000:5000,287000:20000,287000-232000:6000,232000:11000,232000-272000:9000,272000:8000,272000-42000:7000,42000:17000,42000-235000:6000,235000:11000,235000-216000:5000,216000:14000,216000-188000:9000,188000:13000,188000-35000:5000,35000:14000,35000-141000:9000,141000:7000,141000-18000:5000,18000:19000,18000-267000:5000,267000:5000,267000-222000:7000,222000:17000,222000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:1000,170000-249000:5000,249000:9000,249000-73000:8000,73000:8000,73000-92000:7000,92000:14000,92000-129000:8000,129000:10000,129000-61000:8000,61000:11000,61000-138000:10000,138000:2000,138000-249000:5000,249000:14000,249000-35000:9000,35000:13000,35000-9000:8000,9000:20000,9000-15000:6000,15000:5000,15000-133000:8000,133000:12000,133000-220000:5000,220000:9000,220000-156000:8000,156000:6000,156000-144000:5000,144000:8000,144000-217000:9000,217000:17000,217000-16000:10000,16000:10000,16000-46000:9000,46000:4000,46000-223000:5000,223000:15000,223000-132000:5000,132000:8000,132000-14000:5000,14000:9000,14000-196000:9000,196000:6000,196000-56000:7000,56000:5000,56000-128000:5000,128000:21000,128000-178000:5000,178000:6000,178000-121000:6000,121000:14000,121000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:19000,117000-203000:5000,203000:20000,203000-188000:10000,188000:13000,188000-52000:10000,52000:20000,52000-142000:10000,142000:12000,142000-267000:5000,267000:5000,267000-197000:8000,197000:18000,197000-66000:10000,66000:19000,66000-223000:7000,223000:17000,223000-31000:9000,31000:2000,31000-290000:5000,290000:19000,290000-242000:9000,242000:7000,242000-35000:8000,35000:17000,35000-260000:9000,260000:26000,260000-286000:5000,286000:10000,286000-277000:9000,277000:14000,277000-73000:8000,73000:9000,73000-152000:5000,152000:18000,152000-207000:7000,207000:15000,207000-223000:5000,223000:8000,223000-113000:8000,113000:12000,113000-204000:8000,204000:13000,204000-187000:9000,187000:9000,187000-201000:8000,201000:6000,201000-167000:6000,167000:8000,167000-279000:5000,279000:18000,279000-170000:9000,170000:18000,170000-118000:6000,118000:13000,118000-143000:5000,143000:12000,143000-250000:10000,250000:4000,250000-245000:5000,245000:11000,245000-129000:6000,129000:10000,129000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-164000:6000,164000:11000,164000-158000:8000,158000:5000,158000-238000:5000,238000:5000,238000-36000:7000,36000:18000,36000-45000:6000,45000:18000,45000-200000:10000,200000:10000,200000-18000:7000,18000:14000,18000-186000:5000,186000:10000,186000-132000:5000,132000:10000,132000-77000:10000,77000:7000,77000-107000:8000,107000:8000,107000-54000:7000,54000:10000,54000-101000:8000,101000:12000,101000-308000:5000,308000:19000,308000-203000:6000,203000:11000,203000-139000:6000,139000:16000,139000-265000:8000,265000:15000,265000-27000:7000,27000:7000,27000-230000:5000,230000:9000,230000-14000:6000,14000:9000,14000-188000:6000,188000:15000,188000-124000:5000,124000:10000,124000-192000:9000,192000:9000,192000-190000:7000,190000:10000,190000-258000:5000,258000:16000,258000-34000:8000,34000:20000,34000-144000:5000,144000:12000,144000-109000:7000,109000:19000,109000-119000:5000,119000:3000,119000-232000:5000,232000:5000,232000-193000:9000,193000:11000,193000-171000:6000,171000:9000,171000-18000:6000,18000:7000,18000-48000:5000,48000:6000,48000-223000:6000,223000:25000,223000-242000:5000,242000:14000,242000-73000:7000,73000:9000,73000-57000:8000,57000:6000,57000-139000:7000,139000:16000,139000-35000:8000,35000:5000,35000-112000:9000,112000:6000,112000-298000:5000,298000:14000,298000-272000:6000,272000:6000,272000-111000:5000,111000:15000,111000-75000:9000,75000:12000,75000-185000:9000,185000:19000,185000-233000:5000,233000:16000,233000-197000:9000,197000:19000,197000-59000:7000,59000:9000,59000-35000:10000,35000:14000,35000-37000:8000,37000:3000,37000-253000:5000,253000:12000,253000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-253000:5000,253000:17000,253000-273000:5000,273000:8000,273000-170000:7000,170000:16000,170000-80000:6000,80000:5000,80000-251000:8000,251000:19000,251000-257000:10000,257000:16000,257000-222000:5000,222000:7000,222000-212000:6000,212000:13000,212000-43000:10000,43000:20000,43000-141000:6000,141000:15000,141000-69000:7000,69000:11000,69000-239000:5000,239000:20000,239000-130000:6000,130000:7000,130000-140000:9000,140000:14000,140000-82000:6000,82000:8000,82000-191000:6000,191000:19000,191000-310000:5000,310000:19000,310000-68000:9000,68000:10000,68000-35000:8000,35000:9000,35000-267000:8000,267000:16000,267000-280000:10000,280000:6000,280000-236000:5000,236000:20000,236000-138000:8000,138000:6000,138000-16000:7000,16000:18000,16000-156000:7000,156000:11000,156000-93000:7000,93000:11000,93000-284000:5000,284000:11000,284000-156000:7000,156000:15000,156000-282000:10000,282000:8000,282000-45000:7000,45000:15000,45000-271000:5000,271000:17000,271000-185000:5000,185000:7000,185000-161000:6000,161000:15000,161000-76000:7000,76000:15000,76000-135000:10000,135000:12000,135000-62000:6000,62000:17000,62000-220000:5000,220000:5000,220000-43000:10000,43000:20000,43000-68000:5000,68000:17000,68000-155000:5000,155000:13000,155000-183000:7000,183000:13000,183000-273000:5000,273000:9000,273000-172000:8000,172000:5000,172000-81000:5000,81000:12000,81000-125000:9000,125000:16000,125000-249000:10000,249000:13000,249000-91000:6000,91000:2000,91000-226000:5000,226000:16000,226000-203000:7000,203000:11000,203000-120000:10000,120000:17000,120000-67000:7000,67000:18000,67000-180000:8000,180000:1000,180000-240000:5000,240000:9000,240000-110000:7000,110000:6000,110000-85000:7000,85000:10000,85000-33000:7000,33000:17000,33000-223000:9000,223000:5000,223000-200000:10000,200000:8000 --exptid=/homes/inho/capybara-data2/20240313-075315.944389 > /homes/inho/capybara-data2/20240313-075315.944389.client
================ TEST COMPLETE =================

[RESULT]20240313-075315.944389, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1686988)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075315.944389 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075315.944389            && sh ms_avg_99p_lat.sh 20240313-075315.944389            && sh ms_total_even_odd_numreq.sh 20240313-075315.944389            && sh latency_cdf.sh 20240313-075315.944389
ERROR: cat: /homes/inho/capybara-data/20240313-075315.944389.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075315.944389.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075315.944389.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075315.944389.latency_trace: No such file or directory



PARSING 20240313-075315.944389 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075315.944389
ERROR: paste: /homes/inho/capybara-data/20240313-075315.944389.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075315.944389, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = '' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075349.195341
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:445:56:
called `Result::unwrap()` on an `Err` value: ParseIntError { kind: InvalidDigit }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1688607 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=20 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-197000:5000,197000:12000,197000-66000:5000,66000:7000,66000-42000:8000,42000:8000,42000-192000:7000,192000:8000,192000-146000:6000,146000:17000,146000-141000:5000,141000:12000,141000-203000:5000,203000:14000,203000-202000:10000,202000:12000,202000-68000:8000,68000:6000,68000-123000:5000,123000:11000,123000-140000:5000,140000:7000,140000-9000:8000,9000:9000,9000-238000:5000,238000:14000,238000-31000:6000,31000:9000,31000-191000:7000,191000:14000,191000-221000:10000,221000:6000,221000-137000:7000,137000:11000,137000-76000:6000,76000:5000,76000-255000:5000,255000:10000,255000-151000:9000,151000:19000,151000-144000:7000,144000:13000,144000-137000:10000,137000:7000,137000-249000:7000,249000:13000,249000-257000:5000,257000:14000,257000-33000:7000,33000:15000,33000-52000:9000,52000:20000,52000-42000:8000,42000:22000,42000-180000:5000,180000:11000,180000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-36000:10000,36000:19000,36000-293000:5000,293000:5000,293000-46000:10000,46000:13000,46000-197000:7000,197000:19000,197000-105000:5000,105000:17000,105000-121000:5000,121000:14000,121000-266000:5000,266000:9000,266000-234000:5000,234000:13000,234000-183000:7000,183000:11000,183000-9000:5000,9000:19000,9000-109000:9000,109000:17000,109000-258000:5000,258000:8000,258000-139000:8000,139000:14000,139000-241000:6000,241000:10000,241000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:2000,218000-293000:5000,293000:13000,293000-9000:9000,9000:6000,9000-266000:10000,266000:5000,266000-81000:10000,81000:20000,81000-102000:9000,102000:13000,102000-187000:5000,187000:14000,187000-127000:8000,127000:15000,127000-143000:10000,143000:19000,143000-142000:9000,142000:7000,142000-9000:7000,9000:6000,9000-189000:5000,189000:19000,189000-178000:8000,178000:9000,178000-39000:9000,39000:16000,39000-46000:9000,46000:16000,46000-182000:5000,182000:4000,182000-300000:5000,300000:12000,300000-291000:8000,291000:16000,291000-76000:6000,76000:20000,76000-157000:8000,157000:5000,157000-60000:8000,60000:12000,60000-193000:5000,193000:20000,193000-157000:7000,157000:13000,157000-82000:9000,82000:9000,82000-129000:8000,129000:15000,129000-13000:8000,13000:6000,13000-264000:5000,264000:20000,264000-181000:10000,181000:20000,181000-226000:7000,226000:13000,226000-253000:8000,253000:8000,253000-240000:8000,240000:1000,240000-213000:5000,213000:19000,213000-149000:10000,149000:11000,149000-140000:9000,140000:17000,140000-67000:5000,67000:9000,67000-26000:6000,26000:9000,26000-231000:5000,231000:7000,231000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-231000:5000,231000:18000,231000-187000:9000,187000:6000,187000-52000:5000,52000:10000,52000-206000:10000,206000:20000,206000-185000:8000,185000:9000,185000-222000:5000,222000:13000,222000-103000:9000,103000:20000,103000-39000:6000,39000:11000,39000-131000:6000,131000:13000,131000-221000:9000,221000:8000,221000-257000:5000,257000:10000,257000-92000:5000,92000:20000,92000-222000:10000,222000:11000,222000-32000:9000,32000:11000,32000-55000:6000,55000:13000,55000-302000:5000,302000:16000,302000-87000:10000,87000:8000,87000-109000:10000,109000:8000,109000-98000:8000,98000:15000,98000-164000:7000,164000:13000,164000-277000:5000,277000:8000,277000-159000:9000,159000:18000,159000-72000:10000,72000:9000,72000-217000:8000,217000:16000,217000-74000:6000,74000:11000,74000-210000:5000,210000:7000,210000-28000:6000,28000:10000,28000-65000:6000,65000:10000,65000-44000:10000,44000:6000,44000-60000:8000,60000:6000,60000-97000:8000,97000:18000,97000-190000:5000,190000:8000,190000-158000:7000,158000:8000,158000-43000:9000,43000:10000,43000-27000:7000,27000:6000,27000-150000:10000,150000:5000,150000-125000:7000,125000:18000,125000-194000:5000,194000:18000,194000-86000:8000,86000:13000,86000-137000:8000,137000:16000,137000-193000:5000,193000:27000,193000-257000:5000,257000:9000,257000-82000:5000,82000:9000,82000-142000:7000,142000:14000,142000-85000:7000,85000:7000,85000-184000:6000,184000:7000,184000-196000:10000,196000:14000,196000-201000:5000,201000:10000,201000-150000:5000,150000:15000,150000-125000:7000,125000:5000,125000-58000:8000,58000:20000,58000-148000:9000,148000:16000,148000-235000:5000,235000:16000,235000-133000:5000,133000:8000,133000-149000:9000,149000:14000,149000-185000:6000,185000:10000,185000-232000:9000,232000:18000,232000-242000:5000,242000:12000,242000-101000:9000,101000:16000,101000-76000:8000,76000:17000,76000-171000:5000,171000:14000,171000-174000:5000,174000:9000,174000-294000:5000,294000:18000,294000-77000:5000,77000:9000,77000-73000:7000,73000:17000,73000-31000:7000,31000:13000,31000-114000:6000,114000:13000,114000-172000:5000,172000:10000,172000-43000:7000,43000:9000,43000-17000:10000,17000:9000,17000-88000:10000,88000:7000,88000-99000:6000,99000:8000,99000-154000:5000,154000:14000,154000-250000:5000,250000:7000,250000-184000:9000,184000:6000,184000-214000:5000,214000:10000,214000-197000:10000,197000:20000,197000-68000:5000,68000:12000,68000-211000:10000,211000:1000,211000-222000:5000,222000:18000,222000-120000:9000,120000:20000,120000-171000:6000,171000:7000,171000-65000:10000,65000:14000,65000-106000:7000,106000:4000,106000-247000:5000,247000:12000,247000-170000:5000,170000:8000,170000-122000:9000,122000:14000,122000-123000:5000,123000:10000,123000-50000:7000,50000:9000,50000-142000:10000,142000:6000,142000-238000:5000,238000:11000,238000-18000:7000,18000:11000,18000-28000:6000,28000:13000,28000-106000:5000,106000:15000,106000-14000:10000,14000:6000,14000-58000:10000,58000:1000,58000-182000:5000,182000:8000,182000-31000:10000,31000:14000,31000-181000:8000,181000:20000,181000-99000:8000,99000:9000,99000-106000:9000,106000:9000,106000-222000:5000,222000:17000,222000-116000:8000,116000:17000,116000-86000:9000,86000:11000,86000-181000:10000,181000:11000,181000-101000:10000,101000:2000,101000-227000:5000,227000:10000,227000-191000:8000,191000:11000,191000-224000:6000,224000:17000,224000-112000:8000,112000:10000,112000-47000:6000,47000:10000,47000-185000:5000,185000:4000,185000-207000:5000,207000:6000,207000-20000:6000,20000:6000,20000-155000:8000,155000:16000,155000-32000:7000,32000:19000,32000-128000:6000,128000:21000,128000-258000:5000,258000:5000,258000-116000:7000,116000:18000,116000-172000:8000,172000:16000,172000-12000:7000,12000:11000,12000-55000:5000,55000:18000,55000-241000:5000,241000:15000,241000-15000:8000,15000:20000,15000-228000:9000,228000:18000,228000-77000:6000,77000:6000,77000-81000:7000,81000:6000,81000-170000:5000,170000:16000,170000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-102000:6000,102000:25000,102000-200000:5000,200000:10000,200000-155000:9000,155000:7000,155000-117000:9000,117000:11000,117000-11000:9000,11000:12000,11000-86000:7000,86000:12000,86000-113000:5000,113000:4000,113000-196000:5000,196000:11000,196000-77000:10000,77000:13000,77000-33000:8000,33000:17000,33000-16000:7000,16000:12000,16000-175000:8000,175000:9000,175000-295000:5000,295000:18000,295000-41000:9000,41000:14000,41000-131000:9000,131000:5000,131000-193000:7000,193000:7000,193000-88000:10000,88000:16000,88000-209000:5000,209000:16000,209000-36000:6000,36000:14000,36000-30000:5000,30000:17000,30000-69000:9000,69000:15000,69000-143000:8000,143000:5000,143000-207000:5000,207000:16000,207000-13000:5000,13000:8000,13000-158000:8000,158000:15000,158000-156000:5000,156000:8000,156000-57000:7000,57000:23000,57000-221000:5000,221000:9000,221000-170000:6000,170000:8000,170000-77000:7000,77000:9000,77000-86000:7000,86000:5000,86000-147000:7000,147000:13000,147000-221000:10000,221000:14000,221000-240000:5000,240000:9000,240000-110000:6000,110000:12000,110000-187000:7000,187000:16000,187000-224000:8000,224000:16000,224000-111000:9000,111000:12000/100000:100000,100000-283000:5000,283000:18000,283000-187000:5000,187000:11000,187000-185000:10000,185000:13000,185000-197000:10000,197000:8000,197000-40000:10000,40000:10000,40000-231000:5000,231000:9000,231000-161000:7000,161000:5000,161000-42000:10000,42000:11000,42000-159000:6000,159000:6000,159000-218000:9000,218000:18000,218000-191000:9000,191000:5000,191000-210000:5000,210000:16000,210000-118000:5000,118000:12000,118000-72000:9000,72000:9000,72000-51000:5000,51000:7000,51000-96000:10000,96000:12000,96000-105000:9000,105000:1000,105000-225000:5000,225000:19000,225000-173000:6000,173000:11000,173000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:12000,128000-223000:5000,223000:12000,223000-144000:9000,144000:6000,144000-171000:10000,171000:7000,171000-72000:6000,72000:19000,72000-200000:6000,200000:20000,200000-300000:5000,300000:5000,300000-194000:8000,194000:15000,194000-239000:5000,239000:17000,239000-48000:6000,48000:10000,48000-149000:7000,149000:12000,149000-97000:9000,97000:1000,97000-187000:5000,187000:20000,187000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:19000,103000-175000:7000,175000:4000,175000-214000:5000,214000:7000,214000-20000:8000,20000:15000,20000-200000:10000,200000:20000,200000-81000:8000,81000:14000,81000-173000:10000,173000:3000,173000-222000:5000,222000:13000,222000-193000:6000,193000:8000,193000-80000:9000,80000:18000,80000-105000:5000,105000:7000,105000-154000:8000,154000:9000,154000-26000:5000,26000:7000,26000-187000:5000,187000:7000,187000-61000:9000,61000:12000,61000-163000:5000,163000:9000,163000-168000:6000,168000:19000,168000-74000:8000,74000:20000,74000-293000:5000,293000:9000,293000-178000:8000,178000:6000,178000-169000:5000,169000:15000,169000-141000:7000,141000:13000,141000-202000:5000,202000:16000,202000-96000:10000,96000:1000,96000-291000:5000,291000:12000,291000-54000:8000,54000:8000,54000-93000:9000,93000:16000,93000-221000:5000,221000:9000,221000-164000:7000,164000:21000,164000-180000:5000,180000:17000,180000-133000:8000,133000:16000,133000-79000:7000,79000:19000,79000-166000:6000,166000:8000,166000-140000:6000,140000:8000,140000-287000:5000,287000:20000,287000-232000:6000,232000:11000,232000-272000:9000,272000:8000,272000-42000:7000,42000:17000,42000-235000:6000,235000:11000,235000-216000:5000,216000:14000,216000-188000:9000,188000:13000,188000-35000:5000,35000:14000,35000-141000:9000,141000:7000,141000-18000:5000,18000:19000,18000-267000:5000,267000:5000,267000-222000:7000,222000:17000,222000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:1000,170000-249000:5000,249000:9000,249000-73000:8000,73000:8000,73000-92000:7000,92000:14000,92000-129000:8000,129000:10000,129000-61000:8000,61000:11000,61000-138000:10000,138000:2000,138000-249000:5000,249000:14000,249000-35000:9000,35000:13000,35000-9000:8000,9000:20000,9000-15000:6000,15000:5000,15000-133000:8000,133000:12000,133000-220000:5000,220000:9000,220000-156000:8000,156000:6000,156000-144000:5000,144000:8000,144000-217000:9000,217000:17000,217000-16000:10000,16000:10000,16000-46000:9000,46000:4000,46000-223000:5000,223000:15000,223000-132000:5000,132000:8000,132000-14000:5000,14000:9000,14000-196000:9000,196000:6000,196000-56000:7000,56000:5000,56000-128000:5000,128000:21000,128000-178000:5000,178000:6000,178000-121000:6000,121000:14000,121000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:19000,117000-203000:5000,203000:20000,203000-188000:10000,188000:13000,188000-52000:10000,52000:20000,52000-142000:10000,142000:12000,142000-267000:5000,267000:5000,267000-197000:8000,197000:18000,197000-66000:10000,66000:19000,66000-223000:7000,223000:17000,223000-31000:9000,31000:2000,31000-290000:5000,290000:19000,290000-242000:9000,242000:7000,242000-35000:8000,35000:17000,35000-260000:9000,260000:26000,260000-286000:5000,286000:10000,286000-277000:9000,277000:14000,277000-73000:8000,73000:9000,73000-152000:5000,152000:18000,152000-207000:7000,207000:15000,207000-223000:5000,223000:8000,223000-113000:8000,113000:12000,113000-204000:8000,204000:13000,204000-187000:9000,187000:9000,187000-201000:8000,201000:6000,201000-167000:6000,167000:8000,167000-279000:5000,279000:18000,279000-170000:9000,170000:18000,170000-118000:6000,118000:13000,118000-143000:5000,143000:12000,143000-250000:10000,250000:4000,250000-245000:5000,245000:11000,245000-129000:6000,129000:10000,129000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-164000:6000,164000:11000,164000-158000:8000,158000:5000,158000-238000:5000,238000:5000,238000-36000:7000,36000:18000,36000-45000:6000,45000:18000,45000-200000:10000,200000:10000,200000-18000:7000,18000:14000,18000-186000:5000,186000:10000,186000-132000:5000,132000:10000,132000-77000:10000,77000:7000,77000-107000:8000,107000:8000,107000-54000:7000,54000:10000,54000-101000:8000,101000:12000,101000-308000:5000,308000:19000,308000-203000:6000,203000:11000,203000-139000:6000,139000:16000,139000-265000:8000,265000:15000,265000-27000:7000,27000:7000,27000-230000:5000,230000:9000,230000-14000:6000,14000:9000,14000-188000:6000,188000:15000,188000-124000:5000,124000:10000,124000-192000:9000,192000:9000,192000-190000:7000,190000:10000,190000-258000:5000,258000:16000,258000-34000:8000,34000:20000,34000-144000:5000,144000:12000,144000-109000:7000,109000:19000,109000-119000:5000,119000:3000,119000-232000:5000,232000:5000,232000-193000:9000,193000:11000,193000-171000:6000,171000:9000,171000-18000:6000,18000:7000,18000-48000:5000,48000:6000,48000-223000:6000,223000:25000,223000-242000:5000,242000:14000,242000-73000:7000,73000:9000,73000-57000:8000,57000:6000,57000-139000:7000,139000:16000,139000-35000:8000,35000:5000,35000-112000:9000,112000:6000,112000-298000:5000,298000:14000,298000-272000:6000,272000:6000,272000-111000:5000,111000:15000,111000-75000:9000,75000:12000,75000-185000:9000,185000:19000,185000-233000:5000,233000:16000,233000-197000:9000,197000:19000,197000-59000:7000,59000:9000,59000-35000:10000,35000:14000,35000-37000:8000,37000:3000,37000-253000:5000,253000:12000,253000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-253000:5000,253000:17000,253000-273000:5000,273000:8000,273000-170000:7000,170000:16000,170000-80000:6000,80000:5000,80000-251000:8000,251000:19000,251000-257000:10000,257000:16000,257000-222000:5000,222000:7000,222000-212000:6000,212000:13000,212000-43000:10000,43000:20000,43000-141000:6000,141000:15000,141000-69000:7000,69000:11000,69000-239000:5000,239000:20000,239000-130000:6000,130000:7000,130000-140000:9000,140000:14000,140000-82000:6000,82000:8000,82000-191000:6000,191000:19000,191000-310000:5000,310000:19000,310000-68000:9000,68000:10000,68000-35000:8000,35000:9000,35000-267000:8000,267000:16000,267000-280000:10000,280000:6000,280000-236000:5000,236000:20000,236000-138000:8000,138000:6000,138000-16000:7000,16000:18000,16000-156000:7000,156000:11000,156000-93000:7000,93000:11000,93000-284000:5000,284000:11000,284000-156000:7000,156000:15000,156000-282000:10000,282000:8000,282000-45000:7000,45000:15000,45000-271000:5000,271000:17000,271000-185000:5000,185000:7000,185000-161000:6000,161000:15000,161000-76000:7000,76000:15000,76000-135000:10000,135000:12000,135000-62000:6000,62000:17000,62000-220000:5000,220000:5000,220000-43000:10000,43000:20000,43000-68000:5000,68000:17000,68000-155000:5000,155000:13000,155000-183000:7000,183000:13000,183000-273000:5000,273000:9000,273000-172000:8000,172000:5000,172000-81000:5000,81000:12000,81000-125000:9000,125000:16000,125000-249000:10000,249000:13000,249000-91000:6000,91000:2000,91000-226000:5000,226000:16000,226000-203000:7000,203000:11000,203000-120000:10000,120000:17000,120000-67000:7000,67000:18000,67000-180000:8000,180000:1000,180000-240000:5000,240000:9000,240000-110000:7000,110000:6000,110000-85000:7000,85000:10000,85000-33000:7000,33000:17000,33000-223000:9000,223000:5000,223000-200000:10000,200000:8000 --exptid=/homes/inho/capybara-data2/20240313-075349.195341 > /homes/inho/capybara-data2/20240313-075349.195341.client
================ TEST COMPLETE =================

[RESULT]20240313-075349.195341, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1688384)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075349.195341 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075349.195341            && sh ms_avg_99p_lat.sh 20240313-075349.195341            && sh ms_total_even_odd_numreq.sh 20240313-075349.195341            && sh latency_cdf.sh 20240313-075349.195341
ERROR: cat: /homes/inho/capybara-data/20240313-075349.195341.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075349.195341.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075349.195341.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075349.195341.latency_trace: No such file or directory



PARSING 20240313-075349.195341 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075349.195341
ERROR: paste: /homes/inho/capybara-data/20240313-075349.195341.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075349.195341, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = '' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075538.068326
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:445:56:
called `Result::unwrap()` on an `Err` value: ParseIntError { kind: InvalidDigit }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1690280 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=20 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-197000:5000,197000:12000,197000-66000:5000,66000:7000,66000-42000:8000,42000:8000,42000-192000:7000,192000:8000,192000-146000:6000,146000:17000,146000-141000:5000,141000:12000,141000-203000:5000,203000:14000,203000-202000:10000,202000:12000,202000-68000:8000,68000:6000,68000-123000:5000,123000:11000,123000-140000:5000,140000:7000,140000-9000:8000,9000:9000,9000-238000:5000,238000:14000,238000-31000:6000,31000:9000,31000-191000:7000,191000:14000,191000-221000:10000,221000:6000,221000-137000:7000,137000:11000,137000-76000:6000,76000:5000,76000-255000:5000,255000:10000,255000-151000:9000,151000:19000,151000-144000:7000,144000:13000,144000-137000:10000,137000:7000,137000-249000:7000,249000:13000,249000-257000:5000,257000:14000,257000-33000:7000,33000:15000,33000-52000:9000,52000:20000,52000-42000:8000,42000:22000,42000-180000:5000,180000:11000,180000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-36000:10000,36000:19000,36000-293000:5000,293000:5000,293000-46000:10000,46000:13000,46000-197000:7000,197000:19000,197000-105000:5000,105000:17000,105000-121000:5000,121000:14000,121000-266000:5000,266000:9000,266000-234000:5000,234000:13000,234000-183000:7000,183000:11000,183000-9000:5000,9000:19000,9000-109000:9000,109000:17000,109000-258000:5000,258000:8000,258000-139000:8000,139000:14000,139000-241000:6000,241000:10000,241000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:2000,218000-293000:5000,293000:13000,293000-9000:9000,9000:6000,9000-266000:10000,266000:5000,266000-81000:10000,81000:20000,81000-102000:9000,102000:13000,102000-187000:5000,187000:14000,187000-127000:8000,127000:15000,127000-143000:10000,143000:19000,143000-142000:9000,142000:7000,142000-9000:7000,9000:6000,9000-189000:5000,189000:19000,189000-178000:8000,178000:9000,178000-39000:9000,39000:16000,39000-46000:9000,46000:16000,46000-182000:5000,182000:4000,182000-300000:5000,300000:12000,300000-291000:8000,291000:16000,291000-76000:6000,76000:20000,76000-157000:8000,157000:5000,157000-60000:8000,60000:12000,60000-193000:5000,193000:20000,193000-157000:7000,157000:13000,157000-82000:9000,82000:9000,82000-129000:8000,129000:15000,129000-13000:8000,13000:6000,13000-264000:5000,264000:20000,264000-181000:10000,181000:20000,181000-226000:7000,226000:13000,226000-253000:8000,253000:8000,253000-240000:8000,240000:1000,240000-213000:5000,213000:19000,213000-149000:10000,149000:11000,149000-140000:9000,140000:17000,140000-67000:5000,67000:9000,67000-26000:6000,26000:9000,26000-231000:5000,231000:7000,231000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-231000:5000,231000:18000,231000-187000:9000,187000:6000,187000-52000:5000,52000:10000,52000-206000:10000,206000:20000,206000-185000:8000,185000:9000,185000-222000:5000,222000:13000,222000-103000:9000,103000:20000,103000-39000:6000,39000:11000,39000-131000:6000,131000:13000,131000-221000:9000,221000:8000,221000-257000:5000,257000:10000,257000-92000:5000,92000:20000,92000-222000:10000,222000:11000,222000-32000:9000,32000:11000,32000-55000:6000,55000:13000,55000-302000:5000,302000:16000,302000-87000:10000,87000:8000,87000-109000:10000,109000:8000,109000-98000:8000,98000:15000,98000-164000:7000,164000:13000,164000-277000:5000,277000:8000,277000-159000:9000,159000:18000,159000-72000:10000,72000:9000,72000-217000:8000,217000:16000,217000-74000:6000,74000:11000,74000-210000:5000,210000:7000,210000-28000:6000,28000:10000,28000-65000:6000,65000:10000,65000-44000:10000,44000:6000,44000-60000:8000,60000:6000,60000-97000:8000,97000:18000,97000-190000:5000,190000:8000,190000-158000:7000,158000:8000,158000-43000:9000,43000:10000,43000-27000:7000,27000:6000,27000-150000:10000,150000:5000,150000-125000:7000,125000:18000,125000-194000:5000,194000:18000,194000-86000:8000,86000:13000,86000-137000:8000,137000:16000,137000-193000:5000,193000:27000,193000-257000:5000,257000:9000,257000-82000:5000,82000:9000,82000-142000:7000,142000:14000,142000-85000:7000,85000:7000,85000-184000:6000,184000:7000,184000-196000:10000,196000:14000,196000-201000:5000,201000:10000,201000-150000:5000,150000:15000,150000-125000:7000,125000:5000,125000-58000:8000,58000:20000,58000-148000:9000,148000:16000,148000-235000:5000,235000:16000,235000-133000:5000,133000:8000,133000-149000:9000,149000:14000,149000-185000:6000,185000:10000,185000-232000:9000,232000:18000,232000-242000:5000,242000:12000,242000-101000:9000,101000:16000,101000-76000:8000,76000:17000,76000-171000:5000,171000:14000,171000-174000:5000,174000:9000,174000-294000:5000,294000:18000,294000-77000:5000,77000:9000,77000-73000:7000,73000:17000,73000-31000:7000,31000:13000,31000-114000:6000,114000:13000,114000-172000:5000,172000:10000,172000-43000:7000,43000:9000,43000-17000:10000,17000:9000,17000-88000:10000,88000:7000,88000-99000:6000,99000:8000,99000-154000:5000,154000:14000,154000-250000:5000,250000:7000,250000-184000:9000,184000:6000,184000-214000:5000,214000:10000,214000-197000:10000,197000:20000,197000-68000:5000,68000:12000,68000-211000:10000,211000:1000,211000-222000:5000,222000:18000,222000-120000:9000,120000:20000,120000-171000:6000,171000:7000,171000-65000:10000,65000:14000,65000-106000:7000,106000:4000,106000-247000:5000,247000:12000,247000-170000:5000,170000:8000,170000-122000:9000,122000:14000,122000-123000:5000,123000:10000,123000-50000:7000,50000:9000,50000-142000:10000,142000:6000,142000-238000:5000,238000:11000,238000-18000:7000,18000:11000,18000-28000:6000,28000:13000,28000-106000:5000,106000:15000,106000-14000:10000,14000:6000,14000-58000:10000,58000:1000,58000-182000:5000,182000:8000,182000-31000:10000,31000:14000,31000-181000:8000,181000:20000,181000-99000:8000,99000:9000,99000-106000:9000,106000:9000,106000-222000:5000,222000:17000,222000-116000:8000,116000:17000,116000-86000:9000,86000:11000,86000-181000:10000,181000:11000,181000-101000:10000,101000:2000,101000-227000:5000,227000:10000,227000-191000:8000,191000:11000,191000-224000:6000,224000:17000,224000-112000:8000,112000:10000,112000-47000:6000,47000:10000,47000-185000:5000,185000:4000,185000-207000:5000,207000:6000,207000-20000:6000,20000:6000,20000-155000:8000,155000:16000,155000-32000:7000,32000:19000,32000-128000:6000,128000:21000,128000-258000:5000,258000:5000,258000-116000:7000,116000:18000,116000-172000:8000,172000:16000,172000-12000:7000,12000:11000,12000-55000:5000,55000:18000,55000-241000:5000,241000:15000,241000-15000:8000,15000:20000,15000-228000:9000,228000:18000,228000-77000:6000,77000:6000,77000-81000:7000,81000:6000,81000-170000:5000,170000:16000,170000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-102000:6000,102000:25000,102000-200000:5000,200000:10000,200000-155000:9000,155000:7000,155000-117000:9000,117000:11000,117000-11000:9000,11000:12000,11000-86000:7000,86000:12000,86000-113000:5000,113000:4000,113000-196000:5000,196000:11000,196000-77000:10000,77000:13000,77000-33000:8000,33000:17000,33000-16000:7000,16000:12000,16000-175000:8000,175000:9000,175000-295000:5000,295000:18000,295000-41000:9000,41000:14000,41000-131000:9000,131000:5000,131000-193000:7000,193000:7000,193000-88000:10000,88000:16000,88000-209000:5000,209000:16000,209000-36000:6000,36000:14000,36000-30000:5000,30000:17000,30000-69000:9000,69000:15000,69000-143000:8000,143000:5000,143000-207000:5000,207000:16000,207000-13000:5000,13000:8000,13000-158000:8000,158000:15000,158000-156000:5000,156000:8000,156000-57000:7000,57000:23000,57000-221000:5000,221000:9000,221000-170000:6000,170000:8000,170000-77000:7000,77000:9000,77000-86000:7000,86000:5000,86000-147000:7000,147000:13000,147000-221000:10000,221000:14000,221000-240000:5000,240000:9000,240000-110000:6000,110000:12000,110000-187000:7000,187000:16000,187000-224000:8000,224000:16000,224000-111000:9000,111000:12000/100000:100000,100000-283000:5000,283000:18000,283000-187000:5000,187000:11000,187000-185000:10000,185000:13000,185000-197000:10000,197000:8000,197000-40000:10000,40000:10000,40000-231000:5000,231000:9000,231000-161000:7000,161000:5000,161000-42000:10000,42000:11000,42000-159000:6000,159000:6000,159000-218000:9000,218000:18000,218000-191000:9000,191000:5000,191000-210000:5000,210000:16000,210000-118000:5000,118000:12000,118000-72000:9000,72000:9000,72000-51000:5000,51000:7000,51000-96000:10000,96000:12000,96000-105000:9000,105000:1000,105000-225000:5000,225000:19000,225000-173000:6000,173000:11000,173000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:12000,128000-223000:5000,223000:12000,223000-144000:9000,144000:6000,144000-171000:10000,171000:7000,171000-72000:6000,72000:19000,72000-200000:6000,200000:20000,200000-300000:5000,300000:5000,300000-194000:8000,194000:15000,194000-239000:5000,239000:17000,239000-48000:6000,48000:10000,48000-149000:7000,149000:12000,149000-97000:9000,97000:1000,97000-187000:5000,187000:20000,187000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:19000,103000-175000:7000,175000:4000,175000-214000:5000,214000:7000,214000-20000:8000,20000:15000,20000-200000:10000,200000:20000,200000-81000:8000,81000:14000,81000-173000:10000,173000:3000,173000-222000:5000,222000:13000,222000-193000:6000,193000:8000,193000-80000:9000,80000:18000,80000-105000:5000,105000:7000,105000-154000:8000,154000:9000,154000-26000:5000,26000:7000,26000-187000:5000,187000:7000,187000-61000:9000,61000:12000,61000-163000:5000,163000:9000,163000-168000:6000,168000:19000,168000-74000:8000,74000:20000,74000-293000:5000,293000:9000,293000-178000:8000,178000:6000,178000-169000:5000,169000:15000,169000-141000:7000,141000:13000,141000-202000:5000,202000:16000,202000-96000:10000,96000:1000,96000-291000:5000,291000:12000,291000-54000:8000,54000:8000,54000-93000:9000,93000:16000,93000-221000:5000,221000:9000,221000-164000:7000,164000:21000,164000-180000:5000,180000:17000,180000-133000:8000,133000:16000,133000-79000:7000,79000:19000,79000-166000:6000,166000:8000,166000-140000:6000,140000:8000,140000-287000:5000,287000:20000,287000-232000:6000,232000:11000,232000-272000:9000,272000:8000,272000-42000:7000,42000:17000,42000-235000:6000,235000:11000,235000-216000:5000,216000:14000,216000-188000:9000,188000:13000,188000-35000:5000,35000:14000,35000-141000:9000,141000:7000,141000-18000:5000,18000:19000,18000-267000:5000,267000:5000,267000-222000:7000,222000:17000,222000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:1000,170000-249000:5000,249000:9000,249000-73000:8000,73000:8000,73000-92000:7000,92000:14000,92000-129000:8000,129000:10000,129000-61000:8000,61000:11000,61000-138000:10000,138000:2000,138000-249000:5000,249000:14000,249000-35000:9000,35000:13000,35000-9000:8000,9000:20000,9000-15000:6000,15000:5000,15000-133000:8000,133000:12000,133000-220000:5000,220000:9000,220000-156000:8000,156000:6000,156000-144000:5000,144000:8000,144000-217000:9000,217000:17000,217000-16000:10000,16000:10000,16000-46000:9000,46000:4000,46000-223000:5000,223000:15000,223000-132000:5000,132000:8000,132000-14000:5000,14000:9000,14000-196000:9000,196000:6000,196000-56000:7000,56000:5000,56000-128000:5000,128000:21000,128000-178000:5000,178000:6000,178000-121000:6000,121000:14000,121000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:19000,117000-203000:5000,203000:20000,203000-188000:10000,188000:13000,188000-52000:10000,52000:20000,52000-142000:10000,142000:12000,142000-267000:5000,267000:5000,267000-197000:8000,197000:18000,197000-66000:10000,66000:19000,66000-223000:7000,223000:17000,223000-31000:9000,31000:2000,31000-290000:5000,290000:19000,290000-242000:9000,242000:7000,242000-35000:8000,35000:17000,35000-260000:9000,260000:26000,260000-286000:5000,286000:10000,286000-277000:9000,277000:14000,277000-73000:8000,73000:9000,73000-152000:5000,152000:18000,152000-207000:7000,207000:15000,207000-223000:5000,223000:8000,223000-113000:8000,113000:12000,113000-204000:8000,204000:13000,204000-187000:9000,187000:9000,187000-201000:8000,201000:6000,201000-167000:6000,167000:8000,167000-279000:5000,279000:18000,279000-170000:9000,170000:18000,170000-118000:6000,118000:13000,118000-143000:5000,143000:12000,143000-250000:10000,250000:4000,250000-245000:5000,245000:11000,245000-129000:6000,129000:10000,129000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-164000:6000,164000:11000,164000-158000:8000,158000:5000,158000-238000:5000,238000:5000,238000-36000:7000,36000:18000,36000-45000:6000,45000:18000,45000-200000:10000,200000:10000,200000-18000:7000,18000:14000,18000-186000:5000,186000:10000,186000-132000:5000,132000:10000,132000-77000:10000,77000:7000,77000-107000:8000,107000:8000,107000-54000:7000,54000:10000,54000-101000:8000,101000:12000,101000-308000:5000,308000:19000,308000-203000:6000,203000:11000,203000-139000:6000,139000:16000,139000-265000:8000,265000:15000,265000-27000:7000,27000:7000,27000-230000:5000,230000:9000,230000-14000:6000,14000:9000,14000-188000:6000,188000:15000,188000-124000:5000,124000:10000,124000-192000:9000,192000:9000,192000-190000:7000,190000:10000,190000-258000:5000,258000:16000,258000-34000:8000,34000:20000,34000-144000:5000,144000:12000,144000-109000:7000,109000:19000,109000-119000:5000,119000:3000,119000-232000:5000,232000:5000,232000-193000:9000,193000:11000,193000-171000:6000,171000:9000,171000-18000:6000,18000:7000,18000-48000:5000,48000:6000,48000-223000:6000,223000:25000,223000-242000:5000,242000:14000,242000-73000:7000,73000:9000,73000-57000:8000,57000:6000,57000-139000:7000,139000:16000,139000-35000:8000,35000:5000,35000-112000:9000,112000:6000,112000-298000:5000,298000:14000,298000-272000:6000,272000:6000,272000-111000:5000,111000:15000,111000-75000:9000,75000:12000,75000-185000:9000,185000:19000,185000-233000:5000,233000:16000,233000-197000:9000,197000:19000,197000-59000:7000,59000:9000,59000-35000:10000,35000:14000,35000-37000:8000,37000:3000,37000-253000:5000,253000:12000,253000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-253000:5000,253000:17000,253000-273000:5000,273000:8000,273000-170000:7000,170000:16000,170000-80000:6000,80000:5000,80000-251000:8000,251000:19000,251000-257000:10000,257000:16000,257000-222000:5000,222000:7000,222000-212000:6000,212000:13000,212000-43000:10000,43000:20000,43000-141000:6000,141000:15000,141000-69000:7000,69000:11000,69000-239000:5000,239000:20000,239000-130000:6000,130000:7000,130000-140000:9000,140000:14000,140000-82000:6000,82000:8000,82000-191000:6000,191000:19000,191000-310000:5000,310000:19000,310000-68000:9000,68000:10000,68000-35000:8000,35000:9000,35000-267000:8000,267000:16000,267000-280000:10000,280000:6000,280000-236000:5000,236000:20000,236000-138000:8000,138000:6000,138000-16000:7000,16000:18000,16000-156000:7000,156000:11000,156000-93000:7000,93000:11000,93000-284000:5000,284000:11000,284000-156000:7000,156000:15000,156000-282000:10000,282000:8000,282000-45000:7000,45000:15000,45000-271000:5000,271000:17000,271000-185000:5000,185000:7000,185000-161000:6000,161000:15000,161000-76000:7000,76000:15000,76000-135000:10000,135000:12000,135000-62000:6000,62000:17000,62000-220000:5000,220000:5000,220000-43000:10000,43000:20000,43000-68000:5000,68000:17000,68000-155000:5000,155000:13000,155000-183000:7000,183000:13000,183000-273000:5000,273000:9000,273000-172000:8000,172000:5000,172000-81000:5000,81000:12000,81000-125000:9000,125000:16000,125000-249000:10000,249000:13000,249000-91000:6000,91000:2000,91000-226000:5000,226000:16000,226000-203000:7000,203000:11000,203000-120000:10000,120000:17000,120000-67000:7000,67000:18000,67000-180000:8000,180000:1000,180000-240000:5000,240000:9000,240000-110000:7000,110000:6000,110000-85000:7000,85000:10000,85000-33000:7000,33000:17000,33000-223000:9000,223000:5000,223000-200000:10000,200000:8000 --exptid=/homes/inho/capybara-data2/20240313-075538.068326 > /homes/inho/capybara-data2/20240313-075538.068326.client
================ TEST COMPLETE =================

[RESULT]20240313-075538.068326, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1690057)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075538.068326 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075538.068326            && sh ms_avg_99p_lat.sh 20240313-075538.068326            && sh ms_total_even_odd_numreq.sh 20240313-075538.068326            && sh latency_cdf.sh 20240313-075538.068326
ERROR: cat: /homes/inho/capybara-data/20240313-075538.068326.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075538.068326.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075538.068326.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075538.068326.latency_trace: No such file or directory



PARSING 20240313-075538.068326 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075538.068326
ERROR: paste: /homes/inho/capybara-data/20240313-075538.068326.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075538.068326, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = '' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075718.775239
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075718.775239, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1691664)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075718.775239 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075718.775239            && sh ms_avg_99p_lat.sh 20240313-075718.775239            && sh ms_total_even_odd_numreq.sh 20240313-075718.775239            && sh latency_cdf.sh 20240313-075718.775239
ERROR: cat: /homes/inho/capybara-data/20240313-075718.775239.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075718.775239.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075718.775239.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075718.775239.latency_trace: No such file or directory



PARSING 20240313-075718.775239 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075718.775239
ERROR: paste: /homes/inho/capybara-data/20240313-075718.775239.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075718.775239, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-075811.203007
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-075811.203007, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1693148)
KILLED CAPYBARA PROCESSES
PARSING 20240313-075811.203007 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-075811.203007            && sh ms_avg_99p_lat.sh 20240313-075811.203007            && sh ms_total_even_odd_numreq.sh 20240313-075811.203007            && sh latency_cdf.sh 20240313-075811.203007
ERROR: cat: /homes/inho/capybara-data/20240313-075811.203007.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-075811.203007.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075811.203007.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-075811.203007.latency_trace: No such file or directory



PARSING 20240313-075811.203007 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-075811.203007
ERROR: paste: /homes/inho/capybara-data/20240313-075811.203007.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-075811.203007, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(20, 20 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-080132.283627
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-080132.283627, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1700671)
KILLED CAPYBARA PROCESSES
PARSING 20240313-080132.283627 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-080132.283627            && sh ms_avg_99p_lat.sh 20240313-080132.283627            && sh ms_total_even_odd_numreq.sh 20240313-080132.283627            && sh latency_cdf.sh 20240313-080132.283627
ERROR: cat: /homes/inho/capybara-data/20240313-080132.283627.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-080132.283627.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080132.283627.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080132.283627.latency_trace: No such file or directory



PARSING 20240313-080132.283627 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-080132.283627
ERROR: paste: /homes/inho/capybara-data/20240313-080132.283627.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-080132.283627, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-080249.007436
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240313-080249.007436, 2, 100, 0, 0, 100, exponential, 250000, 0, 0, 0, 1710316984



iokerneld killed (pid 1702225)
KILLED CAPYBARA PROCESSES
PARSING 20240313-080249.007436 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-080249.007436            && sh ms_avg_99p_lat.sh 20240313-080249.007436            && sh ms_total_even_odd_numreq.sh 20240313-080249.007436            && sh latency_cdf.sh 20240313-080249.007436
ERROR: cat: /homes/inho/capybara-data/20240313-080249.007436.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-080249.007436.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080249.007436.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080249.007436.latency_trace: No such file or directory



PARSING 20240313-080249.007436 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-080249.007436
ERROR: paste: /homes/inho/capybara-data/20240313-080249.007436.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-080249.007436, 2, 100, 0, 0, 100, exponential, 250000, 0, 0, 0, 1710316984

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(25000, 25000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-080354.095985
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240313-080354.095985, 2, 100, 0, 0, 100, exponential, 25000, 0, 0, 0, 1710317049



iokerneld killed (pid 1703722)
KILLED CAPYBARA PROCESSES
PARSING 20240313-080354.095985 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-080354.095985            && sh ms_avg_99p_lat.sh 20240313-080354.095985            && sh ms_total_even_odd_numreq.sh 20240313-080354.095985            && sh latency_cdf.sh 20240313-080354.095985
ERROR: cat: /homes/inho/capybara-data/20240313-080354.095985.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-080354.095985.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080354.095985.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080354.095985.latency_trace: No such file or directory



PARSING 20240313-080354.095985 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-080354.095985
ERROR: paste: /homes/inho/capybara-data/20240313-080354.095985.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-080354.095985, 2, 100, 0, 0, 100, exponential, 25000, 0, 0, 0, 1710317049

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-080437.187120
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-080437.187120, 2, 100, 0, 0, 100, exponential, 2500, 28, 431, 24, 0, inf, inf, inf, inf, inf, 1710317092, 0



iokerneld killed (pid 1705164)
KILLED CAPYBARA PROCESSES
PARSING 20240313-080437.187120 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-080437.187120            && sh ms_avg_99p_lat.sh 20240313-080437.187120            && sh ms_total_even_odd_numreq.sh 20240313-080437.187120            && sh latency_cdf.sh 20240313-080437.187120
ERROR: cat: /homes/inho/capybara-data/20240313-080437.187120.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-080437.187120.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080437.187120.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080437.187120.latency_trace: No such file or directory



PARSING 20240313-080437.187120 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-080437.187120
ERROR: paste: /homes/inho/capybara-data/20240313-080437.187120.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-080437.187120, 2, 100, 0, 0, 100, exponential, 2500, 28, 431, 24, 0, inf, inf, inf, inf, inf, 1710317092, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-080822.514968
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 165


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-080822.514968, 2, 100, 0, 0, 100, exponential, 250, 196, 166, 29, 3, 110.0, inf, inf, inf, inf, 1710317317, 0



iokerneld killed (pid 1707135)
KILLED CAPYBARA PROCESSES
PARSING 20240313-080822.514968 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-080822.514968            && sh ms_avg_99p_lat.sh 20240313-080822.514968            && sh ms_total_even_odd_numreq.sh 20240313-080822.514968            && sh latency_cdf.sh 20240313-080822.514968
ERROR: cat: /homes/inho/capybara-data/20240313-080822.514968.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-080822.514968.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080822.514968.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-080822.514968.latency_trace: No such file or directory



PARSING 20240313-080822.514968 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-080822.514968
ERROR: paste: /homes/inho/capybara-data/20240313-080822.514968.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-080822.514968, 2, 100, 0, 0, 100, exponential, 250, 196, 166, 29, 3, 110.0, inf, inf, inf, inf, 1710317317, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-081332.232038
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 205


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-081332.232038, 2, 100, 0, 0, 100, exponential, 250, 251, 207, 44, 6, 108.0, inf, inf, inf, inf, 1710317626, 0



iokerneld killed (pid 1719775)
KILLED CAPYBARA PROCESSES
PARSING 20240313-081332.232038 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-081332.232038            && sh ms_avg_99p_lat.sh 20240313-081332.232038            && sh ms_total_even_odd_numreq.sh 20240313-081332.232038            && sh latency_cdf.sh 20240313-081332.232038
ERROR: cat: /homes/inho/capybara-data/20240313-081332.232038.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-081332.232038.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-081332.232038.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-081332.232038.latency_trace: No such file or directory



PARSING 20240313-081332.232038 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-081332.232038
ERROR: paste: /homes/inho/capybara-data/20240313-081332.232038.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-081332.232038, 2, 100, 0, 0, 100, exponential, 250, 251, 207, 44, 6, 108.0, inf, inf, inf, inf, 1710317626, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-082232.871102
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 299


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-082232.871102, 2, 100, 0, 0, 100, exponential, 250, 323, 302, 21, 3, 126.0, 6846.0, inf, inf, inf, 1710318167, 0



iokerneld killed (pid 1733123)
KILLED CAPYBARA PROCESSES
PARSING 20240313-082232.871102 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-082232.871102            && sh ms_avg_99p_lat.sh 20240313-082232.871102            && sh ms_total_even_odd_numreq.sh 20240313-082232.871102            && sh latency_cdf.sh 20240313-082232.871102
ERROR: cat: /homes/inho/capybara-data/20240313-082232.871102.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-082232.871102.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-082232.871102.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-082232.871102.latency_trace: No such file or directory



PARSING 20240313-082232.871102 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-082232.871102
ERROR: paste: /homes/inho/capybara-data/20240313-082232.871102.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-082232.871102, 2, 100, 0, 0, 100, exponential, 250, 323, 302, 21, 3, 126.0, 6846.0, inf, inf, inf, 1710318167, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-090910.959545
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 308


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-090910.959545, 2, 100, 0, 0, 100, exponential, 250, 311, 311, 0, 17, 126.0, 4911.0, 6162.0, 6362.0, 6362.0, 1710320965, 0



iokerneld killed (pid 1767116)
KILLED CAPYBARA PROCESSES
PARSING 20240313-090910.959545 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-090910.959545            && sh ms_avg_99p_lat.sh 20240313-090910.959545            && sh ms_total_even_odd_numreq.sh 20240313-090910.959545            && sh latency_cdf.sh 20240313-090910.959545
ERROR: cat: /homes/inho/capybara-data/20240313-090910.959545.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-090910.959545.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-090910.959545.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-090910.959545.latency_trace: No such file or directory



PARSING 20240313-090910.959545 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-090910.959545
ERROR: paste: /homes/inho/capybara-data/20240313-090910.959545.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-090910.959545, 2, 100, 0, 0, 100, exponential, 250, 311, 311, 0, 17, 126.0, 4911.0, 6162.0, 6362.0, 6362.0, 1710320965, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-091145.359333
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-091145.359333, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 1774579)
KILLED CAPYBARA PROCESSES
PARSING 20240313-091145.359333 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-091145.359333            && sh ms_avg_99p_lat.sh 20240313-091145.359333            && sh ms_total_even_odd_numreq.sh 20240313-091145.359333            && sh latency_cdf.sh 20240313-091145.359333
ERROR: cat: /homes/inho/capybara-data/20240313-091145.359333.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-091145.359333.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091145.359333.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091145.359333.latency_trace: No such file or directory



PARSING 20240313-091145.359333 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-091145.359333
ERROR: paste: /homes/inho/capybara-data/20240313-091145.359333.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-091145.359333, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-091551.004469
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-091551.004469, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 1782229)
KILLED CAPYBARA PROCESSES
PARSING 20240313-091551.004469 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-091551.004469            && sh ms_avg_99p_lat.sh 20240313-091551.004469            && sh ms_total_even_odd_numreq.sh 20240313-091551.004469            && sh latency_cdf.sh 20240313-091551.004469
ERROR: cat: /homes/inho/capybara-data/20240313-091551.004469.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-091551.004469.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091551.004469.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091551.004469.latency_trace: No such file or directory



PARSING 20240313-091551.004469 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-091551.004469
ERROR: paste: /homes/inho/capybara-data/20240313-091551.004469.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-091551.004469, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-091639.047148
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-091639.047148, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1783677)
KILLED CAPYBARA PROCESSES
PARSING 20240313-091639.047148 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-091639.047148            && sh ms_avg_99p_lat.sh 20240313-091639.047148            && sh ms_total_even_odd_numreq.sh 20240313-091639.047148            && sh latency_cdf.sh 20240313-091639.047148
ERROR: cat: /homes/inho/capybara-data/20240313-091639.047148.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-091639.047148.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091639.047148.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091639.047148.latency_trace: No such file or directory



PARSING 20240313-091639.047148 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-091639.047148
ERROR: paste: /homes/inho/capybara-data/20240313-091639.047148.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-091639.047148, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-091917.167461
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-091917.167461, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1785380)
KILLED CAPYBARA PROCESSES
PARSING 20240313-091917.167461 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-091917.167461            && sh ms_avg_99p_lat.sh 20240313-091917.167461            && sh ms_total_even_odd_numreq.sh 20240313-091917.167461            && sh latency_cdf.sh 20240313-091917.167461
ERROR: cat: /homes/inho/capybara-data/20240313-091917.167461.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-091917.167461.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091917.167461.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-091917.167461.latency_trace: No such file or directory



PARSING 20240313-091917.167461 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-091917.167461
ERROR: paste: /homes/inho/capybara-data/20240313-091917.167461.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-091917.167461, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092028.071934
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:445:56:
called `Result::unwrap()` on an `Err` value: ParseIntError { kind: InvalidDigit }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1787113 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=250 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-197000:5000,197000:12000,197000-66000:5000,66000:7000,66000-42000:8000,42000:8000,42000-192000:7000,192000:8000,192000-146000:6000,146000:17000,146000-141000:5000,141000:12000,141000-203000:5000,203000:14000,203000-202000:10000,202000:12000,202000-68000:8000,68000:6000,68000-123000:5000,123000:11000,123000-140000:5000,140000:7000,140000-9000:8000,9000:9000,9000-238000:5000,238000:14000,238000-31000:6000,31000:9000,31000-191000:7000,191000:14000,191000-221000:10000,221000:6000,221000-137000:7000,137000:11000,137000-76000:6000,76000:5000,76000-255000:5000,255000:10000,255000-151000:9000,151000:19000,151000-144000:7000,144000:13000,144000-137000:10000,137000:7000,137000-249000:7000,249000:13000,249000-257000:5000,257000:14000,257000-33000:7000,33000:15000,33000-52000:9000,52000:20000,52000-42000:8000,42000:22000,42000-180000:5000,180000:11000,180000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-36000:10000,36000:19000,36000-293000:5000,293000:5000,293000-46000:10000,46000:13000,46000-197000:7000,197000:19000,197000-105000:5000,105000:17000,105000-121000:5000,121000:14000,121000-266000:5000,266000:9000,266000-234000:5000,234000:13000,234000-183000:7000,183000:11000,183000-9000:5000,9000:19000,9000-109000:9000,109000:17000,109000-258000:5000,258000:8000,258000-139000:8000,139000:14000,139000-241000:6000,241000:10000,241000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:2000,218000-293000:5000,293000:13000,293000-9000:9000,9000:6000,9000-266000:10000,266000:5000,266000-81000:10000,81000:20000,81000-102000:9000,102000:13000,102000-187000:5000,187000:14000,187000-127000:8000,127000:15000,127000-143000:10000,143000:19000,143000-142000:9000,142000:7000,142000-9000:7000,9000:6000,9000-189000:5000,189000:19000,189000-178000:8000,178000:9000,178000-39000:9000,39000:16000,39000-46000:9000,46000:16000,46000-182000:5000,182000:4000,182000-300000:5000,300000:12000,300000-291000:8000,291000:16000,291000-76000:6000,76000:20000,76000-157000:8000,157000:5000,157000-60000:8000,60000:12000,60000-193000:5000,193000:20000,193000-157000:7000,157000:13000,157000-82000:9000,82000:9000,82000-129000:8000,129000:15000,129000-13000:8000,13000:6000,13000-264000:5000,264000:20000,264000-181000:10000,181000:20000,181000-226000:7000,226000:13000,226000-253000:8000,253000:8000,253000-240000:8000,240000:1000,240000-213000:5000,213000:19000,213000-149000:10000,149000:11000,149000-140000:9000,140000:17000,140000-67000:5000,67000:9000,67000-26000:6000,26000:9000,26000-231000:5000,231000:7000,231000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-231000:5000,231000:18000,231000-187000:9000,187000:6000,187000-52000:5000,52000:10000,52000-206000:10000,206000:20000,206000-185000:8000,185000:9000,185000-222000:5000,222000:13000,222000-103000:9000,103000:20000,103000-39000:6000,39000:11000,39000-131000:6000,131000:13000,131000-221000:9000,221000:8000,221000-257000:5000,257000:10000,257000-92000:5000,92000:20000,92000-222000:10000,222000:11000,222000-32000:9000,32000:11000,32000-55000:6000,55000:13000,55000-302000:5000,302000:16000,302000-87000:10000,87000:8000,87000-109000:10000,109000:8000,109000-98000:8000,98000:15000,98000-164000:7000,164000:13000,164000-277000:5000,277000:8000,277000-159000:9000,159000:18000,159000-72000:10000,72000:9000,72000-217000:8000,217000:16000,217000-74000:6000,74000:11000,74000-210000:5000,210000:7000,210000-28000:6000,28000:10000,28000-65000:6000,65000:10000,65000-44000:10000,44000:6000,44000-60000:8000,60000:6000,60000-97000:8000,97000:18000,97000-190000:5000,190000:8000,190000-158000:7000,158000:8000,158000-43000:9000,43000:10000,43000-27000:7000,27000:6000,27000-150000:10000,150000:5000,150000-125000:7000,125000:18000,125000-194000:5000,194000:18000,194000-86000:8000,86000:13000,86000-137000:8000,137000:16000,137000-193000:5000,193000:27000,193000-257000:5000,257000:9000,257000-82000:5000,82000:9000,82000-142000:7000,142000:14000,142000-85000:7000,85000:7000,85000-184000:6000,184000:7000,184000-196000:10000,196000:14000,196000-201000:5000,201000:10000,201000-150000:5000,150000:15000,150000-125000:7000,125000:5000,125000-58000:8000,58000:20000,58000-148000:9000,148000:16000,148000-235000:5000,235000:16000,235000-133000:5000,133000:8000,133000-149000:9000,149000:14000,149000-185000:6000,185000:10000,185000-232000:9000,232000:18000,232000-242000:5000,242000:12000,242000-101000:9000,101000:16000,101000-76000:8000,76000:17000,76000-171000:5000,171000:14000,171000-174000:5000,174000:9000,174000-294000:5000,294000:18000,294000-77000:5000,77000:9000,77000-73000:7000,73000:17000,73000-31000:7000,31000:13000,31000-114000:6000,114000:13000,114000-172000:5000,172000:10000,172000-43000:7000,43000:9000,43000-17000:10000,17000:9000,17000-88000:10000,88000:7000,88000-99000:6000,99000:8000,99000-154000:5000,154000:14000,154000-250000:5000,250000:7000,250000-184000:9000,184000:6000,184000-214000:5000,214000:10000,214000-197000:10000,197000:20000,197000-68000:5000,68000:12000,68000-211000:10000,211000:1000,211000-222000:5000,222000:18000,222000-120000:9000,120000:20000,120000-171000:6000,171000:7000,171000-65000:10000,65000:14000,65000-106000:7000,106000:4000,106000-247000:5000,247000:12000,247000-170000:5000,170000:8000,170000-122000:9000,122000:14000,122000-123000:5000,123000:10000,123000-50000:7000,50000:9000,50000-142000:10000,142000:6000,142000-238000:5000,238000:11000,238000-18000:7000,18000:11000,18000-28000:6000,28000:13000,28000-106000:5000,106000:15000,106000-14000:10000,14000:6000,14000-58000:10000,58000:1000,58000-182000:5000,182000:8000,182000-31000:10000,31000:14000,31000-181000:8000,181000:20000,181000-99000:8000,99000:9000,99000-106000:9000,106000:9000,106000-222000:5000,222000:17000,222000-116000:8000,116000:17000,116000-86000:9000,86000:11000,86000-181000:10000,181000:11000,181000-101000:10000,101000:2000,101000-227000:5000,227000:10000,227000-191000:8000,191000:11000,191000-224000:6000,224000:17000,224000-112000:8000,112000:10000,112000-47000:6000,47000:10000,47000-185000:5000,185000:4000,185000-207000:5000,207000:6000,207000-20000:6000,20000:6000,20000-155000:8000,155000:16000,155000-32000:7000,32000:19000,32000-128000:6000,128000:21000,128000-258000:5000,258000:5000,258000-116000:7000,116000:18000,116000-172000:8000,172000:16000,172000-12000:7000,12000:11000,12000-55000:5000,55000:18000,55000-241000:5000,241000:15000,241000-15000:8000,15000:20000,15000-228000:9000,228000:18000,228000-77000:6000,77000:6000,77000-81000:7000,81000:6000,81000-170000:5000,170000:16000,170000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-102000:6000,102000:25000,102000-200000:5000,200000:10000,200000-155000:9000,155000:7000,155000-117000:9000,117000:11000,117000-11000:9000,11000:12000,11000-86000:7000,86000:12000,86000-113000:5000,113000:4000,113000-196000:5000,196000:11000,196000-77000:10000,77000:13000,77000-33000:8000,33000:17000,33000-16000:7000,16000:12000,16000-175000:8000,175000:9000,175000-295000:5000,295000:18000,295000-41000:9000,41000:14000,41000-131000:9000,131000:5000,131000-193000:7000,193000:7000,193000-88000:10000,88000:16000,88000-209000:5000,209000:16000,209000-36000:6000,36000:14000,36000-30000:5000,30000:17000,30000-69000:9000,69000:15000,69000-143000:8000,143000:5000,143000-207000:5000,207000:16000,207000-13000:5000,13000:8000,13000-158000:8000,158000:15000,158000-156000:5000,156000:8000,156000-57000:7000,57000:23000,57000-221000:5000,221000:9000,221000-170000:6000,170000:8000,170000-77000:7000,77000:9000,77000-86000:7000,86000:5000,86000-147000:7000,147000:13000,147000-221000:10000,221000:14000,221000-240000:5000,240000:9000,240000-110000:6000,110000:12000,110000-187000:7000,187000:16000,187000-224000:8000,224000:16000,224000-111000:9000,111000:12000/100000:100000,100000-283000:5000,283000:18000,283000-187000:5000,187000:11000,187000-185000:10000,185000:13000,185000-197000:10000,197000:8000,197000-40000:10000,40000:10000,40000-231000:5000,231000:9000,231000-161000:7000,161000:5000,161000-42000:10000,42000:11000,42000-159000:6000,159000:6000,159000-218000:9000,218000:18000,218000-191000:9000,191000:5000,191000-210000:5000,210000:16000,210000-118000:5000,118000:12000,118000-72000:9000,72000:9000,72000-51000:5000,51000:7000,51000-96000:10000,96000:12000,96000-105000:9000,105000:1000,105000-225000:5000,225000:19000,225000-173000:6000,173000:11000,173000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:12000,128000-223000:5000,223000:12000,223000-144000:9000,144000:6000,144000-171000:10000,171000:7000,171000-72000:6000,72000:19000,72000-200000:6000,200000:20000,200000-300000:5000,300000:5000,300000-194000:8000,194000:15000,194000-239000:5000,239000:17000,239000-48000:6000,48000:10000,48000-149000:7000,149000:12000,149000-97000:9000,97000:1000,97000-187000:5000,187000:20000,187000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:19000,103000-175000:7000,175000:4000,175000-214000:5000,214000:7000,214000-20000:8000,20000:15000,20000-200000:10000,200000:20000,200000-81000:8000,81000:14000,81000-173000:10000,173000:3000,173000-222000:5000,222000:13000,222000-193000:6000,193000:8000,193000-80000:9000,80000:18000,80000-105000:5000,105000:7000,105000-154000:8000,154000:9000,154000-26000:5000,26000:7000,26000-187000:5000,187000:7000,187000-61000:9000,61000:12000,61000-163000:5000,163000:9000,163000-168000:6000,168000:19000,168000-74000:8000,74000:20000,74000-293000:5000,293000:9000,293000-178000:8000,178000:6000,178000-169000:5000,169000:15000,169000-141000:7000,141000:13000,141000-202000:5000,202000:16000,202000-96000:10000,96000:1000,96000-291000:5000,291000:12000,291000-54000:8000,54000:8000,54000-93000:9000,93000:16000,93000-221000:5000,221000:9000,221000-164000:7000,164000:21000,164000-180000:5000,180000:17000,180000-133000:8000,133000:16000,133000-79000:7000,79000:19000,79000-166000:6000,166000:8000,166000-140000:6000,140000:8000,140000-287000:5000,287000:20000,287000-232000:6000,232000:11000,232000-272000:9000,272000:8000,272000-42000:7000,42000:17000,42000-235000:6000,235000:11000,235000-216000:5000,216000:14000,216000-188000:9000,188000:13000,188000-35000:5000,35000:14000,35000-141000:9000,141000:7000,141000-18000:5000,18000:19000,18000-267000:5000,267000:5000,267000-222000:7000,222000:17000,222000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:1000,170000-249000:5000,249000:9000,249000-73000:8000,73000:8000,73000-92000:7000,92000:14000,92000-129000:8000,129000:10000,129000-61000:8000,61000:11000,61000-138000:10000,138000:2000,138000-249000:5000,249000:14000,249000-35000:9000,35000:13000,35000-9000:8000,9000:20000,9000-15000:6000,15000:5000,15000-133000:8000,133000:12000,133000-220000:5000,220000:9000,220000-156000:8000,156000:6000,156000-144000:5000,144000:8000,144000-217000:9000,217000:17000,217000-16000:10000,16000:10000,16000-46000:9000,46000:4000,46000-223000:5000,223000:15000,223000-132000:5000,132000:8000,132000-14000:5000,14000:9000,14000-196000:9000,196000:6000,196000-56000:7000,56000:5000,56000-128000:5000,128000:21000,128000-178000:5000,178000:6000,178000-121000:6000,121000:14000,121000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:19000,117000-203000:5000,203000:20000,203000-188000:10000,188000:13000,188000-52000:10000,52000:20000,52000-142000:10000,142000:12000,142000-267000:5000,267000:5000,267000-197000:8000,197000:18000,197000-66000:10000,66000:19000,66000-223000:7000,223000:17000,223000-31000:9000,31000:2000,31000-290000:5000,290000:19000,290000-242000:9000,242000:7000,242000-35000:8000,35000:17000,35000-260000:9000,260000:26000,260000-286000:5000,286000:10000,286000-277000:9000,277000:14000,277000-73000:8000,73000:9000,73000-152000:5000,152000:18000,152000-207000:7000,207000:15000,207000-223000:5000,223000:8000,223000-113000:8000,113000:12000,113000-204000:8000,204000:13000,204000-187000:9000,187000:9000,187000-201000:8000,201000:6000,201000-167000:6000,167000:8000,167000-279000:5000,279000:18000,279000-170000:9000,170000:18000,170000-118000:6000,118000:13000,118000-143000:5000,143000:12000,143000-250000:10000,250000:4000,250000-245000:5000,245000:11000,245000-129000:6000,129000:10000,129000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-164000:6000,164000:11000,164000-158000:8000,158000:5000,158000-238000:5000,238000:5000,238000-36000:7000,36000:18000,36000-45000:6000,45000:18000,45000-200000:10000,200000:10000,200000-18000:7000,18000:14000,18000-186000:5000,186000:10000,186000-132000:5000,132000:10000,132000-77000:10000,77000:7000,77000-107000:8000,107000:8000,107000-54000:7000,54000:10000,54000-101000:8000,101000:12000,101000-308000:5000,308000:19000,308000-203000:6000,203000:11000,203000-139000:6000,139000:16000,139000-265000:8000,265000:15000,265000-27000:7000,27000:7000,27000-230000:5000,230000:9000,230000-14000:6000,14000:9000,14000-188000:6000,188000:15000,188000-124000:5000,124000:10000,124000-192000:9000,192000:9000,192000-190000:7000,190000:10000,190000-258000:5000,258000:16000,258000-34000:8000,34000:20000,34000-144000:5000,144000:12000,144000-109000:7000,109000:19000,109000-119000:5000,119000:3000,119000-232000:5000,232000:5000,232000-193000:9000,193000:11000,193000-171000:6000,171000:9000,171000-18000:6000,18000:7000,18000-48000:5000,48000:6000,48000-223000:6000,223000:25000,223000-242000:5000,242000:14000,242000-73000:7000,73000:9000,73000-57000:8000,57000:6000,57000-139000:7000,139000:16000,139000-35000:8000,35000:5000,35000-112000:9000,112000:6000,112000-298000:5000,298000:14000,298000-272000:6000,272000:6000,272000-111000:5000,111000:15000,111000-75000:9000,75000:12000,75000-185000:9000,185000:19000,185000-233000:5000,233000:16000,233000-197000:9000,197000:19000,197000-59000:7000,59000:9000,59000-35000:10000,35000:14000,35000-37000:8000,37000:3000,37000-253000:5000,253000:12000,253000-153000:8000,153000:17000,153000-204000:7000,204000:15000,204000-108000:5000,108000:9000,108000-253000:5000,253000:17000,253000-273000:5000,273000:8000,273000-170000:7000,170000:16000,170000-80000:6000,80000:5000,80000-251000:8000,251000:19000,251000-257000:10000,257000:16000,257000-222000:5000,222000:7000,222000-212000:6000,212000:13000,212000-43000:10000,43000:20000,43000-141000:6000,141000:15000,141000-69000:7000,69000:11000,69000-239000:5000,239000:20000,239000-130000:6000,130000:7000,130000-140000:9000,140000:14000,140000-82000:6000,82000:8000,82000-191000:6000,191000:19000,191000-310000:5000,310000:19000,310000-68000:9000,68000:10000,68000-35000:8000,35000:9000,35000-267000:8000,267000:16000,267000-280000:10000,280000:6000,280000-236000:5000,236000:20000,236000-138000:8000,138000:6000,138000-16000:7000,16000:18000,16000-156000:7000,156000:11000,156000-93000:7000,93000:11000,93000-284000:5000,284000:11000,284000-156000:7000,156000:15000,156000-282000:10000,282000:8000,282000-45000:7000,45000:15000,45000-271000:5000,271000:17000,271000-185000:5000,185000:7000,185000-161000:6000,161000:15000,161000-76000:7000,76000:15000,76000-135000:10000,135000:12000,135000-62000:6000,62000:17000,62000-220000:5000,220000:5000,220000-43000:10000,43000:20000,43000-68000:5000,68000:17000,68000-155000:5000,155000:13000,155000-183000:7000,183000:13000,183000-273000:5000,273000:9000,273000-172000:8000,172000:5000,172000-81000:5000,81000:12000,81000-125000:9000,125000:16000,125000-249000:10000,249000:13000,249000-91000:6000,91000:2000,91000-226000:5000,226000:16000,226000-203000:7000,203000:11000,203000-120000:10000,120000:17000,120000-67000:7000,67000:18000,67000-180000:8000,180000:1000,180000-240000:5000,240000:9000,240000-110000:7000,110000:6000,110000-85000:7000,85000:10000,85000-33000:7000,33000:17000,33000-223000:9000,223000:5000,223000-200000:10000,200000:8000 --exptid=/homes/inho/capybara-data2/20240313-092028.071934 > /homes/inho/capybara-data2/20240313-092028.071934.client
================ TEST COMPLETE =================

[RESULT]20240313-092028.071934, 2, 1, 0, 1, 100, N/A



iokerneld killed (pid 1786890)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092028.071934 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092028.071934            && sh ms_avg_99p_lat.sh 20240313-092028.071934            && sh ms_total_even_odd_numreq.sh 20240313-092028.071934            && sh latency_cdf.sh 20240313-092028.071934
ERROR: cat: /homes/inho/capybara-data/20240313-092028.071934.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092028.071934.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092028.071934.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092028.071934.latency_trace: No such file or directory



PARSING 20240313-092028.071934 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092028.071934
ERROR: paste: /homes/inho/capybara-data/20240313-092028.071934.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092028.071934, 2, 1, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092154.496312
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 52591


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092154.496312, 2, 1, 0, 1, 100, exponential, 250000, 58369, 56390, 0, 171499, 35241.0, 35875.0, 36467.0, 36539.0, 36561.0, 1710321729, 0



iokerneld killed (pid 1788436)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092154.496312 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092154.496312            && sh ms_avg_99p_lat.sh 20240313-092154.496312            && sh ms_total_even_odd_numreq.sh 20240313-092154.496312            && sh latency_cdf.sh 20240313-092154.496312
ERROR: cat: /homes/inho/capybara-data/20240313-092154.496312.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092154.496312.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092154.496312.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092154.496312.latency_trace: No such file or directory



PARSING 20240313-092154.496312 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092154.496312
ERROR: paste: /homes/inho/capybara-data/20240313-092154.496312.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092154.496312, 2, 1, 0, 1, 100, exponential, 250000, 58369, 56390, 0, 171499, 35241.0, 35875.0, 36467.0, 36539.0, 36561.0, 1710321729, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092301.019659
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 52684


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092301.019659, 2, 1, 0, 0, 100, exponential, 250000, 58472, 56457, 0, 171406, 35189.0, 35878.0, 36448.0, 36496.0, 36518.0, 1710321795, 0



iokerneld killed (pid 1789922)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092301.019659 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092301.019659            && sh ms_avg_99p_lat.sh 20240313-092301.019659            && sh ms_total_even_odd_numreq.sh 20240313-092301.019659            && sh latency_cdf.sh 20240313-092301.019659
ERROR: cat: /homes/inho/capybara-data/20240313-092301.019659.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092301.019659.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092301.019659.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092301.019659.latency_trace: No such file or directory



PARSING 20240313-092301.019659 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092301.019659
ERROR: paste: /homes/inho/capybara-data/20240313-092301.019659.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092301.019659, 2, 1, 0, 0, 100, exponential, 250000, 58472, 56457, 0, 171406, 35189.0, 35878.0, 36448.0, 36496.0, 36518.0, 1710321795, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092409.551690
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 53597


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092409.551690, 2, 1, 0, 0, 100, exponential, 200000, 59489, 57523, 0, 125750, 34637.0, 35215.0, 35743.0, 35862.0, 35879.0, 1710321864, 0



iokerneld killed (pid 1791402)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092409.551690 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092409.551690            && sh ms_avg_99p_lat.sh 20240313-092409.551690            && sh ms_total_even_odd_numreq.sh 20240313-092409.551690            && sh latency_cdf.sh 20240313-092409.551690
ERROR: cat: /homes/inho/capybara-data/20240313-092409.551690.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092409.551690.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092409.551690.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092409.551690.latency_trace: No such file or directory



PARSING 20240313-092409.551690 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092409.551690
ERROR: paste: /homes/inho/capybara-data/20240313-092409.551690.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092409.551690, 2, 1, 0, 0, 100, exponential, 200000, 59489, 57523, 0, 125750, 34637.0, 35215.0, 35743.0, 35862.0, 35879.0, 1710321864, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092447.463209
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 179847


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092447.463209, 2, 10, 0, 0, 100, exponential, 200000, 199225, 199222, 0, 7, 13.0, 21.0, 32.0, 46.0, 63.0, 1710321902, 0



iokerneld killed (pid 1792809)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092447.463209 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092447.463209            && sh ms_avg_99p_lat.sh 20240313-092447.463209            && sh ms_total_even_odd_numreq.sh 20240313-092447.463209            && sh latency_cdf.sh 20240313-092447.463209
ERROR: cat: /homes/inho/capybara-data/20240313-092447.463209.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092447.463209.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092447.463209.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092447.463209.latency_trace: No such file or directory



PARSING 20240313-092447.463209 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092447.463209
ERROR: paste: /homes/inho/capybara-data/20240313-092447.463209.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092447.463209, 2, 10, 0, 0, 100, exponential, 200000, 199225, 199222, 0, 7, 13.0, 21.0, 32.0, 46.0, 63.0, 1710321902, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092617.875483
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 179842


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092617.875483, 2, 10, 0, 0, 100, exponential, 200000, 199219, 199215, 0, 12, 14.0, 21.0, 32.0, 46.0, 59.0, 1710321992, 0



iokerneld killed (pid 1794319)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092617.875483 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092617.875483            && sh ms_avg_99p_lat.sh 20240313-092617.875483            && sh ms_total_even_odd_numreq.sh 20240313-092617.875483            && sh latency_cdf.sh 20240313-092617.875483
ERROR: cat: /homes/inho/capybara-data/20240313-092617.875483.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092617.875483.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092617.875483.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092617.875483.latency_trace: No such file or directory



PARSING 20240313-092617.875483 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092617.875483
ERROR: paste: /homes/inho/capybara-data/20240313-092617.875483.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092617.875483, 2, 10, 0, 0, 100, exponential, 200000, 199219, 199215, 0, 12, 14.0, 21.0, 32.0, 46.0, 59.0, 1710321992, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092703.340218
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 179845


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092703.340218, 2, 10, 0, 1, 100, exponential, 200000, 199222, 199220, 0, 9, 14.0, 21.0, 33.0, 46.0, 64.0, 1710322037, 0



iokerneld killed (pid 1795759)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092703.340218 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092703.340218            && sh ms_avg_99p_lat.sh 20240313-092703.340218            && sh ms_total_even_odd_numreq.sh 20240313-092703.340218            && sh latency_cdf.sh 20240313-092703.340218
ERROR: cat: /homes/inho/capybara-data/20240313-092703.340218.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092703.340218.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092703.340218.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092703.340218.latency_trace: No such file or directory



PARSING 20240313-092703.340218 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092703.340218
ERROR: paste: /homes/inho/capybara-data/20240313-092703.340218.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092703.340218, 2, 10, 0, 1, 100, exponential, 200000, 199222, 199220, 0, 9, 14.0, 21.0, 33.0, 46.0, 64.0, 1710322037, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(500000, 500000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092744.347467
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 449175


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092744.347467, 2, 10, 0, 0, 100, exponential, 500000, 498391, 498319, 0, 74, 55.0, 156.0, 326.0, 558.0, 806.0, 1710322078, 0



iokerneld killed (pid 1797192)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092744.347467 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092744.347467            && sh ms_avg_99p_lat.sh 20240313-092744.347467            && sh ms_total_even_odd_numreq.sh 20240313-092744.347467            && sh latency_cdf.sh 20240313-092744.347467
ERROR: cat: /homes/inho/capybara-data/20240313-092744.347467.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092744.347467.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092744.347467.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092744.347467.latency_trace: No such file or directory



PARSING 20240313-092744.347467 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092744.347467
ERROR: paste: /homes/inho/capybara-data/20240313-092744.347467.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092744.347467, 2, 10, 0, 0, 100, exponential, 500000, 498391, 498319, 0, 74, 55.0, 156.0, 326.0, 558.0, 806.0, 1710322078, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(500000, 500000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092823.411368
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 449167


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092823.411368, 2, 10, 0, 1, 100, exponential, 500000, 498384, 498308, 0, 82, 54.0, 152.0, 302.0, 501.0, 840.0, 1710322118, 0



iokerneld killed (pid 1798610)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092823.411368 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092823.411368            && sh ms_avg_99p_lat.sh 20240313-092823.411368            && sh ms_total_even_odd_numreq.sh 20240313-092823.411368            && sh latency_cdf.sh 20240313-092823.411368
ERROR: cat: /homes/inho/capybara-data/20240313-092823.411368.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092823.411368.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092823.411368.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092823.411368.latency_trace: No such file or directory



PARSING 20240313-092823.411368 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092823.411368
ERROR: paste: /homes/inho/capybara-data/20240313-092823.411368.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092823.411368, 2, 10, 0, 1, 100, exponential, 500000, 498384, 498308, 0, 82, 54.0, 152.0, 302.0, 501.0, 840.0, 1710322118, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(500000, 500000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-092910.031465
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 449180


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-092910.031465, 2, 10, 0, 10, 100, exponential, 500000, 498398, 498325, 0, 69, 59.0, 169.0, 342.0, 589.0, 851.0, 1710322164, 0



iokerneld killed (pid 1800057)
KILLED CAPYBARA PROCESSES
PARSING 20240313-092910.031465 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-092910.031465            && sh ms_avg_99p_lat.sh 20240313-092910.031465            && sh ms_total_even_odd_numreq.sh 20240313-092910.031465            && sh latency_cdf.sh 20240313-092910.031465
ERROR: cat: /homes/inho/capybara-data/20240313-092910.031465.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-092910.031465.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092910.031465.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-092910.031465.latency_trace: No such file or directory



PARSING 20240313-092910.031465 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-092910.031465
ERROR: paste: /homes/inho/capybara-data/20240313-092910.031465.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-092910.031465, 2, 10, 0, 10, 100, exponential, 500000, 498398, 498325, 0, 69, 59.0, 169.0, 342.0, 589.0, 851.0, 1710322164, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-093233.687557
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 180298


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-093233.687557, 2, 10, 0, 10, 100, exponential, 250000, 199747, 199743, 2, 9, 14.0, 49.0, 181.0, 290.0, 402.0, 1710322368, 0



iokerneld killed (pid 1801931)
KILLED CAPYBARA PROCESSES
PARSING 20240313-093233.687557 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-093233.687557            && sh ms_avg_99p_lat.sh 20240313-093233.687557            && sh ms_total_even_odd_numreq.sh 20240313-093233.687557            && sh latency_cdf.sh 20240313-093233.687557
ERROR: cat: /homes/inho/capybara-data/20240313-093233.687557.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-093233.687557.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093233.687557.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093233.687557.latency_trace: No such file or directory



PARSING 20240313-093233.687557 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-093233.687557
ERROR: paste: /homes/inho/capybara-data/20240313-093233.687557.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-093233.687557, 2, 10, 0, 10, 100, exponential, 250000, 199747, 199743, 2, 9, 14.0, 49.0, 181.0, 290.0, 402.0, 1710322368, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-093340.066731
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-093340.066731, 2, 10, 0, 10, 100, N/A



iokerneld killed (pid 1803430)
KILLED CAPYBARA PROCESSES
PARSING 20240313-093340.066731 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-093340.066731            && sh ms_avg_99p_lat.sh 20240313-093340.066731            && sh ms_total_even_odd_numreq.sh 20240313-093340.066731            && sh latency_cdf.sh 20240313-093340.066731
ERROR: cat: /homes/inho/capybara-data/20240313-093340.066731.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-093340.066731.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093340.066731.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093340.066731.latency_trace: No such file or directory



PARSING 20240313-093340.066731 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-093340.066731
ERROR: paste: /homes/inho/capybara-data/20240313-093340.066731.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-093340.066731, 2, 10, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-093707.235008
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-093707.235008, 2, 10, 0, 10, 100, N/A



iokerneld killed (pid 1810947)
KILLED CAPYBARA PROCESSES
PARSING 20240313-093707.235008 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-093707.235008            && sh ms_avg_99p_lat.sh 20240313-093707.235008            && sh ms_total_even_odd_numreq.sh 20240313-093707.235008            && sh latency_cdf.sh 20240313-093707.235008
ERROR: cat: /homes/inho/capybara-data/20240313-093707.235008.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-093707.235008.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093707.235008.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093707.235008.latency_trace: No such file or directory



PARSING 20240313-093707.235008 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-093707.235008
ERROR: paste: /homes/inho/capybara-data/20240313-093707.235008.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-093707.235008, 2, 10, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-093852.515989
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-093852.515989, 2, 100, 0, 10, 100, N/A



iokerneld killed (pid 1812548)
KILLED CAPYBARA PROCESSES
PARSING 20240313-093852.515989 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-093852.515989            && sh ms_avg_99p_lat.sh 20240313-093852.515989            && sh ms_total_even_odd_numreq.sh 20240313-093852.515989            && sh latency_cdf.sh 20240313-093852.515989
ERROR: cat: /homes/inho/capybara-data/20240313-093852.515989.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-093852.515989.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093852.515989.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-093852.515989.latency_trace: No such file or directory



PARSING 20240313-093852.515989 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-093852.515989
ERROR: paste: /homes/inho/capybara-data/20240313-093852.515989.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-093852.515989, 2, 100, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-125656.955348
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


69385    30202    18566    13146    10057    8081    6716    5722    4967    4377    3904    3517    3195    2923    2691    2490    2315    2162    2026    1905    1797    1699    1611    1531    1457    1390    1329    1272    1220    1171    1126    1084    1044    1008    973    941    910    882    855    829    805    782    760    739    720    701    683    666    650    634    619    605    591    578    566    553    542    531    520    509    499    490    480    471    463    454    446    438    431    423    416    409    402    396    390    383    377    372    366    361    355    350    345    340    335    331    326    322    317    313    309    305    301    297    293    290    286    283    279    276    

================ TEST COMPLETE =================

[RESULT]20240313-125656.955348, 2, 100, 0, 10, 100, exponential, 250000, 0, 0, 0, 1710334631



iokerneld killed (pid 1850217)
KILLED CAPYBARA PROCESSES
PARSING 20240313-125656.955348 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-125656.955348            && sh ms_avg_99p_lat.sh 20240313-125656.955348            && sh ms_total_even_odd_numreq.sh 20240313-125656.955348            && sh latency_cdf.sh 20240313-125656.955348
ERROR: cat: /homes/inho/capybara-data/20240313-125656.955348.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-125656.955348.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-125656.955348.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-125656.955348.latency_trace: No such file or directory



PARSING 20240313-125656.955348 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-125656.955348
ERROR: paste: /homes/inho/capybara-data/20240313-125656.955348.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-125656.955348, 2, 100, 0, 10, 100, exponential, 250000, 0, 0, 0, 1710334631

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-125738.591201
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


693    302    185    131    100    80    67    57    49    43    39    35    31    29    26    24    23    21    20    19    17    16    16    15    14    13    13    12    12    11    11    10    10    10    9    9    9    8    8    8    8    7    7    7    7    7    6    6    6    6    6    6    5    5    5    5    5    5    5    5    4    4    4    4    4    4    4    4    4    4    4    4    4    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    2    2    2    2    2    2    2    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-125738.591201, 2, 100, 0, 10, 100, exponential, 2500, 2782, 2781, 0, 14, 127.0, 301.0, 4314.0, 5108.0, 8967.0, 1710334673, 0



iokerneld killed (pid 1851686)
KILLED CAPYBARA PROCESSES
PARSING 20240313-125738.591201 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-125738.591201            && sh ms_avg_99p_lat.sh 20240313-125738.591201            && sh ms_total_even_odd_numreq.sh 20240313-125738.591201            && sh latency_cdf.sh 20240313-125738.591201
ERROR: cat: /homes/inho/capybara-data/20240313-125738.591201.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-125738.591201.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-125738.591201.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-125738.591201.latency_trace: No such file or directory



PARSING 20240313-125738.591201 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-125738.591201
ERROR: paste: /homes/inho/capybara-data/20240313-125738.591201.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-125738.591201, 2, 100, 0, 10, 100, exponential, 2500, 2782, 2781, 0, 14, 127.0, 301.0, 4314.0, 5108.0, 8967.0, 1710334673, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-125908.783106
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


693    302    185    131    100    80    67    57    49    43    39    35    31    29    26    24    23    21    20    19    17    16    16    15    14    13    13    12    12    11    11    10    10    10    9    9    9    8    8    8    8    7    7    7    7    7    6    6    6    6    6    6    5    5    5    5    5    5    5    5    4    4    4    4    4    4    4    4    4    4    4    4    4    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    3    2    2    2    2    2    2    2    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-125908.783106, 2, 100, 0, 100, 100, exponential, 2500, 2745, 2758, 57, 14, 1835.0, 12715.0, inf, inf, inf, 1710334763, 0



iokerneld killed (pid 1853211)
KILLED CAPYBARA PROCESSES
PARSING 20240313-125908.783106 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-125908.783106            && sh ms_avg_99p_lat.sh 20240313-125908.783106            && sh ms_total_even_odd_numreq.sh 20240313-125908.783106            && sh latency_cdf.sh 20240313-125908.783106
ERROR: cat: /homes/inho/capybara-data/20240313-125908.783106.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-125908.783106.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-125908.783106.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-125908.783106.latency_trace: No such file or directory



PARSING 20240313-125908.783106 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-125908.783106
ERROR: paste: /homes/inho/capybara-data/20240313-125908.783106.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-125908.783106, 2, 100, 0, 100, 100, exponential, 2500, 2745, 2758, 57, 14, 1835.0, 12715.0, inf, inf, inf, 1710334763, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130021.451397
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


69    30    18    13    10    8    6    5    4    4    3    3    3    2    2    2    2    2    2    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130021.451397, 2, 100, 0, 100, 100, exponential, 250, 872, 490, 0, 0, 128.0, 6078.0, 11273.0, 12213.0, 12213.0, 1710334835, 0



iokerneld killed (pid 1854705)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130021.451397 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130021.451397            && sh ms_avg_99p_lat.sh 20240313-130021.451397            && sh ms_total_even_odd_numreq.sh 20240313-130021.451397            && sh latency_cdf.sh 20240313-130021.451397
ERROR: cat: /homes/inho/capybara-data/20240313-130021.451397.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130021.451397.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130021.451397.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130021.451397.latency_trace: No such file or directory



PARSING 20240313-130021.451397 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130021.451397
ERROR: paste: /homes/inho/capybara-data/20240313-130021.451397.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130021.451397, 2, 100, 0, 100, 100, exponential, 250, 872, 490, 0, 0, 128.0, 6078.0, 11273.0, 12213.0, 12213.0, 1710334835, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130115.135801
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 315


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130115.135801, 2, 100, 0, 100, 100, exponential, 250, 318, 318, 0, 10, 129.0, 5510.0, 6645.0, 6808.0, 6808.0, 1710334889, 0



iokerneld killed (pid 1856155)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130115.135801 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130115.135801            && sh ms_avg_99p_lat.sh 20240313-130115.135801            && sh ms_total_even_odd_numreq.sh 20240313-130115.135801            && sh latency_cdf.sh 20240313-130115.135801
ERROR: cat: /homes/inho/capybara-data/20240313-130115.135801.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130115.135801.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130115.135801.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130115.135801.latency_trace: No such file or directory



PARSING 20240313-130115.135801 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130115.135801
ERROR: paste: /homes/inho/capybara-data/20240313-130115.135801.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130115.135801, 2, 100, 0, 100, 100, exponential, 250, 318, 318, 0, 10, 129.0, 5510.0, 6645.0, 6808.0, 6808.0, 1710334889, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130217.823363
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2298


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130217.823363, 2, 1, 0, 100, 100, exponential, 2500, 2548, 2548, 0, 0, 188.0, 527.0, 1025.0, 1287.0, 1476.0, 1710334952, 0



iokerneld killed (pid 1857629)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130217.823363 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130217.823363            && sh ms_avg_99p_lat.sh 20240313-130217.823363            && sh ms_total_even_odd_numreq.sh 20240313-130217.823363            && sh latency_cdf.sh 20240313-130217.823363
ERROR: cat: /homes/inho/capybara-data/20240313-130217.823363.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130217.823363.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130217.823363.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130217.823363.latency_trace: No such file or directory



PARSING 20240313-130217.823363 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130217.823363
ERROR: paste: /homes/inho/capybara-data/20240313-130217.823363.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130217.823363, 2, 1, 0, 100, 100, exponential, 2500, 2548, 2548, 0, 0, 188.0, 527.0, 1025.0, 1287.0, 1476.0, 1710334952, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(25000, 25000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130300.043523
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2843


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130300.043523, 2, 1, 0, 100, 100, exponential, 25000, 3152, 2162, 0, 19772, 519919.0, 626066.0, 649519.0, 651939.0, 652141.0, 1710334994, 0



iokerneld killed (pid 1859064)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130300.043523 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130300.043523            && sh ms_avg_99p_lat.sh 20240313-130300.043523            && sh ms_total_even_odd_numreq.sh 20240313-130300.043523            && sh latency_cdf.sh 20240313-130300.043523
ERROR: cat: /homes/inho/capybara-data/20240313-130300.043523.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130300.043523.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130300.043523.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130300.043523.latency_trace: No such file or directory



PARSING 20240313-130300.043523 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130300.043523
ERROR: paste: /homes/inho/capybara-data/20240313-130300.043523.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130300.043523, 2, 1, 0, 100, 100, exponential, 25000, 3152, 2162, 0, 19772, 519919.0, 626066.0, 649519.0, 651939.0, 652141.0, 1710334994, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(250, 250 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130343.287989
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 307


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130343.287989, 2, 100, 0, 1000, 100, exponential, 250, 310, 310, 0, 14, 130.0, 5001.0, 5944.0, 9012.0, 9012.0, 1710335037, 0



iokerneld killed (pid 1860505)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130343.287989 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130343.287989            && sh ms_avg_99p_lat.sh 20240313-130343.287989            && sh ms_total_even_odd_numreq.sh 20240313-130343.287989            && sh latency_cdf.sh 20240313-130343.287989
ERROR: cat: /homes/inho/capybara-data/20240313-130343.287989.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130343.287989.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130343.287989.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130343.287989.latency_trace: No such file or directory



PARSING 20240313-130343.287989 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130343.287989
ERROR: paste: /homes/inho/capybara-data/20240313-130343.287989.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130343.287989, 2, 100, 0, 1000, 100, exponential, 250, 310, 310, 0, 14, 130.0, 5001.0, 5944.0, 9012.0, 9012.0, 1710335037, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(2500, 2500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130523.903411
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 22467


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130523.903411, 2, 100, 0, 10, 100, exponential, 2500, 2401, 2401, 0, 0, 126.0, 272.0, 488.0, 700.0, 897.0, 1710335139, 0



iokerneld killed (pid 1862071)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130523.903411 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130523.903411            && sh ms_avg_99p_lat.sh 20240313-130523.903411            && sh ms_total_even_odd_numreq.sh 20240313-130523.903411            && sh latency_cdf.sh 20240313-130523.903411
ERROR: cat: /homes/inho/capybara-data/20240313-130523.903411.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130523.903411.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130523.903411.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130523.903411.latency_trace: No such file or directory



PARSING 20240313-130523.903411 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130523.903411
ERROR: paste: /homes/inho/capybara-data/20240313-130523.903411.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130523.903411, 2, 100, 0, 10, 100, exponential, 2500, 2401, 2401, 0, 0, 126.0, 272.0, 488.0, 700.0, 897.0, 1710335139, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-130612.039681
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 44174


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-130612.039681, 2, 100, 0, 10, 100, exponential, 5000, 4733, 4732, 0, 0, 217.0, 503.0, 953.0, 1447.0, 1906.0, 1710335187, 0



iokerneld killed (pid 1863521)
KILLED CAPYBARA PROCESSES
PARSING 20240313-130612.039681 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-130612.039681            && sh ms_avg_99p_lat.sh 20240313-130612.039681            && sh ms_total_even_odd_numreq.sh 20240313-130612.039681            && sh latency_cdf.sh 20240313-130612.039681
ERROR: cat: /homes/inho/capybara-data/20240313-130612.039681.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-130612.039681.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130612.039681.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-130612.039681.latency_trace: No such file or directory



PARSING 20240313-130612.039681 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-130612.039681
ERROR: paste: /homes/inho/capybara-data/20240313-130612.039681.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-130612.039681, 2, 100, 0, 10, 100, exponential, 5000, 4733, 4732, 0, 0, 217.0, 503.0, 953.0, 1447.0, 1906.0, 1710335187, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131108.451124
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131108.451124, 2, 100, 0, 10, 100, N/A



iokerneld killed (pid 1871408)
KILLED CAPYBARA PROCESSES
PARSING 20240313-131108.451124 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131108.451124            && sh ms_avg_99p_lat.sh 20240313-131108.451124            && sh ms_total_even_odd_numreq.sh 20240313-131108.451124            && sh latency_cdf.sh 20240313-131108.451124
ERROR: cat: /homes/inho/capybara-data/20240313-131108.451124.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131108.451124.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131108.451124.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131108.451124.latency_trace: No such file or directory



PARSING 20240313-131108.451124 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131108.451124
ERROR: paste: /homes/inho/capybara-data/20240313-131108.451124.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131108.451124, 2, 100, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131201.779115
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131201.779115, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1872854)
KILLED CAPYBARA PROCESSES
PARSING 20240313-131201.779115 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131201.779115            && sh ms_avg_99p_lat.sh 20240313-131201.779115            && sh ms_total_even_odd_numreq.sh 20240313-131201.779115            && sh latency_cdf.sh 20240313-131201.779115
ERROR: cat: /homes/inho/capybara-data/20240313-131201.779115.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131201.779115.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131201.779115.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131201.779115.latency_trace: No such file or directory



PARSING 20240313-131201.779115 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131201.779115
ERROR: paste: /homes/inho/capybara-data/20240313-131201.779115.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131201.779115, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131343.747821
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131343.747821, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 1874410)
KILLED CAPYBARA PROCESSES
PARSING 20240313-131343.747821 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131343.747821            && sh ms_avg_99p_lat.sh 20240313-131343.747821            && sh ms_total_even_odd_numreq.sh 20240313-131343.747821            && sh latency_cdf.sh 20240313-131343.747821
ERROR: cat: /homes/inho/capybara-data/20240313-131343.747821.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131343.747821.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131343.747821.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131343.747821.latency_trace: No such file or directory



PARSING 20240313-131343.747821 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131343.747821
ERROR: paste: /homes/inho/capybara-data/20240313-131343.747821.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131343.747821, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131446.435686
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131446.435686, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1875901)
KILLED CAPYBARA PROCESSES
PARSING 20240313-131446.435686 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131446.435686            && sh ms_avg_99p_lat.sh 20240313-131446.435686            && sh ms_total_even_odd_numreq.sh 20240313-131446.435686            && sh latency_cdf.sh 20240313-131446.435686
ERROR: cat: /homes/inho/capybara-data/20240313-131446.435686.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131446.435686.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131446.435686.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131446.435686.latency_trace: No such file or directory



PARSING 20240313-131446.435686 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131446.435686
ERROR: paste: /homes/inho/capybara-data/20240313-131446.435686.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131446.435686, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 100 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131539.499903
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131539.499903, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1877362)
KILLED CAPYBARA PROCESSES
PARSING 20240313-131539.499903 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131539.499903            && sh ms_avg_99p_lat.sh 20240313-131539.499903            && sh ms_total_even_odd_numreq.sh 20240313-131539.499903            && sh latency_cdf.sh 20240313-131539.499903
ERROR: cat: /homes/inho/capybara-data/20240313-131539.499903.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131539.499903.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131539.499903.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131539.499903.latency_trace: No such file or directory



PARSING 20240313-131539.499903 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131539.499903
ERROR: paste: /homes/inho/capybara-data/20240313-131539.499903.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131539.499903, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131703.699923
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131703.699923, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1878887)
KILLED CAPYBARA PROCESSES
PARSING 20240313-131703.699923 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131703.699923            && sh ms_avg_99p_lat.sh 20240313-131703.699923            && sh ms_total_even_odd_numreq.sh 20240313-131703.699923            && sh latency_cdf.sh 20240313-131703.699923
ERROR: cat: /homes/inho/capybara-data/20240313-131703.699923.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131703.699923.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131703.699923.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131703.699923.latency_trace: No such file or directory



PARSING 20240313-131703.699923 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131703.699923
ERROR: paste: /homes/inho/capybara-data/20240313-131703.699923.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131703.699923, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-131902.334657
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-131902.334657.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-131902.334657, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1880487)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-131902.334657.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-131902.334657.pcap --> /local/inho/capybara-pcap/20240313-131902.334657.csv ... [0m
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-ntp7hy3v ; wait'
PARSING 20240313-131902.334657 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-131902.334657            && sh ms_avg_99p_lat.sh 20240313-131902.334657            && sh ms_total_even_odd_numreq.sh 20240313-131902.334657            && sh latency_cdf.sh 20240313-131902.334657
ERROR: cat: /homes/inho/capybara-data/20240313-131902.334657.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-131902.334657.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131902.334657.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-131902.334657.latency_trace: No such file or directory



PARSING 20240313-131902.334657 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-131902.334657
ERROR: paste: /homes/inho/capybara-data/20240313-131902.334657.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-131902.334657, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-133157.219465
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-133157.219465.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-133157.219465, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1889279)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-133157.219465.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-133157.219465.pcap --> /local/inho/capybara-pcap/20240313-133157.219465.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-133157.219465.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-xepkchhy ; wait'
PARSING 20240313-133157.219465 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-133157.219465            && sh ms_avg_99p_lat.sh 20240313-133157.219465            && sh ms_total_even_odd_numreq.sh 20240313-133157.219465            && sh latency_cdf.sh 20240313-133157.219465
ERROR: cat: /homes/inho/capybara-data/20240313-133157.219465.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-133157.219465.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-133157.219465.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-133157.219465.latency_trace: No such file or directory



PARSING 20240313-133157.219465 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-133157.219465
ERROR: paste: /homes/inho/capybara-data/20240313-133157.219465.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-133157.219465, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [1]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-142017.611721
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-142017.611721.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-142017.611721, 2, 100, 0, 1, 100, N/A



iokerneld killed (pid 1896750)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-142017.611721.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-142017.611721.pcap --> /local/inho/capybara-pcap/20240313-142017.611721.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-142017.611721.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-av5bqglg ; wait'
PARSING 20240313-142017.611721 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-142017.611721            && sh ms_avg_99p_lat.sh 20240313-142017.611721            && sh ms_total_even_odd_numreq.sh 20240313-142017.611721            && sh latency_cdf.sh 20240313-142017.611721
ERROR: cat: /homes/inho/capybara-data/20240313-142017.611721.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-142017.611721.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-142017.611721.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-142017.611721.latency_trace: No such file or directory



PARSING 20240313-142017.611721 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-142017.611721
ERROR: paste: /homes/inho/capybara-data/20240313-142017.611721.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-142017.611721, 2, 100, 0, 1, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-142202.231894
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-142202.231894.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-142202.231894, 2, 100, 0, 10, 100, N/A



iokerneld killed (pid 1898345)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-142202.231894.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-142202.231894.pcap --> /local/inho/capybara-pcap/20240313-142202.231894.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-142202.231894.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-przmj5er ; wait'
PARSING 20240313-142202.231894 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-142202.231894            && sh ms_avg_99p_lat.sh 20240313-142202.231894            && sh ms_total_even_odd_numreq.sh 20240313-142202.231894            && sh latency_cdf.sh 20240313-142202.231894
ERROR: cat: /homes/inho/capybara-data/20240313-142202.231894.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-142202.231894.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-142202.231894.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-142202.231894.latency_trace: No such file or directory



PARSING 20240313-142202.231894 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-142202.231894
ERROR: paste: /homes/inho/capybara-data/20240313-142202.231894.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-142202.231894, 2, 100, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-150609.579196
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-150609.579196.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-150609.579196, 2, 100, 0, 10, 100, N/A



iokerneld killed (pid 1911280)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-150609.579196.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-150609.579196.pcap --> /local/inho/capybara-pcap/20240313-150609.579196.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-150609.579196.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-s390nx8d ; wait'
PARSING 20240313-150609.579196 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-150609.579196            && sh ms_avg_99p_lat.sh 20240313-150609.579196            && sh ms_total_even_odd_numreq.sh 20240313-150609.579196            && sh latency_cdf.sh 20240313-150609.579196
ERROR: cat: /homes/inho/capybara-data/20240313-150609.579196.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-150609.579196.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-150609.579196.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-150609.579196.latency_trace: No such file or directory



PARSING 20240313-150609.579196 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-150609.579196
ERROR: paste: /homes/inho/capybara-data/20240313-150609.579196.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-150609.579196, 2, 100, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-152430.056466
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-152430.056466.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-152430.056466, 2, 10, 0, 10, 100, N/A



iokerneld killed (pid 1914970)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-152430.056466.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-152430.056466.pcap --> /local/inho/capybara-pcap/20240313-152430.056466.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-152430.056466.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-jczzfvps ; wait'
PARSING 20240313-152430.056466 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-152430.056466            && sh ms_avg_99p_lat.sh 20240313-152430.056466            && sh ms_total_even_odd_numreq.sh 20240313-152430.056466            && sh latency_cdf.sh 20240313-152430.056466
ERROR: cat: /homes/inho/capybara-data/20240313-152430.056466.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-152430.056466.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-152430.056466.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-152430.056466.latency_trace: No such file or directory



PARSING 20240313-152430.056466 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-152430.056466
ERROR: paste: /homes/inho/capybara-data/20240313-152430.056466.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-152430.056466, 2, 10, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-152737.503938
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-152737.503938.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-152737.503938, 2, 10, 0, 10, 100, N/A



iokerneld killed (pid 1922400)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-152737.503938.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-152737.503938.pcap --> /local/inho/capybara-pcap/20240313-152737.503938.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-152737.503938.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-ocbsp0kz ; wait'
PARSING 20240313-152737.503938 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-152737.503938            && sh ms_avg_99p_lat.sh 20240313-152737.503938            && sh ms_total_even_odd_numreq.sh 20240313-152737.503938            && sh latency_cdf.sh 20240313-152737.503938
ERROR: cat: /homes/inho/capybara-data/20240313-152737.503938.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-152737.503938.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-152737.503938.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-152737.503938.latency_trace: No such file or directory



PARSING 20240313-152737.503938 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-152737.503938
ERROR: paste: /homes/inho/capybara-data/20240313-152737.503938.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-152737.503938, 2, 10, 0, 10, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-152930.191279
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-152930.191279.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


2026    881    542    383    293    235    196    167    145    127    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-152930.191279, 2, 10, 0, 10, 100, exponential, 5000, 5016, 5016, 0, 1, 30.0, 96.0, 177.0, 275.0, 354.0, 1710343785, 0



iokerneld killed (pid 1924022)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-152930.191279.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-152930.191279.pcap --> /local/inho/capybara-pcap/20240313-152930.191279.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-152930.191279.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-3b6pk25p ; wait'
PARSING 20240313-152930.191279 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-152930.191279            && sh ms_avg_99p_lat.sh 20240313-152930.191279            && sh ms_total_even_odd_numreq.sh 20240313-152930.191279            && sh latency_cdf.sh 20240313-152930.191279
ERROR: cat: /homes/inho/capybara-data/20240313-152930.191279.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-152930.191279.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-152930.191279.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-152930.191279.latency_trace: No such file or directory



PARSING 20240313-152930.191279 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-152930.191279
ERROR: paste: /homes/inho/capybara-data/20240313-152930.191279.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-152930.191279, 2, 10, 0, 10, 100, exponential, 5000, 5016, 5016, 0, 1, 30.0, 96.0, 177.0, 275.0, 354.0, 1710343785, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(5000, 5000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-153247.415415
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-153247.415415.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


2026    881    542    383    293    235    196    167    145    127    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-153247.415415, 2, 10, 0, 10, 100, exponential, 5000, 5016, 5016, 0, 0, 30.0, 96.0, 175.0, 265.0, 368.0, 1710343983, 0



iokerneld killed (pid 1931519)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-153247.415415.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-153247.415415.pcap --> /local/inho/capybara-pcap/20240313-153247.415415.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-153247.415415.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-y0bd39ac ; wait'
PARSING 20240313-153247.415415 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-153247.415415            && sh ms_avg_99p_lat.sh 20240313-153247.415415            && sh ms_total_even_odd_numreq.sh 20240313-153247.415415            && sh latency_cdf.sh 20240313-153247.415415
ERROR: cat: /homes/inho/capybara-data/20240313-153247.415415.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-153247.415415.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153247.415415.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153247.415415.latency_trace: No such file or directory



PARSING 20240313-153247.415415 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-153247.415415
ERROR: paste: /homes/inho/capybara-data/20240313-153247.415415.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-153247.415415, 2, 10, 0, 10, 100, exponential, 5000, 5016, 5016, 0, 0, 30.0, 96.0, 175.0, 265.0, 368.0, 1710343983, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-153410.135905
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-153410.135905.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


4052    1763    1084    767    587    471    392    334    290    255    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-153410.135905, 2, 10, 0, 10, 100, exponential, 10000, 9995, 9995, 2, 0, 70.0, 549.0, 3752.0, 6466.0, 9267.0, 1710344065, 0



iokerneld killed (pid 1933075)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-153410.135905.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-153410.135905.pcap --> /local/inho/capybara-pcap/20240313-153410.135905.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-153410.135905.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-agoj8y8o ; wait'
PARSING 20240313-153410.135905 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-153410.135905            && sh ms_avg_99p_lat.sh 20240313-153410.135905            && sh ms_total_even_odd_numreq.sh 20240313-153410.135905            && sh latency_cdf.sh 20240313-153410.135905
ERROR: cat: /homes/inho/capybara-data/20240313-153410.135905.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-153410.135905.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153410.135905.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153410.135905.latency_trace: No such file or directory



PARSING 20240313-153410.135905 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-153410.135905
ERROR: paste: /homes/inho/capybara-data/20240313-153410.135905.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-153410.135905, 2, 10, 0, 10, 100, exponential, 10000, 9995, 9995, 2, 0, 70.0, 549.0, 3752.0, 6466.0, 9267.0, 1710344065, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-153522.635789
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-153522.635789.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


4052    1763    1084    767    587    471    392    334    290    255    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-153522.635789, 2, 10, 0, 100, 100, exponential, 10000, 9995, 9994, 14, 0, 811.0, 2510.0, 16058.0, 28843.0, inf, 1710344138, 0



iokerneld killed (pid 1934591)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-153522.635789.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-153522.635789.pcap --> /local/inho/capybara-pcap/20240313-153522.635789.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-153522.635789.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-7390s9sr ; wait'
PARSING 20240313-153522.635789 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-153522.635789            && sh ms_avg_99p_lat.sh 20240313-153522.635789            && sh ms_total_even_odd_numreq.sh 20240313-153522.635789            && sh latency_cdf.sh 20240313-153522.635789
ERROR: cat: /homes/inho/capybara-data/20240313-153522.635789.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-153522.635789.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153522.635789.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153522.635789.latency_trace: No such file or directory



PARSING 20240313-153522.635789 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-153522.635789
ERROR: paste: /homes/inho/capybara-data/20240313-153522.635789.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-153522.635789, 2, 10, 0, 100, 100, exponential, 10000, 9995, 9994, 14, 0, 811.0, 2510.0, 16058.0, 28843.0, inf, 1710344138, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [10]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-153810.055635
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-153810.055635.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


4052    1763    1084    767    587    471    392    334    290    255    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-153810.055635, 2, 10, 0, 100, 100, exponential, 10000, 10146, 10134, 10, 0, 862.0, 2258.0, 6724.0, inf, inf, 1710344304, 0



iokerneld killed (pid 1936308)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-153810.055635.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-153810.055635.pcap --> /local/inho/capybara-pcap/20240313-153810.055635.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-153810.055635.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-uqcp95hl ; wait'
PARSING 20240313-153810.055635 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-153810.055635            && sh ms_avg_99p_lat.sh 20240313-153810.055635            && sh ms_total_even_odd_numreq.sh 20240313-153810.055635            && sh latency_cdf.sh 20240313-153810.055635
ERROR: cat: /homes/inho/capybara-data/20240313-153810.055635.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-153810.055635.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153810.055635.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153810.055635.latency_trace: No such file or directory



PARSING 20240313-153810.055635 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-153810.055635
ERROR: paste: /homes/inho/capybara-data/20240313-153810.055635.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-153810.055635, 2, 10, 0, 100, 100, exponential, 10000, 10146, 10134, 10, 0, 862.0, 2258.0, 6724.0, inf, inf, 1710344304, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-153913.075627
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-153913.075627.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:2403:13:
ZIPF distribution was selected with only 1 thread.
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1938029 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10000 --threads=1 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --zipf=1.2 --exptid=/homes/inho/capybara-data2/20240313-153913.075627 > /homes/inho/capybara-data2/20240313-153913.075627.client
================ TEST COMPLETE =================

[RESULT]20240313-153913.075627, 2, 1, 0, 100, 100, N/A



iokerneld killed (pid 1937806)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-153913.075627.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-153913.075627.pcap --> /local/inho/capybara-pcap/20240313-153913.075627.csv ... [0m
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-lophhfwb ; wait'
PARSING 20240313-153913.075627 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-153913.075627            && sh ms_avg_99p_lat.sh 20240313-153913.075627            && sh ms_total_even_odd_numreq.sh 20240313-153913.075627            && sh latency_cdf.sh 20240313-153913.075627
ERROR: cat: /homes/inho/capybara-data/20240313-153913.075627.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-153913.075627.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153913.075627.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153913.075627.latency_trace: No such file or directory



PARSING 20240313-153913.075627 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-153913.075627
ERROR: paste: /homes/inho/capybara-data/20240313-153913.075627.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-153913.075627, 2, 1, 0, 100, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240313-153947.987023
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-153947.987023.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9063


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-153947.987023, 2, 1, 0, 100, 100, exponential, 10000, 10025, 10024, 0, 0, 71.0, 227.0, 441.0, 565.0, 704.0, 1710344402, 0



iokerneld killed (pid 1939223)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-153947.987023.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-153947.987023.pcap --> /local/inho/capybara-pcap/20240313-153947.987023.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-153947.987023.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-9v7nu7kn ; wait'
PARSING 20240313-153947.987023 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-153947.987023            && sh ms_avg_99p_lat.sh 20240313-153947.987023            && sh ms_total_even_odd_numreq.sh 20240313-153947.987023            && sh latency_cdf.sh 20240313-153947.987023
ERROR: cat: /homes/inho/capybara-data/20240313-153947.987023.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-153947.987023.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153947.987023.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-153947.987023.latency_trace: No such file or directory



PARSING 20240313-153947.987023 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-153947.987023
ERROR: paste: /homes/inho/capybara-data/20240313-153947.987023.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-153947.987023, 2, 1, 0, 100, 100, exponential, 10000, 10025, 10024, 0, 0, 71.0, 227.0, 441.0, 565.0, 704.0, 1710344402, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240313-154025.907751
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-154025.907751.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9052


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-154025.907751, 2, 2, 0, 100, 100, exponential, 10000, 10059, 10049, 8, 1, 712.0, 1650.0, 2804.0, 8252.0, inf, 1710344440, 0



iokerneld killed (pid 1940653)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-154025.907751.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-154025.907751.pcap --> /local/inho/capybara-pcap/20240313-154025.907751.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-154025.907751.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-g0eq66oz ; wait'
PARSING 20240313-154025.907751 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-154025.907751            && sh ms_avg_99p_lat.sh 20240313-154025.907751            && sh ms_total_even_odd_numreq.sh 20240313-154025.907751            && sh latency_cdf.sh 20240313-154025.907751
ERROR: cat: /homes/inho/capybara-data/20240313-154025.907751.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-154025.907751.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-154025.907751.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-154025.907751.latency_trace: No such file or directory



PARSING 20240313-154025.907751 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-154025.907751
ERROR: paste: /homes/inho/capybara-data/20240313-154025.907751.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-154025.907751, 2, 2, 0, 100, 100, exponential, 10000, 10059, 10049, 8, 1, 712.0, 1650.0, 2804.0, 8252.0, inf, 1710344440, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240313-154828.887761
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-154828.887761.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 894


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-154828.887761, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1003, 0, 0, 30.0, 34.0, 71.0, 98.0, 98.0, 1710344923, 0



iokerneld killed (pid 1943022)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-154828.887761.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-154828.887761.pcap --> /local/inho/capybara-pcap/20240313-154828.887761.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-154828.887761.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-0rx1f787 ; wait'
PARSING 20240313-154828.887761 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-154828.887761            && sh ms_avg_99p_lat.sh 20240313-154828.887761            && sh ms_total_even_odd_numreq.sh 20240313-154828.887761            && sh latency_cdf.sh 20240313-154828.887761
ERROR: cat: /homes/inho/capybara-data/20240313-154828.887761.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-154828.887761.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-154828.887761.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-154828.887761.latency_trace: No such file or directory



PARSING 20240313-154828.887761 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-154828.887761
ERROR: paste: /homes/inho/capybara-data/20240313-154828.887761.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-154828.887761, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1003, 0, 0, 30.0, 34.0, 71.0, 98.0, 98.0, 1710344923, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240313-155108.267318
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-155108.267318.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 891


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-155108.267318, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1000, 3, 0, 141.0, 7574.0, 17024.0, inf, inf, 1710345082, 0



iokerneld killed (pid 1950395)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-155108.267318.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-155108.267318.pcap --> /local/inho/capybara-pcap/20240313-155108.267318.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-155108.267318.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-p7uy22qm ; wait'
PARSING 20240313-155108.267318 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-155108.267318            && sh ms_avg_99p_lat.sh 20240313-155108.267318            && sh ms_total_even_odd_numreq.sh 20240313-155108.267318            && sh latency_cdf.sh 20240313-155108.267318
ERROR: cat: /homes/inho/capybara-data/20240313-155108.267318.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-155108.267318.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-155108.267318.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-155108.267318.latency_trace: No such file or directory



PARSING 20240313-155108.267318 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-155108.267318
ERROR: paste: /homes/inho/capybara-data/20240313-155108.267318.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-155108.267318, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1000, 3, 0, 141.0, 7574.0, 17024.0, inf, inf, 1710345082, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = True
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(500, 500 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240313-155304.323117
RUNNING TCPDUMP to node1:/local/inho/capybara-pcap/20240313-155304.323117.pcap
SETUP SWITCH
tcpdump: listening on ens1f1, link-type EN10MB (Ethernet), capture size 262144 bytes
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 455


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-155304.323117, 2, 2, 0, 10, 100, exponential, 500, 501, 501, 0, 0, 125.0, 129.0, 261.0, 313.0, 313.0, 1710345198, 0



iokerneld killed (pid 1952023)
KILLED CAPYBARA PROCESSES
PARSING node1:/local/inho/capybara-pcap/20240313-155304.323117.pcap
[0;33mParsing /local/inho/capybara-pcap/20240313-155304.323117.pcap --> /local/inho/capybara-pcap/20240313-155304.323117.csv ... [0m
tshark: The file "/local/inho/capybara-pcap/20240313-155304.323117.pcap" appears to have been cut short in the middle of a packet.
[0;32mDone [0m
bash: -c: line 5: syntax error near unexpected token `&'
bash: -c: line 5: `      & jobs -p >/tmp/pyrem_procs-0xcqmnu3 ; wait'
PARSING 20240313-155304.323117 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-155304.323117            && sh ms_avg_99p_lat.sh 20240313-155304.323117            && sh ms_total_even_odd_numreq.sh 20240313-155304.323117            && sh latency_cdf.sh 20240313-155304.323117
ERROR: cat: /homes/inho/capybara-data/20240313-155304.323117.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-155304.323117.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-155304.323117.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-155304.323117.latency_trace: No such file or directory



PARSING 20240313-155304.323117 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-155304.323117
ERROR: paste: /homes/inho/capybara-data/20240313-155304.323117.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-155304.323117, 2, 2, 0, 10, 100, exponential, 500, 501, 501, 0, 0, 125.0, 129.0, 261.0, 313.0, 313.0, 1710345198, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240313-160147.163659
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 891


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-160147.163659, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1000, 3, 0, 1600.0, 6107.0, 12582.0, inf, inf, 1710345721, 0



iokerneld killed (pid 1954480)
KILLED CAPYBARA PROCESSES
PARSING 20240313-160147.163659 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-160147.163659            && sh ms_avg_99p_lat.sh 20240313-160147.163659            && sh ms_total_even_odd_numreq.sh 20240313-160147.163659            && sh latency_cdf.sh 20240313-160147.163659
ERROR: cat: /homes/inho/capybara-data/20240313-160147.163659.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-160147.163659.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-160147.163659.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-160147.163659.latency_trace: No such file or directory



PARSING 20240313-160147.163659 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-160147.163659
ERROR: paste: /homes/inho/capybara-data/20240313-160147.163659.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-160147.163659, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1000, 3, 0, 1600.0, 6107.0, 12582.0, inf, inf, 1710345721, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240313-160830.307406
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 890


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240313-160830.307406, 2, 2, 0, 100, 100, exponential, 1000, 1003, 999, 4, 0, 2779.0, 7549.0, 15117.0, inf, inf, 1710346125, 0



iokerneld killed (pid 1956703)
KILLED CAPYBARA PROCESSES
PARSING 20240313-160830.307406 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240313-160830.307406            && sh ms_avg_99p_lat.sh 20240313-160830.307406            && sh ms_total_even_odd_numreq.sh 20240313-160830.307406            && sh latency_cdf.sh 20240313-160830.307406
ERROR: cat: /homes/inho/capybara-data/20240313-160830.307406.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240313-160830.307406.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-160830.307406.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240313-160830.307406.latency_trace: No such file or directory



PARSING 20240313-160830.307406 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240313-160830.307406
ERROR: paste: /homes/inho/capybara-data/20240313-160830.307406.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240313-160830.307406, 2, 2, 0, 100, 100, exponential, 1000, 1003, 999, 4, 0, 2779.0, 7549.0, 15117.0, inf, inf, 1710346125, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 1000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 0.9 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [2]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean
20240313-153810.055635,


EXPTID: 20240314-005539.774724
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 894


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-005539.774724, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1003, 0, 0, 125.0, 201.0, 355.0, 518.0, 518.0, 1710377754, 0



iokerneld killed (pid 2035090)
KILLED CAPYBARA PROCESSES
PARSING 20240314-005539.774724 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-005539.774724            && sh ms_avg_99p_lat.sh 20240314-005539.774724            && sh ms_total_even_odd_numreq.sh 20240314-005539.774724            && sh latency_cdf.sh 20240314-005539.774724
ERROR: cat: /homes/inho/capybara-data/20240314-005539.774724.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240314-005539.774724.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-005539.774724.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-005539.774724.latency_trace: No such file or directory



PARSING 20240314-005539.774724 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-005539.774724
ERROR: paste: /homes/inho/capybara-data/20240314-005539.774724.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-005539.774724, 2, 2, 0, 100, 100, exponential, 1000, 1003, 1003, 0, 0, 125.0, 201.0, 355.0, 518.0, 518.0, 1710377754, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-005935.175498
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-005935.175498, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2042740)
KILLED CAPYBARA PROCESSES
PARSING 20240314-005935.175498 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-005935.175498            && sh ms_avg_99p_lat.sh 20240314-005935.175498            && sh ms_total_even_odd_numreq.sh 20240314-005935.175498            && sh latency_cdf.sh 20240314-005935.175498
ERROR: cat: /homes/inho/capybara-data/20240314-005935.175498.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240314-005935.175498.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-005935.175498.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-005935.175498.latency_trace: No such file or directory



PARSING 20240314-005935.175498 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-005935.175498
ERROR: paste: /homes/inho/capybara-data/20240314-005935.175498.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-005935.175498, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 1


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-010046.031445
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-010046.031445, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2044280)
KILLED CAPYBARA PROCESSES
PARSING 20240314-010046.031445 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-010046.031445            && sh ms_avg_99p_lat.sh 20240314-010046.031445            && sh ms_total_even_odd_numreq.sh 20240314-010046.031445            && sh latency_cdf.sh 20240314-010046.031445
ERROR: cat: /homes/inho/capybara-data/20240314-010046.031445.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240314-010046.031445.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-010046.031445.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-010046.031445.latency_trace: No such file or directory



PARSING 20240314-010046.031445 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-010046.031445
ERROR: paste: /homes/inho/capybara-data/20240314-010046.031445.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-010046.031445, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-010308.659607
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-010308.659607, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2051601)
KILLED CAPYBARA PROCESSES
PARSING 20240314-010308.659607 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-010308.659607            && sh ms_avg_99p_lat.sh 20240314-010308.659607            && sh ms_total_even_odd_numreq.sh 20240314-010308.659607            && sh latency_cdf.sh 20240314-010308.659607
ERROR: cat: /homes/inho/capybara-data/20240314-010308.659607.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240314-010308.659607.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-010308.659607.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-010308.659607.latency_trace: No such file or directory



PARSING 20240314-010308.659607 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-010308.659607
ERROR: paste: /homes/inho/capybara-data/20240314-010308.659607.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-010308.659607, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data2'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-010400.195981
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-010400.195981, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2053069)
KILLED CAPYBARA PROCESSES
PARSING 20240314-010400.195981 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-010400.195981            && sh ms_avg_99p_lat.sh 20240314-010400.195981            && sh ms_total_even_odd_numreq.sh 20240314-010400.195981            && sh latency_cdf.sh 20240314-010400.195981
ERROR: cat: /homes/inho/capybara-data/20240314-010400.195981.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240314-010400.195981.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-010400.195981.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240314-010400.195981.latency_trace: No such file or directory



PARSING 20240314-010400.195981 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-010400.195981
ERROR: paste: /homes/inho/capybara-data/20240314-010400.195981.be0_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-010400.195981, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-011056.271827
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-011056.271827, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2055565)
KILLED CAPYBARA PROCESSES
PARSING 20240314-011056.271827 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-011056.271827            && sh ms_avg_99p_lat.sh 20240314-011056.271827            && sh ms_total_even_odd_numreq.sh 20240314-011056.271827            && sh latency_cdf.sh 20240314-011056.271827
DONE
PARSING 20240314-011056.271827 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-011056.271827
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-011056.271827, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-011155.004154
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-011155.004154, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2057054)
KILLED CAPYBARA PROCESSES
PARSING 20240314-011155.004154 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-011155.004154            && sh ms_avg_99p_lat.sh 20240314-011155.004154            && sh ms_total_even_odd_numreq.sh 20240314-011155.004154            && sh latency_cdf.sh 20240314-011155.004154
DONE
PARSING 20240314-011155.004154 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-011155.004154
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-011155.004154, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-011807.334944
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-011807.334944, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2064948)
KILLED CAPYBARA PROCESSES
PARSING 20240314-011807.334944 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-011807.334944            && sh ms_avg_99p_lat.sh 20240314-011807.334944            && sh ms_total_even_odd_numreq.sh 20240314-011807.334944            && sh latency_cdf.sh 20240314-011807.334944
DONE
PARSING 20240314-011807.334944 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-011807.334944
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-011807.334944, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-011920.735652
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-011920.735652, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2066464)
KILLED CAPYBARA PROCESSES
PARSING 20240314-011920.735652 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-011920.735652            && sh ms_avg_99p_lat.sh 20240314-011920.735652            && sh ms_total_even_odd_numreq.sh 20240314-011920.735652            && sh latency_cdf.sh 20240314-011920.735652
DONE
PARSING 20240314-011920.735652 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-011920.735652
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-011920.735652, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-012236.879068
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-012236.879068, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2073979)
KILLED CAPYBARA PROCESSES
PARSING 20240314-012236.879068 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-012236.879068            && sh ms_avg_99p_lat.sh 20240314-012236.879068            && sh ms_total_even_odd_numreq.sh 20240314-012236.879068            && sh latency_cdf.sh 20240314-012236.879068
DONE
PARSING 20240314-012236.879068 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-012236.879068
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-012236.879068, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-012537.456070
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-012537.456070, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2081464)
KILLED CAPYBARA PROCESSES
PARSING 20240314-012537.456070 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-012537.456070            && sh ms_avg_99p_lat.sh 20240314-012537.456070            && sh ms_total_even_odd_numreq.sh 20240314-012537.456070            && sh latency_cdf.sh 20240314-012537.456070
DONE
PARSING 20240314-012537.456070 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-012537.456070
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-012537.456070, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-013007.083595
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-013007.083595, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2089158)
KILLED CAPYBARA PROCESSES
PARSING 20240314-013007.083595 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-013007.083595            && sh ms_avg_99p_lat.sh 20240314-013007.083595            && sh ms_total_even_odd_numreq.sh 20240314-013007.083595            && sh latency_cdf.sh 20240314-013007.083595
DONE
PARSING 20240314-013007.083595 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-013007.083595
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-013007.083595, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-013236.287366
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-013236.287366, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2090838)
KILLED CAPYBARA PROCESSES
PARSING 20240314-013236.287366 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-013236.287366            && sh ms_avg_99p_lat.sh 20240314-013236.287366            && sh ms_total_even_odd_numreq.sh 20240314-013236.287366            && sh latency_cdf.sh 20240314-013236.287366
DONE
PARSING 20240314-013236.287366 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-013236.287366
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-013236.287366, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 30 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-020348.550978
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-020348.550978, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2103137)
KILLED CAPYBARA PROCESSES
PARSING 20240314-020348.550978 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-020348.550978            && sh ms_avg_99p_lat.sh 20240314-020348.550978            && sh ms_total_even_odd_numreq.sh 20240314-020348.550978            && sh latency_cdf.sh 20240314-020348.550978
DONE
PARSING 20240314-020348.550978 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-020348.550978
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-020348.550978, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 30 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-023739.387668
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-023739.387668, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2115293)
KILLED CAPYBARA PROCESSES
PARSING 20240314-023739.387668 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-023739.387668            && sh ms_avg_99p_lat.sh 20240314-023739.387668            && sh ms_total_even_odd_numreq.sh 20240314-023739.387668            && sh latency_cdf.sh 20240314-023739.387668
DONE
PARSING 20240314-023739.387668 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-023739.387668
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-023739.387668, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 30 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-023855.979512
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-023855.979512, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2116801)
KILLED CAPYBARA PROCESSES
PARSING 20240314-023855.979512 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-023855.979512            && sh ms_avg_99p_lat.sh 20240314-023855.979512            && sh ms_total_even_odd_numreq.sh 20240314-023855.979512            && sh latency_cdf.sh 20240314-023855.979512
DONE
PARSING 20240314-023855.979512 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-023855.979512
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-023855.979512, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 310)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 15 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-024032.783041
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-024032.783041, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2118358)
KILLED CAPYBARA PROCESSES
PARSING 20240314-024032.783041 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-024032.783041            && sh ms_avg_99p_lat.sh 20240314-024032.783041            && sh ms_total_even_odd_numreq.sh 20240314-024032.783041            && sh latency_cdf.sh 20240314-024032.783041
DONE
PARSING 20240314-024032.783041 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-024032.783041
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-024032.783041, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 15 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-024239.543443
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-024239.543443, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2119998)
KILLED CAPYBARA PROCESSES
PARSING 20240314-024239.543443 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-024239.543443            && sh ms_avg_99p_lat.sh 20240314-024239.543443            && sh ms_total_even_odd_numreq.sh 20240314-024239.543443            && sh latency_cdf.sh 20240314-024239.543443
DONE
PARSING 20240314-024239.543443 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-024239.543443
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-024239.543443, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 300 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 0 #100
THRESHOLD_EPSILON = 15 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-024350.347521
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-024350.347521, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2121507)
KILLED CAPYBARA PROCESSES
PARSING 20240314-024350.347521 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-024350.347521            && sh ms_avg_99p_lat.sh 20240314-024350.347521            && sh ms_total_even_odd_numreq.sh 20240314-024350.347521            && sh latency_cdf.sh 20240314-024350.347521
DONE
PARSING 20240314-024350.347521 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-024350.347521
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-024350.347521, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 15 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-024510.662965
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-024510.662965, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2123053)
KILLED CAPYBARA PROCESSES
PARSING 20240314-024510.662965 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-024510.662965            && sh ms_avg_99p_lat.sh 20240314-024510.662965            && sh ms_total_even_odd_numreq.sh 20240314-024510.662965            && sh latency_cdf.sh 20240314-024510.662965
DONE
PARSING 20240314-024510.662965 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-024510.662965
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-024510.662965, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-024650.779137
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-024650.779137, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2124625)
KILLED CAPYBARA PROCESSES
PARSING 20240314-024650.779137 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-024650.779137            && sh ms_avg_99p_lat.sh 20240314-024650.779137            && sh ms_total_even_odd_numreq.sh 20240314-024650.779137            && sh latency_cdf.sh 20240314-024650.779137
DONE
PARSING 20240314-024650.779137 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-024650.779137
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-024650.779137, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 100 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-024813.727591
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-024813.727591, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2126161)
KILLED CAPYBARA PROCESSES
PARSING 20240314-024813.727591 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-024813.727591            && sh ms_avg_99p_lat.sh 20240314-024813.727591            && sh ms_total_even_odd_numreq.sh 20240314-024813.727591            && sh latency_cdf.sh 20240314-024813.727591
DONE
PARSING 20240314-024813.727591 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-024813.727591
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-024813.727591, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000, 1000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-025004.355601
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-025004.355601, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2127759)
KILLED CAPYBARA PROCESSES
PARSING 20240314-025004.355601 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-025004.355601            && sh ms_avg_99p_lat.sh 20240314-025004.355601            && sh ms_total_even_odd_numreq.sh 20240314-025004.355601            && sh latency_cdf.sh 20240314-025004.355601
DONE
PARSING 20240314-025004.355601 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-025004.355601
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-025004.355601, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-025214.575700
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


75537    32879    20212    14311    10949    8797    7312    6229    5408    4766    4251    3829    3478    3182    2929    2711    2521    2354    2206    2074    1956    1850    1754    1666    1587    1514    1447    1385    1328    1275    1226    1180    1137    1097    1059    1024    991    960    930    903    876    851    827    805    783    763    744    725    707    690    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-025214.575700, 2, 50, 0, 0, 100, exponential, 250000, 204696, 204480, 0, 203493, 26.0, 67144.0, 69768.0, 70622.0, 71233.0, 1710384749, 0



iokerneld killed (pid 2129445)
KILLED CAPYBARA PROCESSES
PARSING 20240314-025214.575700 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-025214.575700            && sh ms_avg_99p_lat.sh 20240314-025214.575700            && sh ms_total_even_odd_numreq.sh 20240314-025214.575700            && sh latency_cdf.sh 20240314-025214.575700
DONE
PARSING 20240314-025214.575700 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-025214.575700
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-025214.575700, 2, 50, 0, 0, 100, exponential, 250000, 204696, 204480, 0, 203493, 26.0, 67144.0, 69768.0, 70622.0, 71233.0, 1710384749, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(250000, 250000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-025310.659911
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


69385    30202    18566    13146    10057    8081    6716    5722    4967    4377    3904    3517    3195    2923    2691    2490    2315    2162    2026    1905    1797    1699    1611    1531    1457    1390    1329    1272    1220    1171    1126    1084    1044    1008    973    941    910    882    855    829    805    782    760    739    720    701    683    666    650    634    619    605    591    578    566    553    542    531    520    509    499    490    480    471    463    454    446    438    431    423    416    409    402    396    390    383    377    372    366    361    355    350    345    340    335    331    326    322    317    313    309    305    301    297    293    290    286    283    279    276    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-025310.659911, 2, 100, 0, 0, 100, exponential, 250000, 206130, 205925, 0, 194641, 29.0, 76894.0, 80153.0, 81624.0, 82026.0, 1710384805, 0



iokerneld killed (pid 2130900)
KILLED CAPYBARA PROCESSES
PARSING 20240314-025310.659911 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-025310.659911            && sh ms_avg_99p_lat.sh 20240314-025310.659911            && sh ms_total_even_odd_numreq.sh 20240314-025310.659911            && sh latency_cdf.sh 20240314-025310.659911
DONE
PARSING 20240314-025310.659911 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-025310.659911
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-025310.659911, 2, 100, 0, 0, 100, exponential, 250000, 206130, 205925, 0, 194641, 29.0, 76894.0, 80153.0, 81624.0, 82026.0, 1710384805, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(230000, 230000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-025734.624000
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


69494    30249    18595    13166    10073    8094    6727    5731    4975    4384    3910    3523    3200    2928    2695    2494    2319    2165    2029    1908    1800    1702    1613    1533    1460    1393    1331    1274    1222    1173    1128    1085    1046    1009    975    942    912    883    856    830    806    783    761    740    721    702    684    667    651    635    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-025734.624000, 2, 50, 0, 0, 100, exponential, 230000, 198432, 198198, 0, 141934, 25.0, 54148.0, 56061.0, 57024.0, 57685.0, 1710385069, 0



iokerneld killed (pid 2132805)
KILLED CAPYBARA PROCESSES
PARSING 20240314-025734.624000 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-025734.624000            && sh ms_avg_99p_lat.sh 20240314-025734.624000            && sh ms_total_even_odd_numreq.sh 20240314-025734.624000            && sh latency_cdf.sh 20240314-025734.624000
DONE
PARSING 20240314-025734.624000 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-025734.624000
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-025734.624000, 2, 50, 0, 0, 100, exponential, 230000, 198432, 198198, 0, 141934, 25.0, 54148.0, 56061.0, 57024.0, 57685.0, 1710385069, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(230000, 230000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-025843.251699
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1034111


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-025843.251699, 2, 50, 0, 0, 100, exponential, 230000, 228852, 228850, 0, 16, 24.0, 39.0, 61.0, 87.0, 148.0, 1710385138, 0



iokerneld killed (pid 2134308)
KILLED CAPYBARA PROCESSES
PARSING 20240314-025843.251699 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-025843.251699            && sh ms_avg_99p_lat.sh 20240314-025843.251699            && sh ms_total_even_odd_numreq.sh 20240314-025843.251699            && sh latency_cdf.sh 20240314-025843.251699
DONE
PARSING 20240314-025843.251699 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-025843.251699
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-025843.251699, 2, 50, 0, 0, 100, exponential, 230000, 228852, 228850, 0, 16, 24.0, 39.0, 61.0, 87.0, 148.0, 1710385138, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(230000, 230000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-025938.919744
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


63835    27785    17081    12094    9253    7434    6179    5264    4570    4027    3592    3236    2939    2689    2475    2291    2130    1989    1864    1753    1653    1563    1482    1408    1341    1279    1222    1170    1122    1077    1036    997    961    927    895    865    837    811    786    763    740    719    699    680    662    645    628    613    598    583    570    557    544    532    520    509    498    488    478    469    459    451    442    434    426    418    410    403    396    389    383    376    370    364    358    353    347    342    337    332    327    322    317    313    308    304    300    296    292    288    284    280    277    273    270    266    263    260    257    254    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-025938.919744, 2, 100, 0, 0, 100, exponential, 230000, 195838, 195608, 0, 151194, 27.0, 66955.0, 69869.0, 71230.0, 71561.0, 1710385194, 0



iokerneld killed (pid 2135792)
KILLED CAPYBARA PROCESSES
PARSING 20240314-025938.919744 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-025938.919744            && sh ms_avg_99p_lat.sh 20240314-025938.919744            && sh ms_total_even_odd_numreq.sh 20240314-025938.919744            && sh latency_cdf.sh 20240314-025938.919744
DONE
PARSING 20240314-025938.919744 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-025938.919744
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-025938.919744, 2, 100, 0, 0, 100, exponential, 230000, 195838, 195608, 0, 151194, 27.0, 66955.0, 69869.0, 71230.0, 71561.0, 1710385194, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(230000, 230000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-030054.331733
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


63835    27785    17081    12094    9253    7434    6179    5264    4570    4027    3592    3236    2939    2689    2475    2291    2130    1989    1864    1753    1653    1563    1482    1408    1341    1279    1222    1170    1122    1077    1036    997    961    927    895    865    837    811    786    763    740    719    699    680    662    645    628    613    598    583    570    557    544    532    520    509    498    488    478    469    459    451    442    434    426    418    410    403    396    389    383    376    370    364    358    353    347    342    337    332    327    322    317    313    308    304    300    296    292    288    284    280    277    273    270    266    263    260    257    254    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-030054.331733, 2, 100, 0, 0, 100, exponential, 230000, 229456, 229454, 0, 48, 17.0, 33.0, 81.0, 135.0, 196.0, 1710385269, 0



iokerneld killed (pid 2137295)
KILLED CAPYBARA PROCESSES
PARSING 20240314-030054.331733 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-030054.331733            && sh ms_avg_99p_lat.sh 20240314-030054.331733            && sh ms_total_even_odd_numreq.sh 20240314-030054.331733            && sh latency_cdf.sh 20240314-030054.331733
DONE
PARSING 20240314-030054.331733 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-030054.331733
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-030054.331733, 2, 100, 0, 0, 100, exponential, 230000, 229456, 229454, 0, 48, 17.0, 33.0, 81.0, 135.0, 196.0, 1710385269, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(500000, 500000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-030212.431684
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


138771    60404    37132    26292    20115    16162    13433    11444    9935    8755    7809    7035    6391    5847    5382    4981    4631    4324    4053    3811    3594    3399    3222    3062    2915    2781    2658    2545    2440    2342    2252    2168    2089    2016    1947    1882    1821    1764    1710    1658    1610    1564    1521    1479    1440    1402    1367    1332    1300    1269    1239    1210    1183    1157    1132    1107    1084    1062    1040    1019    999    980    961    943    926    909    893    877    862    847    833    819    805    792    780    767    755    744    733    722    711    701    690    681    671    662    652    644    635    626    618    610    602    595    587    580    573    566    559    552    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-030212.431684, 2, 100, 0, 0, 100, exponential, 500000, 390082, 389852, 0, 492742, 25.0, 133.0, 71164.0, 71960.0, 72253.0, 1710385347, 0



iokerneld killed (pid 2138802)
KILLED CAPYBARA PROCESSES
PARSING 20240314-030212.431684 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-030212.431684            && sh ms_avg_99p_lat.sh 20240314-030212.431684            && sh ms_total_even_odd_numreq.sh 20240314-030212.431684            && sh latency_cdf.sh 20240314-030212.431684
DONE
PARSING 20240314-030212.431684 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-030212.431684
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-030212.431684, 2, 100, 0, 0, 100, exponential, 500000, 390082, 389852, 0, 492742, 25.0, 133.0, 71164.0, 71960.0, 72253.0, 1710385347, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(400000, 400000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-030519.355346
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


111017    48323    29706    21033    16092    12930    10746    9155    7948    7004    6247    5628    5112    4677    4306    3985    3705    3459    3242    3048    2875    2719    2578    2449    2332    2225    2126    2036    1952    1874    1802    1734    1671    1612    1557    1506    1457    1411    1368    1327    1288    1251    1216    1183    1152    1122    1093    1066    1040    1015    991    968    946    925    905    886    867    849    832    815    799    784    769    755    741    727    714    702    689    678    666    655    644    634    624    614    604    595    586    577    569    560    552    544    537    529    522    515    508    501    494    488    482    476    470    464    458    452    447    441    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-030519.355346, 2, 100, 0, 0, 100, exponential, 400000, 324397, 324131, 0, 337440, 21.0, 55422.0, 58062.0, 58835.0, 59278.0, 1710385534, 0



iokerneld killed (pid 2146268)
KILLED CAPYBARA PROCESSES
PARSING 20240314-030519.355346 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-030519.355346            && sh ms_avg_99p_lat.sh 20240314-030519.355346            && sh ms_total_even_odd_numreq.sh 20240314-030519.355346            && sh latency_cdf.sh 20240314-030519.355346
DONE
PARSING 20240314-030519.355346 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-030519.355346
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-030519.355346, 2, 100, 0, 0, 100, exponential, 400000, 324397, 324131, 0, 337440, 21.0, 55422.0, 58062.0, 58835.0, 59278.0, 1710385534, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(400000, 400000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-030903.296005
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


111017    48323    29706    21033    16092    12930    10746    9155    7948    7004    6247    5628    5112    4677    4306    3985    3705    3459    3242    3048    2875    2719    2578    2449    2332    2225    2126    2036    1952    1874    1802    1734    1671    1612    1557    1506    1457    1411    1368    1327    1288    1251    1216    1183    1152    1122    1093    1066    1040    1015    991    968    946    925    905    886    867    849    832    815    799    784    769    755    741    727    714    702    689    678    666    655    644    634    624    614    604    595    586    577    569    560    552    544    537    529    522    515    508    501    494    488    482    476    470    464    458    452    447    441    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-030903.296005, 2, 100, 0, 0, 100, exponential, 400000, 323743, 323478, 0, 340382, 21.0, 56429.0, 59244.0, 59979.0, 60324.0, 1710385758, 0



iokerneld killed (pid 2153911)
KILLED CAPYBARA PROCESSES
PARSING 20240314-030903.296005 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-030903.296005            && sh ms_avg_99p_lat.sh 20240314-030903.296005            && sh ms_total_even_odd_numreq.sh 20240314-030903.296005            && sh latency_cdf.sh 20240314-030903.296005
DONE
PARSING 20240314-030903.296005 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-030903.296005
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-030903.296005, 2, 100, 0, 0, 100, exponential, 400000, 323743, 323478, 0, 340382, 21.0, 56429.0, 59244.0, 59979.0, 60324.0, 1710385758, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 280 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (200, 280)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-031331.260110
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


60430    26303    16169    11449    8759    7038    5849    4983    4326    3812    3400    3063    2783    2546    2343    2169    2017    1883    1765    1659    1565    1480    1403    1333    1269    1211    1157    1108    1062    1020    980    944    909    877    847    819    793    768    744    722    701    681    662    644    627    610    595    580    566    552    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-031331.260110, 2, 50, 0, 0, 100, exponential, 200000, 200131, 200130, 0, 24, 25.0, 89.0, 256.0, 456.0, 606.0, 1710386026, 0



iokerneld killed (pid 2161604)
KILLED CAPYBARA PROCESSES
PARSING 20240314-031331.260110 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-031331.260110            && sh ms_avg_99p_lat.sh 20240314-031331.260110            && sh ms_total_even_odd_numreq.sh 20240314-031331.260110            && sh latency_cdf.sh 20240314-031331.260110
DONE
PARSING 20240314-031331.260110 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-031331.260110
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-031331.260110, 2, 50, 0, 0, 100, exponential, 200000, 200131, 200130, 0, 24, 25.0, 89.0, 256.0, 456.0, 606.0, 1710386026, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 250)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-031606.463765
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-031606.463765, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2163345)
KILLED CAPYBARA PROCESSES
PARSING 20240314-031606.463765 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-031606.463765            && sh ms_avg_99p_lat.sh 20240314-031606.463765            && sh ms_total_even_odd_numreq.sh 20240314-031606.463765            && sh latency_cdf.sh 20240314-031606.463765
DONE
PARSING 20240314-031606.463765 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-031606.463765
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-031606.463765, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-031720.063918
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-031720.063918, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2164869)
KILLED CAPYBARA PROCESSES
PARSING 20240314-031720.063918 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-031720.063918            && sh ms_avg_99p_lat.sh 20240314-031720.063918            && sh ms_total_even_odd_numreq.sh 20240314-031720.063918            && sh latency_cdf.sh 20240314-031720.063918
DONE
PARSING 20240314-031720.063918 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-031720.063918
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-031720.063918, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-031847.231782
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-031847.231782, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2166413)
KILLED CAPYBARA PROCESSES
PARSING 20240314-031847.231782 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-031847.231782            && sh ms_avg_99p_lat.sh 20240314-031847.231782            && sh ms_total_even_odd_numreq.sh 20240314-031847.231782            && sh latency_cdf.sh 20240314-031847.231782
DONE
PARSING 20240314-031847.231782 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-031847.231782
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-031847.231782, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-032621.712142
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-032621.712142, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2168729)
KILLED CAPYBARA PROCESSES
PARSING 20240314-032621.712142 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-032621.712142            && sh ms_avg_99p_lat.sh 20240314-032621.712142            && sh ms_total_even_odd_numreq.sh 20240314-032621.712142            && sh latency_cdf.sh 20240314-032621.712142
DONE
PARSING 20240314-032621.712142 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-032621.712142
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-032621.712142, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 1.0) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-053553.539841
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-053553.539841, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2186347)
KILLED CAPYBARA PROCESSES
PARSING 20240314-053553.539841 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-053553.539841            && sh ms_avg_99p_lat.sh 20240314-053553.539841            && sh ms_total_even_odd_numreq.sh 20240314-053553.539841            && sh latency_cdf.sh 20240314-053553.539841
DONE
PARSING 20240314-053553.539841 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-053553.539841
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-053553.539841, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 1.0) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-053710.270989
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-053710.270989, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2187885)
KILLED CAPYBARA PROCESSES
PARSING 20240314-053710.270989 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-053710.270989            && sh ms_avg_99p_lat.sh 20240314-053710.270989            && sh ms_total_even_odd_numreq.sh 20240314-053710.270989            && sh latency_cdf.sh 20240314-053710.270989
DONE
PARSING 20240314-053710.270989 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-053710.270989
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-053710.270989, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-054110.951432
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-054110.951432, 2, 100, 0, 0, 100, N/A



iokerneld killed (pid 2189740)
KILLED CAPYBARA PROCESSES
PARSING 20240314-054110.951432 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-054110.951432            && sh ms_avg_99p_lat.sh 20240314-054110.951432            && sh ms_total_even_odd_numreq.sh 20240314-054110.951432            && sh latency_cdf.sh 20240314-054110.951432
DONE
PARSING 20240314-054110.951432 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-054110.951432
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-054110.951432, 2, 100, 0, 0, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-054356.339234
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-054356.339234, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2191473)
KILLED CAPYBARA PROCESSES
PARSING 20240314-054356.339234 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-054356.339234            && sh ms_avg_99p_lat.sh 20240314-054356.339234            && sh ms_total_even_odd_numreq.sh 20240314-054356.339234            && sh latency_cdf.sh 20240314-054356.339234
DONE
PARSING 20240314-054356.339234 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-054356.339234
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-054356.339234, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-060509.256369
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-060509.256369, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2202739)
KILLED CAPYBARA PROCESSES
PARSING 20240314-060509.256369 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-060509.256369            && sh ms_avg_99p_lat.sh 20240314-060509.256369            && sh ms_total_even_odd_numreq.sh 20240314-060509.256369            && sh latency_cdf.sh 20240314-060509.256369
DONE
PARSING 20240314-060509.256369 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-060509.256369
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-060509.256369, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-064104.583267
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-064104.583267, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2216232)
KILLED CAPYBARA PROCESSES
PARSING 20240314-064104.583267 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-064104.583267            && sh ms_avg_99p_lat.sh 20240314-064104.583267            && sh ms_total_even_odd_numreq.sh 20240314-064104.583267            && sh latency_cdf.sh 20240314-064104.583267
DONE
PARSING 20240314-064104.583267 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-064104.583267
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-064104.583267, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-065301.415295
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-065301.415295, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2225182)
KILLED CAPYBARA PROCESSES
PARSING 20240314-065301.415295 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-065301.415295            && sh ms_avg_99p_lat.sh 20240314-065301.415295            && sh ms_total_even_odd_numreq.sh 20240314-065301.415295            && sh latency_cdf.sh 20240314-065301.415295
DONE
PARSING 20240314-065301.415295 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-065301.415295
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-065301.415295, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1.25 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-065353.148076
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-065353.148076, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2226648)
KILLED CAPYBARA PROCESSES
PARSING 20240314-065353.148076 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-065353.148076            && sh ms_avg_99p_lat.sh 20240314-065353.148076            && sh ms_total_even_odd_numreq.sh 20240314-065353.148076            && sh latency_cdf.sh 20240314-065353.148076
DONE
PARSING 20240314-065353.148076 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-065353.148076
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-065353.148076, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'redis-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240314-065502.467400
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240314-065502.467400, 2, 100, 0, 10000, 100, N/A



iokerneld killed (pid 2228156)
KILLED CAPYBARA PROCESSES
PARSING 20240314-065502.467400 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240314-065502.467400            && sh ms_avg_99p_lat.sh 20240314-065502.467400            && sh ms_total_even_odd_numreq.sh 20240314-065502.467400            && sh latency_cdf.sh 20240314-065502.467400
DONE
PARSING 20240314-065502.467400 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240314-065502.467400
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240314-065502.467400, 2, 100, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-060524.939722
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
unable to connect to 10.0.1.8:10000 Connection refused
================ TEST COMPLETE =================

Failed to parse the text file



KILLED CAPYBARA PROCESSES
PARSING 20240316-060524.939722 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240316-060524.939722            && sh ms_avg_99p_lat.sh 20240316-060524.939722            && sh ms_total_even_odd_numreq.sh 20240316-060524.939722            && sh latency_cdf.sh 20240316-060524.939722
ERROR: cat: /homes/inho/capybara-data/20240316-060524.939722.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240316-060524.939722.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240316-060524.939722.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240316-060524.939722.latency_trace: No such file or directory



PARSING 20240316-060524.939722 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240316-060524.939722
ERROR: paste: /homes/inho/capybara-data/20240316-060524.939722.be1_rps_signal: No such file or directory



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99


phttp-bench-bac killed (pid 2896667)
phttp-bench-bac killed (pid 2896668)
KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-061142.863308
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-061142.863308, 1, 100, 1, 29024, 3970, 3330, 3540, 3850, 33920


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-061142.863308, 1, 100, 1, 29024, 3970, 3330, 3540, 3850, 33920

KILLED CAPYBARA PROCESSES
Cleaning up...
phttp-bench-pro killed (pid 2235321)
phttp-bench-pro killed (pid 2235322)
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-064159.223677
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-064159.223677, 1, 1, 1, 10472, 94, 93, 95, 97, 135


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-064159.223677, 1, 1, 1, 10472, 94, 93, 95, 97, 135

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-071016.131498
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-071016.131498, 1, 1, 1, 10628, 93, 92, 93, 95, 138


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-071016.131498, 1, 1, 1, 10628, 93, 92, 93, 95, 138

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-071412.539699
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-071412.539699, 1, 1, 1, 10121, 98, 97, 98, 100, 146


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-071412.539699, 1, 1, 1, 10121, 98, 97, 98, 100, 146

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-074326.747845
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-074326.747845, 1, 1, 1, 10205, 97, 96, 97, 99, 144


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-074326.747845, 1, 1, 1, 10205, 97, 96, 97, 99, 144

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-075455.295713
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-075455.295713, 1, 1, 1, 10271, 132, 95, 96, 98, 164


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-075455.295713, 1, 1, 1, 10271, 132, 95, 96, 98, 164

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-081226.919989
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-081226.919989, 1, 1, 1, 10288, 96, 95, 96, 99, 141


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-081226.919989, 1, 1, 1, 10288, 96, 95, 96, 99, 141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-084306.083826
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-084306.083826, 1, 1, 1, 10221, 97, 96, 97, 99, 141


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-084306.083826, 1, 1, 1, 10221, 97, 96, 97, 99, 141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-090858.723178
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-090858.723178, 1, 1, 1, 10184, 97, 96, 97, 99, 144


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-090858.723178, 1, 1, 1, 10184, 97, 96, 97, 99, 144

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-092134.371808
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-092134.371808, 1, 1, 1, 10149, 98, 96, 98, 100, 148


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-092134.371808, 1, 1, 1, 10149, 98, 96, 98, 100, 148

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-093723.371884
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240316-093723.371884, 1, 1, 1, 10108, 98, 97, 98, 100, 145


KILLED CAPYBARA PROCESSES
PARSING 20240316-093723.371884 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh prism_mig_delay.sh 20240316-093723.371884
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240316-093723.371884, 1, 1, 1, 10108, 98, 97, 98, 100, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-100148.203098
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240316-100148.203098, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583322



iokerneld killed (pid 2633353)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240316-100148.203098, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583322

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-100327.203626
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2910416 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=100 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240316-100327.203626.be1 2>&1
================ TEST COMPLETE =================

[RESULT]20240316-100327.203626, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583421



iokerneld killed (pid 2635066)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240316-100327.203626, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583421

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-100538.583917
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2911579 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=100 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240316-100538.583917.be1 2>&1
================ TEST COMPLETE =================

[RESULT]20240316-100538.583917, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583553



iokerneld killed (pid 2636836)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240316-100538.583917, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583553

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-100813.135440
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240316-100813.135440, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583707



iokerneld killed (pid 2638698)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240316-100813.135440, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583707

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240316-101250.147703
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240316-101250.147703, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583984



iokerneld killed (pid 2640903)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240316-101250.147703, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710583984

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-033659.784060
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2772091 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=1 --threads=1 --runtime=3 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240317-033659.784060 > /homes/inho/capybara-data/20240317-033659.784060.client
================ TEST COMPLETE =================

[RESULT]20240317-033659.784060, 2, 1, 0, 10000, 100, N/A



iokerneld killed (pid 2771862)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-033659.784060, 2, 1, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-033831.027539
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2773760 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=1 --threads=1 --runtime=3 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240317-033831.027539 > /homes/inho/capybara-data/20240317-033831.027539.client
================ TEST COMPLETE =================

[RESULT]20240317-033831.027539, 2, 1, 0, 10000, 100, N/A



iokerneld killed (pid 2773535)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-033831.027539, 2, 1, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-034022.147728
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2775355 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=1 --threads=1 --runtime=3 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240317-034022.147728 > /homes/inho/capybara-data/20240317-034022.147728.client
================ TEST COMPLETE =================

[RESULT]20240317-034022.147728, 2, 1, 0, 10000, 100, N/A



iokerneld killed (pid 2775129)
dpdk-ctrl.elf killed (pid 2919543)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-034022.147728, 2, 1, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-034335.795588
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2777125 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=1 --threads=1 --runtime=3 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240317-034335.795588 > /homes/inho/capybara-data/20240317-034335.795588.client
================ TEST COMPLETE =================

[RESULT]20240317-034335.795588, 2, 1, 0, 10000, 100, N/A



iokerneld killed (pid 2776900)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-034335.795588, 2, 1, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-034616.059469
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-034616.059469, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647190



iokerneld killed (pid 2778823)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-034616.059469, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647190

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-034802.755713
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:910:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2780760 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=1 --threads=1 --runtime=3 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240317-034802.755713 > /homes/inho/capybara-data/20240317-034802.755713.client
================ TEST COMPLETE =================

[RESULT]20240317-034802.755713, 2, 1, 0, 10000, 100, N/A



iokerneld killed (pid 2780532)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-034802.755713, 2, 1, 0, 10000, 100, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-034910.971948
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-034910.971948, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647365



iokerneld killed (pid 2782157)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-034910.971948, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647365

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-035713.571728
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-035713.571728, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647848



iokerneld killed (pid 2784787)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-035713.571728, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647848

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-035900.735717
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-035900.735717, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647955



iokerneld killed (pid 2786483)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-035900.735717, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710647955

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-050945.720008
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-050945.720008, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710652200



iokerneld killed (pid 2797513)
KILLED CAPYBARA PROCESSES
PARSING 20240317-050945.720008 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240317-050945.720008
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-050945.720008, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710652200

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-051223.355870
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-051223.355870, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710652358



iokerneld killed (pid 2799638)
KILLED CAPYBARA PROCESSES
PARSING 20240317-051223.355870 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240317-051223.355870
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-051223.355870, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710652358

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-051417.643888
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-051417.643888, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710652472



iokerneld killed (pid 2801511)
KILLED CAPYBARA PROCESSES
PARSING 20240317-051417.643888 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240317-051417.643888
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-051417.643888, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710652472

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-051609.855650
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240317-051609.855650, 1, 1, 1, 10154, 98, 96, 98, 100, 144


KILLED CAPYBARA PROCESSES
PARSING 20240317-051609.855650 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240317-051609.855650
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240317-051609.855650, 1, 1, 1, 10154, 98, 96, 98, 100, 144

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-091421.263459
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-091421.263459, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710666875



iokerneld killed (pid 2834356)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-091421.263459, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710666875

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-091803.567100
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-091803.567100, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710667097



iokerneld killed (pid 2836345)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-091803.567100, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710667097

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-092735.627410
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-092735.627410, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710667669



iokerneld killed (pid 2839063)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-092735.627410, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710667669

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-094105.800094
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-094105.800094, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710668480



iokerneld killed (pid 2842171)
KILLED CAPYBARA PROCESSES
PARSING 20240317-094105.800094 migration delay
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 676, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 219, in parse_mig_delay
    step_name = columns[1]
IndexError: list index out of range
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-094105.800094, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710668480

KILLED CAPYBARA PROCESSES
Cleaning up...
PARSING 20240317-094105.800094 migration delay
['Exiting process.']
Traceback (most recent call last):
  File "run_eval.py", line 747, in <module>
    parse_mig_delay("20240317-094105.800094")
  File "run_eval.py", line 219, in parse_mig_delay
    step_name = columns[1]
IndexError: list index out of range
PARSING 20240317-094105.800094 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
PARSING 20240317-094105.800094 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
PARSING 20240317-094105.800094 migration delay
Traceback (most recent call last):
  File "run_eval.py", line 745, in <module>
    parse_mig_delay("20240317-094105.800094")
  File "run_eval.py", line 247, in parse_mig_delay
    sorted_list = sorted(lines, key=lambda x: int(x.split(",")[0]))[1:]
  File "run_eval.py", line 247, in <lambda>
    sorted_list = sorted(lines, key=lambda x: int(x.split(",")[0]))[1:]
ValueError: invalid literal for int() with base 10: ''
PARSING 20240317-094105.800094 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 8 
PARSING 20240317-094105.800094 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-095234.752061
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================




iokerneld killed (pid 2845469)
KILLED CAPYBARA PROCESSES
PARSING 20240317-095234.752061 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-095457.140155
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240317-095457.140155, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710669311



iokerneld killed (pid 2847139)
KILLED CAPYBARA PROCESSES
PARSING 20240317-095457.140155 migration delay
1
CALCULATING 20240317-095457.140155 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240317-095457.140155
Traceback (most recent call last):
  File "run_eval.py", line 753, in <module>
    run_eval()
  File "run_eval.py", line 674, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 307, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240317-095457.140155' returned non-zero exit status 1.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240317-095457.140155, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710669311

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240317-095848.152331
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================




iokerneld killed (pid 2848967)
KILLED CAPYBARA PROCESSES
PARSING 20240317-095848.152331 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc

KILLED CAPYBARA PROCESSES
Cleaning up...
PARSING 20240317-095848.152331 migration delay
19799
CALCULATING 20240317-095848.152331 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240317-095848.152331
DONE
PARSING 20240317-095848.152331 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 4 
PARSING 20240317-095848.152331 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
PARSING 20240317-095848.152331 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
PARSING 20240317-095848.152331 migration delay
PARSING 20240317-095848.152331 migration delay
PARSING 20240317-095848.152331 migration delay
PARSING 20240317-095848.152331 migration delay
PARSING 20240317-095848.152331 migration delay
PARSING 20240317-095848.152331 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
PARSING 20240317-095848.152331 migration delay
19799
CALCULATING 20240317-095848.152331 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240317-095848.152331
DONE
PARSING 20240317-095848.152331 migration delay
19799
CALCULATING 20240317-095848.152331 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240317-095848.152331
DONE
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-014410.870547
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-014410.870547, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710726265



iokerneld killed (pid 2967899)
KILLED CAPYBARA PROCESSES
PARSING 20240318-014410.870547 migration delay
19799
CALCULATING 20240318-014410.870547 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240318-014410.870547
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-014410.870547, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710726265

KILLED CAPYBARA PROCESSES
Cleaning up...
ssh: connect to host nsl-node1.d2.comp.nus.edu.sg port 22: Connection refused
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-072814.343746
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
Invalid server app: http-prism
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99

ssh: connect to host nsl-node1.d2.comp.nus.edu.sg port 22: Connection refused
dpdk-ctrl.elf killed (pid 2945714)
KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-072947.903333
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
Invalid server app: http-prism
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99

dpdk-ctrl.elf killed (pid 2946289)
KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-073008.363777
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-073008.363777, 1, 1, 1, 10182, 97, 96, 98, 100, 146


KILLED CAPYBARA PROCESSES
PARSING 20240318-073008.363777 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-073008.363777
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-073008.363777, 1, 1, 1, 10182, 97, 96, 98, 100, 146

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-074550.150707
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-074550.150707, 1, 1, 1, 10192, 97, 96, 97, 99, 140


KILLED CAPYBARA PROCESSES
PARSING 20240318-074550.150707 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-074550.150707
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-074550.150707, 1, 1, 1, 10192, 97, 96, 97, 99, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-074631.827648
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-074631.827648, 1, 1, 1, 10483, 95, 93, 95, 97, 144


KILLED CAPYBARA PROCESSES
PARSING 20240318-074631.827648 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-074631.827648
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-074631.827648, 1, 1, 1, 10483, 95, 93, 95, 97, 144

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-075456.811583
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-075456.811583, 1, 1, 1, 0, 0, 0, 0, 0, 0


KILLED CAPYBARA PROCESSES
PARSING 20240318-075456.811583 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-075456.811583
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-075456.811583, 1, 1, 1, 0, 0, 0, 0, 0, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-075612.239554
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-075612.239554, 1, 1, 1, 0, 0, 0, 0, 0, 0


KILLED CAPYBARA PROCESSES
PARSING 20240318-075612.239554 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-075612.239554
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-075612.239554, 1, 1, 1, 0, 0, 0, 0, 0, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-075650.219203
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-075650.219203, 1, 1, 1, 10534, 94, 93, 94, 96, 140


KILLED CAPYBARA PROCESSES
PARSING 20240318-075650.219203 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-075650.219203
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-075650.219203, 1, 1, 1, 10534, 94, 93, 94, 96, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-080140.647488
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-080140.647488, 1, 1, 1, 10196, 97, 96, 97, 99, 141


KILLED CAPYBARA PROCESSES
PARSING 20240318-080140.647488 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-080140.647488
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-080140.647488, 1, 1, 1, 10196, 97, 96, 97, 99, 141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-080557.651904
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-080557.651904, 1, 1, 1, 10207, 97, 96, 97, 99, 145


KILLED CAPYBARA PROCESSES
PARSING 20240318-080557.651904 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-080557.651904
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-080557.651904, 1, 1, 1, 10207, 97, 96, 97, 99, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-080711.515168
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-080711.515168, 1, 1, 1, 10520, 94, 93, 94, 96, 138


KILLED CAPYBARA PROCESSES
PARSING 20240318-080711.515168 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-080711.515168
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-080711.515168, 1, 1, 1, 10520, 94, 93, 94, 96, 138

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-082009.042544
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-082009.042544, 1, 1, 1, 10464, 95, 93, 95, 97, 144


KILLED CAPYBARA PROCESSES
PARSING 20240318-082009.042544 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-082009.042544
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-082009.042544, 1, 1, 1, 10464, 95, 93, 95, 97, 144

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-083107.482998
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-083125.876332
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-083125.876332, 1, 1, 1, 10959, 91, 89, 90, 93, 156


KILLED CAPYBARA PROCESSES
PARSING 20240318-083125.876332 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-083125.876332
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-083125.876332, 1, 1, 1, 10959, 91, 89, 90, 93, 156

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-083813.939311
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-083813.939311, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710751108



iokerneld killed (pid 3038051)
KILLED CAPYBARA PROCESSES
PARSING 20240318-083813.939311 migration delay
19799
CALCULATING 20240318-083813.939311 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240318-083813.939311
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-083813.939311, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710751108

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-084920.699701
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-084920.699701, 1, 1, 1, 10479, 94, 93, 95, 97, 140


KILLED CAPYBARA PROCESSES
PARSING 20240318-084920.699701 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-084920.699701
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-084920.699701, 1, 1, 1, 10479, 94, 93, 95, 97, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-085156.079325
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-085156.079325, 1, 1, 1, 10476, 95, 93, 95, 97, 140


KILLED CAPYBARA PROCESSES
PARSING 20240318-085156.079325 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-085156.079325
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-085156.079325, 1, 1, 1, 10476, 95, 93, 95, 97, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-085546.603692
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-085546.603692, 1, 1, 1, 10473, 95, 93, 95, 97, 141


KILLED CAPYBARA PROCESSES
PARSING 20240318-085546.603692 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-085546.603692
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-085546.603692, 1, 1, 1, 10473, 95, 93, 95, 97, 141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-085621.527984
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240318-085621.527984, 1, 1, 1, 10442, 95, 93, 95, 98, 148


KILLED CAPYBARA PROCESSES
PARSING 20240318-085621.527984 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240318-085621.527984
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240318-085621.527984, 1, 1, 1, 10442, 95, 93, 95, 98, 148

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-092908.043063
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-092908.043063, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754162



iokerneld killed (pid 3050516)
KILLED CAPYBARA PROCESSES
PARSING 20240318-092908.043063 migration delay
19799
CALCULATING 20240318-092908.043063 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf.sh 20240318-092908.043063
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-092908.043063, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754162

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-093348.423480
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-093348.423480, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754443



iokerneld killed (pid 3052627)
KILLED CAPYBARA PROCESSES
PARSING 20240318-093348.423480 migration delay
19799
CALCULATING 20240318-093348.423480 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_and_avg.sh 20240318-093348.423480
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-093348.423480, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754443

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-093541.631585
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-093541.631585, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754556



iokerneld killed (pid 3054311)
KILLED CAPYBARA PROCESSES
PARSING 20240318-093541.631585 migration delay
19799
CALCULATING 20240318-093541.631585 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_and_avg.sh 20240318-093541.631585
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-093541.631585, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754556

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-093700.299930
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-093700.299930, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754634



iokerneld killed (pid 3055891)
KILLED CAPYBARA PROCESSES
PARSING 20240318-093700.299930 migration delay
19799
CALCULATING 20240318-093700.299930 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_and_avg.sh 20240318-093700.299930
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-093700.299930, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754634

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240318-093754.379579
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240318-093754.379579, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754688



iokerneld killed (pid 3057425)
KILLED CAPYBARA PROCESSES
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_and_avg.sh 20240318-093754.379579
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240318-093754.379579, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710754688

KILLED CAPYBARA PROCESSES
Cleaning up...
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
PARSING 20240318-093700.299930 migration delay
19799
CALCULATING 20240318-093700.299930 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093700.299930
DONE
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
PARSING 20240318-093754.379579 migration delay
19799
CALCULATING 20240318-093754.379579 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240318-093754.379579
DONE
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-062823.208135
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-062823.208135, 1, 1, 1, 10613, 93, 93, 94, 96, 140


KILLED CAPYBARA PROCESSES
PARSING 20240319-062823.208135 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-062823.208135
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-062823.208135, 1, 1, 1, 10613, 93, 93, 94, 96, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-063103.823972
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-063103.823972, 1, 1, 1, 10469, 94, 93, 95, 97, 145


KILLED CAPYBARA PROCESSES
PARSING 20240319-063103.823972 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-063103.823972
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-063103.823972, 1, 1, 1, 10469, 94, 93, 95, 97, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-063332.975899
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-063332.975899, 1, 1, 1, 10316, 96, 95, 96, 98, 137


KILLED CAPYBARA PROCESSES
PARSING 20240319-063332.975899 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-063332.975899
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-063332.975899, 1, 1, 1, 10316, 96, 95, 96, 98, 137

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-063637.236005
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-063637.236005, 1, 1, 1, 10290, 98, 95, 96, 98, 147


KILLED CAPYBARA PROCESSES
PARSING 20240319-063637.236005 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-063637.236005
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-063637.236005, 1, 1, 1, 10290, 98, 95, 96, 98, 147

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-063906.211166
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-063906.211166, 1, 1, 1, 10482, 94, 93, 94, 96, 157


KILLED CAPYBARA PROCESSES
PARSING 20240319-063906.211166 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-063906.211166
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-063906.211166, 1, 1, 1, 10482, 94, 93, 94, 96, 157

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-064011.936101
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-064011.936101, 1, 1, 1, 10296, 96, 95, 96, 99, 141


KILLED CAPYBARA PROCESSES
PARSING 20240319-064011.936101 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-064011.936101
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-064011.936101, 1, 1, 1, 10296, 96, 95, 96, 99, 141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-064209.987837
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-064209.987837, 1, 1, 1, 10283, 96, 95, 96, 98, 143


KILLED CAPYBARA PROCESSES
PARSING 20240319-064209.987837 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-064209.987837
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-064209.987837, 1, 1, 1, 10283, 96, 95, 96, 98, 143

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-064338.739105
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-064338.739105, 1, 1, 1, 10782, 92, 90, 92, 95, 140


KILLED CAPYBARA PROCESSES
PARSING 20240319-064338.739105 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-064338.739105
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-064338.739105, 1, 1, 1, 10782, 92, 90, 92, 95, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-064445.767857
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-064445.767857, 1, 1, 1, 10202, 97, 95, 97, 99, 149


KILLED CAPYBARA PROCESSES
PARSING 20240319-064445.767857 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-064445.767857
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-064445.767857, 1, 1, 1, 10202, 97, 95, 97, 99, 149

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-064631.024335
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-064631.024335, 1, 1, 1, 9986, 100, 98, 100, 102, 160


KILLED CAPYBARA PROCESSES
PARSING 20240319-064631.024335 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-064631.024335
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-064631.024335, 1, 1, 1, 9986, 100, 98, 100, 102, 160

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3



EXPTID: 20240319-064919.135611
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-064919.135611, 1, 1, 1, 10614, 93, 92, 94, 98, 145


KILLED CAPYBARA PROCESSES
PARSING 20240319-064919.135611 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-064919.135611
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-064919.135611, 1, 1, 1, 10614, 93, 92, 94, 98, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-065220.643043
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-065220.643043, 1, 1, 1, 10042, 99, 97, 99, 101, 151


KILLED CAPYBARA PROCESSES
PARSING 20240319-065220.643043 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-065220.643043
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-065220.643043, 1, 1, 1, 10042, 99, 97, 99, 101, 151

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-065336.775857
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-065336.775857, 1, 1, 1, 10042, 104, 97, 98, 101, 169


KILLED CAPYBARA PROCESSES
PARSING 20240319-065336.775857 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-065336.775857
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-065336.775857, 1, 1, 1, 10042, 104, 97, 98, 101, 169

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-065720.215223
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-065720.215223, 1, 1, 1, 10122, 98, 97, 98, 100, 145


KILLED CAPYBARA PROCESSES
PARSING 20240319-065720.215223 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-065720.215223
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-065720.215223, 1, 1, 1, 10122, 98, 97, 98, 100, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-065944.914807
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-065944.914807, 1, 1, 1, 10217, 97, 96, 97, 99, 144


KILLED CAPYBARA PROCESSES
PARSING 20240319-065944.914807 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-065944.914807
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-065944.914807, 1, 1, 1, 10217, 97, 96, 97, 99, 144

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-070120.111480
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-070120.111480, 1, 1, 1, 10130, 98, 96, 98, 101, 156


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-070120.111480, 1, 1, 1, 10130, 98, 96, 98, 101, 156

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-070233.031715
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-070233.031715, 1, 1, 1, 9319, 167, 104, 106, 108, 214


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-070233.031715, 1, 1, 1, 9319, 167, 104, 106, 108, 214

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-070909.498897
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-070909.498897, 1, 1, 1, 9328, 169, 104, 106, 108, 197


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-070909.498897, 1, 1, 1, 9328, 169, 104, 106, 108, 197

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-071240.147775
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-071240.147775, 1, 1, 1, 9319, 106, 104, 106, 108, 160


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-071240.147775, 1, 1, 1, 9319, 106, 104, 106, 108, 160

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-071427.682781
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-071427.682781, 1, 1, 1, 0, 0, 0, 0, 0, 0


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-071427.682781, 1, 1, 1, 0, 0, 0, 0, 0, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-071508.671754
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-071508.671754, 1, 1, 1, 9282, 165, 105, 107, 109, 197


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-071508.671754, 1, 1, 1, 9282, 165, 105, 107, 109, 197

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-071717.192116
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-071717.192116, 1, 1, 1, 0, 0, 0, 0, 0, 0


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-071717.192116, 1, 1, 1, 0, 0, 0, 0, 0, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-071807.835448
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-071807.835448, 1, 1, 1, 9357, 106, 105, 106, 109, 153


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-071807.835448, 1, 1, 1, 9357, 106, 105, 106, 109, 153

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-071905.004264
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-071905.004264, 1, 1, 1, 10168, 97, 96, 98, 101, 156


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-071905.004264, 1, 1, 1, 10168, 97, 96, 98, 101, 156

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072413.627364
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072413.627364, 1, 1, 1, 10535, 94, 93, 94, 96, 139


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072413.627364, 1, 1, 1, 10535, 94, 93, 94, 96, 139

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072550.899376
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072550.899376, 1, 1, 1, 10486, 94, 93, 95, 97, 145


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072550.899376, 1, 1, 1, 10486, 94, 93, 95, 97, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072651.175074
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072651.175074, 1, 1, 1, 10422, 95, 93, 95, 98, 149


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072651.175074, 1, 1, 1, 10422, 95, 93, 95, 98, 149

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072726.935638
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072726.935638, 1, 1, 1, 10471, 95, 93, 95, 97, 142


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072726.935638, 1, 1, 1, 10471, 95, 93, 95, 97, 142

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072758.159310
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072758.159310, 1, 1, 1, 10516, 94, 93, 94, 96, 147


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072758.159310, 1, 1, 1, 10516, 94, 93, 94, 96, 147

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072827.987108
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072827.987108, 1, 1, 1, 10932, 91, 89, 92, 94, 137


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072827.987108, 1, 1, 1, 10932, 91, 89, 92, 94, 137

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072900.687453
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072900.687453, 1, 1, 1, 10546, 94, 93, 94, 96, 140


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072900.687453, 1, 1, 1, 10546, 94, 93, 94, 96, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-072929.359275
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-072929.359275, 1, 1, 1, 10579, 94, 92, 93, 95, 139


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-072929.359275, 1, 1, 1, 10579, 94, 92, 93, 95, 139

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073018.631771
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073018.631771, 1, 1, 1, 10575, 94, 92, 93, 95, 140


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073018.631771, 1, 1, 1, 10575, 94, 92, 93, 95, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073247.807164
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073247.807164, 1, 1, 1, 10391, 95, 94, 96, 98, 147


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073247.807164, 1, 1, 1, 10391, 95, 94, 96, 98, 147

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073321.063674
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073321.063674, 1, 1, 1, 10415, 95, 93, 95, 98, 146


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073321.063674, 1, 1, 1, 10415, 95, 93, 95, 98, 146

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073421.999219
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073421.999219, 1, 1, 1, 10499, 94, 93, 94, 96, 160


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073421.999219, 1, 1, 1, 10499, 94, 93, 94, 96, 160

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073506.667492
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073506.667492, 1, 1, 1, 10492, 95, 93, 95, 97, 149


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073506.667492, 1, 1, 1, 10492, 95, 93, 95, 97, 149

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073552.487442
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073552.487442, 1, 1, 1, 10506, 94, 93, 94, 97, 145


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073552.487442, 1, 1, 1, 10506, 94, 93, 94, 97, 145

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073640.819742
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073640.819742, 1, 1, 1, 10542, 94, 93, 94, 96, 130


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073640.819742, 1, 1, 1, 10542, 94, 93, 94, 96, 130

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073754.468469
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073754.468469, 1, 1, 1, 10466, 95, 93, 95, 97, 143


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073754.468469, 1, 1, 1, 10466, 95, 93, 95, 97, 143

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-073907.699633
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-073907.699633, 1, 1, 1, 10551, 94, 93, 94, 96, 137


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-073907.699633, 1, 1, 1, 10551, 94, 93, 94, 96, 137

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-075944.247562
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-075944.247562, 1, 1, 1, 10518, 94, 93, 94, 96, 139


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-075944.247562, 1, 1, 1, 10518, 94, 93, 94, 96, 139

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-083119.302745
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-083119.302745, 1, 1, 1, 11012, 90, 89, 90, 92, 140


KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-083119.302745, 1, 1, 1, 11012, 90, 89, 90, 92, 140

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-083148.379719
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-083148.379719, 1, 1, 1, 10541, 94, 93, 94, 96, 143


KILLED CAPYBARA PROCESSES
PARSING 20240319-083148.379719 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-083148.379719
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-083148.379719, 1, 1, 1, 10541, 94, 93, 94, 96, 143

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 64 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-083814.883913
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-083814.883913, 1, 1, 1, 10308, 96, 94, 96, 98, 162


KILLED CAPYBARA PROCESSES
PARSING 20240319-083814.883913 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-083814.883913
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-083814.883913, 1, 1, 1, 10308, 96, 94, 96, 98, 162

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-084847.155243
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-084847.155243, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838141



iokerneld killed (pid 3280726)
KILLED CAPYBARA PROCESSES
PARSING 20240319-084847.155243 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-084847.155243
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-084847.155243, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-085127.088238
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-085127.088238, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838301



iokerneld killed (pid 3282449)
KILLED CAPYBARA PROCESSES
PARSING 20240319-085127.088238 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-085127.088238
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-085127.088238, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838301

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-085331.412061
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-085331.412061, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838425



iokerneld killed (pid 3284247)
KILLED CAPYBARA PROCESSES
PARSING 20240319-085331.412061 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-085331.412061
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-085331.412061, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838425

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-085445.443559
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-085445.443559, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838499



iokerneld killed (pid 3285778)
KILLED CAPYBARA PROCESSES
PARSING 20240319-085445.443559 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-085445.443559
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-085445.443559, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838499

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-085606.944142
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-085606.944142, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838581



iokerneld killed (pid 3287320)
KILLED CAPYBARA PROCESSES
PARSING 20240319-085606.944142 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-085606.944142
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-085606.944142, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838581

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-085850.575381
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-085850.575381, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838744



iokerneld killed (pid 3289189)
KILLED CAPYBARA PROCESSES
PARSING 20240319-085850.575381 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-085850.575381
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-085850.575381, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838744

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-085933.547802
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-085933.547802, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838788



iokerneld killed (pid 3290664)
KILLED CAPYBARA PROCESSES
PARSING 20240319-085933.547802 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-085933.547802
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-085933.547802, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838788

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-090033.992050
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-090033.992050, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838848



iokerneld killed (pid 3292158)
KILLED CAPYBARA PROCESSES
PARSING 20240319-090033.992050 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-090033.992050
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-090033.992050, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838848

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-090125.214754
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-090125.214754, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838899



iokerneld killed (pid 3293639)
KILLED CAPYBARA PROCESSES
PARSING 20240319-090125.214754 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-090125.214754
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-090125.214754, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838899

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-090224.903914
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-090224.903914, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838959



iokerneld killed (pid 3295128)
KILLED CAPYBARA PROCESSES
PARSING 20240319-090224.903914 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-090224.903914
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-090224.903914, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710838959

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-091828.151945
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-091828.151945, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710839922



iokerneld killed (pid 3298608)
KILLED CAPYBARA PROCESSES
PARSING 20240319-091828.151945 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-091828.151945
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-092014.103388
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-092014.103388, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710840028



iokerneld killed (pid 3299753)
KILLED CAPYBARA PROCESSES
PARSING 20240319-092014.103388 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-092014.103388
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-092014.103388, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710840028

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-092124.768031
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-092124.768031, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710840099



iokerneld killed (pid 3301299)
KILLED CAPYBARA PROCESSES
PARSING 20240319-092124.768031 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-092124.768031
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-092124.768031, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710840099

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-092329.456175
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-092329.456175, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710840223



iokerneld killed (pid 3302929)
KILLED CAPYBARA PROCESSES
PARSING 20240319-092329.456175 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-092329.456175
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-092329.456175, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710840223

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-092637.179820
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-092637.179820, 1, 1, 1, 10448, 95, 94, 95, 97, 141


KILLED CAPYBARA PROCESSES
PARSING 20240319-092637.179820 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-092637.179820
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-092637.179820, 1, 1, 1, 10448, 95, 94, 95, 97, 141

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-093059.071772
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-093059.071772, 1, 1, 1, 10479, 94, 93, 95, 97, 139


KILLED CAPYBARA PROCESSES
PARSING 20240319-093059.071772 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-093059.071772
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 678, in run_eval
    parse_mig_cpu_ovhd(experiment_id)
  File "run_eval.py", line 316, in parse_mig_cpu_ovhd
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-093059.071772' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-093059.071772, 1, 1, 1, 10479, 94, 93, 95, 97, 139

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-093140.063958
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-093140.063958, 1, 1, 1, 10620, 93, 92, 93, 95, 139


KILLED CAPYBARA PROCESSES
PARSING 20240319-093140.063958 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-093140.063958
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 678, in run_eval
    parse_mig_cpu_ovhd(experiment_id)
  File "run_eval.py", line 316, in parse_mig_cpu_ovhd
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-093140.063958' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-093140.063958, 1, 1, 1, 10620, 93, 92, 93, 95, 139

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 12

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-093220.180034
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-093220.180034, 1, 1, 1, 10665, 93, 92, 93, 94, 134


KILLED CAPYBARA PROCESSES
PARSING 20240319-093220.180034 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-093220.180034
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-093220.180034, 1, 1, 1, 10665, 93, 92, 93, 94, 134

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 12

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-114754.263923
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-114754.263923, 1, 1, 1, 10645, 93, 92, 93, 95, 133


KILLED CAPYBARA PROCESSES
PARSING 20240319-114754.263923 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-114754.263923
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-114754.263923, 1, 1, 1, 10645, 93, 92, 93, 95, 133

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 12

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-114921.255278
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-114921.255278, 1, 1, 1, 10632, 93, 92, 93, 95, 134


KILLED CAPYBARA PROCESSES
PARSING 20240319-114921.255278 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-114921.255278
ERROR: awk: cmd. line:1: {print
awk: cmd. line:1:       ^ unexpected newline or end of string
awk: cmd. line:1: {print
awk: cmd. line:1:       ^ unexpected newline or end of string



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-114921.255278, 1, 1, 1, 10632, 93, 92, 93, 95, 134

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 12

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-115014.803567
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-115014.803567, 1, 1, 1, 10655, 93, 92, 93, 95, 137


KILLED CAPYBARA PROCESSES
PARSING 20240319-115014.803567 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-115014.803567
ERROR: awk: cmd. line:1: {print
awk: cmd. line:1:       ^ unexpected newline or end of string
awk: cmd. line:1: {print
awk: cmd. line:1:       ^ unexpected newline or end of string



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-115014.803567, 1, 1, 1, 10655, 93, 92, 93, 95, 137

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'prism' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'wrk' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 12

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-115124.303613
SETUP SWITCH
RUNNING BACKENDS
Prism FE is running
1 backends are running
================ TEST COMPLETE =================

20240319-115124.303613, 1, 1, 1, 10657, 93, 92, 93, 95, 139


KILLED CAPYBARA PROCESSES
PARSING 20240319-115124.303613 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-115124.303613
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, #THREAD, AVG, p50, p75, p90, p99
20240319-115124.303613, 1, 1, 1, 10657, 93, 92, 93, 95, 139

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = True

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240319-120511.007859
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240319-120511.007859, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710849925



iokerneld killed (pid 3333188)
KILLED CAPYBARA PROCESSES
PARSING 20240319-120511.007859 prism mig delay
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_mig_cpu_ovhd.sh 20240319-120511.007859
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240319-120511.007859, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710849925

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 32 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240320-122142.895520
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240320-122142.895520, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937317



iokerneld killed (pid 3515066)
KILLED CAPYBARA PROCESSES
PARSING 20240320-122142.895520 migration delay
1
CALCULATING 20240320-122142.895520 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240320-122142.895520
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240320-122142.895520' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240320-122142.895520, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937317

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 32 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240320-122313.624082
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240320-122313.624082, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937408



iokerneld killed (pid 3516815)
KILLED CAPYBARA PROCESSES
PARSING 20240320-122313.624082 migration delay
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 32 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240320-122522.155786
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240320-122522.155786, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937536



iokerneld killed (pid 3518215)
KILLED CAPYBARA PROCESSES
PARSING 20240320-122522.155786 migration delay
21799
CALCULATING 20240320-122522.155786 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240320-122522.155786
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240320-122522.155786, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937536

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 16 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240320-123038.748153
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240320-123038.748153, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937853



iokerneld killed (pid 3520297)
KILLED CAPYBARA PROCESSES
PARSING 20240320-123038.748153 migration delay
21799
CALCULATING 20240320-123038.748153 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240320-123038.748153
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240320-123038.748153, 2, 1, 0, 10000, 100, exponential, 1, 0, 0, 0, 1710937853

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 16 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-023253.479061
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-023253.479061, 2, 101, 0, 10000, 100, exponential, 1, 4, 4, 0, 0, 10.0, 63.0, 63.0, 63.0, 63.0, 1710988388, 0



iokerneld killed (pid 3626947)
KILLED CAPYBARA PROCESSES
PARSING 20240321-023253.479061 migration delay
1
CALCULATING 20240321-023253.479061 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-023253.479061
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-023253.479061' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-023253.479061, 2, 101, 0, 10000, 100, exponential, 1, 4, 4, 0, 0, 10.0, 63.0, 63.0, 63.0, 63.0, 1710988388, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 16 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(100, 100 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-024658.811986
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 385


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-024658.811986, 2, 101, 0, 0, 1, exponential, 100, 128, 128, 0, 2, 92.0, 5188.0, 6222.0, 6374.0, 6374.0, 1710989233, 0



iokerneld killed (pid 3630617)
KILLED CAPYBARA PROCESSES
PARSING 20240321-024658.811986 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
 1710989233374651816,INIT_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-024658.811986, 2, 101, 0, 0, 1, exponential, 100, 128, 128, 0, 2, 92.0, 5188.0, 6222.0, 6374.0, 6374.0, 1710989233, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(100, 100 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [3]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-024916.420028
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 254


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-024916.420028, 2, 3, 0, 0, 1, exponential, 100, 92, 92, 0, 0, 91.0, 93.0, 98.0, 150.0, 150.0, 1710989371, 0



iokerneld killed (pid 3632084)
KILLED CAPYBARA PROCESSES
PARSING 20240321-024916.420028 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
 1710989370898401316,INIT_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-024916.420028, 2, 3, 0, 0, 1, exponential, 100, 92, 92, 0, 0, 91.0, 93.0, 98.0, 150.0, 150.0, 1710989371, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(3, 3 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [3]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-024951.683909
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-024951.683909, 2, 3, 0, 0, 1, exponential, 3, 2, 2, 0, 0, 92.0, 139.0, 139.0, 139.0, 139.0, 1710989406, 0



iokerneld killed (pid 3633320)
KILLED CAPYBARA PROCESSES
PARSING 20240321-024951.683909 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
 1710989406206599610,INIT_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-024951.683909, 2, 3, 0, 0, 1, exponential, 3, 2, 2, 0, 0, 92.0, 139.0, 139.0, 139.0, 139.0, 1710989406, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(3, 3 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [3]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-025353.848039
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-025353.848039, 2, 3, 0, 0, 1, exponential, 3, 2, 2, 0, 0, 103.0, 139.0, 139.0, 139.0, 139.0, 1710989648, 0



iokerneld killed (pid 3635216)
KILLED CAPYBARA PROCESSES
PARSING 20240321-025353.848039 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
 1710989648458551696,INIT_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-025353.848039, 2, 3, 0, 0, 1, exponential, 3, 2, 2, 0, 0, 103.0, 139.0, 139.0, 139.0, 139.0, 1710989648, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-030338.843858
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4497413


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-030338.843858, 2, 101, 0, 0, 10, exponential, 1000000, 995690, 995687, 0, 343, 13.0, 24.0, 44.0, 72.0, 108.0, 1710990233, 0



iokerneld killed (pid 3638164)
dpdk-ctrl.elf killed (pid 3055641)
KILLED CAPYBARA PROCESSES
PARSING 20240321-030338.843858 migration delay
4753
CALCULATING 20240321-030338.843858 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-030338.843858
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-030338.843858, 2, 101, 0, 0, 10, exponential, 1000000, 995690, 995687, 0, 343, 13.0, 24.0, 44.0, 72.0, 108.0, 1710990233, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(550000, 550000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-030719.435481
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2473816


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-030719.435481, 2, 50, 0, 0, 10, exponential, 550000, 547877, 547875, 0, 30, 17.0, 32.0, 61.0, 100.0, 155.0, 1710990454, 0



iokerneld killed (pid 3640247)
KILLED CAPYBARA PROCESSES
PARSING 20240321-030719.435481 migration delay
1
CALCULATING 20240321-030719.435481 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-030719.435481
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-030719.435481' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-030719.435481, 2, 50, 0, 0, 10, exponential, 550000, 547877, 547875, 0, 30, 17.0, 32.0, 61.0, 100.0, 155.0, 1710990454, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(600000, 600000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [50]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-030839.723755
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2699216


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-030839.723755, 2, 50, 0, 0, 10, exponential, 600000, 597837, 597831, 0, 37, 29.0, 74.0, 180.0, 361.0, 693.0, 1710990534, 0



iokerneld killed (pid 3641599)
KILLED CAPYBARA PROCESSES
PARSING 20240321-030839.723755 migration delay
1
CALCULATING 20240321-030839.723755 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-030839.723755
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-030839.723755' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-030839.723755, 2, 50, 0, 0, 10, exponential, 600000, 597837, 597831, 0, 37, 29.0, 74.0, 180.0, 361.0, 693.0, 1710990534, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-031247.464027
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1618228


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-031247.464027, 2, 101, 0, 0, 10, exponential, 360000, 357406, 357405, 0, 20, 8.0, 10.0, 13.0, 15.0, 20.0, 1710990782, 0



iokerneld killed (pid 3643448)
dpdk-ctrl.elf killed (pid 3058776)
KILLED CAPYBARA PROCESSES
PARSING 20240321-031247.464027 migration delay
1572
CALCULATING 20240321-031247.464027 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-031247.464027
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-031247.464027, 2, 101, 0, 0, 10, exponential, 360000, 357406, 357405, 0, 20, 8.0, 10.0, 13.0, 15.0, 20.0, 1710990782, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-031454.600594
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3237871


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-031454.600594, 2, 101, 0, 0, 1, exponential, 360000, 358476, 358476, 0, 35, 8.0, 10.0, 13.0, 17.0, 43.0, 1710990910, 0



iokerneld killed (pid 3645146)
KILLED CAPYBARA PROCESSES
PARSING 20240321-031454.600594 migration delay
35454
CALCULATING 20240321-031454.600594 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-031454.600594
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-031454.600594, 2, 101, 0, 0, 1, exponential, 360000, 358476, 358476, 0, 35, 8.0, 10.0, 13.0, 17.0, 43.0, 1710990910, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(600000, 600000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-031730.111940
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697708


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-031730.111940, 2, 101, 0, 0, 1, exponential, 600000, 597015, 597014, 0, 46, 9.0, 12.0, 17.0, 25.0, 46.0, 1710991065, 0



iokerneld killed (pid 3646927)
KILLED CAPYBARA PROCESSES
PARSING 20240321-031730.111940 migration delay
29557
CALCULATING 20240321-031730.111940 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-031730.111940
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-031730.111940, 2, 101, 0, 0, 1, exponential, 600000, 597015, 597014, 0, 46, 9.0, 12.0, 17.0, 25.0, 46.0, 1710991065, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(840000, 840000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-031846.599418
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2265394


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-031846.599418, 2, 101, 0, 0, 1, exponential, 840000, 835223, 835220, 0, 75, 11.0, 17.0, 29.0, 48.0, 92.0, 1710991141, 0



iokerneld killed (pid 3648508)
KILLED CAPYBARA PROCESSES
PARSING 20240321-031846.599418 migration delay
24714
CALCULATING 20240321-031846.599418 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-031846.599418
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-031846.599418, 2, 101, 0, 0, 1, exponential, 840000, 835223, 835220, 0, 75, 11.0, 17.0, 29.0, 48.0, 92.0, 1710991141, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1080000, 1080000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 2

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-032029.563301
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 715841


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-032029.563301, 2, 101, 0, 0, 1, exponential, 1080000, 1020411, 880022, 114029, 1112340, 173.0, inf, inf, inf, inf, 1710991244, 0



iokerneld killed (pid 3650168)
KILLED CAPYBARA PROCESSES
PARSING 20240321-032029.563301 migration delay
7579
CALCULATING 20240321-032029.563301 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-032029.563301
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-032029.563301, 2, 101, 0, 0, 1, exponential, 1080000, 1020411, 880022, 114029, 1112340, 173.0, inf, inf, inf, inf, 1710991244, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1080000, 1080000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-032234.279467
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4857343


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-032234.279467, 2, 101, 0, 0, 10, exponential, 1080000, 1075557, 1075552, 0, 419, 17.0, 35.0, 70.0, 122.0, 186.0, 1710991369, 0



iokerneld killed (pid 3651827)
KILLED CAPYBARA PROCESSES
PARSING 20240321-032234.279467 migration delay
5141
CALCULATING 20240321-032234.279467 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-032234.279467
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-032234.279467, 2, 101, 0, 0, 10, exponential, 1080000, 1075557, 1075552, 0, 419, 17.0, 35.0, 70.0, 122.0, 186.0, 1710991369, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1080000, 1080000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 15

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-032754.615304
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 14575329


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-032754.615304, 2, 101, 0, 0, 10, exponential, 1080000, 1077891, 1077889, 0, 1827, 17.0, 36.0, 74.0, 132.0, 209.0, 1710991690, 0



iokerneld killed (pid 3654160)
KILLED CAPYBARA PROCESSES
PARSING 20240321-032754.615304 migration delay
15869
CALCULATING 20240321-032754.615304 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-032754.615304
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-032754.615304, 2, 101, 0, 0, 10, exponential, 1080000, 1077891, 1077889, 0, 1827, 17.0, 36.0, 74.0, 132.0, 209.0, 1710991690, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(840000, 840000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 20

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-034434.308245
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 15116373


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-034434.308245, 2, 101, 0, 0, 10, exponential, 840000, 838269, 838269, 0, 1054, 11.0, 16.0, 25.0, 38.0, 59.0, 1710992691, 0



iokerneld killed (pid 3661508)
KILLED CAPYBARA PROCESSES
PARSING 20240321-034434.308245 migration delay
16462
CALCULATING 20240321-034434.308245 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-034434.308245
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-034434.308245, 2, 101, 0, 0, 10, exponential, 840000, 838269, 838269, 0, 1054, 11.0, 16.0, 25.0, 38.0, 59.0, 1710992691, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(600000, 600000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 25

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-034807.391405
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 13496569


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-034807.391405, 2, 101, 0, 0, 10, exponential, 600000, 598786, 598786, 0, 581, 9.0, 12.0, 16.0, 22.0, 34.0, 1710992904, 0



iokerneld killed (pid 3663353)
KILLED CAPYBARA PROCESSES
PARSING 20240321-034807.391405 migration delay
14668
CALCULATING 20240321-034807.391405 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-034807.391405
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-034807.391405, 2, 101, 0, 0, 10, exponential, 600000, 598786, 598786, 0, 581, 9.0, 12.0, 16.0, 22.0, 34.0, 1710992904, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 30

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-034939.327983
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9715716


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-034939.327983, 2, 101, 0, 0, 10, exponential, 360000, 359023, 359023, 0, 272, 8.0, 10.0, 13.0, 16.0, 20.0, 1710992996, 0



iokerneld killed (pid 3666232)
KILLED CAPYBARA PROCESSES
PARSING 20240321-034939.327983 migration delay
10522
CALCULATING 20240321-034939.327983 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-034939.327983
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-034939.327983, 2, 101, 0, 0, 10, exponential, 360000, 359023, 359023, 0, 272, 8.0, 10.0, 13.0, 16.0, 20.0, 1710992996, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 40

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-035104.003064
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 12956287


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-035104.003064, 2, 101, 0, 0, 10, exponential, 360000, 359182, 359181, 0, 228, 8.0, 10.0, 13.0, 15.0, 20.0, 1710993082, 0



iokerneld killed (pid 3668536)
KILLED CAPYBARA PROCESSES
PARSING 20240321-035104.003064 migration delay
14076
CALCULATING 20240321-035104.003064 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-035104.003064
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-035104.003064, 2, 101, 0, 0, 10, exponential, 360000, 359182, 359181, 0, 228, 8.0, 10.0, 13.0, 15.0, 20.0, 1710993082, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(840000, 840000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-085218.478998
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 7555907


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-085218.478998, 2, 101, 0, 0, 10, exponential, 840000, 836661, 836660, 0, 426, 11.0, 16.0, 26.0, 42.0, 1154.0, 1711011154, 0



iokerneld killed (pid 3709115)
KILLED CAPYBARA PROCESSES
PARSING 20240321-085218.478998 migration delay
8132
CALCULATING 20240321-085218.478998 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax.sh 20240321-085218.478998
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-085218.478998, 2, 101, 0, 0, 10, exponential, 840000, 836661, 836660, 0, 426, 11.0, 16.0, 26.0, 42.0, 1154.0, 1711011154, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(840000, 840000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-085401.191322
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 7555713


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-085401.191322, 2, 101, 0, 0, 10, exponential, 840000, 836639, 836638, 0, 620, 11.0, 16.0, 26.0, 38.0, 63.0, 1711011256, 0



iokerneld killed (pid 3710918)
KILLED CAPYBARA PROCESSES
PARSING 20240321-085401.191322 migration delay
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 261, in parse_mig_delay
    step_idx = steps.index(step)
ValueError: 'Length of recv_queue: 0' is not in list
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-085401.191322, 2, 101, 0, 0, 10, exponential, 840000, 836639, 836638, 0, 620, 11.0, 16.0, 26.0, 38.0, 63.0, 1711011256, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1080000, 1080000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240321-085450.791505
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9714871


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240321-085450.791505, 2, 101, 0, 0, 10, exponential, 1080000, 1076976, 1076968, 0, 1189, 17.0, 37.0, 78.0, 141.0, 228.0, 1711011306, 0



iokerneld killed (pid 3712215)
KILLED CAPYBARA PROCESSES
PARSING 20240321-085450.791505 migration delay
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 261, in parse_mig_delay
    step_idx = steps.index(step)
ValueError: 'Length of recv_queue: 0' is not in list
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240321-085450.791505, 2, 101, 0, 0, 10, exponential, 1080000, 1076976, 1076968, 0, 1189, 17.0, 37.0, 78.0, 141.0, 228.0, 1711011306, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-053625.524034
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1619588


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-053625.524034, 2, 1, 0, 0, 10, exponential, 360000, 360012, 360012, 0, 21, 9.0, 13.0, 19.0, 26.0, 215.0, 1711085800, 0



iokerneld killed (pid 3868167)
KILLED CAPYBARA PROCESSES
PARSING 20240322-053625.524034 migration delay
1
CALCULATING 20240322-053625.524034 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240322-053625.524034
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240322-053625.524034' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-053625.524034, 2, 1, 0, 0, 10, exponential, 360000, 360012, 360012, 0, 21, 9.0, 13.0, 19.0, 26.0, 215.0, 1711085800, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-053814.491442
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1619593


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-053814.491442, 2, 1, 0, 100000, 10, exponential, 360000, 360013, 360013, 0, 16, 9.0, 13.0, 21.0, 29.0, 47.0, 1711085909, 0



iokerneld killed (pid 3869838)
KILLED CAPYBARA PROCESSES
PARSING 20240322-053814.491442 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
 1711085909206402744,RECV_PREPARE_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-053814.491442, 2, 1, 0, 100000, 10, exponential, 360000, 360013, 360013, 0, 16, 9.0, 13.0, 21.0, 29.0, 47.0, 1711085909, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-054119.306763
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1619564


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-054119.306763, 2, 1, 0, 100000, 10, exponential, 360000, 360007, 360006, 0, 45, 9.0, 13.0, 21.0, 29.0, 52.0, 1711086094, 0



iokerneld killed (pid 3871546)
KILLED CAPYBARA PROCESSES
PARSING 20240322-054119.306763 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
 1711086094004784058,RECV_PREPARE_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-054119.306763, 2, 1, 0, 100000, 10, exponential, 360000, 360007, 360006, 0, 45, 9.0, 13.0, 21.0, 29.0, 52.0, 1711086094, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-054613.979552
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1619541


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-054613.979552, 2, 1, 0, 100000, 10, exponential, 360000, 360002, 360001, 0, 68, 9.0, 29.0, 90.0, 131.0, 169.0, 1711086389, 0



iokerneld killed (pid 3873480)
KILLED CAPYBARA PROCESSES
PARSING 20240322-054613.979552 migration delay
1
CALCULATING 20240322-054613.979552 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240322-054613.979552
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240322-054613.979552' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-054613.979552, 2, 1, 0, 100000, 10, exponential, 360000, 360002, 360001, 0, 68, 9.0, 29.0, 90.0, 131.0, 169.0, 1711086389, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(360000, 360000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-054854.348035
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1619568


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-054854.348035, 2, 1, 0, 100000, 10, exponential, 360000, 360008, 360007, 0, 41, 9.0, 27.0, 86.0, 124.0, 150.0, 1711086549, 0



iokerneld killed (pid 3876711)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-054854.348035, 2, 1, 0, 100000, 10, exponential, 360000, 360008, 360007, 0, 41, 9.0, 27.0, 86.0, 124.0, 150.0, 1711086549, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-054950.015070
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1038737


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-054950.015070, 2, 1, 0, 100000, 10, exponential, 700000, 230913, 230794, 0, 2113792, 4893.0, 5142.0, 5348.0, 5491.0, 5596.0, 1711086605, 0



iokerneld killed (pid 3878172)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-054950.015070, 2, 1, 0, 100000, 10, exponential, 700000, 230913, 230794, 0, 2113792, 4893.0, 5142.0, 5348.0, 5491.0, 5596.0, 1711086605, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-055252.707191
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1243105


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-055252.707191, 2, 1, 0, 100000, 10, exponential, 700000, 276344, 276205, 0, 1909424, 4080.0, 4191.0, 4335.0, 4481.0, 4505.0, 1711086787, 0



iokerneld killed (pid 3879921)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-055252.707191, 2, 1, 0, 100000, 10, exponential, 700000, 276344, 276205, 0, 1909424, 4080.0, 4191.0, 4335.0, 4481.0, 4505.0, 1711086787, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(500000, 500000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-055414.859932
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2250004


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-055414.859932, 2, 1, 0, 100000, 10, exponential, 500000, 500219, 500218, 0, 28, 14.0, 30.0, 53.0, 78.0, 97.0, 1711086869, 0



dpdk-ctrl.elf killed (pid 3085769)
iokerneld killed (pid 3881472)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-055414.859932, 2, 1, 0, 100000, 10, exponential, 500000, 500219, 500218, 0, 28, 14.0, 30.0, 53.0, 78.0, 97.0, 1711086869, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(500000, 500000 + 1, 100)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-055655.935317
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1338392


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-055655.935317, 2, 1, 0, 100000, 10, exponential, 500000, 297550, 297421, 0, 911640, 3750.0, 4233.0, 4752.0, 5182.0, 5736.0, 1711087030, 0



iokerneld killed (pid 3883169)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-055655.935317, 2, 1, 0, 100000, 10, exponential, 500000, 297550, 297421, 0, 911640, 3750.0, 4233.0, 4752.0, 5182.0, 5736.0, 1711087030, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083146.510985
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89376


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083146.510985, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 250.0, 646.0, 1036.0, 1711096321, 0



iokerneld killed (pid 3903657)
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083325.599992
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89376


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083325.599992, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 248.0, 639.0, 885.0, 1711096420, 0



iokerneld killed (pid 3905244)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083402.831342
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 538603


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083402.831342, 2, 1, 0, 100000, 10, exponential, 60000, 59866, 59866, 0, 1, 8.0, 9.0, 76.0, 167.0, 272.0, 1711096458, 0



iokerneld killed (pid 3906142)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083440.267917
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988838


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083440.267917, 2, 1, 0, 100000, 10, exponential, 110000, 109924, 109924, 0, 8, 7.0, 9.0, 66.0, 136.0, 198.0, 1711096495, 0



iokerneld killed (pid 3907045)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083517.735030
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438745


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083517.735030, 2, 1, 0, 100000, 10, exponential, 160000, 159903, 159903, 0, 5, 8.0, 10.0, 65.0, 121.0, 173.0, 1711096533, 0



iokerneld killed (pid 3907944)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083555.535129
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1889389


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083555.535129, 2, 1, 0, 100000, 10, exponential, 210000, 210002, 210002, 0, 16, 8.0, 11.0, 66.0, 116.0, 158.0, 1711096571, 0



iokerneld killed (pid 3908846)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083633.127766
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2339541


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083633.127766, 2, 1, 0, 100000, 10, exponential, 260000, 260030, 260029, 0, 12, 8.0, 13.0, 72.0, 118.0, 157.0, 1711096608, 0



iokerneld killed (pid 3909741)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083710.871384
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2790417


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083710.871384, 2, 1, 0, 100000, 10, exponential, 310000, 310165, 310165, 0, 28, 9.0, 16.0, 78.0, 120.0, 158.0, 1711096646, 0



iokerneld killed (pid 3910644)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083748.700129
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3241679


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083748.700129, 2, 1, 0, 100000, 10, exponential, 360000, 360322, 360322, 0, 25, 9.0, 26.0, 87.0, 128.0, 161.0, 1711096684, 0



iokerneld killed (pid 3911546)
dpdk-ctrl.elf killed (pid 3093249)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083826.607053
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3691077


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083826.607053, 2, 1, 0, 100000, 10, exponential, 410000, 410259, 410258, 0, 89, 10.0, 42.0, 98.0, 139.0, 170.0, 1711096722, 0



iokerneld killed (pid 3912449)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083904.623544
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4142715


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083904.623544, 2, 1, 0, 100000, 10, exponential, 460000, 460485, 445612, 0, 111, 14.0, 63.0, 116.0, 154.0, 190.0, 1711096760, 0



iokerneld killed (pid 3913342)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-083942.715793
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2712200


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-083942.715793, 2, 1, 0, 100000, 10, exponential, 510000, 301461, 291727, 0, 1880819, 3698.0, 4177.0, 4608.0, 4900.0, 5138.0, 1711096798, 0



iokerneld killed (pid 3914244)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084020.934981
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2311294


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084020.934981, 2, 1, 0, 100000, 10, exponential, 560000, 256882, 248587, 0, 2731447, 4394.0, 4623.0, 4839.0, 5091.0, 5301.0, 1711096836, 0



iokerneld killed (pid 3915143)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-083325.599992, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 248.0, 639.0, 885.0, 1711096420, 0
20240322-083402.831342, 2, 1, 0, 100000, 10, exponential, 60000, 59866, 59866, 0, 1, 8.0, 9.0, 76.0, 167.0, 272.0, 1711096458, 0
20240322-083440.267917, 2, 1, 0, 100000, 10, exponential, 110000, 109924, 109924, 0, 8, 7.0, 9.0, 66.0, 136.0, 198.0, 1711096495, 0
20240322-083517.735030, 2, 1, 0, 100000, 10, exponential, 160000, 159903, 159903, 0, 5, 8.0, 10.0, 65.0, 121.0, 173.0, 1711096533, 0
20240322-083555.535129, 2, 1, 0, 100000, 10, exponential, 210000, 210002, 210002, 0, 16, 8.0, 11.0, 66.0, 116.0, 158.0, 1711096571, 0
20240322-083633.127766, 2, 1, 0, 100000, 10, exponential, 260000, 260030, 260029, 0, 12, 8.0, 13.0, 72.0, 118.0, 157.0, 1711096608, 0
20240322-083710.871384, 2, 1, 0, 100000, 10, exponential, 310000, 310165, 310165, 0, 28, 9.0, 16.0, 78.0, 120.0, 158.0, 1711096646, 0
20240322-083748.700129, 2, 1, 0, 100000, 10, exponential, 360000, 360322, 360322, 0, 25, 9.0, 26.0, 87.0, 128.0, 161.0, 1711096684, 0
20240322-083826.607053, 2, 1, 0, 100000, 10, exponential, 410000, 410259, 410258, 0, 89, 10.0, 42.0, 98.0, 139.0, 170.0, 1711096722, 0
20240322-083904.623544, 2, 1, 0, 100000, 10, exponential, 460000, 460485, 445612, 0, 111, 14.0, 63.0, 116.0, 154.0, 190.0, 1711096760, 0
20240322-083942.715793, 2, 1, 0, 100000, 10, exponential, 510000, 301461, 291727, 0, 1880819, 3698.0, 4177.0, 4608.0, 4900.0, 5138.0, 1711096798, 0
20240322-084020.934981, 2, 1, 0, 100000, 10, exponential, 560000, 256882, 248587, 0, 2731447, 4394.0, 4623.0, 4839.0, 5091.0, 5301.0, 1711096836, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084235.703996
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4232115


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084235.703996, 2, 1, 0, 100000, 10, exponential, 470000, 470422, 470422, 0, 113, 16.0, 71.0, 126.0, 167.0, 201.0, 1711096971, 0



iokerneld killed (pid 3917729)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084313.831240
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4321079


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084313.831240, 2, 1, 0, 100000, 10, exponential, 480000, 480301, 480300, 0, 125, 18.0, 78.0, 134.0, 209.0, 435.0, 1711097009, 0



iokerneld killed (pid 3918629)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084351.927656
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2708919


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084351.927656, 2, 1, 0, 100000, 10, exponential, 490000, 301096, 291050, 0, 1703645, 3703.0, 4229.0, 4673.0, 5028.0, 5275.0, 1711097047, 0



iokerneld killed (pid 3919538)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084430.047331
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2703517


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084430.047331, 2, 1, 0, 100000, 10, exponential, 500000, 300492, 290774, 0, 1797717, 3704.0, 4225.0, 4718.0, 5152.0, 5546.0, 1711097085, 0



iokerneld killed (pid 3920431)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084506.811357
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4232041


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084506.811357, 2, 1, 0, 100000, 10, exponential, 470000, 470414, 470411, 0, 187, 17.0, 74.0, 128.0, 171.0, 217.0, 1711097122, 0



iokerneld killed (pid 3921391)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084544.891247
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2722661


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084544.891247, 2, 1, 0, 100000, 10, exponential, 480000, 302632, 292887, 0, 1598543, 3690.0, 4223.0, 4689.0, 5057.0, 299493.0, 1711097160, 0



iokerneld killed (pid 3922289)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084623.195267
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3529083


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084623.195267, 2, 1, 0, 100000, 10, exponential, 490000, 392257, 392170, 0, 883481, 64.0, 4008.0, 4569.0, 4972.0, 5321.0, 1711097198, 0



iokerneld killed (pid 3923411)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(470000, 500000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084701.362661
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld killed (pid 3924308)
dpdk-ctrl.elf killed (pid 3102894)
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(475000, 475000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-084925.075536
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4275970


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-084925.075536, 2, 1, 0, 100000, 10, exponential, 475000, 475289, 475288, 0, 98, 16.0, 72.0, 126.0, 166.0, 204.0, 1711097380, 0



iokerneld killed (pid 3925156)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-084925.075536, 2, 1, 0, 100000, 10, exponential, 475000, 475289, 475288, 0, 98, 16.0, 72.0, 126.0, 166.0, 204.0, 1711097380, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(478000, 478000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085021.207997
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2670880


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085021.207997, 2, 1, 0, 100000, 10, exponential, 478000, 296872, 287277, 0, 1631724, 3763.0, 4322.0, 4760.0, 5077.0, 300483.0, 1711097436, 0



iokerneld killed (pid 3926647)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(476000, 476000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085103.168079
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4286088


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085103.168079, 2, 1, 0, 100000, 10, exponential, 476000, 476409, 476408, 0, 66, 16.0, 73.0, 126.0, 176.0, 309.0, 1711097478, 0



iokerneld killed (pid 3927818)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-085103.168079, 2, 1, 0, 100000, 10, exponential, 476000, 476409, 476408, 0, 66, 16.0, 73.0, 126.0, 176.0, 309.0, 1711097478, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(477000, 477000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085148.663770
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4294254


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085148.663770, 2, 1, 0, 100000, 10, exponential, 477000, 477316, 477316, 0, 110, 16.0, 73.0, 126.0, 167.0, 209.0, 1711097524, 0



iokerneld killed (pid 3929231)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-085148.663770, 2, 1, 0, 100000, 10, exponential, 477000, 477316, 477316, 0, 110, 16.0, 73.0, 126.0, 167.0, 209.0, 1711097524, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(477500, 477500 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085307.607978
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4298370


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085307.607978, 2, 1, 0, 100000, 10, exponential, 477500, 477769, 477768, 0, 113, 16.0, 73.0, 127.0, 174.0, 231.0, 1711097604, 0



iokerneld killed (pid 3930765)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-085307.607978, 2, 1, 0, 100000, 10, exponential, 477500, 477769, 477768, 0, 113, 16.0, 73.0, 127.0, 174.0, 231.0, 1711097604, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085721.063092
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89376


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085721.063092, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 9.0, 12.0, 14.0, 1711097856, 0



iokerneld killed (pid 3932716)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085758.451463
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 538603


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085758.451463, 2, 1, 0, 100000, 10, exponential, 60000, 59866, 59866, 0, 1, 7.0, 8.0, 10.0, 13.0, 15.0, 1711097893, 0



iokerneld killed (pid 3933618)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085835.878897
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988829


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085835.878897, 2, 1, 0, 100000, 10, exponential, 110000, 109923, 109923, 0, 17, 8.0, 9.0, 11.0, 14.0, 17.0, 1711097931, 0



iokerneld killed (pid 3934520)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085913.307154
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438734


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085913.307154, 2, 1, 0, 100000, 10, exponential, 160000, 159902, 159902, 0, 16, 8.0, 9.0, 12.0, 15.0, 19.0, 1711097968, 0



iokerneld killed (pid 3935412)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-085950.907413
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1889374


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-085950.907413, 2, 1, 0, 100000, 10, exponential, 210000, 210001, 210000, 0, 31, 8.0, 10.0, 13.0, 17.0, 22.0, 1711098006, 0



iokerneld killed (pid 3936314)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090028.543658
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2339522


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090028.543658, 2, 1, 0, 100000, 10, exponential, 260000, 260027, 260027, 0, 31, 8.0, 11.0, 15.0, 19.0, 24.0, 1711098044, 0



iokerneld killed (pid 3937211)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090106.266536
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2790424


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090106.266536, 2, 1, 0, 100000, 10, exponential, 310000, 310166, 310165, 0, 21, 8.0, 12.0, 17.0, 23.0, 29.0, 1711098081, 0



iokerneld killed (pid 3938106)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090144.039365
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3241643


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090144.039365, 2, 1, 0, 100000, 10, exponential, 360000, 360318, 360318, 0, 61, 9.0, 13.0, 20.0, 28.0, 36.0, 1711098119, 0



iokerneld killed (pid 3939000)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090221.955402
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3691096


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090221.955402, 2, 1, 0, 100000, 10, exponential, 410000, 410261, 410260, 0, 70, 10.0, 16.0, 25.0, 35.0, 44.0, 1711098157, 0



iokerneld killed (pid 3939897)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090259.883700
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4142801


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090259.883700, 2, 1, 0, 100000, 10, exponential, 460000, 460494, 460493, 0, 25, 11.0, 21.0, 37.0, 54.0, 199.0, 1711098195, 0



iokerneld killed (pid 3940797)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090337.911258
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
bash: line 1: 3114901 Segmentation fault      sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=100000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240322-090337.911258.be1 2>&1
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 3941924 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=510000 --threads=1 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240322-090337.911258 > /homes/inho/capybara-data/20240322-090337.911258.client
================ TEST COMPLETE =================

[RESULT]20240322-090337.911258, 2, 1, 0, 100000, 10, N/A



iokerneld killed (pid 3941698)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090404.214567
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2686024


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090404.214567, 2, 1, 0, 100000, 10, exponential, 560000, 298531, 298460, 0, 2356717, 3799.0, 3955.0, 4076.0, 4258.0, 4388.0, 1711098259, 0



iokerneld killed (pid 3942568)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-085721.063092, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 9.0, 12.0, 14.0, 1711097856, 0
20240322-085758.451463, 2, 1, 0, 100000, 10, exponential, 60000, 59866, 59866, 0, 1, 7.0, 8.0, 10.0, 13.0, 15.0, 1711097893, 0
20240322-085835.878897, 2, 1, 0, 100000, 10, exponential, 110000, 109923, 109923, 0, 17, 8.0, 9.0, 11.0, 14.0, 17.0, 1711097931, 0
20240322-085913.307154, 2, 1, 0, 100000, 10, exponential, 160000, 159902, 159902, 0, 16, 8.0, 9.0, 12.0, 15.0, 19.0, 1711097968, 0
20240322-085950.907413, 2, 1, 0, 100000, 10, exponential, 210000, 210001, 210000, 0, 31, 8.0, 10.0, 13.0, 17.0, 22.0, 1711098006, 0
20240322-090028.543658, 2, 1, 0, 100000, 10, exponential, 260000, 260027, 260027, 0, 31, 8.0, 11.0, 15.0, 19.0, 24.0, 1711098044, 0
20240322-090106.266536, 2, 1, 0, 100000, 10, exponential, 310000, 310166, 310165, 0, 21, 8.0, 12.0, 17.0, 23.0, 29.0, 1711098081, 0
20240322-090144.039365, 2, 1, 0, 100000, 10, exponential, 360000, 360318, 360318, 0, 61, 9.0, 13.0, 20.0, 28.0, 36.0, 1711098119, 0
20240322-090221.955402, 2, 1, 0, 100000, 10, exponential, 410000, 410261, 410260, 0, 70, 10.0, 16.0, 25.0, 35.0, 44.0, 1711098157, 0
20240322-090259.883700, 2, 1, 0, 100000, 10, exponential, 460000, 460494, 460493, 0, 25, 11.0, 21.0, 37.0, 54.0, 199.0, 1711098195, 0
20240322-090337.911258, 2, 1, 0, 100000, 10, N/A
20240322-090404.214567, 2, 1, 0, 100000, 10, exponential, 560000, 298531, 298460, 0, 2356717, 3799.0, 3955.0, 4076.0, 4258.0, 4388.0, 1711098259, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(480000, 550000 + 1, 20000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090530.019605
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4321122


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090530.019605, 2, 1, 0, 100000, 10, exponential, 480000, 480306, 480305, 0, 82, 13.0, 26.0, 45.0, 65.0, 86.0, 1711098345, 0



iokerneld killed (pid 3945062)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(480000, 550000 + 1, 20000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090608.255375
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4501113


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090608.255375, 2, 1, 0, 100000, 10, exponential, 500000, 500293, 500292, 0, 121, 15.0, 33.0, 59.0, 86.0, 115.0, 1711098383, 0



iokerneld killed (pid 3945959)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(480000, 550000 + 1, 20000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090646.403329
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4680923


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090646.403329, 2, 1, 0, 100000, 10, exponential, 520000, 520270, 520268, 0, 181, 18.0, 45.0, 87.0, 136.0, 180.0, 1711098422, 0



iokerneld killed (pid 3946855)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(480000, 550000 + 1, 20000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-090724.679811
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4861705


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-090724.679811, 2, 1, 0, 100000, 10, exponential, 540000, 540377, 540264, 0, 1562, 29.0, 89.0, 611.0, 2328.0, 2806.0, 1711098460, 0



iokerneld killed (pid 3947758)
dpdk-ctrl.elf killed (pid 3120233)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-090530.019605, 2, 1, 0, 100000, 10, exponential, 480000, 480306, 480305, 0, 82, 13.0, 26.0, 45.0, 65.0, 86.0, 1711098345, 0
20240322-090608.255375, 2, 1, 0, 100000, 10, exponential, 500000, 500293, 500292, 0, 121, 15.0, 33.0, 59.0, 86.0, 115.0, 1711098383, 0
20240322-090646.403329, 2, 1, 0, 100000, 10, exponential, 520000, 520270, 520268, 0, 181, 18.0, 45.0, 87.0, 136.0, 180.0, 1711098422, 0
20240322-090724.679811, 2, 1, 0, 100000, 10, exponential, 540000, 540377, 540264, 0, 1562, 29.0, 89.0, 611.0, 2328.0, 2806.0, 1711098460, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091037.112172
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89376


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091037.112172, 2, 1, 0, 0, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 9.0, 10.0, 11.0, 1711098652, 0



iokerneld killed (pid 3949782)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091114.391754
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 538602


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091114.391754, 2, 1, 0, 0, 10, exponential, 60000, 59866, 59866, 0, 2, 7.0, 8.0, 9.0, 11.0, 12.0, 1711098689, 0



iokerneld killed (pid 3950680)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091151.827725
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988845


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091151.827725, 2, 1, 0, 0, 10, exponential, 110000, 109925, 109924, 0, 1, 8.0, 9.0, 10.0, 12.0, 14.0, 1711098727, 0



iokerneld killed (pid 3951575)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091229.318904
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438743


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091229.318904, 2, 1, 0, 0, 10, exponential, 160000, 159903, 159903, 0, 7, 8.0, 9.0, 11.0, 13.0, 15.0, 1711098764, 0



iokerneld killed (pid 3952476)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091306.847123
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1889399


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091306.847123, 2, 1, 0, 0, 10, exponential, 210000, 210003, 210003, 0, 6, 8.0, 10.0, 12.0, 15.0, 18.0, 1711098802, 0



iokerneld killed (pid 3953375)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091344.479628
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2339527


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091344.479628, 2, 1, 0, 0, 10, exponential, 260000, 260028, 260028, 0, 26, 8.0, 10.0, 14.0, 17.0, 20.0, 1711098839, 0



iokerneld killed (pid 3954277)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091422.144280
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2790362


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091422.144280, 2, 1, 0, 0, 10, exponential, 310000, 310159, 310158, 0, 83, 8.0, 11.0, 16.0, 20.0, 25.0, 1711098877, 0



iokerneld killed (pid 3955176)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091459.803818
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3241689


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091459.803818, 2, 1, 0, 0, 10, exponential, 360000, 360323, 360323, 0, 15, 9.0, 13.0, 18.0, 24.0, 30.0, 1711098915, 0



iokerneld killed (pid 3956069)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091537.659784
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3691107


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091537.659784, 2, 1, 0, 0, 10, exponential, 410000, 410262, 410262, 0, 59, 9.0, 15.0, 24.0, 32.0, 39.0, 1711098953, 0



iokerneld killed (pid 3956966)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091615.514964
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4142786


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091615.514964, 2, 1, 0, 0, 10, exponential, 460000, 460493, 460492, 0, 40, 11.0, 20.0, 34.0, 47.0, 60.0, 1711098990, 0



iokerneld killed (pid 3957865)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091653.410910
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4592944


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091653.410910, 2, 1, 0, 0, 10, exponential, 510000, 510503, 510502, 0, 75, 14.0, 32.0, 56.0, 80.0, 102.0, 1711099028, 0



iokerneld killed (pid 3958767)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091731.467631
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3063186


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091731.467631, 2, 1, 0, 0, 10, exponential, 560000, 340449, 340370, 0, 1979555, 3390.0, 3524.0, 3615.0, 3767.0, 3795.0, 1711099066, 0



iokerneld killed (pid 3959664)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-091037.112172, 2, 1, 0, 0, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 9.0, 10.0, 11.0, 1711098652, 0
20240322-091114.391754, 2, 1, 0, 0, 10, exponential, 60000, 59866, 59866, 0, 2, 7.0, 8.0, 9.0, 11.0, 12.0, 1711098689, 0
20240322-091151.827725, 2, 1, 0, 0, 10, exponential, 110000, 109925, 109924, 0, 1, 8.0, 9.0, 10.0, 12.0, 14.0, 1711098727, 0
20240322-091229.318904, 2, 1, 0, 0, 10, exponential, 160000, 159903, 159903, 0, 7, 8.0, 9.0, 11.0, 13.0, 15.0, 1711098764, 0
20240322-091306.847123, 2, 1, 0, 0, 10, exponential, 210000, 210003, 210003, 0, 6, 8.0, 10.0, 12.0, 15.0, 18.0, 1711098802, 0
20240322-091344.479628, 2, 1, 0, 0, 10, exponential, 260000, 260028, 260028, 0, 26, 8.0, 10.0, 14.0, 17.0, 20.0, 1711098839, 0
20240322-091422.144280, 2, 1, 0, 0, 10, exponential, 310000, 310159, 310158, 0, 83, 8.0, 11.0, 16.0, 20.0, 25.0, 1711098877, 0
20240322-091459.803818, 2, 1, 0, 0, 10, exponential, 360000, 360323, 360323, 0, 15, 9.0, 13.0, 18.0, 24.0, 30.0, 1711098915, 0
20240322-091537.659784, 2, 1, 0, 0, 10, exponential, 410000, 410262, 410262, 0, 59, 9.0, 15.0, 24.0, 32.0, 39.0, 1711098953, 0
20240322-091615.514964, 2, 1, 0, 0, 10, exponential, 460000, 460493, 460492, 0, 40, 11.0, 20.0, 34.0, 47.0, 60.0, 1711098990, 0
20240322-091653.410910, 2, 1, 0, 0, 10, exponential, 510000, 510503, 510502, 0, 75, 14.0, 32.0, 56.0, 80.0, 102.0, 1711099028, 0
20240322-091731.467631, 2, 1, 0, 0, 10, exponential, 560000, 340449, 340370, 0, 1979555, 3390.0, 3524.0, 3615.0, 3767.0, 3795.0, 1711099066, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(520000, 550000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091912.795674
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4681013


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091912.795674, 2, 1, 0, 0, 10, exponential, 520000, 520280, 520278, 0, 91, 16.0, 38.0, 69.0, 109.0, 400.0, 1711099168, 0



iokerneld killed (pid 3962207)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(520000, 550000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-091950.995473
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4772741


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-091950.995473, 2, 1, 0, 0, 10, exponential, 530000, 530489, 530489, 0, 94, 18.0, 45.0, 86.0, 146.0, 208.0, 1711099206, 0



iokerneld killed (pid 3963107)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(520000, 550000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-092029.179365
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4863059


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-092029.179365, 2, 1, 0, 0, 10, exponential, 540000, 540527, 540527, 0, 208, 28.0, 80.0, 157.0, 279.0, 380.0, 1711099244, 0



iokerneld killed (pid 3964010)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(520000, 550000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240322-092107.407041
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4951196


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240322-092107.407041, 2, 1, 0, 0, 10, exponential, 550000, 550303, 550303, 0, 144, 37.0, 115.0, 337.0, 687.0, 765.0, 1711099283, 0



iokerneld killed (pid 3964916)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240322-091912.795674, 2, 1, 0, 0, 10, exponential, 520000, 520280, 520278, 0, 91, 16.0, 38.0, 69.0, 109.0, 400.0, 1711099168, 0
20240322-091950.995473, 2, 1, 0, 0, 10, exponential, 530000, 530489, 530489, 0, 94, 18.0, 45.0, 86.0, 146.0, 208.0, 1711099206, 0
20240322-092029.179365, 2, 1, 0, 0, 10, exponential, 540000, 540527, 540527, 0, 208, 28.0, 80.0, 157.0, 279.0, 380.0, 1711099244, 0
20240322-092107.407041, 2, 1, 0, 0, 10, exponential, 550000, 550303, 550303, 0, 144, 37.0, 115.0, 337.0, 687.0, 765.0, 1711099283, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130052.627451
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89375


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130052.627451, 2, 1, 0, 0, 10, exponential, 10000, 9913, 9913, 0, 1, 8.0, 8.0, 9.0, 10.0, 11.0, 1711285268, 0



iokerneld killed (pid 193050)
dpdk-ctrl.elf killed (pid 3140706)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130052.627451, 2, 1, 0, 0, 10, exponential, 10000, 9913, 9913, 0, 1, 8.0, 8.0, 9.0, 10.0, 11.0, 1711285268, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130205.935706
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1798779


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130205.935706, 2, 1, 0, 0, 10, exponential, 200000, 199929, 199929, 0, 23, 8.0, 10.0, 12.0, 15.0, 58.0, 1711285341, 0



iokerneld killed (pid 194654)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130205.935706, 2, 1, 0, 0, 10, exponential, 200000, 199929, 199929, 0, 23, 8.0, 10.0, 12.0, 15.0, 58.0, 1711285341, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130439.823420
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1798773


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130439.823420, 2, 1, 0, 0, 10, exponential, 200000, 199928, 199928, 0, 29, 8.0, 10.0, 12.0, 14.0, 17.0, 1711285495, 0



iokerneld killed (pid 196332)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130439.823420, 2, 1, 0, 0, 10, exponential, 200000, 199928, 199928, 0, 29, 8.0, 10.0, 12.0, 14.0, 17.0, 1711285495, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130603.555334
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1798801


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130603.555334, 2, 1, 0, 0, 10, exponential, 200000, 199931, 199931, 0, 1, 8.0, 10.0, 12.0, 15.0, 18.0, 1711285579, 0



iokerneld killed (pid 197993)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130603.555334, 2, 1, 0, 0, 10, exponential, 200000, 199931, 199931, 0, 1, 8.0, 10.0, 12.0, 15.0, 18.0, 1711285579, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 10000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130648.347564
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89376


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130648.347564, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 256.0, 635.0, 1022.0, 1711285623, 0



iokerneld killed (pid 199445)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130648.347564, 2, 1, 0, 100000, 10, exponential, 10000, 9913, 9913, 0, 0, 8.0, 8.0, 256.0, 635.0, 1022.0, 1711285623, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(60000, 60000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130831.851374
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 538599


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130831.851374, 2, 1, 0, 100000, 10, exponential, 60000, 59865, 59865, 0, 5, 8.0, 9.0, 79.0, 177.0, 276.0, 1711285727, 0



iokerneld killed (pid 201079)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130831.851374, 2, 1, 0, 100000, 10, exponential, 60000, 59865, 59865, 0, 5, 8.0, 9.0, 79.0, 177.0, 276.0, 1711285727, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(110000, 110000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-130937.031319
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988836


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-130937.031319, 2, 1, 0, 100000, 10, exponential, 110000, 109924, 109923, 0, 10, 8.0, 9.0, 67.0, 138.0, 301.0, 1711285792, 0



iokerneld killed (pid 202576)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-130937.031319, 2, 1, 0, 100000, 10, exponential, 110000, 109924, 109923, 0, 10, 8.0, 9.0, 67.0, 138.0, 301.0, 1711285792, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240324-131222.315731
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1798777


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240324-131222.315731, 2, 1, 0, 100000, 10, exponential, 200000, 199929, 199929, 0, 25, 8.0, 11.0, 70.0, 131.0, 2019.0, 1711285957, 0



iokerneld killed (pid 204286)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240324-131222.315731, 2, 1, 0, 100000, 10, exponential, 200000, 199929, 199929, 0, 25, 8.0, 11.0, 70.0, 131.0, 2019.0, 1711285957, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-010248.972176
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1798046


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-010248.972176, 2, 101, 0, 100000, 10, exponential, 200000, 198682, 198682, 0, 16, 8.0, 10.0, 12.0, 14.0, 20.0, 1711328584, 0



iokerneld killed (pid 293871)
KILLED CAPYBARA PROCESSES
PARSING 20240325-010248.972176 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
 1711328583497414681,INIT_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-010248.972176, 2, 101, 0, 100000, 10, exponential, 200000, 198682, 198682, 0, 16, 8.0, 10.0, 12.0, 14.0, 20.0, 1711328584, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(200000, 200000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-010705.535703
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1798040


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-010705.535703, 2, 101, 0, 100000, 10, exponential, 200000, 198682, 198682, 0, 22, 8.0, 10.0, 11.0, 13.0, 16.0, 1711328840, 0



iokerneld killed (pid 295722)
KILLED CAPYBARA PROCESSES
PARSING 20240325-010705.535703 migration delay
1770
CALCULATING 20240325-010705.535703 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-010705.535703
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-010705.535703, 2, 101, 0, 100000, 10, exponential, 200000, 198682, 198682, 0, 22, 8.0, 10.0, 11.0, 13.0, 16.0, 1711328840, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-010822.307398
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6296219


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-010822.307398, 2, 101, 0, 100000, 10, exponential, 700000, 697065, 697064, 0, 274, 10.0, 13.0, 19.0, 26.0, 39.0, 1711328917, 0



iokerneld killed (pid 297343)
KILLED CAPYBARA PROCESSES
PARSING 20240325-010822.307398 migration delay
6727
CALCULATING 20240325-010822.307398 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-010822.307398
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-010822.307398, 2, 101, 0, 100000, 10, exponential, 700000, 697065, 697064, 0, 274, 10.0, 13.0, 19.0, 26.0, 39.0, 1711328917, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-011003.263968
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6234018


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-011003.263968, 2, 101, 0, 100000, 10, exponential, 700000, 690179, 690178, 0, 134, 9.0, 12.0, 17.0, 23.0, 32.0, 1711329018, 0



iokerneld killed (pid 299164)
KILLED CAPYBARA PROCESSES
PARSING 20240325-011003.263968 migration delay
1
CALCULATING 20240325-011003.263968 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-011003.263968
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-011003.263968' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-011003.263968, 2, 101, 0, 100000, 10, exponential, 700000, 690179, 690178, 0, 134, 9.0, 12.0, 17.0, 23.0, 32.0, 1711329018, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-011458.678965
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-011458.678965, 2, 1, 0, 100000, 1, exponential, 10, 11, 11, 0, 0, 90.0, 92.0, 93.0, 93.0, 93.0, 1711329313, 0



iokerneld killed (pid 301196)
KILLED CAPYBARA PROCESSES
PARSING 20240325-011458.678965 migration delay
1
CALCULATING 20240325-011458.678965 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-011458.678965
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-011458.678965' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-011458.678965, 2, 1, 0, 100000, 1, exponential, 10, 11, 11, 0, 0, 90.0, 92.0, 93.0, 93.0, 93.0, 1711329313, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-011614.463273
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-011614.463273, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711329388



iokerneld killed (pid 302673)
KILLED CAPYBARA PROCESSES
PARSING 20240325-011614.463273 migration delay
1
CALCULATING 20240325-011614.463273 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-011614.463273
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-011614.463273' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-011614.463273, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711329388

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-012354.239797
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-012354.239797, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711329849



iokerneld killed (pid 305078)
KILLED CAPYBARA PROCESSES
PARSING 20240325-012354.239797 migration delay
1
CALCULATING 20240325-012354.239797 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-012354.239797
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-012354.239797' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-012354.239797, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711329849

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-012814.996114
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-012814.996114, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711330109



iokerneld killed (pid 306945)
KILLED CAPYBARA PROCESSES
PARSING 20240325-012814.996114 migration delay
1
CALCULATING 20240325-012814.996114 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-012814.996114
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-012814.996114' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-012814.996114, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711330109

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-013313.812021
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
bash: line 1: 3160555 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=100000 MIG_PER_N=1 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240325-013313.812021.be1 2>&1
2 backends are running
bash: line 1: 3160554 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=100000 MIG_PER_N=1 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240325-013313.812021.be0 2>&1
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 309220 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=10 --threads=1 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240325-013313.812021 > /homes/inho/capybara-data/20240325-013313.812021.client
================ TEST COMPLETE =================

[RESULT]20240325-013313.812021, 2, 1, 0, 100000, 1, N/A



iokerneld killed (pid 308993)
KILLED CAPYBARA PROCESSES
PARSING 20240325-013313.812021 migration delay
1
CALCULATING 20240325-013313.812021 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-013313.812021
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-013313.812021' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-013313.812021, 2, 1, 0, 100000, 1, N/A

dpdk-ctrl.elf killed (pid 3160788)
KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-014158.535529
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-014158.535529, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711330933



iokerneld killed (pid 312064)
KILLED CAPYBARA PROCESSES
PARSING 20240325-014158.535529 migration delay
1
CALCULATING 20240325-014158.535529 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-014158.535529
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-014158.535529' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-014158.535529, 2, 1, 0, 100000, 1, exponential, 10, 0, 0, 0, 1711330933

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-014304.488069
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-014304.488069, 2, 1, 0, 100000, 1, exponential, 1, 0, 0, 0, 1711330999



iokerneld killed (pid 313392)
KILLED CAPYBARA PROCESSES
PARSING 20240325-014304.488069 migration delay
1
CALCULATING 20240325-014304.488069 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-014304.488069
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-014304.488069' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-014304.488069, 2, 1, 0, 100000, 1, exponential, 1, 0, 0, 0, 1711330999

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1, 1 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-015321.242950
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-015321.242950, 2, 1, 0, 100000, 1, exponential, 1, 3, 3, 0, 0, 102.0, 106.0, 106.0, 106.0, 106.0, 1711331615, 0



iokerneld killed (pid 316069)
KILLED CAPYBARA PROCESSES
PARSING 20240325-015321.242950 migration delay
1
CALCULATING 20240325-015321.242950 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-015321.242950
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-015321.242950' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-015321.242950, 2, 1, 0, 100000, 1, exponential, 1, 3, 3, 0, 0, 102.0, 106.0, 106.0, 106.0, 106.0, 1711331615, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-015605.700478
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6296315


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-015605.700478, 2, 101, 0, 100000, 10, exponential, 700000, 697076, 697075, 0, 178, 9.0, 13.0, 18.0, 24.0, 34.0, 1711331781, 0



iokerneld killed (pid 317735)
KILLED CAPYBARA PROCESSES
PARSING 20240325-015605.700478 migration delay
1
CALCULATING 20240325-015605.700478 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-015605.700478
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 296, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-015605.700478' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-015605.700478, 2, 101, 0, 100000, 10, exponential, 700000, 697076, 697075, 0, 178, 9.0, 13.0, 18.0, 24.0, 34.0, 1711331781, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-015802.935689
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6296190


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-015802.935689, 2, 101, 0, 100000, 10, exponential, 700000, 697062, 697062, 0, 303, 9.0, 13.0, 18.0, 25.0, 38.0, 1711331898, 0



iokerneld killed (pid 319319)
KILLED CAPYBARA PROCESSES
PARSING 20240325-015802.935689 migration delay
6727
CALCULATING 20240325-015802.935689 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-015802.935689
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-015802.935689, 2, 101, 0, 100000, 10, exponential, 700000, 697062, 697062, 0, 303, 9.0, 13.0, 18.0, 25.0, 38.0, 1711331898, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(700000, 700000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-020010.151923
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6296253


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-020010.151923, 2, 101, 0, 100000, 100, exponential, 700000, 697069, 697068, 0, 240, 9.0, 13.0, 18.0, 24.0, 34.0, 1711332025, 0



iokerneld killed (pid 321004)
KILLED CAPYBARA PROCESSES
PARSING 20240325-020010.151923 migration delay
493
CALCULATING 20240325-020010.151923 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-020010.151923
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-020010.151923, 2, 101, 0, 100000, 100, exponential, 700000, 697069, 697068, 0, 240, 9.0, 13.0, 18.0, 24.0, 34.0, 1711332025, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-020244.439151
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8994270


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-020244.439151, 2, 101, 0, 100000, 100, exponential, 1000000, 996852, 996850, 0, 769, 12.0, 22.0, 40.0, 65.0, 98.0, 1711332180, 0



iokerneld killed (pid 322836)
KILLED CAPYBARA PROCESSES
PARSING 20240325-020244.439151 migration delay
792
CALCULATING 20240325-020244.439151 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-020244.439151
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-020244.439151, 2, 101, 0, 100000, 100, exponential, 1000000, 996852, 996850, 0, 769, 12.0, 22.0, 40.0, 65.0, 98.0, 1711332180, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-020525.771461
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8994393


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-020525.771461, 2, 101, 0, 100000, 100, exponential, 1000000, 996866, 996863, 0, 646, 13.0, 23.0, 40.0, 65.0, 99.0, 1711332341, 0



iokerneld killed (pid 324772)
KILLED CAPYBARA PROCESSES
PARSING 20240325-020525.771461 migration delay
792
CALCULATING 20240325-020525.771461 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-020525.771461
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-020525.771461, 2, 101, 0, 100000, 100, exponential, 1000000, 996866, 996863, 0, 646, 13.0, 23.0, 40.0, 65.0, 99.0, 1711332341, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [100000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [100]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-021435.259837
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8994351


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-021435.259837, 2, 101, 0, 100000, 100, exponential, 1000000, 996861, 996858, 0, 688, 13.0, 23.0, 41.0, 66.0, 98.0, 1711332890, 0



iokerneld killed (pid 327308)
KILLED CAPYBARA PROCESSES
PARSING 20240325-021435.259837 migration delay
792
CALCULATING 20240325-021435.259837 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-021435.259837
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-021435.259837, 2, 101, 0, 100000, 100, exponential, 1000000, 996861, 996858, 0, 688, 13.0, 23.0, 41.0, 66.0, 98.0, 1711332890, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-022218.347003
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8994296


 Writing data into files...
================ TEST COMPLETE =================




iokerneld killed (pid 329737)
KILLED CAPYBARA PROCESSES
PARSING 20240325-022218.347003 migration delay
PARSING 20240325-022218.347003 migration delay
PARSING 20240325-022218.347003 migration delay
2
3
PARSING 20240325-022218.347003 migration delay
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-022709.627536
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697548


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-022709.627536, 2, 101, 0, 0, 1, exponential, 1000000, 994966, 994959, 0, 206, 15.0, 30.0, 61.0, 127.0, 277.0, 1711333644, 0



iokerneld killed (pid 331665)
KILLED CAPYBARA PROCESSES
PARSING 20240325-022709.627536 migration delay
29556
CALCULATING 20240325-022709.627536 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-022709.627536
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-022709.627536, 2, 101, 0, 0, 1, exponential, 1000000, 994966, 994959, 0, 206, 15.0, 30.0, 61.0, 127.0, 277.0, 1711333644, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-083401.336022
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697481


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-083401.336022, 2, 101, 0, 0, 1, exponential, 1000000, 994942, 994938, 0, 273, 15.0, 33.0, 77.0, 543.0, 1258.0, 1711355656, 0



iokerneld killed (pid 378851)
KILLED CAPYBARA PROCESSES
PARSING 20240325-083401.336022 migration delay
29555
CALCULATING 20240325-083401.336022 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-083401.336022
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-083401.336022, 2, 101, 0, 0, 1, exponential, 1000000, 994942, 994938, 0, 273, 15.0, 33.0, 77.0, 543.0, 1258.0, 1711355656, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-083630.351727
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697531


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-083630.351727, 2, 101, 0, 0, 1, exponential, 1000000, 994960, 994957, 0, 223, 15.0, 33.0, 75.0, 527.0, 1263.0, 1711355805, 0



iokerneld killed (pid 380570)
KILLED CAPYBARA PROCESSES
PARSING 20240325-083630.351727 migration delay
29553
CALCULATING 20240325-083630.351727 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-083630.351727
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-083630.351727, 2, 101, 0, 0, 1, exponential, 1000000, 994960, 994957, 0, 223, 15.0, 33.0, 75.0, 527.0, 1263.0, 1711355805, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-084213.243107
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3176993 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=1 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240325-084213.243107.be1 2>&1
Total # latencies: 1331819


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-084213.243107, 2, 101, 0, 0, 1, exponential, 1000000, 491650, 491648, 0, 3714, 12.0, 22.0, 38.0, 62.0, 129.0, 1711356148, 0



iokerneld killed (pid 382875)
KILLED CAPYBARA PROCESSES
PARSING 20240325-084213.243107 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
 1711356147853353122,RECV_PREPARE_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-084213.243107, 2, 101, 0, 0, 1, exponential, 1000000, 491650, 491648, 0, 3714, 12.0, 22.0, 38.0, 62.0, 129.0, 1711356148, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-084253.131950
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3177975 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=1 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240325-084253.131950.be1 2>&1
Total # latencies: 1331666


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-084253.131950, 2, 101, 0, 0, 1, exponential, 1000000, 491593, 491591, 0, 3867, 12.0, 22.0, 37.0, 60.0, 140.0, 1711356188, 0



iokerneld killed (pid 384127)
KILLED CAPYBARA PROCESSES
PARSING 20240325-084253.131950 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
 1711356187898030157,RECV_PREPARE_MIG
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-084253.131950, 2, 101, 0, 0, 1, exponential, 1000000, 491593, 491591, 0, 3867, 12.0, 22.0, 37.0, 60.0, 140.0, 1711356188, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-084450.163742
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697431


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-084450.163742, 2, 101, 0, 0, 1, exponential, 1000000, 994923, 994918, 0, 323, 15.0, 29.0, 57.0, 117.0, 252.0, 1711356305, 0



iokerneld killed (pid 385707)
KILLED CAPYBARA PROCESSES
PARSING 20240325-084450.163742 migration delay
29550
CALCULATING 20240325-084450.163742 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-084450.163742
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-084450.163742, 2, 101, 0, 0, 1, exponential, 1000000, 994923, 994918, 0, 323, 15.0, 29.0, 57.0, 117.0, 252.0, 1711356305, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [1]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-085021.944453
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697518


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-085021.944453, 2, 101, 0, 0, 1, exponential, 1000000, 994955, 994952, 0, 236, 16.0, 31.0, 63.0, 136.0, 304.0, 1711356637, 0



iokerneld killed (pid 387800)
KILLED CAPYBARA PROCESSES
PARSING 20240325-085021.944453 migration delay
29555
CALCULATING 20240325-085021.944453 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-085021.944453
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-085021.944453, 2, 101, 0, 0, 1, exponential, 1000000, 994955, 994952, 0, 236, 16.0, 31.0, 63.0, 136.0, 304.0, 1711356637, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-090253.979772
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697486


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-090253.979772, 2, 101, 0, 0, 10, exponential, 1000000, 994944, 994941, 0, 268, 13.0, 24.0, 42.0, 70.0, 108.0, 1711357389, 0



iokerneld killed (pid 390782)
KILLED CAPYBARA PROCESSES
PARSING 20240325-090253.979772 migration delay
2776
CALCULATING 20240325-090253.979772 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-090253.979772
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-090253.979772, 2, 101, 0, 0, 10, exponential, 1000000, 994944, 994941, 0, 268, 13.0, 24.0, 42.0, 70.0, 108.0, 1711357389, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(1000000, 1000000 + 1, 10000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [101]
RUNTIME = 3

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-090548.731395
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697459


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-090548.731395, 2, 101, 0, 0, 10, exponential, 1000000, 994934, 994931, 0, 295, 12.0, 23.0, 42.0, 67.0, 102.0, 1711357563, 0



iokerneld killed (pid 393335)
KILLED CAPYBARA PROCESSES
PARSING 20240325-090548.731395 migration delay
2776
CALCULATING 20240325-090548.731395 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240325-090548.731395
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-090548.731395, 2, 101, 0, 0, 10, exponential, 1000000, 994934, 994931, 0, 295, 12.0, 23.0, 42.0, 67.0, 102.0, 1711357563, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = True
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-091622.811723
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-091622.811723, 1, 100, 0, 0, 10, exponential, 10000, 9775, 9775, 0, 0, 9.0, 9.0, 10.0, 11.0, 13.0, 1711358198, 0



iokerneld killed (pid 396433)
KILLED CAPYBARA PROCESSES
PARSING 20240325-091622.811723 migration delay
Traceback (most recent call last):
  File "run_eval.py", line 742, in <module>
    run_eval()
  File "run_eval.py", line 663, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 194, in parse_mig_delay
    with open(file_path, "r") as file:
FileNotFoundError: [Errno 2] No such file or directory: '/homes/inho/capybara-data/20240325-091622.811723.be1'
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-091622.811723, 1, 100, 0, 0, 10, exponential, 10000, 9775, 9775, 0, 0, 9.0, 9.0, 10.0, 11.0, 13.0, 1711358198, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-091727.523321
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-091727.523321, 1, 100, 0, 0, 10, exponential, 10000, 9775, 9775, 0, 0, 9.0, 9.0, 10.0, 11.0, 13.0, 1711358263, 0



iokerneld killed (pid 397754)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-091805.867725
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 539364


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-091805.867725, 1, 100, 0, 0, 10, exponential, 60000, 59242, 59242, 0, 7, 8.0, 9.0, 11.0, 12.0, 13.0, 1711358301, 0



iokerneld killed (pid 398659)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-091843.495100
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988931


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-091843.495100, 1, 100, 0, 0, 10, exponential, 110000, 109009, 109009, 0, 9, 8.0, 10.0, 11.0, 13.0, 15.0, 1711358339, 0



iokerneld killed (pid 399559)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-091921.211940
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438525


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-091921.211940, 1, 100, 0, 0, 10, exponential, 160000, 158658, 158658, 0, 9, 8.0, 10.0, 12.0, 14.0, 17.0, 1711358377, 0



iokerneld killed (pid 400458)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-091959.315505
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1888185


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-091959.315505, 1, 100, 0, 0, 10, exponential, 210000, 208646, 208646, 0, 17, 9.0, 11.0, 13.0, 16.0, 19.0, 1711358415, 0



iokerneld killed (pid 401356)
dpdk-ctrl.elf killed (pid 3187066)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092037.087320
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2336959


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092037.087320, 1, 100, 0, 0, 10, exponential, 260000, 258563, 258563, 0, 7, 9.0, 11.0, 14.0, 17.0, 21.0, 1711358452, 0



iokerneld killed (pid 402257)
dpdk-ctrl.elf killed (pid 3187659)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092114.903990
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2787653


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092114.903990, 1, 100, 0, 0, 10, exponential, 310000, 308586, 308586, 0, 24, 9.0, 12.0, 16.0, 20.0, 25.0, 1711358490, 0



iokerneld killed (pid 403157)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092152.758907
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3237966


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092152.758907, 1, 100, 0, 0, 10, exponential, 360000, 358482, 358481, 0, 22, 9.0, 13.0, 17.0, 22.0, 29.0, 1711358528, 0



iokerneld killed (pid 404054)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092230.700044
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3687868


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092230.700044, 1, 100, 0, 0, 10, exponential, 410000, 408140, 408139, 0, 40, 10.0, 14.0, 20.0, 27.0, 36.0, 1711358566, 0



iokerneld killed (pid 404958)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092308.579203
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4137135


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092308.579203, 1, 100, 0, 0, 10, exponential, 460000, 457742, 457742, 0, 45, 11.0, 16.0, 24.0, 33.0, 46.0, 1711358604, 0



iokerneld killed (pid 405860)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092346.566609
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4587400


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092346.566609, 1, 100, 0, 0, 10, exponential, 510000, 507839, 507838, 0, 52, 11.0, 18.0, 29.0, 42.0, 61.0, 1711358642, 0



iokerneld killed (pid 406765)
dpdk-ctrl.elf killed (pid 3190656)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092424.634977
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5037300


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092424.634977, 1, 100, 0, 0, 10, exponential, 560000, 557540, 557539, 0, 75, 14.0, 25.0, 43.0, 68.0, 101.0, 1711358680, 0



iokerneld killed (pid 407666)
dpdk-ctrl.elf killed (pid 3191254)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-091727.523321, 1, 100, 0, 0, 10, exponential, 10000, 9775, 9775, 0, 0, 9.0, 9.0, 10.0, 11.0, 13.0, 1711358263, 0
20240325-091805.867725, 1, 100, 0, 0, 10, exponential, 60000, 59242, 59242, 0, 7, 8.0, 9.0, 11.0, 12.0, 13.0, 1711358301, 0
20240325-091843.495100, 1, 100, 0, 0, 10, exponential, 110000, 109009, 109009, 0, 9, 8.0, 10.0, 11.0, 13.0, 15.0, 1711358339, 0
20240325-091921.211940, 1, 100, 0, 0, 10, exponential, 160000, 158658, 158658, 0, 9, 8.0, 10.0, 12.0, 14.0, 17.0, 1711358377, 0
20240325-091959.315505, 1, 100, 0, 0, 10, exponential, 210000, 208646, 208646, 0, 17, 9.0, 11.0, 13.0, 16.0, 19.0, 1711358415, 0
20240325-092037.087320, 1, 100, 0, 0, 10, exponential, 260000, 258563, 258563, 0, 7, 9.0, 11.0, 14.0, 17.0, 21.0, 1711358452, 0
20240325-092114.903990, 1, 100, 0, 0, 10, exponential, 310000, 308586, 308586, 0, 24, 9.0, 12.0, 16.0, 20.0, 25.0, 1711358490, 0
20240325-092152.758907, 1, 100, 0, 0, 10, exponential, 360000, 358482, 358481, 0, 22, 9.0, 13.0, 17.0, 22.0, 29.0, 1711358528, 0
20240325-092230.700044, 1, 100, 0, 0, 10, exponential, 410000, 408140, 408139, 0, 40, 10.0, 14.0, 20.0, 27.0, 36.0, 1711358566, 0
20240325-092308.579203, 1, 100, 0, 0, 10, exponential, 460000, 457742, 457742, 0, 45, 11.0, 16.0, 24.0, 33.0, 46.0, 1711358604, 0
20240325-092346.566609, 1, 100, 0, 0, 10, exponential, 510000, 507839, 507838, 0, 52, 11.0, 18.0, 29.0, 42.0, 61.0, 1711358642, 0
20240325-092424.634977, 1, 100, 0, 0, 10, exponential, 560000, 557540, 557539, 0, 75, 14.0, 25.0, 43.0, 68.0, 101.0, 1711358680, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(610000, 610000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092610.260103
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5486445


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092610.260103, 1, 100, 0, 0, 10, exponential, 610000, 607738, 607738, 0, 87, 19.0, 41.0, 81.0, 145.0, 253.0, 1711358786, 0



iokerneld killed (pid 410197)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-092610.260103, 1, 100, 0, 0, 10, exponential, 610000, 607738, 607738, 0, 87, 19.0, 41.0, 81.0, 145.0, 253.0, 1711358786, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092706.011341
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846035


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092706.011341, 1, 100, 0, 0, 10, exponential, 650000, 647371, 647363, 0, 177, 56.0, 206.0, 613.0, 1236.0, 2027.0, 1711358841, 0



iokerneld killed (pid 411670)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-092706.011341, 1, 100, 0, 0, 10, exponential, 650000, 647371, 647363, 0, 177, 56.0, 206.0, 613.0, 1236.0, 2027.0, 1711358841, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092841.915621
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092841.915621, 1, 100, 0, 0, 10, exponential, 10000, 9775, 9775, 0, 0, 9.0, 10.0, 11.0, 12.0, 13.0, 1711358937, 0



iokerneld killed (pid 413348)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092919.714646
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 539366


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092919.714646, 1, 100, 0, 0, 10, exponential, 60000, 59243, 59242, 0, 5, 9.0, 10.0, 12.0, 13.0, 15.0, 1711358975, 0



iokerneld killed (pid 414252)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-092957.563281
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988935


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-092957.563281, 1, 100, 0, 0, 10, exponential, 110000, 109009, 109009, 0, 5, 9.0, 11.0, 13.0, 15.0, 17.0, 1711359013, 0



iokerneld killed (pid 415149)
dpdk-ctrl.elf killed (pid 3197737)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093035.375021
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438521


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093035.375021, 1, 100, 0, 0, 10, exponential, 160000, 158658, 158657, 0, 13, 10.0, 12.0, 14.0, 17.0, 20.0, 1711359051, 0



iokerneld killed (pid 416049)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093113.275061
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1888187


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093113.275061, 1, 100, 0, 0, 10, exponential, 210000, 208646, 208646, 0, 15, 10.0, 12.0, 15.0, 18.0, 22.0, 1711359089, 0



iokerneld killed (pid 416944)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093151.159111
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2336939


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093151.159111, 1, 100, 0, 0, 10, exponential, 260000, 258561, 258560, 0, 27, 10.0, 13.0, 17.0, 21.0, 25.0, 1711359127, 0



iokerneld killed (pid 417842)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093229.127218
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2787652


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093229.127218, 1, 100, 0, 0, 10, exponential, 310000, 308586, 308586, 0, 25, 11.0, 14.0, 19.0, 24.0, 30.0, 1711359165, 0



iokerneld killed (pid 418756)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093307.255844
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3237944


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093307.255844, 1, 100, 0, 0, 10, exponential, 360000, 358479, 358479, 0, 44, 11.0, 16.0, 22.0, 28.0, 38.0, 1711359203, 0



iokerneld killed (pid 419656)
dpdk-ctrl.elf killed (pid 3200729)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093345.315394
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3687845


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093345.315394, 1, 100, 0, 0, 10, exponential, 410000, 408137, 408137, 0, 63, 12.0, 17.0, 25.0, 34.0, 47.0, 1711359241, 0



iokerneld killed (pid 420556)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093423.319397
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4137115


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093423.319397, 1, 100, 0, 0, 10, exponential, 460000, 457740, 457739, 0, 65, 13.0, 21.0, 32.0, 47.0, 322.0, 1711359279, 0



iokerneld killed (pid 421499)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093501.487276
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4587397


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093501.487276, 1, 100, 0, 0, 10, exponential, 510000, 507839, 507838, 0, 55, 15.0, 26.0, 42.0, 61.0, 87.0, 1711359317, 0



iokerneld killed (pid 422389)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093539.730936
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5037289


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093539.730936, 1, 100, 0, 0, 10, exponential, 560000, 557538, 557538, 0, 86, 21.0, 39.0, 72.0, 118.0, 185.0, 1711359355, 0



iokerneld killed (pid 423292)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-092841.915621, 1, 100, 0, 0, 10, exponential, 10000, 9775, 9775, 0, 0, 9.0, 10.0, 11.0, 12.0, 13.0, 1711358937, 0
20240325-092919.714646, 1, 100, 0, 0, 10, exponential, 60000, 59243, 59242, 0, 5, 9.0, 10.0, 12.0, 13.0, 15.0, 1711358975, 0
20240325-092957.563281, 1, 100, 0, 0, 10, exponential, 110000, 109009, 109009, 0, 5, 9.0, 11.0, 13.0, 15.0, 17.0, 1711359013, 0
20240325-093035.375021, 1, 100, 0, 0, 10, exponential, 160000, 158658, 158657, 0, 13, 10.0, 12.0, 14.0, 17.0, 20.0, 1711359051, 0
20240325-093113.275061, 1, 100, 0, 0, 10, exponential, 210000, 208646, 208646, 0, 15, 10.0, 12.0, 15.0, 18.0, 22.0, 1711359089, 0
20240325-093151.159111, 1, 100, 0, 0, 10, exponential, 260000, 258561, 258560, 0, 27, 10.0, 13.0, 17.0, 21.0, 25.0, 1711359127, 0
20240325-093229.127218, 1, 100, 0, 0, 10, exponential, 310000, 308586, 308586, 0, 25, 11.0, 14.0, 19.0, 24.0, 30.0, 1711359165, 0
20240325-093307.255844, 1, 100, 0, 0, 10, exponential, 360000, 358479, 358479, 0, 44, 11.0, 16.0, 22.0, 28.0, 38.0, 1711359203, 0
20240325-093345.315394, 1, 100, 0, 0, 10, exponential, 410000, 408137, 408137, 0, 63, 12.0, 17.0, 25.0, 34.0, 47.0, 1711359241, 0
20240325-093423.319397, 1, 100, 0, 0, 10, exponential, 460000, 457740, 457739, 0, 65, 13.0, 21.0, 32.0, 47.0, 322.0, 1711359279, 0
20240325-093501.487276, 1, 100, 0, 0, 10, exponential, 510000, 507839, 507838, 0, 55, 15.0, 26.0, 42.0, 61.0, 87.0, 1711359317, 0
20240325-093539.730936, 1, 100, 0, 0, 10, exponential, 560000, 557538, 557538, 0, 86, 21.0, 39.0, 72.0, 118.0, 185.0, 1711359355, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(600000, 600000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093702.475407
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5396700


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093702.475407, 1, 100, 0, 0, 10, exponential, 600000, 597708, 597706, 0, 147, 33.0, 76.0, 173.0, 346.0, 709.0, 1711359438, 0



iokerneld killed (pid 425779)
dpdk-ctrl.elf killed (pid 3206109)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-093702.475407, 1, 100, 0, 0, 10, exponential, 600000, 597708, 597706, 0, 147, 33.0, 76.0, 173.0, 346.0, 709.0, 1711359438, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(630000, 630000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-093802.907880
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5666161


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-093802.907880, 1, 100, 0, 0, 10, exponential, 630000, 627489, 627469, 0, 119, 277.0, 894.0, 2036.0, 3514.0, 4934.0, 1711359498, 0



iokerneld killed (pid 427272)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-093802.907880, 1, 100, 0, 0, 10, exponential, 630000, 627489, 627469, 0, 119, 277.0, 894.0, 2036.0, 3514.0, 4934.0, 1711359498, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-112653.667698
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846005


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-112653.667698, 1, 100, 0, 0, 10, exponential, 650000, 647368, 647345, 0, 207, 178.0, 643.0, 1564.0, 2748.0, 4046.0, 1711366029, 0



iokerneld killed (pid 442397)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-112653.667698, 1, 100, 0, 0, 10, exponential, 650000, 647368, 647345, 0, 207, 178.0, 643.0, 1564.0, 2748.0, 4046.0, 1711366029, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-113521.259442
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846041


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-113521.259442, 1, 100, 0, 0, 10, exponential, 650000, 647372, 647349, 0, 171, 171.0, 613.0, 1522.0, 2714.0, 3872.0, 1711366537, 0



iokerneld killed (pid 445105)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-113521.259442, 1, 100, 0, 0, 10, exponential, 650000, 647372, 647349, 0, 171, 171.0, 613.0, 1522.0, 2714.0, 3872.0, 1711366537, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-113606.523768
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846072


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-113606.523768, 1, 100, 0, 0, 10, exponential, 650000, 647375, 647354, 0, 140, 182.0, 662.0, 1609.0, 2821.0, 4139.0, 1711366582, 0



iokerneld killed (pid 446568)
dpdk-ctrl.elf killed (pid 3211029)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-113606.523768, 1, 100, 0, 0, 10, exponential, 650000, 647375, 647354, 0, 140, 182.0, 662.0, 1609.0, 2821.0, 4139.0, 1711366582, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-113936.071153
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846071


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-113936.071153, 1, 100, 0, 0, 10, exponential, 650000, 647375, 647349, 0, 141, 240.0, 916.0, 2608.0, 5233.0, 8228.0, 1711366792, 0



iokerneld killed (pid 448523)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-113936.071153, 1, 100, 0, 0, 10, exponential, 650000, 647375, 647349, 0, 141, 240.0, 916.0, 2608.0, 5233.0, 8228.0, 1711366792, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-114031.035388
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846097


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-114031.035388, 1, 100, 0, 0, 10, exponential, 650000, 647378, 647360, 0, 115, 139.0, 567.0, 1504.0, 2678.0, 3783.0, 1711366847, 0



iokerneld killed (pid 449997)
dpdk-ctrl.elf killed (pid 3213343)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-114031.035388, 1, 100, 0, 0, 10, exponential, 650000, 647378, 647360, 0, 115, 139.0, 567.0, 1504.0, 2678.0, 3783.0, 1711366847, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-114628.370790
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846012


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-114628.370790, 1, 100, 0, 0, 10, exponential, 650000, 647369, 647340, 0, 200, 304.0, 1313.0, 5516.0, 12619.0, 17671.0, 1711367204, 0



iokerneld killed (pid 452452)
dpdk-ctrl.elf killed (pid 3214508)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-114628.370790, 1, 100, 0, 0, 10, exponential, 650000, 647369, 647340, 0, 200, 304.0, 1313.0, 5516.0, 12619.0, 17671.0, 1711367204, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-114718.495964
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846011


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-114718.495964, 1, 100, 0, 0, 10, exponential, 650000, 647368, 647337, 0, 201, 336.0, 1467.0, 4446.0, 8682.0, 12374.0, 1711367254, 0



iokerneld killed (pid 453946)
dpdk-ctrl.elf killed (pid 3215662)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-114718.495964, 1, 100, 0, 0, 10, exponential, 650000, 647368, 647337, 0, 201, 336.0, 1467.0, 4446.0, 8682.0, 12374.0, 1711367254, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-114820.860536
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846032


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-114820.860536, 1, 100, 0, 0, 10, exponential, 650000, 647371, 647322, 0, 180, 586.0, 2288.0, 5810.0, 10265.0, 13614.0, 1711367317, 0



iokerneld killed (pid 455439)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-114820.860536, 1, 100, 0, 0, 10, exponential, 650000, 647371, 647322, 0, 180, 586.0, 2288.0, 5810.0, 10265.0, 13614.0, 1711367317, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-115051.208056
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5845997


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-115051.208056, 1, 100, 0, 0, 10, exponential, 650000, 647367, 647355, 0, 215, 101.0, 364.0, 969.0, 1820.0, 2868.0, 1711367467, 0



iokerneld killed (pid 457228)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-115051.208056, 1, 100, 0, 0, 10, exponential, 650000, 647367, 647355, 0, 215, 101.0, 364.0, 969.0, 1820.0, 2868.0, 1711367467, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-115207.591105
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5846037


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-115207.591105, 1, 100, 0, 0, 10, exponential, 650000, 647371, 647361, 0, 175, 68.0, 243.0, 675.0, 1257.0, 1890.0, 1711367543, 0



iokerneld killed (pid 458741)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-115207.591105, 1, 100, 0, 0, 10, exponential, 650000, 647371, 647361, 0, 175, 68.0, 243.0, 675.0, 1257.0, 1890.0, 1711367543, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-115420.339748
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-115420.339748, 1, 100, 0, 0, 10, exponential, 650000, 0, 0, 0, 1711367675



iokerneld killed (pid 460536)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-115420.339748, 1, 100, 0, 0, 10, exponential, 650000, 0, 0, 0, 1711367675

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-115554.911470
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584077


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-115554.911470, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 3, 9.0, 10.0, 12.0, 13.0, 15.0, 1711367770, 0



iokerneld killed (pid 462112)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-115554.911470, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 3, 9.0, 10.0, 12.0, 13.0, 15.0, 1711367770, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-120647.559998
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584074


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-120647.559998, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 6, 9.0, 10.0, 12.0, 13.0, 15.0, 1711368423, 0



iokerneld killed (pid 465445)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-120647.559998, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 6, 9.0, 10.0, 12.0, 13.0, 15.0, 1711368423, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-121023.852084
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584075


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-121023.852084, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 5, 9.0, 10.0, 12.0, 13.0, 15.0, 1711368639, 0



iokerneld killed (pid 467440)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-121023.852084, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 5, 9.0, 10.0, 12.0, 13.0, 15.0, 1711368639, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-121334.655640
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584073


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-121334.655640, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 7, 9.0, 10.0, 12.0, 13.0, 15.0, 1711368830, 0



dpdk-ctrl.elf killed (pid 3225173)
iokerneld killed (pid 469372)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-121334.655640, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 7, 9.0, 10.0, 12.0, 13.0, 15.0, 1711368830, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-121812.675955
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 204154


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-121812.675955, 1, 100, 0, 0, 10, exponential, 65000, 61299, 57093, 112900, 267026, 18.0, inf, inf, inf, inf, 1711369108, 0



iokerneld killed (pid 471880)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-121812.675955, 1, 100, 0, 0, 10, exponential, 65000, 61299, 57093, 112900, 267026, 18.0, inf, inf, inf, inf, 1711369108, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-122011.091930
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584074


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-122011.091930, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 6, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369227, 0



iokerneld killed (pid 473644)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-122011.091930, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 6, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369227, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-122408.155025
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584080


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-122408.155025, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 0, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369464, 0



iokerneld killed (pid 475699)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-122408.155025, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 0, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369464, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-123035.575966
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584073


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-123035.575966, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 7, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369851, 0



iokerneld killed (pid 478130)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-123035.575966, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 7, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369851, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-123226.003098
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 584075


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-123226.003098, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 5, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369962, 0



iokerneld killed (pid 479909)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-123226.003098, 1, 100, 0, 0, 10, exponential, 65000, 64058, 64058, 0, 5, 9.0, 10.0, 12.0, 13.0, 15.0, 1711369962, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-123902.011829
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
bash: line 1: 3232309 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240325-123902.011829.be0 2>&1
1 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 482484 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240325-123902.011829 > /homes/inho/capybara-data/20240325-123902.011829.client
================ TEST COMPLETE =================

[RESULT]20240325-123902.011829, 1, 100, 0, 0, 10, N/A



iokerneld killed (pid 482256)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-123902.011829, 1, 100, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-mig ration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-124036.327821
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 520692


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-124036.327821, 1, 100, 0, 0, 10, exponential, 65000, 64035, 63967, 63171, 217, 33.0, inf, inf, inf, inf, 1711370452, 0



iokerneld killed (pid 483852)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-124036.327821, 1, 100, 0, 0, 10, exponential, 65000, 64035, 63967, 63171, 217, 33.0, inf, inf, inf, inf, 1711370452, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-124620.703487
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
bash: line 1: 3234646 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240325-124620.703487.be0 2>&1
1 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 486337 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=65000 --threads=100 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240325-124620.703487 > /homes/inho/capybara-data/20240325-124620.703487.client
================ TEST COMPLETE =================

[RESULT]20240325-124620.703487, 1, 100, 0, 0, 10, N/A



iokerneld killed (pid 486109)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-124620.703487, 1, 100, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(65000, 65000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-124701.007517
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 518391


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-124701.007517, 1, 100, 0, 0, 10, exponential, 65000, 64031, 63961, 65438, 251, 34.0, inf, inf, inf, inf, 1711370837, 0



iokerneld killed (pid 487556)
dpdk-ctrl.elf killed (pid 3235942)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-124701.007517, 1, 100, 0, 0, 10, exponential, 65000, 64031, 63961, 65438, 251, 34.0, inf, inf, inf, inf, 1711370837, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-125205.999766
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
bash: line 1: 3237195 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240325-125205.999766.be0 2>&1
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-125205.999766, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 9.0, 10.0, 10.0, 10.0, 10.0, 1711371141, 0



iokerneld killed (pid 489703)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-125205.999766, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 9.0, 10.0, 10.0, 10.0, 10.0, 1711371141, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-125248.847478
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
bash: line 1: 3238352 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240325-125248.847478.be0 2>&1
1 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 491388 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=10 --threads=1 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240325-125248.847478 > /homes/inho/capybara-data/20240325-125248.847478.client
================ TEST COMPLETE =================

[RESULT]20240325-125248.847478, 1, 1, 0, 0, 10, N/A



iokerneld killed (pid 491161)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-125248.847478, 1, 1, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-125530.315017
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
bash: line 1: 3239504 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_TOTAL_LOAD_FOR_MIG=50 THRESHOLD_EPSILON=5 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240325-125530.315017.be0 2>&1
1 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 493254 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=10 --threads=1 --runtime=5 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240325-125530.315017 > /homes/inho/capybara-data/20240325-125530.315017.client
================ TEST COMPLETE =================

[RESULT]20240325-125530.315017, 1, 1, 0, 0, 10, N/A



iokerneld killed (pid 493027)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-125530.315017, 1, 1, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-125636.863348
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-125636.863348, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 9.0, 9.0, 10.0, 10.0, 10.0, 1711371412, 0



iokerneld killed (pid 494515)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-125636.863348, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 9.0, 9.0, 10.0, 10.0, 10.0, 1711371412, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-130015.987984
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-130015.987984, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 8.0, 9.0, 10.0, 10.0, 10.0, 1711371631, 0



iokerneld killed (pid 496526)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-130015.987984, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 8.0, 9.0, 10.0, 10.0, 10.0, 1711371631, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-130205.051377
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-130205.051377, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 9.0, 9.0, 10.0, 10.0, 10.0, 1711371740, 0



iokerneld killed (pid 498241)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-130205.051377, 1, 1, 0, 0, 10, exponential, 10, 11, 11, 0, 0, 9.0, 9.0, 10.0, 10.0, 10.0, 1711371740, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    # 'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(550000, 550000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-131153.151869
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2474917


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-131153.151869, 1, 1, 0, 0, 10, exponential, 550000, 550157, 550155, 0, 361, 11.0, 22.0, 36.0, 53.0, 71.0, 1711372329, 0



iokerneld killed (pid 501186)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-131153.151869, 1, 1, 0, 0, 10, exponential, 550000, 550157, 550155, 0, 361, 11.0, 22.0, 36.0, 53.0, 71.0, 1711372329, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(550000, 550000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [1]
RUNTIME = 5

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-131343.847575
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2475077


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-131343.847575, 1, 1, 0, 0, 10, exponential, 550000, 550192, 550191, 0, 201, 12.0, 23.0, 39.0, 57.0, 87.0, 1711372439, 0



iokerneld killed (pid 502887)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-131343.847575, 1, 1, 0, 0, 10, exponential, 550000, 550192, 550191, 0, 201, 12.0, 23.0, 39.0, 57.0, 87.0, 1711372439, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(600000, 600000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-134106.387423
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5396704


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-134106.387423, 1, 100, 0, 0, 10, exponential, 600000, 597708, 597707, 0, 143, 28.0, 60.0, 130.0, 279.0, 606.0, 1711374082, 0



iokerneld killed (pid 508783)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-134106.387423, 1, 100, 0, 0, 10, exponential, 600000, 597708, 597707, 0, 143, 28.0, 60.0, 130.0, 279.0, 606.0, 1711374082, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(560000, 560000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-134256.727347
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5037275


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-134256.727347, 1, 100, 0, 0, 10, exponential, 560000, 557537, 557536, 0, 100, 19.0, 36.0, 63.0, 101.0, 155.0, 1711374193, 0



iokerneld killed (pid 510386)
dpdk-ctrl.elf killed (pid 3247744)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-134256.727347, 1, 100, 0, 0, 10, exponential, 560000, 557537, 557536, 0, 100, 19.0, 36.0, 63.0, 101.0, 155.0, 1711374193, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-134549.786959
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240325-134549.786959, 1, 100, 0, 0, 10, exponential, 650000, 0, 0, 0, 1711374365



iokerneld killed (pid 512104)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-134549.786959, 1, 100, 0, 0, 10, exponential, 650000, 0, 0, 0, 1711374365

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(650000, 650000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-134656.079901
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 267862


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-134656.079901, 1, 100, 0, 0, 10, exponential, 650000, 598437, 556387, 112900, 5465450, 26290.0, inf, inf, inf, inf, 1711374432, 0



iokerneld killed (pid 513599)
dpdk-ctrl.elf killed (pid 3250060)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-134656.079901, 1, 100, 0, 0, 10, exponential, 650000, 598437, 556387, 112900, 5465450, 26290.0, inf, inf, inf, inf, 1711374432, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 1
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = False
EVAL_SERVER_REPLY = False
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_TOTAL_LOAD_FOR_MIG = 50 #100
THRESHOLD_EPSILON = 5 #30

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(630000, 630000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '150000:25000,750000:30000,150000:20000/150000:75000'
LOADSHIFTS = ''
ZIPF_ALPHA = '' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240325-134742.023519
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
1 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5666146


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240325-134742.023519, 1, 100, 0, 0, 10, exponential, 630000, 627487, 627470, 0, 134, 172.0, 583.0, 1409.0, 2404.0, 3510.0, 1711374478, 0



iokerneld killed (pid 515050)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240325-134742.023519, 1, 100, 0, 0, 10, exponential, 630000, 627487, 627470, 0, 134, 172.0, 583.0, 1409.0, 2404.0, 3510.0, 1711374478, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(630000, 630000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-014045.311081
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3254074 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240326-014045.311081.be0 2>&1
bash: line 1: 3254075 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240326-014045.311081.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-014045.311081, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 604761)
KILLED CAPYBARA PROCESSES
PARSING 20240326-014045.311081 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-014045.311081            && sh ms_avg_99p_lat.sh 20240326-014045.311081            && sh ms_total_even_odd_numreq.sh 20240326-014045.311081            && sh latency_cdf.sh 20240326-014045.311081
DONE
PARSING 20240326-014045.311081 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-014045.311081
ERROR: cat: /homes/inho/capybara-data/20240326-014045.311081.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-014045.311081.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-014045.311081.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-014045.311081.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-014045.311081, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(630000, 630000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-014218.507031
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3255267 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240326-014218.507031.be1 2>&1
bash: line 1: 3255266 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240326-014218.507031.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-014218.507031, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 606362)
KILLED CAPYBARA PROCESSES
PARSING 20240326-014218.507031 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-014218.507031            && sh ms_avg_99p_lat.sh 20240326-014218.507031            && sh ms_total_even_odd_numreq.sh 20240326-014218.507031            && sh latency_cdf.sh 20240326-014218.507031
DONE
PARSING 20240326-014218.507031 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-014218.507031
ERROR: cat: /homes/inho/capybara-data/20240326-014218.507031.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-014218.507031.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-014218.507031.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-014218.507031.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-014218.507031, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(630000, 630000 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 10

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-014453.519446
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3256434 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240326-014453.519446.be0 2>&1
bash: line 1: 3256435 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240326-014453.519446.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-014453.519446, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 608096)
KILLED CAPYBARA PROCESSES
PARSING 20240326-014453.519446 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-014453.519446            && sh ms_avg_99p_lat.sh 20240326-014453.519446            && sh ms_total_even_odd_numreq.sh 20240326-014453.519446            && sh latency_cdf.sh 20240326-014453.519446
DONE
PARSING 20240326-014453.519446 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-014453.519446
ERROR: cat: /homes/inho/capybara-data/20240326-014453.519446.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-014453.519446.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-014453.519446.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-014453.519446.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-014453.519446, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-014532.991429
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


2    1    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    

================ TEST COMPLETE =================

[RESULT]20240326-014532.991429, 2, 100, 0, 10000, 10,ile (standard input) matches



iokerneld killed (pid 609554)
KILLED CAPYBARA PROCESSES
PARSING 20240326-014532.991429 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-014532.991429            && sh ms_avg_99p_lat.sh 20240326-014532.991429            && sh ms_total_even_odd_numreq.sh 20240326-014532.991429            && sh latency_cdf.sh 20240326-014532.991429
ERROR: cat: /homes/inho/capybara-data/20240326-014532.991429.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240326-014532.991429.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240326-014532.991429.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240326-014532.991429.latency_trace: No such file or directory



PARSING 20240326-014532.991429 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-014532.991429
ERROR: cat: /homes/inho/capybara-data/20240326-014532.991429.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-014532.991429.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-014532.991429.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-014532.991429.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-014532.991429, 2, 100, 0, 10000, 10,ile (standard input) matches

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90:100000/90:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-014626.319167
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-014626.319167, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 611072)
dpdk-ctrl.elf killed (pid 3258656)
KILLED CAPYBARA PROCESSES
PARSING 20240326-014626.319167 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-014626.319167            && sh ms_avg_99p_lat.sh 20240326-014626.319167            && sh ms_total_even_odd_numreq.sh 20240326-014626.319167            && sh latency_cdf.sh 20240326-014626.319167
DONE
PARSING 20240326-014626.319167 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-014626.319167
ERROR: cat: /homes/inho/capybara-data/20240326-014626.319167.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-014626.319167.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-014626.319167.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-014626.319167.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-014626.319167, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-014802.499651
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3259902 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240326-014802.499651.be1 2>&1
bash: line 1: 3259901 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_THRESHOLD=50 MIG_DELAY=0 MAX_STAT_MIGS=10000 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240326-014802.499651.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-014802.499651, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 612961)
KILLED CAPYBARA PROCESSES
PARSING 20240326-014802.499651 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-014802.499651            && sh ms_avg_99p_lat.sh 20240326-014802.499651            && sh ms_total_even_odd_numreq.sh 20240326-014802.499651            && sh latency_cdf.sh 20240326-014802.499651
DONE
PARSING 20240326-014802.499651 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-014802.499651
ERROR: cat: /homes/inho/capybara-data/20240326-014802.499651.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-014802.499651.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-014802.499651.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-014802.499651.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-014802.499651, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-015110.863272
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-015110.863272, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 615084)
dpdk-ctrl.elf killed (pid 3260983)
KILLED CAPYBARA PROCESSES
PARSING 20240326-015110.863272 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-015110.863272            && sh ms_avg_99p_lat.sh 20240326-015110.863272            && sh ms_total_even_odd_numreq.sh 20240326-015110.863272            && sh latency_cdf.sh 20240326-015110.863272
DONE
PARSING 20240326-015110.863272 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-015110.863272
ERROR: cat: /homes/inho/capybara-data/20240326-015110.863272.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-015110.863272.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-015110.863272.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-015110.863272.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-015110.863272, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    # 'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-015201.979794
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


2    1    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-015201.979794, 2, 100, 0, 10000, 10, exponential, 10, 68, 68, 0, 0, 10.0, 83.0, 104.0, 104.0, 104.0, 1711417936, 0



iokerneld killed (pid 616574)
KILLED CAPYBARA PROCESSES
PARSING 20240326-015201.979794 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-015201.979794            && sh ms_avg_99p_lat.sh 20240326-015201.979794            && sh ms_total_even_odd_numreq.sh 20240326-015201.979794            && sh latency_cdf.sh 20240326-015201.979794
DONE
PARSING 20240326-015201.979794 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-015201.979794
ERROR: cat: /homes/inho/capybara-data/20240326-015201.979794.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240326-015201.979794.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240326-015201.979794.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240326-015201.979794.server_reply' for reading (No such file or directory)



KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-015201.979794, 2, 100, 0, 10000, 10, exponential, 10, 68, 68, 0, 0, 10.0, 83.0, 104.0, 104.0, 104.0, 1711417936, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
# LOADSHIFTS = '90000:100000/90000:100000'#'90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-015601.595782
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


2    1    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-015601.595782, 2, 100, 0, 10000, 10, exponential, 10, 70, 70, 0, 0, 10.0, 93.0, 95.0, 95.0, 95.0, 1711418176, 1711418176118189980



iokerneld killed (pid 619003)
KILLED CAPYBARA PROCESSES
PARSING 20240326-015601.595782 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-015601.595782            && sh ms_avg_99p_lat.sh 20240326-015601.595782            && sh ms_total_even_odd_numreq.sh 20240326-015601.595782            && sh latency_cdf.sh 20240326-015601.595782
DONE
PARSING 20240326-015601.595782 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-015601.595782
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-015601.595782, 2, 100, 0, 10000, 10, exponential, 10, 70, 70, 0, 0, 10.0, 93.0, 95.0, 95.0, 95.0, 1711418176, 1711418176118189980

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = False
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-015821.771175
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-015821.771175, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 620751)
KILLED CAPYBARA PROCESSES
PARSING 20240326-015821.771175 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-015821.771175            && sh ms_avg_99p_lat.sh 20240326-015821.771175            && sh ms_total_even_odd_numreq.sh 20240326-015821.771175            && sh latency_cdf.sh 20240326-015821.771175
DONE
PARSING 20240326-015821.771175 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-015821.771175
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-015821.771175, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    # 'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-015916.754907
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-015916.754907, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 622312)
KILLED CAPYBARA PROCESSES
PARSING 20240326-015916.754907 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-015916.754907            && sh ms_avg_99p_lat.sh 20240326-015916.754907            && sh ms_total_even_odd_numreq.sh 20240326-015916.754907            && sh latency_cdf.sh 20240326-015916.754907
DONE
PARSING 20240326-015916.754907 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-015916.754907
DONE
PARSING 20240326-015916.754907 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-015916.754907
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-015916.754907, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-020211.442889
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-020211.442889, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 624205)
KILLED CAPYBARA PROCESSES
PARSING 20240326-020211.442889 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-020211.442889            && sh ms_avg_99p_lat.sh 20240326-020211.442889            && sh ms_total_even_odd_numreq.sh 20240326-020211.442889            && sh latency_cdf.sh 20240326-020211.442889
DONE
PARSING 20240326-020211.442889 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-020211.442889
DONE
PARSING 20240326-020211.442889 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-020211.442889
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-020211.442889, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-020529.555926
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-020529.555926, 2, 100, 0, 0, 10, N/A



iokerneld killed (pid 626078)
KILLED CAPYBARA PROCESSES
PARSING 20240326-020529.555926 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-020529.555926            && sh ms_avg_99p_lat.sh 20240326-020529.555926            && sh ms_total_even_odd_numreq.sh 20240326-020529.555926            && sh latency_cdf.sh 20240326-020529.555926
DONE
PARSING 20240326-020529.555926 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-020529.555926
DONE
PARSING 20240326-020529.555926 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-020529.555926
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-020529.555926, 2, 100, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054002.898894
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054002.898894, 2, 100, 0, 0, 10, N/A



dpdk-ctrl.elf killed (pid 3270173)
iokerneld killed (pid 659565)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054002.898894 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054002.898894            && sh ms_avg_99p_lat.sh 20240326-054002.898894            && sh ms_total_even_odd_numreq.sh 20240326-054002.898894            && sh latency_cdf.sh 20240326-054002.898894
DONE
PARSING 20240326-054002.898894 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054002.898894
DONE
PARSING 20240326-054002.898894 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054002.898894
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054002.898894, 2, 100, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054111.723589
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054111.723589, 2, 100, 0, 0, 10, N/A



iokerneld killed (pid 661104)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054111.723589 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054111.723589            && sh ms_avg_99p_lat.sh 20240326-054111.723589            && sh ms_total_even_odd_numreq.sh 20240326-054111.723589            && sh latency_cdf.sh 20240326-054111.723589
DONE
PARSING 20240326-054111.723589 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054111.723589
DONE
PARSING 20240326-054111.723589 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054111.723589
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054111.723589, 2, 100, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054149.339032
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054149.339032, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 662564)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054149.339032 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054149.339032            && sh ms_avg_99p_lat.sh 20240326-054149.339032            && sh ms_total_even_odd_numreq.sh 20240326-054149.339032            && sh latency_cdf.sh 20240326-054149.339032
DONE
PARSING 20240326-054149.339032 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054149.339032
DONE
PARSING 20240326-054149.339032 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054149.339032
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054149.339032, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054256.959346
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054256.959346, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 664109)
dpdk-ctrl.elf killed (pid 3273631)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054256.959346 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054256.959346            && sh ms_avg_99p_lat.sh 20240326-054256.959346            && sh ms_total_even_odd_numreq.sh 20240326-054256.959346            && sh latency_cdf.sh 20240326-054256.959346
DONE
PARSING 20240326-054256.959346 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054256.959346
DONE
PARSING 20240326-054256.959346 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054256.959346
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054256.959346, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:20000,270000:20000,450000:20000,630000:20000,810000:20000/90000:100000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054440.987467
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054440.987467, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 665717)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054440.987467 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054440.987467            && sh ms_avg_99p_lat.sh 20240326-054440.987467            && sh ms_total_even_odd_numreq.sh 20240326-054440.987467            && sh latency_cdf.sh 20240326-054440.987467
DONE
PARSING 20240326-054440.987467 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054440.987467
DONE
PARSING 20240326-054440.987467 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054440.987467
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054440.987467, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.03 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054618.519398
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054618.519398, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 667319)
dpdk-ctrl.elf killed (pid 3275939)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054618.519398 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054618.519398            && sh ms_avg_99p_lat.sh 20240326-054618.519398            && sh ms_total_even_odd_numreq.sh 20240326-054618.519398            && sh latency_cdf.sh 20240326-054618.519398
DONE
PARSING 20240326-054618.519398 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054618.519398
DONE
PARSING 20240326-054618.519398 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054618.519398
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054618.519398, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.50
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054744.883536
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054744.883536, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 668918)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054744.883536 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054744.883536            && sh ms_avg_99p_lat.sh 20240326-054744.883536            && sh ms_total_even_odd_numreq.sh 20240326-054744.883536            && sh latency_cdf.sh 20240326-054744.883536
DONE
PARSING 20240326-054744.883536 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054744.883536
DONE
PARSING 20240326-054744.883536 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054744.883536
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054744.883536, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.52
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-054846.974487
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-054846.974487, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 670459)
dpdk-ctrl.elf killed (pid 3278264)
KILLED CAPYBARA PROCESSES
PARSING 20240326-054846.974487 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-054846.974487            && sh ms_avg_99p_lat.sh 20240326-054846.974487            && sh ms_total_even_odd_numreq.sh 20240326-054846.974487            && sh latency_cdf.sh 20240326-054846.974487
DONE
PARSING 20240326-054846.974487 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-054846.974487
DONE
PARSING 20240326-054846.974487 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-054846.974487
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-054846.974487, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.53
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-055048.167675
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-055048.167675, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 672103)
KILLED CAPYBARA PROCESSES
PARSING 20240326-055048.167675 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-055048.167675            && sh ms_avg_99p_lat.sh 20240326-055048.167675            && sh ms_total_even_odd_numreq.sh 20240326-055048.167675            && sh latency_cdf.sh 20240326-055048.167675
DONE
PARSING 20240326-055048.167675 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-055048.167675
DONE
PARSING 20240326-055048.167675 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-055048.167675
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-055048.167675, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.03 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-055159.343230
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-055159.343230, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 673642)
dpdk-ctrl.elf killed (pid 3280586)
KILLED CAPYBARA PROCESSES
PARSING 20240326-055159.343230 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-055159.343230            && sh ms_avg_99p_lat.sh 20240326-055159.343230            && sh ms_total_even_odd_numreq.sh 20240326-055159.343230            && sh latency_cdf.sh 20240326-055159.343230
DONE
PARSING 20240326-055159.343230 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-055159.343230
DONE
PARSING 20240326-055159.343230 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-055159.343230
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-055159.343230, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.03 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-055241.731865
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-055241.731865, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 675116)
KILLED CAPYBARA PROCESSES
PARSING 20240326-055241.731865 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-055241.731865            && sh ms_avg_99p_lat.sh 20240326-055241.731865            && sh ms_total_even_odd_numreq.sh 20240326-055241.731865            && sh latency_cdf.sh 20240326-055241.731865
DONE
PARSING 20240326-055241.731865 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-055241.731865
DONE
PARSING 20240326-055241.731865 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-055241.731865
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-055241.731865, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-055332.819813
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-055332.819813, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 676625)
KILLED CAPYBARA PROCESSES
PARSING 20240326-055332.819813 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-055332.819813            && sh ms_avg_99p_lat.sh 20240326-055332.819813            && sh ms_total_even_odd_numreq.sh 20240326-055332.819813            && sh latency_cdf.sh 20240326-055332.819813
DONE
PARSING 20240326-055332.819813 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-055332.819813
DONE
PARSING 20240326-055332.819813 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-055332.819813
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-055332.819813, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [10000]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-055436.331924
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-055436.331924, 2, 100, 0, 10000, 10, N/A



iokerneld killed (pid 678148)
dpdk-ctrl.elf killed (pid 3284045)
KILLED CAPYBARA PROCESSES
PARSING 20240326-055436.331924 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-055436.331924            && sh ms_avg_99p_lat.sh 20240326-055436.331924            && sh ms_total_even_odd_numreq.sh 20240326-055436.331924            && sh latency_cdf.sh 20240326-055436.331924
DONE
PARSING 20240326-055436.331924 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-055436.331924
DONE
PARSING 20240326-055436.331924 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-055436.331924
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-055436.331924, 2, 100, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
import os
import pandas as pd
import numpy as np

################## PATHS #####################
HOME = os.path.expanduser("~")
LOCAL = HOME.replace("/homes", "/local")
CAPYBARA_PATH = f'{HOME}/Capybara/capybara'
CALADAN_PATH = f'{HOME}/Capybara/caladan'
DATA_PATH = f'{HOME}/capybara-data'
PCAP_PATH = f'{LOCAL}/capybara-pcap'

################## CLUSTER CONFIG #####################
ALL_NODES = ['node1', 'node7', 'node8', 'node9']
CLIENT_NODE = 'node7'
FRONTEND_NODE = 'node8'
BACKEND_NODE = 'node9'
TCPDUMP_NODE = 'node1'
NODE8_IP = '10.0.1.8'
NODE8_MAC = '08:c0:eb:b6:e8:05'
NODE9_IP = '10.0.1.9'
NODE9_MAC = '08:c0:eb:b6:c5:ad'

################## BUILD CONFIG #####################
LIBOS = 'catnip'#'catnap', 'catnip'
FEATURES = [
    'tcp-migration',
    # 'manual-tcp-migration',
    # 'capy-log',
    # 'capy-profile',
    'capy-time-log',
    'server-reply-analysis',
]

################## TEST CONFIG #####################
NUM_BACKENDS = 2
SERVER_APP = 'http-server' # 'http-server', 'prism', 'redis-server'
CLIENT_APP = 'caladan' # 'wrk', 'caladan'
NUM_THREADS = [1] # for wrk load generator
REPEAT_NUM = 1

TCPDUMP = False
EVAL_MIG_DELAY = False
EVAL_POLL_INTERVAL = False
EVAL_LATENCY_TRACE = True
EVAL_SERVER_REPLY = True
EVAL_RPS_SIGNAL = True
EVAL_MIG_CPU_OVHD = False

################## WORKLOAD GENERATOR CONFIG #####################
# All time intervals are in ms, RPS are in KRPS.
PHASE_INTERVAL = 100
TOTAL_TIME = 5000 # Always in multiples of PHASE_INTERVAL
WARMUP_RPS = 100
SERVER_CAPACITY_RPS = 200 #450
TOTAL_RPS_MAX = int(SERVER_CAPACITY_RPS * 0.8) * NUM_BACKENDS
STRESS_FACTOR = 1 #1.25 
MAX_RPS_LIMITS = (150, 300)#(400, 650)
#PHASE_TIME_INTERVAL_LIMITS = (800, 1200)
RPS_LOWER_LIMIT = 10
# RPS_LIMITS = (10, 600)
DURATION_LIMITS = (5, 20)
TRANSITION_LIMITS = (5, 10)
RAND_SEED = 2402271237

################## ENV VARS #####################
### SERVER ###
RECV_QUEUE_THRESHOLD = 50
MIG_DELAYS = [0]
MAX_STAT_MIGS = [0]#[5000, 10000, 15000] # set element to '' if you don't want to set this env var
MIG_PER_N = [10]#[5000, 10000, 15000, 20000, 25000, 30000, 40000, 50000, 70000]
SESSION_DATA_SIZE = 1024 * 0 # bytes
MIN_THRESHOLD = 0.2
RPS_THRESHOLD = 0.55
THRESHOLD_EPSILON = 0.05 

CAPY_LOG = 'all' # 'all', 'mig'
REDIS_LOG = 0


### CALADAN ###
CLIENT_PPS = [i for i in range(10, 10 + 1, 50000)]#[i for i in range(100000, 1_300_001, 100000)]
import workload_spec_generator
# LOADSHIFTS = workload_spec_generator.main()
LOADSHIFTS = '90000:30000,270000:20000,450000:20000,630000:20000,810000:30000/90000:120000'
# LOADSHIFTS = ''
ZIPF_ALPHA = '1.2' # 0.9
ONOFF = '0' # '0', '1'
NUM_CONNECTIONS = [100]
RUNTIME = 1

#####################
# build command: run_eval.py [build [clean]]
# builds based on SERVER_APP
# cleans redis before building if clean


EXPTID: 20240326-055550.727540
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240326-055550.727540, 2, 100, 0, 0, 10, N/A



iokerneld killed (pid 679702)
KILLED CAPYBARA PROCESSES
PARSING 20240326-055550.727540 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240326-055550.727540            && sh ms_avg_99p_lat.sh 20240326-055550.727540            && sh ms_total_even_odd_numreq.sh 20240326-055550.727540            && sh latency_cdf.sh 20240326-055550.727540
DONE
PARSING 20240326-055550.727540 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240326-055550.727540
DONE
PARSING 20240326-055550.727540 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240326-055550.727540
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240326-055550.727540, 2, 100, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-023635.087135
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-023809.447424
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-023809.447424, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1726627)
KILLED CAPYBARA PROCESSES
PARSING 20240401-023809.447424 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-023809.447424            && sh ms_avg_99p_lat.sh 20240401-023809.447424            && sh ms_total_even_odd_numreq.sh 20240401-023809.447424            && sh latency_cdf.sh 20240401-023809.447424
DONE
PARSING 20240401-023809.447424 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-023809.447424
DONE
PARSING 20240401-023809.447424 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-023809.447424
Traceback (most recent call last):
  File "run_eval.py", line 741, in <module>
    run_eval()
  File "run_eval.py", line 674, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 506, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-023809.447424' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-023809.447424, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-023921.359542
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-023921.359542, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1728001)
KILLED CAPYBARA PROCESSES
PARSING 20240401-023921.359542 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-023921.359542            && sh ms_avg_99p_lat.sh 20240401-023921.359542            && sh ms_total_even_odd_numreq.sh 20240401-023921.359542            && sh latency_cdf.sh 20240401-023921.359542
DONE
PARSING 20240401-023921.359542 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-023921.359542
DONE
PARSING 20240401-023921.359542 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-023921.359542
Traceback (most recent call last):
  File "run_eval.py", line 741, in <module>
    run_eval()
  File "run_eval.py", line 674, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 506, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-023921.359542' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-023921.359542, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-024605.655199
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-024605.655199, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1730546)
KILLED CAPYBARA PROCESSES
PARSING 20240401-024605.655199 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-024605.655199            && sh ms_avg_99p_lat.sh 20240401-024605.655199            && sh ms_total_even_odd_numreq.sh 20240401-024605.655199            && sh latency_cdf.sh 20240401-024605.655199
DONE
PARSING 20240401-024605.655199 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-024605.655199
DONE
PARSING 20240401-024605.655199 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-024605.655199
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-024605.655199, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-025246.619070
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3305524 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=50 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240401-025246.619070.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-025246.619070, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 1732847)
dpdk-ctrl.elf killed (pid 3305431)
KILLED CAPYBARA PROCESSES
PARSING 20240401-025246.619070 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-025246.619070            && sh ms_avg_99p_lat.sh 20240401-025246.619070            && sh ms_total_even_odd_numreq.sh 20240401-025246.619070            && sh latency_cdf.sh 20240401-025246.619070
DONE
PARSING 20240401-025246.619070 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-025246.619070
DONE
PARSING 20240401-025246.619070 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-025246.619070
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-025246.619070, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-025635.154727
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3306700 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=50 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240401-025635.154727.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-025635.154727, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 1736272)
KILLED CAPYBARA PROCESSES
PARSING 20240401-025635.154727 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-025635.154727            && sh ms_avg_99p_lat.sh 20240401-025635.154727            && sh ms_total_even_odd_numreq.sh 20240401-025635.154727            && sh latency_cdf.sh 20240401-025635.154727
DONE
PARSING 20240401-025635.154727 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-025635.154727
DONE
PARSING 20240401-025635.154727 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-025635.154727
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-025635.154727, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-025759.311407
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-025759.311407, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1737869)
KILLED CAPYBARA PROCESSES
PARSING 20240401-025759.311407 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-025759.311407            && sh ms_avg_99p_lat.sh 20240401-025759.311407            && sh ms_total_even_odd_numreq.sh 20240401-025759.311407            && sh latency_cdf.sh 20240401-025759.311407
DONE
PARSING 20240401-025759.311407 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-025759.311407
DONE
PARSING 20240401-025759.311407 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-025759.311407
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-025759.311407, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-032647.603368
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-032647.603368, 2, 100, 0, 10, 0, 10, N/A



iokerneld killed (pid 1743750)
KILLED CAPYBARA PROCESSES
PARSING 20240401-032647.603368 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-032647.603368            && sh ms_avg_99p_lat.sh 20240401-032647.603368            && sh ms_total_even_odd_numreq.sh 20240401-032647.603368            && sh latency_cdf.sh 20240401-032647.603368
DONE
PARSING 20240401-032647.603368 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-032647.603368
DONE
PARSING 20240401-032647.603368 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-032647.603368
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-032647.603368, 2, 100, 0, 10, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-033825.015725
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-033825.015725, 2, 100, 0, 100, 0, 10, N/A



iokerneld killed (pid 1746702)
KILLED CAPYBARA PROCESSES
PARSING 20240401-033825.015725 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-033825.015725            && sh ms_avg_99p_lat.sh 20240401-033825.015725            && sh ms_total_even_odd_numreq.sh 20240401-033825.015725            && sh latency_cdf.sh 20240401-033825.015725
DONE
PARSING 20240401-033825.015725 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-033825.015725
DONE
PARSING 20240401-033825.015725 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-033825.015725
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-033825.015725, 2, 100, 0, 100, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-034153.390583
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3311520 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=1000 MIG_DELAY=0 MAX_REACTIVE_MIGS=100 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240401-034153.390583.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-034153.390583, 2, 100, 0, 100, 0, 10, N/A



iokerneld killed (pid 1748579)
KILLED CAPYBARA PROCESSES
PARSING 20240401-034153.390583 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-034153.390583            && sh ms_avg_99p_lat.sh 20240401-034153.390583            && sh ms_total_even_odd_numreq.sh 20240401-034153.390583            && sh latency_cdf.sh 20240401-034153.390583
DONE
PARSING 20240401-034153.390583 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-034153.390583
DONE
PARSING 20240401-034153.390583 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-034153.390583
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-034153.390583, 2, 100, 0, 100, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-034343.991387
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3312679 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=1000 MIG_DELAY=0 MAX_REACTIVE_MIGS=100 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.55 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240401-034343.991387.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-034343.991387, 2, 100, 0, 100, 0, 10, N/A



iokerneld killed (pid 1750245)
KILLED CAPYBARA PROCESSES
PARSING 20240401-034343.991387 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-034343.991387            && sh ms_avg_99p_lat.sh 20240401-034343.991387            && sh ms_total_even_odd_numreq.sh 20240401-034343.991387            && sh latency_cdf.sh 20240401-034343.991387
DONE
PARSING 20240401-034343.991387 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-034343.991387
DONE
PARSING 20240401-034343.991387 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-034343.991387
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-034343.991387, 2, 100, 0, 100, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-034523.259820
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-034603.159434
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-034603.159434, 2, 100, 0, 100, 0, 10, N/A



iokerneld killed (pid 1752237)
KILLED CAPYBARA PROCESSES
PARSING 20240401-034603.159434 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-034603.159434            && sh ms_avg_99p_lat.sh 20240401-034603.159434            && sh ms_total_even_odd_numreq.sh 20240401-034603.159434            && sh latency_cdf.sh 20240401-034603.159434
DONE
PARSING 20240401-034603.159434 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-034603.159434
DONE
PARSING 20240401-034603.159434 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-034603.159434
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-034603.159434, 2, 100, 0, 100, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-034936.991651
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-034936.991651, 2, 100, 0, 100, 0, 10, N/A



iokerneld killed (pid 1754155)
KILLED CAPYBARA PROCESSES
PARSING 20240401-034936.991651 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-034936.991651            && sh ms_avg_99p_lat.sh 20240401-034936.991651            && sh ms_total_even_odd_numreq.sh 20240401-034936.991651            && sh latency_cdf.sh 20240401-034936.991651
DONE
PARSING 20240401-034936.991651 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-034936.991651
DONE
PARSING 20240401-034936.991651 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-034936.991651
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-034936.991651, 2, 100, 0, 100, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-035549.708448
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-035549.708448, 2, 100, 0, 100, 0, 10, N/A



iokerneld killed (pid 1756369)
KILLED CAPYBARA PROCESSES
PARSING 20240401-035549.708448 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-035549.708448            && sh ms_avg_99p_lat.sh 20240401-035549.708448            && sh ms_total_even_odd_numreq.sh 20240401-035549.708448            && sh latency_cdf.sh 20240401-035549.708448
DONE
PARSING 20240401-035549.708448 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-035549.708448
DONE
PARSING 20240401-035549.708448 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-035549.708448
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-035549.708448, 2, 100, 0, 100, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-035857.299078
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-035857.299078, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1758215)
dpdk-ctrl.elf killed (pid 3317474)
KILLED CAPYBARA PROCESSES
PARSING 20240401-035857.299078 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-035857.299078            && sh ms_avg_99p_lat.sh 20240401-035857.299078            && sh ms_total_even_odd_numreq.sh 20240401-035857.299078            && sh latency_cdf.sh 20240401-035857.299078
DONE
PARSING 20240401-035857.299078 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-035857.299078
DONE
PARSING 20240401-035857.299078 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-035857.299078
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-035857.299078, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-040521.287580
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-040521.287580, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1760433)
dpdk-ctrl.elf killed (pid 3318654)
KILLED CAPYBARA PROCESSES
PARSING 20240401-040521.287580 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-040521.287580            && sh ms_avg_99p_lat.sh 20240401-040521.287580            && sh ms_total_even_odd_numreq.sh 20240401-040521.287580            && sh latency_cdf.sh 20240401-040521.287580
DONE
PARSING 20240401-040521.287580 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-040521.287580
DONE
PARSING 20240401-040521.287580 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-040521.287580
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-040521.287580, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240401-040740.955589
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240401-040740.955589, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1762150)
KILLED CAPYBARA PROCESSES
PARSING 20240401-040740.955589 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240401-040740.955589            && sh ms_avg_99p_lat.sh 20240401-040740.955589            && sh ms_total_even_odd_numreq.sh 20240401-040740.955589            && sh latency_cdf.sh 20240401-040740.955589
DONE
PARSING 20240401-040740.955589 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240401-040740.955589
DONE
PARSING 20240401-040740.955589 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240401-040740.955589
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240401-040740.955589, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-010716.295820
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-010716.295820, 2, 100, 0, 0, 10000, 10, N/A



iokerneld killed (pid 1923456)
KILLED CAPYBARA PROCESSES
PARSING 20240402-010716.295820 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-010716.295820            && sh ms_avg_99p_lat.sh 20240402-010716.295820            && sh ms_total_even_odd_numreq.sh 20240402-010716.295820            && sh latency_cdf.sh 20240402-010716.295820
DONE
PARSING 20240402-010716.295820 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-010716.295820
DONE
PARSING 20240402-010716.295820 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-010716.295820
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-010716.295820, 2, 100, 0, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-011000.123969
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-011000.123969, 2, 100, 0, 0, 10000, 10, N/A



iokerneld killed (pid 1925255)
KILLED CAPYBARA PROCESSES
PARSING 20240402-011000.123969 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-011000.123969            && sh ms_avg_99p_lat.sh 20240402-011000.123969            && sh ms_total_even_odd_numreq.sh 20240402-011000.123969            && sh latency_cdf.sh 20240402-011000.123969
DONE
PARSING 20240402-011000.123969 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-011000.123969
DONE
PARSING 20240402-011000.123969 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-011000.123969
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-011000.123969, 2, 100, 0, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-011329.154617
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-011329.154617, 2, 100, 0, 0, 10000, 10, N/A



iokerneld killed (pid 1927187)
KILLED CAPYBARA PROCESSES
PARSING 20240402-011329.154617 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-011329.154617            && sh ms_avg_99p_lat.sh 20240402-011329.154617            && sh ms_total_even_odd_numreq.sh 20240402-011329.154617            && sh latency_cdf.sh 20240402-011329.154617
DONE
PARSING 20240402-011329.154617 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-011329.154617
DONE
PARSING 20240402-011329.154617 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-011329.154617
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-011329.154617, 2, 100, 0, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-012538.703484
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-012538.703484, 2, 100, 0, 0, 10000, 10, N/A



iokerneld killed (pid 1930302)
KILLED CAPYBARA PROCESSES
PARSING 20240402-012538.703484 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-012538.703484            && sh ms_avg_99p_lat.sh 20240402-012538.703484            && sh ms_total_even_odd_numreq.sh 20240402-012538.703484            && sh latency_cdf.sh 20240402-012538.703484
DONE
PARSING 20240402-012538.703484 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-012538.703484
DONE
PARSING 20240402-012538.703484 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-012538.703484
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-012538.703484, 2, 100, 0, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-012823.507020
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3329703 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=200 MIG_DELAY=0 MAX_REACTIVE_MIGS=10000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=0.2 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240402-012823.507020.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-012823.507020, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1932092)
KILLED CAPYBARA PROCESSES
PARSING 20240402-012823.507020 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-012823.507020            && sh ms_avg_99p_lat.sh 20240402-012823.507020            && sh ms_total_even_odd_numreq.sh 20240402-012823.507020            && sh latency_cdf.sh 20240402-012823.507020
DONE
PARSING 20240402-012823.507020 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-012823.507020
DONE
PARSING 20240402-012823.507020 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-012823.507020
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-012823.507020, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-012947.663122
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-012947.663122, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1933675)
KILLED CAPYBARA PROCESSES
PARSING 20240402-012947.663122 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-012947.663122            && sh ms_avg_99p_lat.sh 20240402-012947.663122            && sh ms_total_even_odd_numreq.sh 20240402-012947.663122            && sh latency_cdf.sh 20240402-012947.663122
DONE
PARSING 20240402-012947.663122 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-012947.663122
DONE
PARSING 20240402-012947.663122 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-012947.663122
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-012947.663122, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-013417.363457
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-013417.363457, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1935693)
KILLED CAPYBARA PROCESSES
PARSING 20240402-013417.363457 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-013417.363457            && sh ms_avg_99p_lat.sh 20240402-013417.363457            && sh ms_total_even_odd_numreq.sh 20240402-013417.363457            && sh latency_cdf.sh 20240402-013417.363457
DONE
PARSING 20240402-013417.363457 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-013417.363457
DONE
PARSING 20240402-013417.363457 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-013417.363457
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-013417.363457, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-013717.931975
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-013717.931975, 2, 100, 0, 0, 10000, 10, N/A



iokerneld killed (pid 1937520)
KILLED CAPYBARA PROCESSES
PARSING 20240402-013717.931975 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-013717.931975            && sh ms_avg_99p_lat.sh 20240402-013717.931975            && sh ms_total_even_odd_numreq.sh 20240402-013717.931975            && sh latency_cdf.sh 20240402-013717.931975
DONE
PARSING 20240402-013717.931975 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-013717.931975
DONE
PARSING 20240402-013717.931975 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-013717.931975
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-013717.931975, 2, 100, 0, 0, 10000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-014100.907673
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-014100.907673, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1939443)
KILLED CAPYBARA PROCESSES
PARSING 20240402-014100.907673 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-014100.907673            && sh ms_avg_99p_lat.sh 20240402-014100.907673            && sh ms_total_even_odd_numreq.sh 20240402-014100.907673            && sh latency_cdf.sh 20240402-014100.907673
DONE
PARSING 20240402-014100.907673 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-014100.907673
DONE
PARSING 20240402-014100.907673 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-014100.907673
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-014100.907673, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-014402.275629
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-014402.275629, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1941249)
KILLED CAPYBARA PROCESSES
PARSING 20240402-014402.275629 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-014402.275629            && sh ms_avg_99p_lat.sh 20240402-014402.275629            && sh ms_total_even_odd_numreq.sh 20240402-014402.275629            && sh latency_cdf.sh 20240402-014402.275629
DONE
PARSING 20240402-014402.275629 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-014402.275629
DONE
PARSING 20240402-014402.275629 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-014402.275629
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-014402.275629, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-014647.587396
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-014647.587396, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1943052)
KILLED CAPYBARA PROCESSES
PARSING 20240402-014647.587396 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-014647.587396            && sh ms_avg_99p_lat.sh 20240402-014647.587396            && sh ms_total_even_odd_numreq.sh 20240402-014647.587396            && sh latency_cdf.sh 20240402-014647.587396
DONE
PARSING 20240402-014647.587396 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-014647.587396
DONE
PARSING 20240402-014647.587396 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-014647.587396
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-014647.587396, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-014907.807561
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-014907.807561, 2, 100, 0, 10000, 0, 10, N/A



iokerneld killed (pid 1944767)
KILLED CAPYBARA PROCESSES
PARSING 20240402-014907.807561 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-014907.807561            && sh ms_avg_99p_lat.sh 20240402-014907.807561            && sh ms_total_even_odd_numreq.sh 20240402-014907.807561            && sh latency_cdf.sh 20240402-014907.807561
DONE
PARSING 20240402-014907.807561 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-014907.807561
DONE
PARSING 20240402-014907.807561 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-014907.807561
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-014907.807561, 2, 100, 0, 10000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-015155.555232
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-015155.555232, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1946550)
KILLED CAPYBARA PROCESSES
PARSING 20240402-015155.555232 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-015155.555232            && sh ms_avg_99p_lat.sh 20240402-015155.555232            && sh ms_total_even_odd_numreq.sh 20240402-015155.555232            && sh latency_cdf.sh 20240402-015155.555232
DONE
PARSING 20240402-015155.555232 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240402-015155.555232
DONE
PARSING 20240402-015155.555232 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-015155.555232
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-015155.555232, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-021809.144001
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
thread '<unnamed>' panicked at src/main.rs:1813:135:
called `Option::unwrap()` on a `None` value
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 1957833 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-65000:5000,65000:12000,65000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-54000:7000,54000:8000,54000-43000:6000,43000:17000,43000-42000:5000,42000:12000,42000-16000:5000,16000:17000,16000-9000:6000,9000:6000,9000-12000:8000,12000:8000,12000-10000:9000,10000:18000,10000-12000:5000,12000:9000,12000-9000:7000,9000:2000,9000-45000:5000,45000:11000,45000-10000:7000,10000:16000,10000-36000:5000,36000:12000,36000-24000:9000,24000:9000,24000-19000:5000,19000:7000,19000-30000:10000,30000:4000,30000-223000:5000,223000:16000,223000-48000:8000,48000:11000,48000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:13000,128000-128000:5000,128000:12000,128000-76000:9000,76000:6000,76000-90000:10000,90000:7000,90000-40000:6000,40000:19000,40000-104000:6000,104000:20000,104000-103000:5000,103000:20000,103000-51000:7000,51000:5000,51000-58000:8000,58000:12000,58000-29000:5000,29000:15000,29000-40000:7000,40000:16000,40000-176000:5000,176000:17000,176000-39000:6000,39000:20000,39000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:7000,103000-18000:5000,18000:18000,18000-15000:5000,15000:6000,15000-16000:7000,16000:18000,16000-13000:7000,13000:9000,13000-9000:6000,9000:8000,9000-17000:8000,17000:3000,17000-59000:5000,59000:17000,59000-40000:5000,40000:9000,40000-13000:5000,13000:6000,13000-45000:10000,45000:9000,45000-58000:10000,58000:24000,58000-247000:5000,247000:18000,247000-13000:10000,13000:8000,13000-114000:7000,114000:19000,114000-219000:10000,219000:23000,219000-167000:5000,167000:10000,167000-96000:10000,96000:10000,96000-120000:8000,120000:9000,120000-39000:9000,39000:16000,39000-46000:9000,46000:14000,46000-187000:5000,187000:20000,187000-114000:8000,114000:19000,114000-106000:6000,106000:12000,106000-150000:8000,150000:22000,150000-243000:5000,243000:11000,243000-37000:9000,37000:11000,37000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:14000,82000-199000:5000,199000:10000,199000-134000:7000,134000:15000,134000-160000:10000,160000:20000,160000-117000:7000,117000:13000,117000-131000:8000,131000:5000,131000-14000:5000,14000:6000,14000-14000:8000,14000:11000,14000-13000:9000,13000:17000,13000-10000:5000,10000:9000,10000-9000:6000,9000:24000,9000-212000:5000,212000:7000,212000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-32000:5000,32000:18000,32000-31000:9000,31000:6000,31000-14000:5000,14000:10000,14000-24000:10000,24000:19000,24000-16000:10000,16000:8000,16000-270000:5000,270000:20000,270000-69000:6000,69000:11000,69000-254000:6000,254000:13000,254000-50000:9000,50000:15000,50000-221000:10000,221000:5000,221000-265000:5000,265000:10000,265000-175000:5000,175000:20000,175000-119000:10000,119000:7000,119000-265000:10000,265000:11000,265000-101000:6000,101000:5000,101000-17000:9000,17000:2000,17000-43000:5000,43000:8000,43000-21000:10000,21000:8000,21000-20000:8000,20000:15000,20000-28000:7000,28000:20000,28000-17000:5000,17000:14000,17000-114000:5000,114000:8000,114000-46000:9000,46000:18000,46000-111000:10000,111000:8000,111000-57000:6000,57000:18000,57000-31000:7000,31000:11000,31000-74000:5000,74000:6000,74000-34000:8000,34000:6000,34000-53000:8000,53000:16000,53000-43000:9000,43000:14000,43000-61000:5000,61000:23000,61000-39000:5000,39000:9000,39000-18000:6000,18000:7000,18000-10000:9000,10000:5000,10000-35000:7000,35000:19000,35000-17000:9000,17000:9000,17000-29000:8000,29000:7000,29000-270000:5000,270000:20000,270000-145000:7000,145000:20000,145000-194000:9000,194000:7000,194000-254000:10000,254000:22000,254000-127000:5000,127000:16000,127000-47000:9000,47000:16000,47000-19000:7000,19000:11000,19000-82000:10000,82000:7000,82000-102000:10000,102000:9000,102000-127000:5000,127000:5000,127000-49000:9000,49000:13000,49000-9000:8000,9000:17000,9000-72000:6000,72000:10000,72000-106000:9000,106000:18000,106000-122000:5000,122000:14000,122000-97000:6000,97000:10000,97000-120000:9000,120000:13000,120000-122000:8000,122000:16000,122000-34000:6000,34000:13000,34000-13000:5000,13000:16000,13000-12000:7000,12000:13000,12000-9000:8000,9000:14000,9000-10000:5000,10000:5000,10000-9000:7000,9000:20000,9000-182000:5000,182000:6000,182000-41000:7000,41000:11000,41000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:4000,173000-158000:5000,158000:7000,158000-99000:6000,99000:8000,99000-154000:5000,154000:8000,154000-149000:10000,149000:12000,149000-41000:8000,41000:17000,41000-56000:6000,56000:8000,56000-180000:5000,180000:5000,180000-71000:6000,71000:18000,71000-59000:6000,59000:5000,59000-59000:6000,59000:15000,59000-124000:5000,124000:10000,124000-41000:9000,41000:10000,41000-41000:5000,41000:20000,41000-23000:5000,23000:15000,23000-37000:8000,37000:6000,37000-29000:8000,29000:16000,29000-32000:7000,32000:10000,32000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-98000:5000,98000:6000,98000-74000:7000,74000:16000,74000-22000:8000,22000:5000,22000-60000:9000,60000:19000,60000-18000:7000,18000:18000,18000-154000:5000,154000:9000,154000-153000:6000,153000:16000,153000-68000:8000,68000:13000,68000-58000:10000,58000:13000,58000-68000:6000,68000:14000,68000-156000:5000,156000:14000,156000-142000:6000,142000:9000,142000-35000:10000,35000:14000,35000-37000:8000,37000:19000,37000-29000:8000,29000:7000,29000-130000:5000,130000:20000,130000-58000:9000,58000:15000,58000-116000:7000,116000:6000,116000-28000:8000,28000:8000,28000-82000:8000,82000:14000,82000-270000:5000,270000:15000,270000-189000:10000,189000:12000,189000-11000:6000,11000:18000,11000-251000:9000,251000:25000,251000-127000:5000,127000:8000,127000-56000:6000,56000:11000,56000-17000:5000,17000:9000,17000-94000:7000,94000:9000,94000-110000:8000,110000:9000,110000-49000:9000,49000:14000,49000-54000:5000,54000:20000,54000-39000:6000,39000:7000,39000-41000:9000,41000:14000,41000-27000:6000,27000:8000,27000-54000:6000,54000:19000,54000-270000:5000,270000:8000,270000-220000:6000,220000:6000,220000-82000:10000,82000:20000,82000-266000:10000,266000:16000,266000-112000:10000,112000:9000,112000-228000:5000,228000:16000,228000-62000:9000,62000:14000,62000-166000:7000,166000:5000,166000-226000:6000,226000:8000,226000-29000:10000,29000:6000,29000-168000:10000,168000:4000,168000-46000:5000,46000:15000,46000-30000:5000,30000:7000,30000-41000:9000,41000:15000,41000-11000:9000,11000:11000,11000-24000:10000,24000:14000,24000-194000:5000,194000:13000,194000-174000:7000,174000:20000,174000-156000:9000,156000:12000,156000-62000:6000,62000:13000,62000-183000:7000,183000:8000,183000-10000:5000,10000:9000,10000-9000:8000,9000:12000,9000-10000:9000,10000:8000,10000-10000:9000,10000:15000,10000-10000:10000,10000:15000,10000-202000:5000,202000:15000,202000-33000:5000,33000:9000,33000-159000:6000,159000:12000,159000-197000:7000,197000:20000,197000-67000:7000,67000:14000,67000-231000:5000,231000:17000,231000-67000:7000,67000:18000,67000-180000:8000,180000:16000,180000-183000:7000,183000:22000,183000-251000:5000,251000:14000,251000-80000:6000,80000:8000,80000-193000:9000,193000:17000,193000-243000:9000,243000:5000,243000-200000:10000,200000:17000,200000-15000:5000,15000:15000,15000-10000:7000,10000:16000,10000-11000:8000,11000:6000,11000-10000:8000,10000:11000,10000-13000:7000,13000:17000/100000:100000,100000-215000:5000,215000:18000,215000-98000:5000,98000:11000,98000-97000:10000,97000:13000,97000-209000:10000,209000:16000,209000-194000:5000,194000:7000,194000-264000:5000,264000:11000,264000-28000:6000,28000:18000,28000-172000:9000,172000:7000,172000-119000:7000,119000:14000,119000-54000:6000,54000:9000,54000-160000:7000,160000:1000,160000-235000:5000,235000:17000,235000-60000:6000,60000:12000,60000-148000:6000,148000:19000,148000-144000:7000,144000:13000,144000-137000:10000,137000:5000,137000-57000:5000,57000:19000,57000-39000:10000,39000:14000,39000-15000:7000,15000:15000,15000-19000:9000,19000:21000,19000-152000:5000,152000:20000,152000-23000:9000,23000:11000,23000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-177000:5000,177000:16000,177000-158000:10000,158000:18000,158000-27000:5000,27000:13000,27000-103000:7000,103000:19000,103000-57000:5000,57000:2000,57000-104000:5000,104000:14000,104000-18000:10000,18000:8000,18000-79000:6000,79000:9000,79000-82000:5000,82000:19000,82000-53000:7000,53000:17000,53000-262000:5000,262000:11000,262000-196000:9000,196000:10000,196000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:18000,218000-221000:5000,221000:6000,221000-159000:10000,159000:5000,159000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:11000,29000-11000:6000,11000:12000,11000-33000:5000,33000:7000,33000-9000:7000,9000:10000,9000-13000:10000,13000:19000,13000-10000:7000,10000:8000,10000-26000:7000,26000:20000,26000-113000:5000,113000:7000,113000-112000:10000,112000:5000,112000-38000:10000,38000:17000,38000-82000:5000,82000:8000,82000-30000:9000,30000:16000,30000-89000:5000,89000:3000,89000-93000:5000,93000:20000,93000-46000:8000,46000:5000,46000-21000:8000,21000:15000,21000-60000:10000,60000:19000,60000-90000:8000,90000:2000,90000-37000:5000,37000:20000,37000-30000:5000,30000:8000,30000-16000:8000,16000:18000,16000-28000:6000,28000:8000,28000-30000:7000,30000:15000,30000-81000:5000,81000:17000,81000-73000:8000,73000:5000,73000-79000:7000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:5000,13000-266000:5000,266000:17000,266000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:13000,170000-68000:5000,68000:9000,68000-25000:8000,25000:8000,25000-29000:7000,29000:14000,29000-39000:8000,39000:10000,39000-22000:8000,22000:11000,22000-41000:10000,41000:2000,41000-248000:5000,248000:8000,248000-130000:7000,130000:5000,130000-242000:8000,242000:12000,242000-203000:5000,203000:5000,203000-133000:8000,133000:11000,133000-145000:8000,145000:18000,145000-10000:5000,10000:19000,10000-9000:9000,9000:6000,9000-9000:9000,9000:17000,9000-9000:10000,9000:10000,9000-9000:9000,9000:6000,9000-15000:5000,15000:15000,15000-12000:5000,12000:8000,12000-9000:5000,9000:9000,9000-14000:9000,14000:6000,14000-10000:7000,10000:5000,10000-12000:5000,12000:21000,12000-237000:5000,237000:14000,237000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:16000,117000-192000:6000,192000:9000,192000-166000:5000,166000:10000,166000-133000:10000,133000:7000,133000-64000:9000,64000:7000,64000-30000:9000,30000:9000,30000-25000:9000,25000:9000,25000-52000:5000,52000:11000,52000-206000:5000,206000:15000,206000-141000:8000,141000:17000,141000-20000:9000,20000:18000,20000-36000:10000,36000:7000,36000-158000:9000,158000:2000,158000-241000:5000,241000:19000,241000-200000:9000,200000:19000,200000-124000:5000,124000:6000,124000-142000:8000,142000:20000,142000-237000:7000,237000:2000,237000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:5000,10000:18000,10000-10000:7000,10000:19000,10000-10000:8000,10000:7000,10000-153000:5000,153000:8000,153000-113000:8000,113000:12000,113000-147000:8000,147000:13000,147000-42000:9000,42000:19000,42000-56000:5000,56000:13000,56000-153000:5000,153000:18000,153000-63000:6000,63000:13000,63000-76000:5000,76000:12000,76000-129000:10000,129000:11000,129000-70000:7000,70000:13000,70000-158000:5000,158000:10000,158000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-58000:6000,58000:19000,58000-114000:9000,114000:13000,114000-267000:5000,267000:10000,267000-28000:7000,28000:14000,28000-247000:10000,247000:18000,247000-55000:8000,55000:9000,55000-87000:10000,87000:9000,87000-98000:5000,98000:7000,98000-58000:8000,58000:8000,58000-31000:7000,31000:10000,31000-55000:8000,55000:20000,55000-16000:9000,16000:10000,16000-26000:7000,26000:1000,26000-122000:5000,122000:16000,122000-92000:8000,92000:15000,92000-13000:7000,13000:11000,13000-43000:8000,43000:13000,43000-85000:9000,85000:8000,85000-100000:5000,100000:10000,100000-44000:8000,44000:7000,44000-86000:8000,86000:18000,86000-39000:8000,39000:7000,39000-37000:10000,37000:19000,37000-239000:5000,239000:5000,239000-38000:10000,38000:19000,38000-36000:7000,36000:19000,36000-162000:10000,162000:10000,162000-50000:7000,50000:8000,50000-270000:5000,270000:15000,270000-110000:6000,110000:13000,110000-116000:5000,116000:12000,116000-137000:5000,137000:8000,137000-170000:8000,170000:5000,170000-108000:5000,108000:13000,108000-182000:5000,182000:19000,182000-132000:10000,132000:17000,132000-41000:7000,41000:17000,41000-144000:7000,144000:18000,144000-126000:5000,126000:20000,126000-96000:8000,96000:17000,96000-47000:9000,47000:11000,47000-95000:10000,95000:20000,95000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-150000:5000,150000:6000,150000-143000:8000,143000:16000,143000-32000:7000,32000:19000,32000-128000:6000,128000:18000,128000-131000:6000,131000:9000,131000-10000:5000,10000:15000,10000-10000:9000,10000:19000,10000-10000:7000,10000:5000,10000-10000:7000,10000:18000,10000-10000:8000,10000:7000,10000-153000:5000,153000:14000,153000-24000:9000,24000:15000,24000-15000:8000,15000:20000,15000-145000:9000,145000:20000,145000-226000:5000,226000:16000,226000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-190000:6000,190000:16000,190000-75000:8000,75000:1000,75000-10000:5000,10000:7000,10000-10000:9000,10000:11000,10000-9000:9000,9000:12000,9000-10000:7000,10000:12000,10000-10000:5000,10000:10000,10000-10000:8000,10000:5000,10000-52000:5000,52000:13000,52000-25000:9000,25000:18000,25000-33000:5000,33000:13000,33000-49000:5000,49000:12000,49000-50000:8000,50000:12000,50000-234000:5000,234000:18000,234000-184000:9000,184000:7000,184000-141000:7000,141000:12000,141000-93000:5000,93000:16000,93000-186000:5000,186000:16000,186000-86000:5000,86000:7000,86000-86000:6000,86000:13000,86000-38000:7000,38000:8000,38000-17000:7000,17000:7000,17000-83000:8000,83000:12000,83000-52000:9000,52000:11000,52000-270000:5000,270000:7000,270000-60000:5000,60000:19000,60000-178000:9000,178000:6000,178000-63000:9000,63000:14000,63000-197000:6000,197000:20000,197000-78000:5000,78000:19000,78000-36000:6000,36000:8000,36000-43000:7000,43000:9000,43000-47000:7000,47000:5000,47000-78000:7000,78000:13000,78000-50000:10000,50000:4000,50000-49000:5000,49000:12000,49000-31000:7000,31000:20000,31000-44000:7000,44000:17000,44000-40000:5000,40000:16000,40000-18000:8000,18000:3000,18000-29000:5000,29000:11000,29000-19000:10000,19000:20000,19000-27000:10000,27000:14000,27000-10000:5000,10000:5000,10000-14000:7000,14000:13000,14000-265000:5000,265000:14000,265000-128000:8000,128000:16000,128000-89000:10000,89000:10000,89000-251000:6000,251000:17000,251000-61000:9000,61000:5000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240402-021809.144001 > /homes/inho/capybara-data/20240402-021809.144001.client
================ TEST COMPLETE =================

[RESULT]20240402-021809.144001, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1957607)
KILLED CAPYBARA PROCESSES
PARSING 20240402-021809.144001 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-021809.144001            && sh ms_avg_99p_lat.sh 20240402-021809.144001            && sh ms_total_even_odd_numreq.sh 20240402-021809.144001            && sh latency_cdf.sh 20240402-021809.144001
DONE
PARSING 20240402-021809.144001 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-021809.144001
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-021809.144001, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-021927.194623
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-021927.194623, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1959946)
KILLED CAPYBARA PROCESSES
PARSING 20240402-021927.194623 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-021927.194623            && sh ms_avg_99p_lat.sh 20240402-021927.194623            && sh ms_total_even_odd_numreq.sh 20240402-021927.194623            && sh latency_cdf.sh 20240402-021927.194623
DONE
PARSING 20240402-021927.194623 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-021927.194623
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-021927.194623, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-022337.495518
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-022337.495518, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1961967)
KILLED CAPYBARA PROCESSES
PARSING 20240402-022337.495518 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-022337.495518            && sh ms_avg_99p_lat.sh 20240402-022337.495518            && sh ms_total_even_odd_numreq.sh 20240402-022337.495518            && sh latency_cdf.sh 20240402-022337.495518
DONE
PARSING 20240402-022337.495518 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-022337.495518
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-022337.495518, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-022531.483523
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-022531.483523, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1963668)
KILLED CAPYBARA PROCESSES
PARSING 20240402-022531.483523 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-022531.483523            && sh ms_avg_99p_lat.sh 20240402-022531.483523            && sh ms_total_even_odd_numreq.sh 20240402-022531.483523            && sh latency_cdf.sh 20240402-022531.483523
DONE
PARSING 20240402-022531.483523 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-022531.483523
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-022531.483523, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-022654.982979
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-022654.982979, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1965279)
KILLED CAPYBARA PROCESSES
PARSING 20240402-022654.982979 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-022654.982979            && sh ms_avg_99p_lat.sh 20240402-022654.982979            && sh ms_total_even_odd_numreq.sh 20240402-022654.982979            && sh latency_cdf.sh 20240402-022654.982979
DONE
PARSING 20240402-022654.982979 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-022654.982979
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-022654.982979, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-023003.075362
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-023003.075362, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1967123)
dpdk-ctrl.elf killed (pid 3346279)
KILLED CAPYBARA PROCESSES
PARSING 20240402-023003.075362 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-023003.075362            && sh ms_avg_99p_lat.sh 20240402-023003.075362            && sh ms_total_even_odd_numreq.sh 20240402-023003.075362            && sh latency_cdf.sh 20240402-023003.075362
DONE
PARSING 20240402-023003.075362 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-023003.075362
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-023003.075362, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-023557.098491
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-023557.098491, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1975137)
KILLED CAPYBARA PROCESSES
PARSING 20240402-023557.098491 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-023557.098491            && sh ms_avg_99p_lat.sh 20240402-023557.098491            && sh ms_total_even_odd_numreq.sh 20240402-023557.098491            && sh latency_cdf.sh 20240402-023557.098491
DONE
PARSING 20240402-023557.098491 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-023557.098491
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-023557.098491, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-023846.163407
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-023846.163407, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1976953)
KILLED CAPYBARA PROCESSES
PARSING 20240402-023846.163407 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-023846.163407            && sh ms_avg_99p_lat.sh 20240402-023846.163407            && sh ms_total_even_odd_numreq.sh 20240402-023846.163407            && sh latency_cdf.sh 20240402-023846.163407
DONE
PARSING 20240402-023846.163407 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-023846.163407
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-023846.163407, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-024201.238828
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-024201.238828, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1978808)
KILLED CAPYBARA PROCESSES
PARSING 20240402-024201.238828 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-024201.238828            && sh ms_avg_99p_lat.sh 20240402-024201.238828            && sh ms_total_even_odd_numreq.sh 20240402-024201.238828            && sh latency_cdf.sh 20240402-024201.238828
DONE
PARSING 20240402-024201.238828 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-024201.238828
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-024201.238828, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-024355.031797
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-024355.031797, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1980542)
KILLED CAPYBARA PROCESSES
PARSING 20240402-024355.031797 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-024355.031797            && sh ms_avg_99p_lat.sh 20240402-024355.031797            && sh ms_total_even_odd_numreq.sh 20240402-024355.031797            && sh latency_cdf.sh 20240402-024355.031797
DONE
PARSING 20240402-024355.031797 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-024355.031797
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-024355.031797, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-024910.195985
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-024910.195985, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1982696)
KILLED CAPYBARA PROCESSES
PARSING 20240402-024910.195985 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-024910.195985            && sh ms_avg_99p_lat.sh 20240402-024910.195985            && sh ms_total_even_odd_numreq.sh 20240402-024910.195985            && sh latency_cdf.sh 20240402-024910.195985
DONE
PARSING 20240402-024910.195985 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-024910.195985
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-024910.195985, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-025449.143350
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-025449.143350, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1984858)
KILLED CAPYBARA PROCESSES
PARSING 20240402-025449.143350 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-025449.143350            && sh ms_avg_99p_lat.sh 20240402-025449.143350            && sh ms_total_even_odd_numreq.sh 20240402-025449.143350            && sh latency_cdf.sh 20240402-025449.143350
DONE
PARSING 20240402-025449.143350 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-025449.143350
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-025449.143350, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-025545.487791
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-025545.487791, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1986440)
KILLED CAPYBARA PROCESSES
PARSING 20240402-025545.487791 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-025545.487791            && sh ms_avg_99p_lat.sh 20240402-025545.487791            && sh ms_total_even_odd_numreq.sh 20240402-025545.487791            && sh latency_cdf.sh 20240402-025545.487791
DONE
PARSING 20240402-025545.487791 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-025545.487791
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-025545.487791, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-025714.343747
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-025714.343747, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1988057)
KILLED CAPYBARA PROCESSES
PARSING 20240402-025714.343747 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-025714.343747            && sh ms_avg_99p_lat.sh 20240402-025714.343747            && sh ms_total_even_odd_numreq.sh 20240402-025714.343747            && sh latency_cdf.sh 20240402-025714.343747
DONE
PARSING 20240402-025714.343747 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-025714.343747
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-025714.343747, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-030108.803781
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-030108.803781, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 1995713)
KILLED CAPYBARA PROCESSES
PARSING 20240402-030108.803781 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-030108.803781            && sh ms_avg_99p_lat.sh 20240402-030108.803781            && sh ms_total_even_odd_numreq.sh 20240402-030108.803781            && sh latency_cdf.sh 20240402-030108.803781
DONE
PARSING 20240402-030108.803781 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-030108.803781
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-030108.803781, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-031237.635784
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-031237.635784, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 1998688)
KILLED CAPYBARA PROCESSES
PARSING 20240402-031237.635784 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-031237.635784            && sh ms_avg_99p_lat.sh 20240402-031237.635784            && sh ms_total_even_odd_numreq.sh 20240402-031237.635784            && sh latency_cdf.sh 20240402-031237.635784
DONE
PARSING 20240402-031237.635784 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-031237.635784
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-031237.635784, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-031532.643838
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-031532.643838, 2, 100, 0, 0, 1, 10, N/A



iokerneld killed (pid 2000472)
KILLED CAPYBARA PROCESSES
PARSING 20240402-031532.643838 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-031532.643838            && sh ms_avg_99p_lat.sh 20240402-031532.643838            && sh ms_total_even_odd_numreq.sh 20240402-031532.643838            && sh latency_cdf.sh 20240402-031532.643838
DONE
PARSING 20240402-031532.643838 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-031532.643838
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-031532.643838, 2, 100, 0, 0, 1, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-031647.078985
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-031647.078985, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2002058)
KILLED CAPYBARA PROCESSES
PARSING 20240402-031647.078985 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-031647.078985            && sh ms_avg_99p_lat.sh 20240402-031647.078985            && sh ms_total_even_odd_numreq.sh 20240402-031647.078985            && sh latency_cdf.sh 20240402-031647.078985
DONE
PARSING 20240402-031647.078985 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-031647.078985
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-031647.078985, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-031801.927351
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-031801.927351, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2003622)
KILLED CAPYBARA PROCESSES
PARSING 20240402-031801.927351 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-031801.927351            && sh ms_avg_99p_lat.sh 20240402-031801.927351            && sh ms_total_even_odd_numreq.sh 20240402-031801.927351            && sh latency_cdf.sh 20240402-031801.927351
DONE
PARSING 20240402-031801.927351 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-031801.927351
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-031801.927351, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-032815.491485
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-032815.491485, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2012186)
KILLED CAPYBARA PROCESSES
PARSING 20240402-032815.491485 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-032815.491485            && sh ms_avg_99p_lat.sh 20240402-032815.491485            && sh ms_total_even_odd_numreq.sh 20240402-032815.491485            && sh latency_cdf.sh 20240402-032815.491485
DONE
PARSING 20240402-032815.491485 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-032815.491485
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-032815.491485, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-033001.458614
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-033001.458614, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2013832)
KILLED CAPYBARA PROCESSES
PARSING 20240402-033001.458614 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-033001.458614            && sh ms_avg_99p_lat.sh 20240402-033001.458614            && sh ms_total_even_odd_numreq.sh 20240402-033001.458614            && sh latency_cdf.sh 20240402-033001.458614
DONE
PARSING 20240402-033001.458614 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-033001.458614
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-033001.458614, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-033137.062940
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-033137.062940, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 2015423)
KILLED CAPYBARA PROCESSES
PARSING 20240402-033137.062940 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-033137.062940            && sh ms_avg_99p_lat.sh 20240402-033137.062940            && sh ms_total_even_odd_numreq.sh 20240402-033137.062940            && sh latency_cdf.sh 20240402-033137.062940
DONE
PARSING 20240402-033137.062940 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-033137.062940
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-033137.062940, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-033359.339882
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-033359.339882, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2017226)
dpdk-ctrl.elf killed (pid 3367156)
KILLED CAPYBARA PROCESSES
PARSING 20240402-033359.339882 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-033359.339882            && sh ms_avg_99p_lat.sh 20240402-033359.339882            && sh ms_total_even_odd_numreq.sh 20240402-033359.339882            && sh latency_cdf.sh 20240402-033359.339882
DONE
PARSING 20240402-033359.339882 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-033359.339882
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-033359.339882, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-034430.399081
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-034430.399081, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2025886)
KILLED CAPYBARA PROCESSES
PARSING 20240402-034430.399081 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-034430.399081            && sh ms_avg_99p_lat.sh 20240402-034430.399081            && sh ms_total_even_odd_numreq.sh 20240402-034430.399081            && sh latency_cdf.sh 20240402-034430.399081
DONE
PARSING 20240402-034430.399081 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-034430.399081
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-034430.399081, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-040645.055127
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-040645.055127, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2030023)
KILLED CAPYBARA PROCESSES
PARSING 20240402-040645.055127 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-040645.055127            && sh ms_avg_99p_lat.sh 20240402-040645.055127            && sh ms_total_even_odd_numreq.sh 20240402-040645.055127            && sh latency_cdf.sh 20240402-040645.055127
DONE
PARSING 20240402-040645.055127 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-040645.055127
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-040645.055127, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-041150.552026
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-041150.552026, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2037872)
KILLED CAPYBARA PROCESSES
PARSING 20240402-041150.552026 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-041150.552026            && sh ms_avg_99p_lat.sh 20240402-041150.552026            && sh ms_total_even_odd_numreq.sh 20240402-041150.552026            && sh latency_cdf.sh 20240402-041150.552026
DONE
PARSING 20240402-041150.552026 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-041150.552026
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-041150.552026, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-042027.803716
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-042027.803716, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2046342)
KILLED CAPYBARA PROCESSES
PARSING 20240402-042027.803716 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-042027.803716            && sh ms_avg_99p_lat.sh 20240402-042027.803716            && sh ms_total_even_odd_numreq.sh 20240402-042027.803716            && sh latency_cdf.sh 20240402-042027.803716
DONE
PARSING 20240402-042027.803716 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-042027.803716
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-042027.803716, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-042618.591449
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-042618.591449, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2054347)
KILLED CAPYBARA PROCESSES
PARSING 20240402-042618.591449 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-042618.591449            && sh ms_avg_99p_lat.sh 20240402-042618.591449            && sh ms_total_even_odd_numreq.sh 20240402-042618.591449            && sh latency_cdf.sh 20240402-042618.591449
DONE
PARSING 20240402-042618.591449 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-042618.591449
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-042618.591449, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-043401.715245
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-043401.715245, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2062611)
dpdk-ctrl.elf killed (pid 3374727)
KILLED CAPYBARA PROCESSES
PARSING 20240402-043401.715245 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-043401.715245            && sh ms_avg_99p_lat.sh 20240402-043401.715245            && sh ms_total_even_odd_numreq.sh 20240402-043401.715245            && sh latency_cdf.sh 20240402-043401.715245
DONE
PARSING 20240402-043401.715245 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-043401.715245
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-043401.715245, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-045518.758537
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-045518.758537, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2072720)
KILLED CAPYBARA PROCESSES
PARSING 20240402-045518.758537 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-045518.758537            && sh ms_avg_99p_lat.sh 20240402-045518.758537            && sh ms_total_even_odd_numreq.sh 20240402-045518.758537            && sh latency_cdf.sh 20240402-045518.758537
DONE
PARSING 20240402-045518.758537 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-045518.758537
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-045518.758537, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-045640.359401
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-045640.359401, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2074336)
KILLED CAPYBARA PROCESSES
PARSING 20240402-045640.359401 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
 1712033814760400668,SEND_PREPARE_MIG,(10.0.1.7:403)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-045640.359401, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-050110.207863
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-050110.207863, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2076103)
KILLED CAPYBARA PROCESSES
PARSING 20240402-050110.207863 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 8 1 
 1712034084778855082,INIT_MIG,(10.0.1.7:401)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-050110.207863, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-050350.847272
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-050350.847272, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2077643)
KILLED CAPYBARA PROCESSES
PARSING 20240402-050350.847272 migration delay
19
CALCULATING 20240402-050350.847272 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-050350.847272
DONE
PARSING 20240402-050350.847272 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-050350.847272            && sh ms_avg_99p_lat.sh 20240402-050350.847272            && sh ms_total_even_odd_numreq.sh 20240402-050350.847272            && sh latency_cdf.sh 20240402-050350.847272
DONE
PARSING 20240402-050350.847272 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-050350.847272
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-050350.847272, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-050922.351413
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-050922.351413, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2085694)
KILLED CAPYBARA PROCESSES
PARSING 20240402-050922.351413 migration delay
16
CALCULATING 20240402-050922.351413 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-050922.351413
DONE
PARSING 20240402-050922.351413 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-050922.351413            && sh ms_avg_99p_lat.sh 20240402-050922.351413            && sh ms_total_even_odd_numreq.sh 20240402-050922.351413            && sh latency_cdf.sh 20240402-050922.351413
DONE
PARSING 20240402-050922.351413 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-050922.351413
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-050922.351413, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-052727.519214
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-052727.519214, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2095526)
KILLED CAPYBARA PROCESSES
PARSING 20240402-052727.519214 migration delay
10
CALCULATING 20240402-052727.519214 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-052727.519214
DONE
PARSING 20240402-052727.519214 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-052727.519214            && sh ms_avg_99p_lat.sh 20240402-052727.519214            && sh ms_total_even_odd_numreq.sh 20240402-052727.519214            && sh latency_cdf.sh 20240402-052727.519214
DONE
PARSING 20240402-052727.519214 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-052727.519214
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-052727.519214, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-054446.635885
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-054446.635885, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2105068)
KILLED CAPYBARA PROCESSES
PARSING 20240402-054446.635885 migration delay
18
CALCULATING 20240402-054446.635885 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-054446.635885
DONE
PARSING 20240402-054446.635885 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-054446.635885            && sh ms_avg_99p_lat.sh 20240402-054446.635885            && sh ms_total_even_odd_numreq.sh 20240402-054446.635885            && sh latency_cdf.sh 20240402-054446.635885
DONE
PARSING 20240402-054446.635885 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-054446.635885
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-054446.635885, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-054853.456061
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-054853.456061, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2112841)
KILLED CAPYBARA PROCESSES
PARSING 20240402-054853.456061 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 3 
 1712036948030640897,RECV_PREPARE_MIG,(10.0.1.7:401)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-054853.456061, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-055125.143099
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-055125.143099, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2114355)
KILLED CAPYBARA PROCESSES
PARSING 20240402-055125.143099 migration delay
31
CALCULATING 20240402-055125.143099 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-055125.143099
DONE
PARSING 20240402-055125.143099 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-055125.143099            && sh ms_avg_99p_lat.sh 20240402-055125.143099            && sh ms_total_even_odd_numreq.sh 20240402-055125.143099            && sh latency_cdf.sh 20240402-055125.143099
DONE
PARSING 20240402-055125.143099 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-055125.143099
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-055125.143099, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-055715.027328
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-055715.027328, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2122512)
KILLED CAPYBARA PROCESSES
PARSING 20240402-055715.027328 migration delay
9
CALCULATING 20240402-055715.027328 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-055715.027328
DONE
PARSING 20240402-055715.027328 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-055715.027328            && sh ms_avg_99p_lat.sh 20240402-055715.027328            && sh ms_total_even_odd_numreq.sh 20240402-055715.027328            && sh latency_cdf.sh 20240402-055715.027328
DONE
PARSING 20240402-055715.027328 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-055715.027328
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-055715.027328, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-060122.472042
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-060122.472042, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2130232)
KILLED CAPYBARA PROCESSES
PARSING 20240402-060122.472042 migration delay
16
CALCULATING 20240402-060122.472042 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-060122.472042
DONE
PARSING 20240402-060122.472042 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-060122.472042            && sh ms_avg_99p_lat.sh 20240402-060122.472042            && sh ms_total_even_odd_numreq.sh 20240402-060122.472042            && sh latency_cdf.sh 20240402-060122.472042
DONE
PARSING 20240402-060122.472042 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-060122.472042
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-060122.472042, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-061449.703415
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-061449.703415, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2139397)
KILLED CAPYBARA PROCESSES
PARSING 20240402-061449.703415 migration delay
11
CALCULATING 20240402-061449.703415 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-061449.703415
DONE
PARSING 20240402-061449.703415 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-061449.703415            && sh ms_avg_99p_lat.sh 20240402-061449.703415            && sh ms_total_even_odd_numreq.sh 20240402-061449.703415            && sh latency_cdf.sh 20240402-061449.703415
DONE
PARSING 20240402-061449.703415 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-061449.703415
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-061449.703415, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-120502.899115
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-120502.899115, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2192399)
KILLED CAPYBARA PROCESSES
PARSING 20240402-120502.899115 migration delay
38
CALCULATING 20240402-120502.899115 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-120502.899115
DONE
PARSING 20240402-120502.899115 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-120502.899115            && sh ms_avg_99p_lat.sh 20240402-120502.899115            && sh ms_total_even_odd_numreq.sh 20240402-120502.899115            && sh latency_cdf.sh 20240402-120502.899115
DONE
PARSING 20240402-120502.899115 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-120502.899115
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-120502.899115, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-121457.578649
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2207204 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-65000:5000,65000:12000,65000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-54000:7000,54000:8000,54000-43000:6000,43000:17000,43000-42000:5000,42000:12000,42000-16000:5000,16000:17000,16000-9000:6000,9000:6000,9000-12000:8000,12000:8000,12000-10000:9000,10000:18000,10000-12000:5000,12000:9000,12000-9000:7000,9000:2000,9000-45000:5000,45000:11000,45000-10000:7000,10000:16000,10000-36000:5000,36000:12000,36000-24000:9000,24000:9000,24000-19000:5000,19000:7000,19000-30000:10000,30000:4000,30000-223000:5000,223000:16000,223000-48000:8000,48000:11000,48000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:13000,128000-128000:5000,128000:12000,128000-76000:9000,76000:6000,76000-90000:10000,90000:7000,90000-40000:6000,40000:19000,40000-104000:6000,104000:20000,104000-103000:5000,103000:20000,103000-51000:7000,51000:5000,51000-58000:8000,58000:12000,58000-29000:5000,29000:15000,29000-40000:7000,40000:16000,40000-176000:5000,176000:17000,176000-39000:6000,39000:20000,39000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:7000,103000-18000:5000,18000:18000,18000-15000:5000,15000:6000,15000-16000:7000,16000:18000,16000-13000:7000,13000:9000,13000-9000:6000,9000:8000,9000-17000:8000,17000:3000,17000-59000:5000,59000:17000,59000-40000:5000,40000:9000,40000-13000:5000,13000:6000,13000-45000:10000,45000:9000,45000-58000:10000,58000:24000,58000-247000:5000,247000:18000,247000-13000:10000,13000:8000,13000-114000:7000,114000:19000,114000-219000:10000,219000:23000,219000-167000:5000,167000:10000,167000-96000:10000,96000:10000,96000-120000:8000,120000:9000,120000-39000:9000,39000:16000,39000-46000:9000,46000:14000,46000-187000:5000,187000:20000,187000-114000:8000,114000:19000,114000-106000:6000,106000:12000,106000-150000:8000,150000:22000,150000-243000:5000,243000:11000,243000-37000:9000,37000:11000,37000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:14000,82000-199000:5000,199000:10000,199000-134000:7000,134000:15000,134000-160000:10000,160000:20000,160000-117000:7000,117000:13000,117000-131000:8000,131000:5000,131000-14000:5000,14000:6000,14000-14000:8000,14000:11000,14000-13000:9000,13000:17000,13000-10000:5000,10000:9000,10000-9000:6000,9000:24000,9000-212000:5000,212000:7000,212000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-32000:5000,32000:18000,32000-31000:9000,31000:6000,31000-14000:5000,14000:10000,14000-24000:10000,24000:19000,24000-16000:10000,16000:8000,16000-270000:5000,270000:20000,270000-69000:6000,69000:11000,69000-254000:6000,254000:13000,254000-50000:9000,50000:15000,50000-221000:10000,221000:5000,221000-265000:5000,265000:10000,265000-175000:5000,175000:20000,175000-119000:10000,119000:7000,119000-265000:10000,265000:11000,265000-101000:6000,101000:5000,101000-17000:9000,17000:2000,17000-43000:5000,43000:8000,43000-21000:10000,21000:8000,21000-20000:8000,20000:15000,20000-28000:7000,28000:20000,28000-17000:5000,17000:14000,17000-114000:5000,114000:8000,114000-46000:9000,46000:18000,46000-111000:10000,111000:8000,111000-57000:6000,57000:18000,57000-31000:7000,31000:11000,31000-74000:5000,74000:6000,74000-34000:8000,34000:6000,34000-53000:8000,53000:16000,53000-43000:9000,43000:14000,43000-61000:5000,61000:23000,61000-39000:5000,39000:9000,39000-18000:6000,18000:7000,18000-10000:9000,10000:5000,10000-35000:7000,35000:19000,35000-17000:9000,17000:9000,17000-29000:8000,29000:7000,29000-270000:5000,270000:20000,270000-145000:7000,145000:20000,145000-194000:9000,194000:7000,194000-254000:10000,254000:22000,254000-127000:5000,127000:16000,127000-47000:9000,47000:16000,47000-19000:7000,19000:11000,19000-82000:10000,82000:7000,82000-102000:10000,102000:9000,102000-127000:5000,127000:5000,127000-49000:9000,49000:13000,49000-9000:8000,9000:17000,9000-72000:6000,72000:10000,72000-106000:9000,106000:18000,106000-122000:5000,122000:14000,122000-97000:6000,97000:10000,97000-120000:9000,120000:13000,120000-122000:8000,122000:16000,122000-34000:6000,34000:13000,34000-13000:5000,13000:16000,13000-12000:7000,12000:13000,12000-9000:8000,9000:14000,9000-10000:5000,10000:5000,10000-9000:7000,9000:20000,9000-182000:5000,182000:6000,182000-41000:7000,41000:11000,41000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:4000,173000-158000:5000,158000:7000,158000-99000:6000,99000:8000,99000-154000:5000,154000:8000,154000-149000:10000,149000:12000,149000-41000:8000,41000:17000,41000-56000:6000,56000:8000,56000-180000:5000,180000:5000,180000-71000:6000,71000:18000,71000-59000:6000,59000:5000,59000-59000:6000,59000:15000,59000-124000:5000,124000:10000,124000-41000:9000,41000:10000,41000-41000:5000,41000:20000,41000-23000:5000,23000:15000,23000-37000:8000,37000:6000,37000-29000:8000,29000:16000,29000-32000:7000,32000:10000,32000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-98000:5000,98000:6000,98000-74000:7000,74000:16000,74000-22000:8000,22000:5000,22000-60000:9000,60000:19000,60000-18000:7000,18000:18000,18000-154000:5000,154000:9000,154000-153000:6000,153000:16000,153000-68000:8000,68000:13000,68000-58000:10000,58000:13000,58000-68000:6000,68000:14000,68000-156000:5000,156000:14000,156000-142000:6000,142000:9000,142000-35000:10000,35000:14000,35000-37000:8000,37000:19000,37000-29000:8000,29000:7000,29000-130000:5000,130000:20000,130000-58000:9000,58000:15000,58000-116000:7000,116000:6000,116000-28000:8000,28000:8000,28000-82000:8000,82000:14000,82000-270000:5000,270000:15000,270000-189000:10000,189000:12000,189000-11000:6000,11000:18000,11000-251000:9000,251000:25000,251000-127000:5000,127000:8000,127000-56000:6000,56000:11000,56000-17000:5000,17000:9000,17000-94000:7000,94000:9000,94000-110000:8000,110000:9000,110000-49000:9000,49000:14000,49000-54000:5000,54000:20000,54000-39000:6000,39000:7000,39000-41000:9000,41000:14000,41000-27000:6000,27000:8000,27000-54000:6000,54000:19000,54000-270000:5000,270000:8000,270000-220000:6000,220000:6000,220000-82000:10000,82000:20000,82000-266000:10000,266000:16000,266000-112000:10000,112000:9000,112000-228000:5000,228000:16000,228000-62000:9000,62000:14000,62000-166000:7000,166000:5000,166000-226000:6000,226000:8000,226000-29000:10000,29000:6000,29000-168000:10000,168000:4000,168000-46000:5000,46000:15000,46000-30000:5000,30000:7000,30000-41000:9000,41000:15000,41000-11000:9000,11000:11000,11000-24000:10000,24000:14000,24000-194000:5000,194000:13000,194000-174000:7000,174000:20000,174000-156000:9000,156000:12000,156000-62000:6000,62000:13000,62000-183000:7000,183000:8000,183000-10000:5000,10000:9000,10000-9000:8000,9000:12000,9000-10000:9000,10000:8000,10000-10000:9000,10000:15000,10000-10000:10000,10000:15000,10000-202000:5000,202000:15000,202000-33000:5000,33000:9000,33000-159000:6000,159000:12000,159000-197000:7000,197000:20000,197000-67000:7000,67000:14000,67000-231000:5000,231000:17000,231000-67000:7000,67000:18000,67000-180000:8000,180000:16000,180000-183000:7000,183000:22000,183000-251000:5000,251000:14000,251000-80000:6000,80000:8000,80000-193000:9000,193000:17000,193000-243000:9000,243000:5000,243000-200000:10000,200000:17000,200000-15000:5000,15000:15000,15000-10000:7000,10000:16000,10000-11000:8000,11000:6000,11000-10000:8000,10000:11000,10000-13000:7000,13000:17000/100000:100000,100000-215000:5000,215000:18000,215000-98000:5000,98000:11000,98000-97000:10000,97000:13000,97000-209000:10000,209000:16000,209000-194000:5000,194000:7000,194000-264000:5000,264000:11000,264000-28000:6000,28000:18000,28000-172000:9000,172000:7000,172000-119000:7000,119000:14000,119000-54000:6000,54000:9000,54000-160000:7000,160000:1000,160000-235000:5000,235000:17000,235000-60000:6000,60000:12000,60000-148000:6000,148000:19000,148000-144000:7000,144000:13000,144000-137000:10000,137000:5000,137000-57000:5000,57000:19000,57000-39000:10000,39000:14000,39000-15000:7000,15000:15000,15000-19000:9000,19000:21000,19000-152000:5000,152000:20000,152000-23000:9000,23000:11000,23000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-177000:5000,177000:16000,177000-158000:10000,158000:18000,158000-27000:5000,27000:13000,27000-103000:7000,103000:19000,103000-57000:5000,57000:2000,57000-104000:5000,104000:14000,104000-18000:10000,18000:8000,18000-79000:6000,79000:9000,79000-82000:5000,82000:19000,82000-53000:7000,53000:17000,53000-262000:5000,262000:11000,262000-196000:9000,196000:10000,196000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:18000,218000-221000:5000,221000:6000,221000-159000:10000,159000:5000,159000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:11000,29000-11000:6000,11000:12000,11000-33000:5000,33000:7000,33000-9000:7000,9000:10000,9000-13000:10000,13000:19000,13000-10000:7000,10000:8000,10000-26000:7000,26000:20000,26000-113000:5000,113000:7000,113000-112000:10000,112000:5000,112000-38000:10000,38000:17000,38000-82000:5000,82000:8000,82000-30000:9000,30000:16000,30000-89000:5000,89000:3000,89000-93000:5000,93000:20000,93000-46000:8000,46000:5000,46000-21000:8000,21000:15000,21000-60000:10000,60000:19000,60000-90000:8000,90000:2000,90000-37000:5000,37000:20000,37000-30000:5000,30000:8000,30000-16000:8000,16000:18000,16000-28000:6000,28000:8000,28000-30000:7000,30000:15000,30000-81000:5000,81000:17000,81000-73000:8000,73000:5000,73000-79000:7000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:5000,13000-266000:5000,266000:17000,266000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:13000,170000-68000:5000,68000:9000,68000-25000:8000,25000:8000,25000-29000:7000,29000:14000,29000-39000:8000,39000:10000,39000-22000:8000,22000:11000,22000-41000:10000,41000:2000,41000-248000:5000,248000:8000,248000-130000:7000,130000:5000,130000-242000:8000,242000:12000,242000-203000:5000,203000:5000,203000-133000:8000,133000:11000,133000-145000:8000,145000:18000,145000-10000:5000,10000:19000,10000-9000:9000,9000:6000,9000-9000:9000,9000:17000,9000-9000:10000,9000:10000,9000-9000:9000,9000:6000,9000-15000:5000,15000:15000,15000-12000:5000,12000:8000,12000-9000:5000,9000:9000,9000-14000:9000,14000:6000,14000-10000:7000,10000:5000,10000-12000:5000,12000:21000,12000-237000:5000,237000:14000,237000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:16000,117000-192000:6000,192000:9000,192000-166000:5000,166000:10000,166000-133000:10000,133000:7000,133000-64000:9000,64000:7000,64000-30000:9000,30000:9000,30000-25000:9000,25000:9000,25000-52000:5000,52000:11000,52000-206000:5000,206000:15000,206000-141000:8000,141000:17000,141000-20000:9000,20000:18000,20000-36000:10000,36000:7000,36000-158000:9000,158000:2000,158000-241000:5000,241000:19000,241000-200000:9000,200000:19000,200000-124000:5000,124000:6000,124000-142000:8000,142000:20000,142000-237000:7000,237000:2000,237000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:5000,10000:18000,10000-10000:7000,10000:19000,10000-10000:8000,10000:7000,10000-153000:5000,153000:8000,153000-113000:8000,113000:12000,113000-147000:8000,147000:13000,147000-42000:9000,42000:19000,42000-56000:5000,56000:13000,56000-153000:5000,153000:18000,153000-63000:6000,63000:13000,63000-76000:5000,76000:12000,76000-129000:10000,129000:11000,129000-70000:7000,70000:13000,70000-158000:5000,158000:10000,158000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-58000:6000,58000:19000,58000-114000:9000,114000:13000,114000-267000:5000,267000:10000,267000-28000:7000,28000:14000,28000-247000:10000,247000:18000,247000-55000:8000,55000:9000,55000-87000:10000,87000:9000,87000-98000:5000,98000:7000,98000-58000:8000,58000:8000,58000-31000:7000,31000:10000,31000-55000:8000,55000:20000,55000-16000:9000,16000:10000,16000-26000:7000,26000:1000,26000-122000:5000,122000:16000,122000-92000:8000,92000:15000,92000-13000:7000,13000:11000,13000-43000:8000,43000:13000,43000-85000:9000,85000:8000,85000-100000:5000,100000:10000,100000-44000:8000,44000:7000,44000-86000:8000,86000:18000,86000-39000:8000,39000:7000,39000-37000:10000,37000:19000,37000-239000:5000,239000:5000,239000-38000:10000,38000:19000,38000-36000:7000,36000:19000,36000-162000:10000,162000:10000,162000-50000:7000,50000:8000,50000-270000:5000,270000:15000,270000-110000:6000,110000:13000,110000-116000:5000,116000:12000,116000-137000:5000,137000:8000,137000-170000:8000,170000:5000,170000-108000:5000,108000:13000,108000-182000:5000,182000:19000,182000-132000:10000,132000:17000,132000-41000:7000,41000:17000,41000-144000:7000,144000:18000,144000-126000:5000,126000:20000,126000-96000:8000,96000:17000,96000-47000:9000,47000:11000,47000-95000:10000,95000:20000,95000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-150000:5000,150000:6000,150000-143000:8000,143000:16000,143000-32000:7000,32000:19000,32000-128000:6000,128000:18000,128000-131000:6000,131000:9000,131000-10000:5000,10000:15000,10000-10000:9000,10000:19000,10000-10000:7000,10000:5000,10000-10000:7000,10000:18000,10000-10000:8000,10000:7000,10000-153000:5000,153000:14000,153000-24000:9000,24000:15000,24000-15000:8000,15000:20000,15000-145000:9000,145000:20000,145000-226000:5000,226000:16000,226000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-190000:6000,190000:16000,190000-75000:8000,75000:1000,75000-10000:5000,10000:7000,10000-10000:9000,10000:11000,10000-9000:9000,9000:12000,9000-10000:7000,10000:12000,10000-10000:5000,10000:10000,10000-10000:8000,10000:5000,10000-52000:5000,52000:13000,52000-25000:9000,25000:18000,25000-33000:5000,33000:13000,33000-49000:5000,49000:12000,49000-50000:8000,50000:12000,50000-234000:5000,234000:18000,234000-184000:9000,184000:7000,184000-141000:7000,141000:12000,141000-93000:5000,93000:16000,93000-186000:5000,186000:16000,186000-86000:5000,86000:7000,86000-86000:6000,86000:13000,86000-38000:7000,38000:8000,38000-17000:7000,17000:7000,17000-83000:8000,83000:12000,83000-52000:9000,52000:11000,52000-270000:5000,270000:7000,270000-60000:5000,60000:19000,60000-178000:9000,178000:6000,178000-63000:9000,63000:14000,63000-197000:6000,197000:20000,197000-78000:5000,78000:19000,78000-36000:6000,36000:8000,36000-43000:7000,43000:9000,43000-47000:7000,47000:5000,47000-78000:7000,78000:13000,78000-50000:10000,50000:4000,50000-49000:5000,49000:12000,49000-31000:7000,31000:20000,31000-44000:7000,44000:17000,44000-40000:5000,40000:16000,40000-18000:8000,18000:3000,18000-29000:5000,29000:11000,29000-19000:10000,19000:20000,19000-27000:10000,27000:14000,27000-10000:5000,10000:5000,10000-14000:7000,14000:13000,14000-265000:5000,265000:14000,265000-128000:8000,128000:16000,128000-89000:10000,89000:10000,89000-251000:6000,251000:17000,251000-61000:9000,61000:5000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240402-121457.578649 > /homes/inho/capybara-data/20240402-121457.578649.client
================ TEST COMPLETE =================

[RESULT]20240402-121457.578649, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2206975)
KILLED CAPYBARA PROCESSES
PARSING 20240402-121457.578649 migration delay
1
CALCULATING 20240402-121457.578649 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-121457.578649
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 676, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 305, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-121457.578649' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-121457.578649, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-121616.483811
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2208544 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-65000:5000,65000:12000,65000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-54000:7000,54000:8000,54000-43000:6000,43000:17000,43000-42000:5000,42000:12000,42000-16000:5000,16000:17000,16000-9000:6000,9000:6000,9000-12000:8000,12000:8000,12000-10000:9000,10000:18000,10000-12000:5000,12000:9000,12000-9000:7000,9000:2000,9000-45000:5000,45000:11000,45000-10000:7000,10000:16000,10000-36000:5000,36000:12000,36000-24000:9000,24000:9000,24000-19000:5000,19000:7000,19000-30000:10000,30000:4000,30000-223000:5000,223000:16000,223000-48000:8000,48000:11000,48000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:13000,128000-128000:5000,128000:12000,128000-76000:9000,76000:6000,76000-90000:10000,90000:7000,90000-40000:6000,40000:19000,40000-104000:6000,104000:20000,104000-103000:5000,103000:20000,103000-51000:7000,51000:5000,51000-58000:8000,58000:12000,58000-29000:5000,29000:15000,29000-40000:7000,40000:16000,40000-176000:5000,176000:17000,176000-39000:6000,39000:20000,39000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:7000,103000-18000:5000,18000:18000,18000-15000:5000,15000:6000,15000-16000:7000,16000:18000,16000-13000:7000,13000:9000,13000-9000:6000,9000:8000,9000-17000:8000,17000:3000,17000-59000:5000,59000:17000,59000-40000:5000,40000:9000,40000-13000:5000,13000:6000,13000-45000:10000,45000:9000,45000-58000:10000,58000:24000,58000-247000:5000,247000:18000,247000-13000:10000,13000:8000,13000-114000:7000,114000:19000,114000-219000:10000,219000:23000,219000-167000:5000,167000:10000,167000-96000:10000,96000:10000,96000-120000:8000,120000:9000,120000-39000:9000,39000:16000,39000-46000:9000,46000:14000,46000-187000:5000,187000:20000,187000-114000:8000,114000:19000,114000-106000:6000,106000:12000,106000-150000:8000,150000:22000,150000-243000:5000,243000:11000,243000-37000:9000,37000:11000,37000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:14000,82000-199000:5000,199000:10000,199000-134000:7000,134000:15000,134000-160000:10000,160000:20000,160000-117000:7000,117000:13000,117000-131000:8000,131000:5000,131000-14000:5000,14000:6000,14000-14000:8000,14000:11000,14000-13000:9000,13000:17000,13000-10000:5000,10000:9000,10000-9000:6000,9000:24000,9000-212000:5000,212000:7000,212000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-32000:5000,32000:18000,32000-31000:9000,31000:6000,31000-14000:5000,14000:10000,14000-24000:10000,24000:19000,24000-16000:10000,16000:8000,16000-270000:5000,270000:20000,270000-69000:6000,69000:11000,69000-254000:6000,254000:13000,254000-50000:9000,50000:15000,50000-221000:10000,221000:5000,221000-265000:5000,265000:10000,265000-175000:5000,175000:20000,175000-119000:10000,119000:7000,119000-265000:10000,265000:11000,265000-101000:6000,101000:5000,101000-17000:9000,17000:2000,17000-43000:5000,43000:8000,43000-21000:10000,21000:8000,21000-20000:8000,20000:15000,20000-28000:7000,28000:20000,28000-17000:5000,17000:14000,17000-114000:5000,114000:8000,114000-46000:9000,46000:18000,46000-111000:10000,111000:8000,111000-57000:6000,57000:18000,57000-31000:7000,31000:11000,31000-74000:5000,74000:6000,74000-34000:8000,34000:6000,34000-53000:8000,53000:16000,53000-43000:9000,43000:14000,43000-61000:5000,61000:23000,61000-39000:5000,39000:9000,39000-18000:6000,18000:7000,18000-10000:9000,10000:5000,10000-35000:7000,35000:19000,35000-17000:9000,17000:9000,17000-29000:8000,29000:7000,29000-270000:5000,270000:20000,270000-145000:7000,145000:20000,145000-194000:9000,194000:7000,194000-254000:10000,254000:22000,254000-127000:5000,127000:16000,127000-47000:9000,47000:16000,47000-19000:7000,19000:11000,19000-82000:10000,82000:7000,82000-102000:10000,102000:9000,102000-127000:5000,127000:5000,127000-49000:9000,49000:13000,49000-9000:8000,9000:17000,9000-72000:6000,72000:10000,72000-106000:9000,106000:18000,106000-122000:5000,122000:14000,122000-97000:6000,97000:10000,97000-120000:9000,120000:13000,120000-122000:8000,122000:16000,122000-34000:6000,34000:13000,34000-13000:5000,13000:16000,13000-12000:7000,12000:13000,12000-9000:8000,9000:14000,9000-10000:5000,10000:5000,10000-9000:7000,9000:20000,9000-182000:5000,182000:6000,182000-41000:7000,41000:11000,41000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:4000,173000-158000:5000,158000:7000,158000-99000:6000,99000:8000,99000-154000:5000,154000:8000,154000-149000:10000,149000:12000,149000-41000:8000,41000:17000,41000-56000:6000,56000:8000,56000-180000:5000,180000:5000,180000-71000:6000,71000:18000,71000-59000:6000,59000:5000,59000-59000:6000,59000:15000,59000-124000:5000,124000:10000,124000-41000:9000,41000:10000,41000-41000:5000,41000:20000,41000-23000:5000,23000:15000,23000-37000:8000,37000:6000,37000-29000:8000,29000:16000,29000-32000:7000,32000:10000,32000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-98000:5000,98000:6000,98000-74000:7000,74000:16000,74000-22000:8000,22000:5000,22000-60000:9000,60000:19000,60000-18000:7000,18000:18000,18000-154000:5000,154000:9000,154000-153000:6000,153000:16000,153000-68000:8000,68000:13000,68000-58000:10000,58000:13000,58000-68000:6000,68000:14000,68000-156000:5000,156000:14000,156000-142000:6000,142000:9000,142000-35000:10000,35000:14000,35000-37000:8000,37000:19000,37000-29000:8000,29000:7000,29000-130000:5000,130000:20000,130000-58000:9000,58000:15000,58000-116000:7000,116000:6000,116000-28000:8000,28000:8000,28000-82000:8000,82000:14000,82000-270000:5000,270000:15000,270000-189000:10000,189000:12000,189000-11000:6000,11000:18000,11000-251000:9000,251000:25000,251000-127000:5000,127000:8000,127000-56000:6000,56000:11000,56000-17000:5000,17000:9000,17000-94000:7000,94000:9000,94000-110000:8000,110000:9000,110000-49000:9000,49000:14000,49000-54000:5000,54000:20000,54000-39000:6000,39000:7000,39000-41000:9000,41000:14000,41000-27000:6000,27000:8000,27000-54000:6000,54000:19000,54000-270000:5000,270000:8000,270000-220000:6000,220000:6000,220000-82000:10000,82000:20000,82000-266000:10000,266000:16000,266000-112000:10000,112000:9000,112000-228000:5000,228000:16000,228000-62000:9000,62000:14000,62000-166000:7000,166000:5000,166000-226000:6000,226000:8000,226000-29000:10000,29000:6000,29000-168000:10000,168000:4000,168000-46000:5000,46000:15000,46000-30000:5000,30000:7000,30000-41000:9000,41000:15000,41000-11000:9000,11000:11000,11000-24000:10000,24000:14000,24000-194000:5000,194000:13000,194000-174000:7000,174000:20000,174000-156000:9000,156000:12000,156000-62000:6000,62000:13000,62000-183000:7000,183000:8000,183000-10000:5000,10000:9000,10000-9000:8000,9000:12000,9000-10000:9000,10000:8000,10000-10000:9000,10000:15000,10000-10000:10000,10000:15000,10000-202000:5000,202000:15000,202000-33000:5000,33000:9000,33000-159000:6000,159000:12000,159000-197000:7000,197000:20000,197000-67000:7000,67000:14000,67000-231000:5000,231000:17000,231000-67000:7000,67000:18000,67000-180000:8000,180000:16000,180000-183000:7000,183000:22000,183000-251000:5000,251000:14000,251000-80000:6000,80000:8000,80000-193000:9000,193000:17000,193000-243000:9000,243000:5000,243000-200000:10000,200000:17000,200000-15000:5000,15000:15000,15000-10000:7000,10000:16000,10000-11000:8000,11000:6000,11000-10000:8000,10000:11000,10000-13000:7000,13000:17000/100000:100000,100000-215000:5000,215000:18000,215000-98000:5000,98000:11000,98000-97000:10000,97000:13000,97000-209000:10000,209000:16000,209000-194000:5000,194000:7000,194000-264000:5000,264000:11000,264000-28000:6000,28000:18000,28000-172000:9000,172000:7000,172000-119000:7000,119000:14000,119000-54000:6000,54000:9000,54000-160000:7000,160000:1000,160000-235000:5000,235000:17000,235000-60000:6000,60000:12000,60000-148000:6000,148000:19000,148000-144000:7000,144000:13000,144000-137000:10000,137000:5000,137000-57000:5000,57000:19000,57000-39000:10000,39000:14000,39000-15000:7000,15000:15000,15000-19000:9000,19000:21000,19000-152000:5000,152000:20000,152000-23000:9000,23000:11000,23000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-177000:5000,177000:16000,177000-158000:10000,158000:18000,158000-27000:5000,27000:13000,27000-103000:7000,103000:19000,103000-57000:5000,57000:2000,57000-104000:5000,104000:14000,104000-18000:10000,18000:8000,18000-79000:6000,79000:9000,79000-82000:5000,82000:19000,82000-53000:7000,53000:17000,53000-262000:5000,262000:11000,262000-196000:9000,196000:10000,196000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:18000,218000-221000:5000,221000:6000,221000-159000:10000,159000:5000,159000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:11000,29000-11000:6000,11000:12000,11000-33000:5000,33000:7000,33000-9000:7000,9000:10000,9000-13000:10000,13000:19000,13000-10000:7000,10000:8000,10000-26000:7000,26000:20000,26000-113000:5000,113000:7000,113000-112000:10000,112000:5000,112000-38000:10000,38000:17000,38000-82000:5000,82000:8000,82000-30000:9000,30000:16000,30000-89000:5000,89000:3000,89000-93000:5000,93000:20000,93000-46000:8000,46000:5000,46000-21000:8000,21000:15000,21000-60000:10000,60000:19000,60000-90000:8000,90000:2000,90000-37000:5000,37000:20000,37000-30000:5000,30000:8000,30000-16000:8000,16000:18000,16000-28000:6000,28000:8000,28000-30000:7000,30000:15000,30000-81000:5000,81000:17000,81000-73000:8000,73000:5000,73000-79000:7000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:5000,13000-266000:5000,266000:17000,266000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:13000,170000-68000:5000,68000:9000,68000-25000:8000,25000:8000,25000-29000:7000,29000:14000,29000-39000:8000,39000:10000,39000-22000:8000,22000:11000,22000-41000:10000,41000:2000,41000-248000:5000,248000:8000,248000-130000:7000,130000:5000,130000-242000:8000,242000:12000,242000-203000:5000,203000:5000,203000-133000:8000,133000:11000,133000-145000:8000,145000:18000,145000-10000:5000,10000:19000,10000-9000:9000,9000:6000,9000-9000:9000,9000:17000,9000-9000:10000,9000:10000,9000-9000:9000,9000:6000,9000-15000:5000,15000:15000,15000-12000:5000,12000:8000,12000-9000:5000,9000:9000,9000-14000:9000,14000:6000,14000-10000:7000,10000:5000,10000-12000:5000,12000:21000,12000-237000:5000,237000:14000,237000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:16000,117000-192000:6000,192000:9000,192000-166000:5000,166000:10000,166000-133000:10000,133000:7000,133000-64000:9000,64000:7000,64000-30000:9000,30000:9000,30000-25000:9000,25000:9000,25000-52000:5000,52000:11000,52000-206000:5000,206000:15000,206000-141000:8000,141000:17000,141000-20000:9000,20000:18000,20000-36000:10000,36000:7000,36000-158000:9000,158000:2000,158000-241000:5000,241000:19000,241000-200000:9000,200000:19000,200000-124000:5000,124000:6000,124000-142000:8000,142000:20000,142000-237000:7000,237000:2000,237000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:5000,10000:18000,10000-10000:7000,10000:19000,10000-10000:8000,10000:7000,10000-153000:5000,153000:8000,153000-113000:8000,113000:12000,113000-147000:8000,147000:13000,147000-42000:9000,42000:19000,42000-56000:5000,56000:13000,56000-153000:5000,153000:18000,153000-63000:6000,63000:13000,63000-76000:5000,76000:12000,76000-129000:10000,129000:11000,129000-70000:7000,70000:13000,70000-158000:5000,158000:10000,158000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-58000:6000,58000:19000,58000-114000:9000,114000:13000,114000-267000:5000,267000:10000,267000-28000:7000,28000:14000,28000-247000:10000,247000:18000,247000-55000:8000,55000:9000,55000-87000:10000,87000:9000,87000-98000:5000,98000:7000,98000-58000:8000,58000:8000,58000-31000:7000,31000:10000,31000-55000:8000,55000:20000,55000-16000:9000,16000:10000,16000-26000:7000,26000:1000,26000-122000:5000,122000:16000,122000-92000:8000,92000:15000,92000-13000:7000,13000:11000,13000-43000:8000,43000:13000,43000-85000:9000,85000:8000,85000-100000:5000,100000:10000,100000-44000:8000,44000:7000,44000-86000:8000,86000:18000,86000-39000:8000,39000:7000,39000-37000:10000,37000:19000,37000-239000:5000,239000:5000,239000-38000:10000,38000:19000,38000-36000:7000,36000:19000,36000-162000:10000,162000:10000,162000-50000:7000,50000:8000,50000-270000:5000,270000:15000,270000-110000:6000,110000:13000,110000-116000:5000,116000:12000,116000-137000:5000,137000:8000,137000-170000:8000,170000:5000,170000-108000:5000,108000:13000,108000-182000:5000,182000:19000,182000-132000:10000,132000:17000,132000-41000:7000,41000:17000,41000-144000:7000,144000:18000,144000-126000:5000,126000:20000,126000-96000:8000,96000:17000,96000-47000:9000,47000:11000,47000-95000:10000,95000:20000,95000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-150000:5000,150000:6000,150000-143000:8000,143000:16000,143000-32000:7000,32000:19000,32000-128000:6000,128000:18000,128000-131000:6000,131000:9000,131000-10000:5000,10000:15000,10000-10000:9000,10000:19000,10000-10000:7000,10000:5000,10000-10000:7000,10000:18000,10000-10000:8000,10000:7000,10000-153000:5000,153000:14000,153000-24000:9000,24000:15000,24000-15000:8000,15000:20000,15000-145000:9000,145000:20000,145000-226000:5000,226000:16000,226000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-190000:6000,190000:16000,190000-75000:8000,75000:1000,75000-10000:5000,10000:7000,10000-10000:9000,10000:11000,10000-9000:9000,9000:12000,9000-10000:7000,10000:12000,10000-10000:5000,10000:10000,10000-10000:8000,10000:5000,10000-52000:5000,52000:13000,52000-25000:9000,25000:18000,25000-33000:5000,33000:13000,33000-49000:5000,49000:12000,49000-50000:8000,50000:12000,50000-234000:5000,234000:18000,234000-184000:9000,184000:7000,184000-141000:7000,141000:12000,141000-93000:5000,93000:16000,93000-186000:5000,186000:16000,186000-86000:5000,86000:7000,86000-86000:6000,86000:13000,86000-38000:7000,38000:8000,38000-17000:7000,17000:7000,17000-83000:8000,83000:12000,83000-52000:9000,52000:11000,52000-270000:5000,270000:7000,270000-60000:5000,60000:19000,60000-178000:9000,178000:6000,178000-63000:9000,63000:14000,63000-197000:6000,197000:20000,197000-78000:5000,78000:19000,78000-36000:6000,36000:8000,36000-43000:7000,43000:9000,43000-47000:7000,47000:5000,47000-78000:7000,78000:13000,78000-50000:10000,50000:4000,50000-49000:5000,49000:12000,49000-31000:7000,31000:20000,31000-44000:7000,44000:17000,44000-40000:5000,40000:16000,40000-18000:8000,18000:3000,18000-29000:5000,29000:11000,29000-19000:10000,19000:20000,19000-27000:10000,27000:14000,27000-10000:5000,10000:5000,10000-14000:7000,14000:13000,14000-265000:5000,265000:14000,265000-128000:8000,128000:16000,128000-89000:10000,89000:10000,89000-251000:6000,251000:17000,251000-61000:9000,61000:5000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240402-121616.483811 > /homes/inho/capybara-data/20240402-121616.483811.client
================ TEST COMPLETE =================

[RESULT]20240402-121616.483811, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2208316)
KILLED CAPYBARA PROCESSES
PARSING 20240402-121616.483811 migration delay
1
CALCULATING 20240402-121616.483811 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-121616.483811
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 676, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 305, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-121616.483811' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-121616.483811, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-121901.602542
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -104, kind: Uncategorized, message: "Unknown error -104" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 2215791 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=resp --redis-string=1000000 --transport=tcp --samples=1 --pps=10 --threads=100 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=100000:100000,100000-65000:5000,65000:12000,65000-23000:5000,23000:7000,23000-17000:8000,17000:8000,17000-54000:7000,54000:8000,54000-43000:6000,43000:17000,43000-42000:5000,42000:12000,42000-16000:5000,16000:17000,16000-9000:6000,9000:6000,9000-12000:8000,12000:8000,12000-10000:9000,10000:18000,10000-12000:5000,12000:9000,12000-9000:7000,9000:2000,9000-45000:5000,45000:11000,45000-10000:7000,10000:16000,10000-36000:5000,36000:12000,36000-24000:9000,24000:9000,24000-19000:5000,19000:7000,19000-30000:10000,30000:4000,30000-223000:5000,223000:16000,223000-48000:8000,48000:11000,48000-136000:8000,136000:5000,136000-220000:8000,220000:17000,220000-128000:9000,128000:13000,128000-128000:5000,128000:12000,128000-76000:9000,76000:6000,76000-90000:10000,90000:7000,90000-40000:6000,40000:19000,40000-104000:6000,104000:20000,104000-103000:5000,103000:20000,103000-51000:7000,51000:5000,51000-58000:8000,58000:12000,58000-29000:5000,29000:15000,29000-40000:7000,40000:16000,40000-176000:5000,176000:17000,176000-39000:6000,39000:20000,39000-114000:7000,114000:20000,114000-121000:5000,121000:8000,121000-103000:5000,103000:7000,103000-18000:5000,18000:18000,18000-15000:5000,15000:6000,15000-16000:7000,16000:18000,16000-13000:7000,13000:9000,13000-9000:6000,9000:8000,9000-17000:8000,17000:3000,17000-59000:5000,59000:17000,59000-40000:5000,40000:9000,40000-13000:5000,13000:6000,13000-45000:10000,45000:9000,45000-58000:10000,58000:24000,58000-247000:5000,247000:18000,247000-13000:10000,13000:8000,13000-114000:7000,114000:19000,114000-219000:10000,219000:23000,219000-167000:5000,167000:10000,167000-96000:10000,96000:10000,96000-120000:8000,120000:9000,120000-39000:9000,39000:16000,39000-46000:9000,46000:14000,46000-187000:5000,187000:20000,187000-114000:8000,114000:19000,114000-106000:6000,106000:12000,106000-150000:8000,150000:22000,150000-243000:5000,243000:11000,243000-37000:9000,37000:11000,37000-52000:9000,52000:11000,52000-102000:8000,102000:13000,102000-82000:9000,82000:14000,82000-199000:5000,199000:10000,199000-134000:7000,134000:15000,134000-160000:10000,160000:20000,160000-117000:7000,117000:13000,117000-131000:8000,131000:5000,131000-14000:5000,14000:6000,14000-14000:8000,14000:11000,14000-13000:9000,13000:17000,13000-10000:5000,10000:9000,10000-9000:6000,9000:24000,9000-212000:5000,212000:7000,212000-81000:8000,81000:16000,81000-124000:8000,124000:16000,124000-152000:8000,152000:18000,152000-192000:6000,192000:8000,192000-32000:5000,32000:18000,32000-31000:9000,31000:6000,31000-14000:5000,14000:10000,14000-24000:10000,24000:19000,24000-16000:10000,16000:8000,16000-270000:5000,270000:20000,270000-69000:6000,69000:11000,69000-254000:6000,254000:13000,254000-50000:9000,50000:15000,50000-221000:10000,221000:5000,221000-265000:5000,265000:10000,265000-175000:5000,175000:20000,175000-119000:10000,119000:7000,119000-265000:10000,265000:11000,265000-101000:6000,101000:5000,101000-17000:9000,17000:2000,17000-43000:5000,43000:8000,43000-21000:10000,21000:8000,21000-20000:8000,20000:15000,20000-28000:7000,28000:20000,28000-17000:5000,17000:14000,17000-114000:5000,114000:8000,114000-46000:9000,46000:18000,46000-111000:10000,111000:8000,111000-57000:6000,57000:18000,57000-31000:7000,31000:11000,31000-74000:5000,74000:6000,74000-34000:8000,34000:6000,34000-53000:8000,53000:16000,53000-43000:9000,43000:14000,43000-61000:5000,61000:23000,61000-39000:5000,39000:9000,39000-18000:6000,18000:7000,18000-10000:9000,10000:5000,10000-35000:7000,35000:19000,35000-17000:9000,17000:9000,17000-29000:8000,29000:7000,29000-270000:5000,270000:20000,270000-145000:7000,145000:20000,145000-194000:9000,194000:7000,194000-254000:10000,254000:22000,254000-127000:5000,127000:16000,127000-47000:9000,47000:16000,47000-19000:7000,19000:11000,19000-82000:10000,82000:7000,82000-102000:10000,102000:9000,102000-127000:5000,127000:5000,127000-49000:9000,49000:13000,49000-9000:8000,9000:17000,9000-72000:6000,72000:10000,72000-106000:9000,106000:18000,106000-122000:5000,122000:14000,122000-97000:6000,97000:10000,97000-120000:9000,120000:13000,120000-122000:8000,122000:16000,122000-34000:6000,34000:13000,34000-13000:5000,13000:16000,13000-12000:7000,12000:13000,12000-9000:8000,9000:14000,9000-10000:5000,10000:5000,10000-9000:7000,9000:20000,9000-182000:5000,182000:6000,182000-41000:7000,41000:11000,41000-52000:10000,52000:11000,52000-148000:6000,148000:8000,148000-23000:6000,23000:20000,23000-173000:6000,173000:4000,173000-158000:5000,158000:7000,158000-99000:6000,99000:8000,99000-154000:5000,154000:8000,154000-149000:10000,149000:12000,149000-41000:8000,41000:17000,41000-56000:6000,56000:8000,56000-180000:5000,180000:5000,180000-71000:6000,71000:18000,71000-59000:6000,59000:5000,59000-59000:6000,59000:15000,59000-124000:5000,124000:10000,124000-41000:9000,41000:10000,41000-41000:5000,41000:20000,41000-23000:5000,23000:15000,23000-37000:8000,37000:6000,37000-29000:8000,29000:16000,29000-32000:7000,32000:10000,32000-10000:5000,10000:11000,10000-9000:6000,9000:12000,9000-9000:5000,9000:7000,9000-9000:6000,9000:10000,9000-10000:10000,10000:16000,10000-9000:9000,9000:3000,9000-98000:5000,98000:6000,98000-74000:7000,74000:16000,74000-22000:8000,22000:5000,22000-60000:9000,60000:19000,60000-18000:7000,18000:18000,18000-154000:5000,154000:9000,154000-153000:6000,153000:16000,153000-68000:8000,68000:13000,68000-58000:10000,58000:13000,58000-68000:6000,68000:14000,68000-156000:5000,156000:14000,156000-142000:6000,142000:9000,142000-35000:10000,35000:14000,35000-37000:8000,37000:19000,37000-29000:8000,29000:7000,29000-130000:5000,130000:20000,130000-58000:9000,58000:15000,58000-116000:7000,116000:6000,116000-28000:8000,28000:8000,28000-82000:8000,82000:14000,82000-270000:5000,270000:15000,270000-189000:10000,189000:12000,189000-11000:6000,11000:18000,11000-251000:9000,251000:25000,251000-127000:5000,127000:8000,127000-56000:6000,56000:11000,56000-17000:5000,17000:9000,17000-94000:7000,94000:9000,94000-110000:8000,110000:9000,110000-49000:9000,49000:14000,49000-54000:5000,54000:20000,54000-39000:6000,39000:7000,39000-41000:9000,41000:14000,41000-27000:6000,27000:8000,27000-54000:6000,54000:19000,54000-270000:5000,270000:8000,270000-220000:6000,220000:6000,220000-82000:10000,82000:20000,82000-266000:10000,266000:16000,266000-112000:10000,112000:9000,112000-228000:5000,228000:16000,228000-62000:9000,62000:14000,62000-166000:7000,166000:5000,166000-226000:6000,226000:8000,226000-29000:10000,29000:6000,29000-168000:10000,168000:4000,168000-46000:5000,46000:15000,46000-30000:5000,30000:7000,30000-41000:9000,41000:15000,41000-11000:9000,11000:11000,11000-24000:10000,24000:14000,24000-194000:5000,194000:13000,194000-174000:7000,174000:20000,174000-156000:9000,156000:12000,156000-62000:6000,62000:13000,62000-183000:7000,183000:8000,183000-10000:5000,10000:9000,10000-9000:8000,9000:12000,9000-10000:9000,10000:8000,10000-10000:9000,10000:15000,10000-10000:10000,10000:15000,10000-202000:5000,202000:15000,202000-33000:5000,33000:9000,33000-159000:6000,159000:12000,159000-197000:7000,197000:20000,197000-67000:7000,67000:14000,67000-231000:5000,231000:17000,231000-67000:7000,67000:18000,67000-180000:8000,180000:16000,180000-183000:7000,183000:22000,183000-251000:5000,251000:14000,251000-80000:6000,80000:8000,80000-193000:9000,193000:17000,193000-243000:9000,243000:5000,243000-200000:10000,200000:17000,200000-15000:5000,15000:15000,15000-10000:7000,10000:16000,10000-11000:8000,11000:6000,11000-10000:8000,10000:11000,10000-13000:7000,13000:17000/100000:100000,100000-215000:5000,215000:18000,215000-98000:5000,98000:11000,98000-97000:10000,97000:13000,97000-209000:10000,209000:16000,209000-194000:5000,194000:7000,194000-264000:5000,264000:11000,264000-28000:6000,28000:18000,28000-172000:9000,172000:7000,172000-119000:7000,119000:14000,119000-54000:6000,54000:9000,54000-160000:7000,160000:1000,160000-235000:5000,235000:17000,235000-60000:6000,60000:12000,60000-148000:6000,148000:19000,148000-144000:7000,144000:13000,144000-137000:10000,137000:5000,137000-57000:5000,57000:19000,57000-39000:10000,39000:14000,39000-15000:7000,15000:15000,15000-19000:9000,19000:21000,19000-152000:5000,152000:20000,152000-23000:9000,23000:11000,23000-22000:7000,22000:12000,22000-11000:7000,11000:16000,11000-20000:5000,20000:8000,20000-177000:5000,177000:16000,177000-158000:10000,158000:18000,158000-27000:5000,27000:13000,27000-103000:7000,103000:19000,103000-57000:5000,57000:2000,57000-104000:5000,104000:14000,104000-18000:10000,18000:8000,18000-79000:6000,79000:9000,79000-82000:5000,82000:19000,82000-53000:7000,53000:17000,53000-262000:5000,262000:11000,262000-196000:9000,196000:10000,196000-127000:5000,127000:9000,127000-111000:6000,111000:19000,111000-218000:8000,218000:18000,218000-221000:5000,221000:6000,221000-159000:10000,159000:5000,159000-190000:10000,190000:9000,190000-146000:8000,146000:10000,146000-29000:8000,29000:11000,29000-11000:6000,11000:12000,11000-33000:5000,33000:7000,33000-9000:7000,9000:10000,9000-13000:10000,13000:19000,13000-10000:7000,10000:8000,10000-26000:7000,26000:20000,26000-113000:5000,113000:7000,113000-112000:10000,112000:5000,112000-38000:10000,38000:17000,38000-82000:5000,82000:8000,82000-30000:9000,30000:16000,30000-89000:5000,89000:3000,89000-93000:5000,93000:20000,93000-46000:8000,46000:5000,46000-21000:8000,21000:15000,21000-60000:10000,60000:19000,60000-90000:8000,90000:2000,90000-37000:5000,37000:20000,37000-30000:5000,30000:8000,30000-16000:8000,16000:18000,16000-28000:6000,28000:8000,28000-30000:7000,30000:15000,30000-81000:5000,81000:17000,81000-73000:8000,73000:5000,73000-79000:7000,79000:13000,79000-22000:5000,22000:14000,22000-75000:9000,75000:7000,75000-13000:5000,13000:5000,13000-266000:5000,266000:17000,266000-46000:10000,46000:16000,46000-235000:10000,235000:19000,235000-170000:10000,170000:13000,170000-68000:5000,68000:9000,68000-25000:8000,25000:8000,25000-29000:7000,29000:14000,29000-39000:8000,39000:10000,39000-22000:8000,22000:11000,22000-41000:10000,41000:2000,41000-248000:5000,248000:8000,248000-130000:7000,130000:5000,130000-242000:8000,242000:12000,242000-203000:5000,203000:5000,203000-133000:8000,133000:11000,133000-145000:8000,145000:18000,145000-10000:5000,10000:19000,10000-9000:9000,9000:6000,9000-9000:9000,9000:17000,9000-9000:10000,9000:10000,9000-9000:9000,9000:6000,9000-15000:5000,15000:15000,15000-12000:5000,12000:8000,12000-9000:5000,9000:9000,9000-14000:9000,14000:6000,14000-10000:7000,10000:5000,10000-12000:5000,12000:21000,12000-237000:5000,237000:14000,237000-88000:5000,88000:13000,88000-51000:8000,51000:17000,51000-117000:7000,117000:16000,117000-192000:6000,192000:9000,192000-166000:5000,166000:10000,166000-133000:10000,133000:7000,133000-64000:9000,64000:7000,64000-30000:9000,30000:9000,30000-25000:9000,25000:9000,25000-52000:5000,52000:11000,52000-206000:5000,206000:15000,206000-141000:8000,141000:17000,141000-20000:9000,20000:18000,20000-36000:10000,36000:7000,36000-158000:9000,158000:2000,158000-241000:5000,241000:19000,241000-200000:9000,200000:19000,200000-124000:5000,124000:6000,124000-142000:8000,142000:20000,142000-237000:7000,237000:2000,237000-10000:5000,10000:14000,10000-9000:8000,9000:9000,9000-10000:5000,10000:18000,10000-10000:7000,10000:19000,10000-10000:8000,10000:7000,10000-153000:5000,153000:8000,153000-113000:8000,113000:12000,113000-147000:8000,147000:13000,147000-42000:9000,42000:19000,42000-56000:5000,56000:13000,56000-153000:5000,153000:18000,153000-63000:6000,63000:13000,63000-76000:5000,76000:12000,76000-129000:10000,129000:11000,129000-70000:7000,70000:13000,70000-158000:5000,158000:10000,158000-46000:10000,46000:8000,46000-38000:8000,38000:12000,38000-58000:6000,58000:19000,58000-114000:9000,114000:13000,114000-267000:5000,267000:10000,267000-28000:7000,28000:14000,28000-247000:10000,247000:18000,247000-55000:8000,55000:9000,55000-87000:10000,87000:9000,87000-98000:5000,98000:7000,98000-58000:8000,58000:8000,58000-31000:7000,31000:10000,31000-55000:8000,55000:20000,55000-16000:9000,16000:10000,16000-26000:7000,26000:1000,26000-122000:5000,122000:16000,122000-92000:8000,92000:15000,92000-13000:7000,13000:11000,13000-43000:8000,43000:13000,43000-85000:9000,85000:8000,85000-100000:5000,100000:10000,100000-44000:8000,44000:7000,44000-86000:8000,86000:18000,86000-39000:8000,39000:7000,39000-37000:10000,37000:19000,37000-239000:5000,239000:5000,239000-38000:10000,38000:19000,38000-36000:7000,36000:19000,36000-162000:10000,162000:10000,162000-50000:7000,50000:8000,50000-270000:5000,270000:15000,270000-110000:6000,110000:13000,110000-116000:5000,116000:12000,116000-137000:5000,137000:8000,137000-170000:8000,170000:5000,170000-108000:5000,108000:13000,108000-182000:5000,182000:19000,182000-132000:10000,132000:17000,132000-41000:7000,41000:17000,41000-144000:7000,144000:18000,144000-126000:5000,126000:20000,126000-96000:8000,96000:17000,96000-47000:9000,47000:11000,47000-95000:10000,95000:20000,95000-124000:5000,124000:17000,124000-73000:10000,73000:11000,73000-116000:6000,116000:17000,116000-60000:8000,60000:10000,60000-28000:6000,28000:10000,28000-150000:5000,150000:6000,150000-143000:8000,143000:16000,143000-32000:7000,32000:19000,32000-128000:6000,128000:18000,128000-131000:6000,131000:9000,131000-10000:5000,10000:15000,10000-10000:9000,10000:19000,10000-10000:7000,10000:5000,10000-10000:7000,10000:18000,10000-10000:8000,10000:7000,10000-153000:5000,153000:14000,153000-24000:9000,24000:15000,24000-15000:8000,15000:20000,15000-145000:9000,145000:20000,145000-226000:5000,226000:16000,226000-30000:9000,30000:6000,30000-117000:9000,117000:7000,117000-83000:8000,83000:9000,83000-190000:6000,190000:16000,190000-75000:8000,75000:1000,75000-10000:5000,10000:7000,10000-10000:9000,10000:11000,10000-9000:9000,9000:12000,9000-10000:7000,10000:12000,10000-10000:5000,10000:10000,10000-10000:8000,10000:5000,10000-52000:5000,52000:13000,52000-25000:9000,25000:18000,25000-33000:5000,33000:13000,33000-49000:5000,49000:12000,49000-50000:8000,50000:12000,50000-234000:5000,234000:18000,234000-184000:9000,184000:7000,184000-141000:7000,141000:12000,141000-93000:5000,93000:16000,93000-186000:5000,186000:16000,186000-86000:5000,86000:7000,86000-86000:6000,86000:13000,86000-38000:7000,38000:8000,38000-17000:7000,17000:7000,17000-83000:8000,83000:12000,83000-52000:9000,52000:11000,52000-270000:5000,270000:7000,270000-60000:5000,60000:19000,60000-178000:9000,178000:6000,178000-63000:9000,63000:14000,63000-197000:6000,197000:20000,197000-78000:5000,78000:19000,78000-36000:6000,36000:8000,36000-43000:7000,43000:9000,43000-47000:7000,47000:5000,47000-78000:7000,78000:13000,78000-50000:10000,50000:4000,50000-49000:5000,49000:12000,49000-31000:7000,31000:20000,31000-44000:7000,44000:17000,44000-40000:5000,40000:16000,40000-18000:8000,18000:3000,18000-29000:5000,29000:11000,29000-19000:10000,19000:20000,19000-27000:10000,27000:14000,27000-10000:5000,10000:5000,10000-14000:7000,14000:13000,14000-265000:5000,265000:14000,265000-128000:8000,128000:16000,128000-89000:10000,89000:10000,89000-251000:6000,251000:17000,251000-61000:9000,61000:5000 --zipf=1.2 --exptid=/homes/inho/capybara-data/20240402-121901.602542 > /homes/inho/capybara-data/20240402-121901.602542.client
================ TEST COMPLETE =================

[RESULT]20240402-121901.602542, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2215564)
KILLED CAPYBARA PROCESSES
PARSING 20240402-121901.602542 migration delay
1
CALCULATING 20240402-121901.602542 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-121901.602542
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 676, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 305, in parse_mig_delay
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-121901.602542' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-121901.602542, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-122220.895653
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-122220.895653, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2222932)
KILLED CAPYBARA PROCESSES
PARSING 20240402-122220.895653 migration delay
41
CALCULATING 20240402-122220.895653 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-122220.895653
DONE
PARSING 20240402-122220.895653 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-122220.895653            && sh ms_avg_99p_lat.sh 20240402-122220.895653            && sh ms_total_even_odd_numreq.sh 20240402-122220.895653            && sh latency_cdf.sh 20240402-122220.895653
DONE
PARSING 20240402-122220.895653 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-122220.895653
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-122220.895653, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-122522.519830
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-122522.519830, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2230497)
KILLED CAPYBARA PROCESSES
PARSING 20240402-122522.519830 migration delay
21
CALCULATING 20240402-122522.519830 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240402-122522.519830
DONE
PARSING 20240402-122522.519830 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-122522.519830            && sh ms_avg_99p_lat.sh 20240402-122522.519830            && sh ms_total_even_odd_numreq.sh 20240402-122522.519830            && sh latency_cdf.sh 20240402-122522.519830
DONE
PARSING 20240402-122522.519830 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-122522.519830
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-122522.519830, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-125731.560007
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-125731.560007, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2241868)
KILLED CAPYBARA PROCESSES
PARSING 20240402-125731.560007 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-125731.560007            && sh ms_avg_99p_lat.sh 20240402-125731.560007            && sh ms_total_even_odd_numreq.sh 20240402-125731.560007            && sh latency_cdf.sh 20240402-125731.560007
DONE
PARSING 20240402-125731.560007 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-125731.560007
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-125731.560007, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-125852.811864
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-125852.811864, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2243471)
KILLED CAPYBARA PROCESSES
PARSING 20240402-125852.811864 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-125852.811864            && sh ms_avg_99p_lat.sh 20240402-125852.811864            && sh ms_total_even_odd_numreq.sh 20240402-125852.811864            && sh latency_cdf.sh 20240402-125852.811864
DONE
PARSING 20240402-125852.811864 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-125852.811864
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-125852.811864, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-125959.079832
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-125959.079832, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2245090)
KILLED CAPYBARA PROCESSES
PARSING 20240402-125959.079832 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-125959.079832            && sh ms_avg_99p_lat.sh 20240402-125959.079832            && sh ms_total_even_odd_numreq.sh 20240402-125959.079832            && sh latency_cdf.sh 20240402-125959.079832
DONE
PARSING 20240402-125959.079832 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-125959.079832
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-125959.079832, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-130156.699531
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-130156.699531, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2246799)
KILLED CAPYBARA PROCESSES
PARSING 20240402-130156.699531 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-130156.699531            && sh ms_avg_99p_lat.sh 20240402-130156.699531            && sh ms_total_even_odd_numreq.sh 20240402-130156.699531            && sh latency_cdf.sh 20240402-130156.699531
DONE
PARSING 20240402-130156.699531 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-130156.699531
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-130156.699531, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-130554.226903
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-130554.226903, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2254843)
KILLED CAPYBARA PROCESSES
PARSING 20240402-130554.226903 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-130554.226903            && sh ms_avg_99p_lat.sh 20240402-130554.226903            && sh ms_total_even_odd_numreq.sh 20240402-130554.226903            && sh latency_cdf.sh 20240402-130554.226903
DONE
PARSING 20240402-130554.226903 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-130554.226903
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-130554.226903, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-130700.611831
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-130700.611831, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2256413)
KILLED CAPYBARA PROCESSES
PARSING 20240402-130700.611831 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-130700.611831            && sh ms_avg_99p_lat.sh 20240402-130700.611831            && sh ms_total_even_odd_numreq.sh 20240402-130700.611831            && sh latency_cdf.sh 20240402-130700.611831
DONE
PARSING 20240402-130700.611831 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-130700.611831
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-130700.611831, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-130816.071894
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-130816.071894, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2257973)
KILLED CAPYBARA PROCESSES
PARSING 20240402-130816.071894 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-130816.071894            && sh ms_avg_99p_lat.sh 20240402-130816.071894            && sh ms_total_even_odd_numreq.sh 20240402-130816.071894            && sh latency_cdf.sh 20240402-130816.071894
DONE
PARSING 20240402-130816.071894 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-130816.071894
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-130816.071894, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-130934.895454
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-130934.895454, 2, 100, 0, 0, 100000, 10, N/A



iokerneld killed (pid 2259557)
KILLED CAPYBARA PROCESSES
PARSING 20240402-130934.895454 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-130934.895454            && sh ms_avg_99p_lat.sh 20240402-130934.895454            && sh ms_total_even_odd_numreq.sh 20240402-130934.895454            && sh latency_cdf.sh 20240402-130934.895454
DONE
PARSING 20240402-130934.895454 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-130934.895454
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-130934.895454, 2, 100, 0, 0, 100000, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-131134.671227
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-131134.671227, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2261238)
KILLED CAPYBARA PROCESSES
PARSING 20240402-131134.671227 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-131134.671227            && sh ms_avg_99p_lat.sh 20240402-131134.671227            && sh ms_total_even_odd_numreq.sh 20240402-131134.671227            && sh latency_cdf.sh 20240402-131134.671227
DONE
PARSING 20240402-131134.671227 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-131134.671227
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-131134.671227, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-131327.542898
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-131327.542898, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2262905)
KILLED CAPYBARA PROCESSES
PARSING 20240402-131327.542898 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-131327.542898            && sh ms_avg_99p_lat.sh 20240402-131327.542898            && sh ms_total_even_odd_numreq.sh 20240402-131327.542898            && sh latency_cdf.sh 20240402-131327.542898
DONE
PARSING 20240402-131327.542898 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-131327.542898
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-131327.542898, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-131501.722961
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-131501.722961, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2264558)
KILLED CAPYBARA PROCESSES
PARSING 20240402-131501.722961 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-131501.722961            && sh ms_avg_99p_lat.sh 20240402-131501.722961            && sh ms_total_even_odd_numreq.sh 20240402-131501.722961            && sh latency_cdf.sh 20240402-131501.722961
DONE
PARSING 20240402-131501.722961 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-131501.722961
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-131501.722961, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-131624.467460
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-131624.467460, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 2266198)
KILLED CAPYBARA PROCESSES
PARSING 20240402-131624.467460 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-131624.467460            && sh ms_avg_99p_lat.sh 20240402-131624.467460            && sh ms_total_even_odd_numreq.sh 20240402-131624.467460            && sh latency_cdf.sh 20240402-131624.467460
DONE
PARSING 20240402-131624.467460 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-131624.467460
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-131624.467460, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240402-131831.067200
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240402-131831.067200, 2, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 2267872)
KILLED CAPYBARA PROCESSES
PARSING 20240402-131831.067200 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240402-131831.067200            && sh ms_avg_99p_lat.sh 20240402-131831.067200            && sh ms_total_even_odd_numreq.sh 20240402-131831.067200            && sh latency_cdf.sh 20240402-131831.067200
DONE
PARSING 20240402-131831.067200 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240402-131831.067200
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240402-131831.067200, 2, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-123703.287415
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3416988 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=100 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-123703.287415.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-123703.287415, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2444135)
dpdk-ctrl.elf killed (pid 3416899)
KILLED CAPYBARA PROCESSES
PARSING 20240403-123703.287415 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-123703.287415            && sh ms_avg_99p_lat.sh 20240403-123703.287415            && sh ms_total_even_odd_numreq.sh 20240403-123703.287415            && sh latency_cdf.sh 20240403-123703.287415
DONE
PARSING 20240403-123703.287415 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-123703.287415
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-123703.287415, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-123810.331834
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-123810.331834, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2445664)
KILLED CAPYBARA PROCESSES
PARSING 20240403-123810.331834 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-123810.331834            && sh ms_avg_99p_lat.sh 20240403-123810.331834            && sh ms_total_even_odd_numreq.sh 20240403-123810.331834            && sh latency_cdf.sh 20240403-123810.331834
DONE
PARSING 20240403-123810.331834 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-123810.331834
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-123810.331834, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-123949.791138
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-123949.791138, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2447316)
KILLED CAPYBARA PROCESSES
PARSING 20240403-123949.791138 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-123949.791138            && sh ms_avg_99p_lat.sh 20240403-123949.791138            && sh ms_total_even_odd_numreq.sh 20240403-123949.791138            && sh latency_cdf.sh 20240403-123949.791138
DONE
PARSING 20240403-123949.791138 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-123949.791138
DONE
PARSING 20240403-123949.791138 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-123949.791138
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-123949.791138, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124127.187730
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3420491 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=100 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240403-124127.187730.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124127.187730, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2448974)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124127.187730 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124127.187730            && sh ms_avg_99p_lat.sh 20240403-124127.187730            && sh ms_total_even_odd_numreq.sh 20240403-124127.187730            && sh latency_cdf.sh 20240403-124127.187730
DONE
PARSING 20240403-124127.187730 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124127.187730
DONE
PARSING 20240403-124127.187730 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124127.187730
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124127.187730, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124204.271151
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3421624 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=30 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-124204.271151.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124204.271151, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2450436)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124204.271151 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124204.271151            && sh ms_avg_99p_lat.sh 20240403-124204.271151            && sh ms_total_even_odd_numreq.sh 20240403-124204.271151            && sh latency_cdf.sh 20240403-124204.271151
DONE
PARSING 20240403-124204.271151 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124204.271151
DONE
PARSING 20240403-124204.271151 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124204.271151
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124204.271151, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124243.723781
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124243.723781, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2451907)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124243.723781 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124243.723781            && sh ms_avg_99p_lat.sh 20240403-124243.723781            && sh ms_total_even_odd_numreq.sh 20240403-124243.723781            && sh latency_cdf.sh 20240403-124243.723781
DONE
PARSING 20240403-124243.723781 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124243.723781
DONE
PARSING 20240403-124243.723781 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124243.723781
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124243.723781, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124356.739314
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3423945 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=10 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-124356.739314.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124356.739314, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2453487)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124356.739314 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124356.739314            && sh ms_avg_99p_lat.sh 20240403-124356.739314            && sh ms_total_even_odd_numreq.sh 20240403-124356.739314            && sh latency_cdf.sh 20240403-124356.739314
DONE
PARSING 20240403-124356.739314 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124356.739314
DONE
PARSING 20240403-124356.739314 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124356.739314
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124356.739314, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124434.116034
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3425088 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=5 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240403-124434.116034.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124434.116034, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2454945)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124434.116034 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124434.116034            && sh ms_avg_99p_lat.sh 20240403-124434.116034            && sh ms_total_even_odd_numreq.sh 20240403-124434.116034            && sh latency_cdf.sh 20240403-124434.116034
DONE
PARSING 20240403-124434.116034 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124434.116034
DONE
PARSING 20240403-124434.116034 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124434.116034
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124434.116034, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124514.327848
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3426241 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=3 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240403-124514.327848.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124514.327848, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2456426)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124514.327848 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124514.327848            && sh ms_avg_99p_lat.sh 20240403-124514.327848            && sh ms_total_even_odd_numreq.sh 20240403-124514.327848            && sh latency_cdf.sh 20240403-124514.327848
DONE
PARSING 20240403-124514.327848 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124514.327848
DONE
PARSING 20240403-124514.327848 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124514.327848
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124514.327848, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124553.263605
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3427380 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=3 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240403-124553.263605.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124553.263605, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2457900)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124553.263605 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124553.263605            && sh ms_avg_99p_lat.sh 20240403-124553.263605            && sh ms_total_even_odd_numreq.sh 20240403-124553.263605            && sh latency_cdf.sh 20240403-124553.263605
DONE
PARSING 20240403-124553.263605 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124553.263605
DONE
PARSING 20240403-124553.263605 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124553.263605
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124553.263605, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124710.591647
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3428548 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=3 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-124710.591647.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124710.591647, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2459613)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124710.591647 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124710.591647            && sh ms_avg_99p_lat.sh 20240403-124710.591647            && sh ms_total_even_odd_numreq.sh 20240403-124710.591647            && sh latency_cdf.sh 20240403-124710.591647
DONE
PARSING 20240403-124710.591647 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124710.591647
DONE
PARSING 20240403-124710.591647 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124710.591647
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124710.591647, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124831.943714
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3429716 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=10 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-124831.943714.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124831.943714, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2461398)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124831.943714 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124831.943714            && sh ms_avg_99p_lat.sh 20240403-124831.943714            && sh ms_total_even_odd_numreq.sh 20240403-124831.943714            && sh latency_cdf.sh 20240403-124831.943714
DONE
PARSING 20240403-124831.943714 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124831.943714
DONE
PARSING 20240403-124831.943714 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124831.943714
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124831.943714, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-124909.163372
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3430856 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=10 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240403-124909.163372.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-124909.163372, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2462855)
KILLED CAPYBARA PROCESSES
PARSING 20240403-124909.163372 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-124909.163372            && sh ms_avg_99p_lat.sh 20240403-124909.163372            && sh ms_total_even_odd_numreq.sh 20240403-124909.163372            && sh latency_cdf.sh 20240403-124909.163372
DONE
PARSING 20240403-124909.163372 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-124909.163372
DONE
PARSING 20240403-124909.163372 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-124909.163372
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-124909.163372, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-125028.055569
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-125028.055569, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2464586)
KILLED CAPYBARA PROCESSES
PARSING 20240403-125028.055569 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-125028.055569            && sh ms_avg_99p_lat.sh 20240403-125028.055569            && sh ms_total_even_odd_numreq.sh 20240403-125028.055569            && sh latency_cdf.sh 20240403-125028.055569
DONE
PARSING 20240403-125028.055569 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-125028.055569
DONE
PARSING 20240403-125028.055569 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-125028.055569
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-125028.055569, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-125144.351620
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-125144.351620, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2466211)
KILLED CAPYBARA PROCESSES
PARSING 20240403-125144.351620 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-125144.351620            && sh ms_avg_99p_lat.sh 20240403-125144.351620            && sh ms_total_even_odd_numreq.sh 20240403-125144.351620            && sh latency_cdf.sh 20240403-125144.351620
DONE
PARSING 20240403-125144.351620 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-125144.351620
DONE
PARSING 20240403-125144.351620 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-125144.351620
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-125144.351620, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-125316.427453
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3434330 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=10 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-125316.427453.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-125316.427453, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2467840)
KILLED CAPYBARA PROCESSES
PARSING 20240403-125316.427453 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-125316.427453            && sh ms_avg_99p_lat.sh 20240403-125316.427453            && sh ms_total_even_odd_numreq.sh 20240403-125316.427453            && sh latency_cdf.sh 20240403-125316.427453
DONE
PARSING 20240403-125316.427453 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-125316.427453
DONE
PARSING 20240403-125316.427453 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-125316.427453
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-125316.427453, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-125548.607276
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3435501 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=10 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240403-125548.607276.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-125548.607276, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2469793)
KILLED CAPYBARA PROCESSES
PARSING 20240403-125548.607276 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-125548.607276            && sh ms_avg_99p_lat.sh 20240403-125548.607276            && sh ms_total_even_odd_numreq.sh 20240403-125548.607276            && sh latency_cdf.sh 20240403-125548.607276
DONE
PARSING 20240403-125548.607276 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-125548.607276
DONE
PARSING 20240403-125548.607276 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-125548.607276
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-125548.607276, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-130012.219598
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-130012.219598, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2471911)
KILLED CAPYBARA PROCESSES
PARSING 20240403-130012.219598 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-130012.219598            && sh ms_avg_99p_lat.sh 20240403-130012.219598            && sh ms_total_even_odd_numreq.sh 20240403-130012.219598            && sh latency_cdf.sh 20240403-130012.219598
DONE
PARSING 20240403-130012.219598 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-130012.219598
DONE
PARSING 20240403-130012.219598 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-130012.219598
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-130012.219598, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-130339.971776
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-130339.971776, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2473797)
KILLED CAPYBARA PROCESSES
PARSING 20240403-130339.971776 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-130339.971776            && sh ms_avg_99p_lat.sh 20240403-130339.971776            && sh ms_total_even_odd_numreq.sh 20240403-130339.971776            && sh latency_cdf.sh 20240403-130339.971776
DONE
PARSING 20240403-130339.971776 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-130339.971776
DONE
PARSING 20240403-130339.971776 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-130339.971776
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-130339.971776, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-130712.092003
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-130712.092003, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2475679)
KILLED CAPYBARA PROCESSES
PARSING 20240403-130712.092003 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-130712.092003            && sh ms_avg_99p_lat.sh 20240403-130712.092003            && sh ms_total_even_odd_numreq.sh 20240403-130712.092003            && sh latency_cdf.sh 20240403-130712.092003
DONE
PARSING 20240403-130712.092003 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-130712.092003
DONE
PARSING 20240403-130712.092003 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-130712.092003
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-130712.092003, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-130819.216035
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-130819.216035, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2477239)
KILLED CAPYBARA PROCESSES
PARSING 20240403-130819.216035 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-130819.216035            && sh ms_avg_99p_lat.sh 20240403-130819.216035            && sh ms_total_even_odd_numreq.sh 20240403-130819.216035            && sh latency_cdf.sh 20240403-130819.216035
DONE
PARSING 20240403-130819.216035 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-130819.216035
DONE
PARSING 20240403-130819.216035 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-130819.216035
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-130819.216035, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-130929.651611
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-130929.651611, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2478803)
KILLED CAPYBARA PROCESSES
PARSING 20240403-130929.651611 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-130929.651611            && sh ms_avg_99p_lat.sh 20240403-130929.651611            && sh ms_total_even_odd_numreq.sh 20240403-130929.651611            && sh latency_cdf.sh 20240403-130929.651611
DONE
PARSING 20240403-130929.651611 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-130929.651611
DONE
PARSING 20240403-130929.651611 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-130929.651611
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-130929.651611, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-131319.499781
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-131319.499781, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2480714)
KILLED CAPYBARA PROCESSES
PARSING 20240403-131319.499781 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-131319.499781            && sh ms_avg_99p_lat.sh 20240403-131319.499781            && sh ms_total_even_odd_numreq.sh 20240403-131319.499781            && sh latency_cdf.sh 20240403-131319.499781
DONE
PARSING 20240403-131319.499781 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-131319.499781
DONE
PARSING 20240403-131319.499781 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-131319.499781
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-131319.499781, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-131418.111725
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-131418.111725, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2482257)
KILLED CAPYBARA PROCESSES
PARSING 20240403-131418.111725 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-131418.111725            && sh ms_avg_99p_lat.sh 20240403-131418.111725            && sh ms_total_even_odd_numreq.sh 20240403-131418.111725            && sh latency_cdf.sh 20240403-131418.111725
DONE
PARSING 20240403-131418.111725 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-131418.111725
DONE
PARSING 20240403-131418.111725 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-131418.111725
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-131418.111725, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-132047.355363
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-132047.355363, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2484537)
KILLED CAPYBARA PROCESSES
PARSING 20240403-132047.355363 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-132047.355363            && sh ms_avg_99p_lat.sh 20240403-132047.355363            && sh ms_total_even_odd_numreq.sh 20240403-132047.355363            && sh latency_cdf.sh 20240403-132047.355363
DONE
PARSING 20240403-132047.355363 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-132047.355363
DONE
PARSING 20240403-132047.355363 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-132047.355363
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-132047.355363, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-132149.323540
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-132149.323540, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2486105)
dpdk-ctrl.elf killed (pid 3445922)
KILLED CAPYBARA PROCESSES
PARSING 20240403-132149.323540 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-132149.323540            && sh ms_avg_99p_lat.sh 20240403-132149.323540            && sh ms_total_even_odd_numreq.sh 20240403-132149.323540            && sh latency_cdf.sh 20240403-132149.323540
DONE
PARSING 20240403-132149.323540 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-132149.323540
DONE
PARSING 20240403-132149.323540 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-132149.323540
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-132149.323540, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-132335.131749
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-132335.131749, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2487755)
KILLED CAPYBARA PROCESSES
PARSING 20240403-132335.131749 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-132335.131749            && sh ms_avg_99p_lat.sh 20240403-132335.131749            && sh ms_total_even_odd_numreq.sh 20240403-132335.131749            && sh latency_cdf.sh 20240403-132335.131749
DONE
PARSING 20240403-132335.131749 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-132335.131749
DONE
PARSING 20240403-132335.131749 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-132335.131749
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-132335.131749, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-134255.107700
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-134255.107700, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2491758)
KILLED CAPYBARA PROCESSES
PARSING 20240403-134255.107700 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-134255.107700            && sh ms_avg_99p_lat.sh 20240403-134255.107700            && sh ms_total_even_odd_numreq.sh 20240403-134255.107700            && sh latency_cdf.sh 20240403-134255.107700
DONE
PARSING 20240403-134255.107700 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-134255.107700
DONE
PARSING 20240403-134255.107700 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-134255.107700
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-134255.107700, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-134345.875403
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-134345.875403, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2493269)
KILLED CAPYBARA PROCESSES
PARSING 20240403-134345.875403 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-134345.875403            && sh ms_avg_99p_lat.sh 20240403-134345.875403            && sh ms_total_even_odd_numreq.sh 20240403-134345.875403            && sh latency_cdf.sh 20240403-134345.875403
DONE
PARSING 20240403-134345.875403 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-134345.875403
DONE
PARSING 20240403-134345.875403 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-134345.875403
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-134345.875403, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-134457.948050
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-134457.948050, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2494809)
KILLED CAPYBARA PROCESSES
PARSING 20240403-134457.948050 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-134457.948050            && sh ms_avg_99p_lat.sh 20240403-134457.948050            && sh ms_total_even_odd_numreq.sh 20240403-134457.948050            && sh latency_cdf.sh 20240403-134457.948050
DONE
PARSING 20240403-134457.948050 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-134457.948050
DONE
PARSING 20240403-134457.948050 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-134457.948050
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-134457.948050, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240403-134737.074588
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240403-134737.074588, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2496545)
KILLED CAPYBARA PROCESSES
PARSING 20240403-134737.074588 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240403-134737.074588            && sh ms_avg_99p_lat.sh 20240403-134737.074588            && sh ms_total_even_odd_numreq.sh 20240403-134737.074588            && sh latency_cdf.sh 20240403-134737.074588
DONE
PARSING 20240403-134737.074588 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240403-134737.074588
DONE
PARSING 20240403-134737.074588 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240403-134737.074588
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240403-134737.074588, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-081751.091345
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
bash: line 1: 3457470 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=10 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=10 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.6 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240404-081751.091345.be0 2>&1
================ TEST COMPLETE =================

[RESULT]20240404-081751.091345, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2638390)
KILLED CAPYBARA PROCESSES
PARSING 20240404-081751.091345 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-081751.091345            && sh ms_avg_99p_lat.sh 20240404-081751.091345            && sh ms_total_even_odd_numreq.sh 20240404-081751.091345            && sh latency_cdf.sh 20240404-081751.091345
DONE
PARSING 20240404-081751.091345 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-081751.091345
DONE
PARSING 20240404-081751.091345 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-081751.091345
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-081751.091345, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-082122.887351
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-082122.887351, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2640312)
KILLED CAPYBARA PROCESSES
PARSING 20240404-082122.887351 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-082122.887351            && sh ms_avg_99p_lat.sh 20240404-082122.887351            && sh ms_total_even_odd_numreq.sh 20240404-082122.887351            && sh latency_cdf.sh 20240404-082122.887351
DONE
PARSING 20240404-082122.887351 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-082122.887351
DONE
PARSING 20240404-082122.887351 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-082122.887351
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-082122.887351, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-082342.399003
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-082342.399003, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2642155)
KILLED CAPYBARA PROCESSES
PARSING 20240404-082342.399003 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-082342.399003            && sh ms_avg_99p_lat.sh 20240404-082342.399003            && sh ms_total_even_odd_numreq.sh 20240404-082342.399003            && sh latency_cdf.sh 20240404-082342.399003
DONE
PARSING 20240404-082342.399003 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-082342.399003
DONE
PARSING 20240404-082342.399003 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-082342.399003
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-082342.399003, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-082537.291213
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-082537.291213, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2643819)
KILLED CAPYBARA PROCESSES
PARSING 20240404-082537.291213 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-082537.291213            && sh ms_avg_99p_lat.sh 20240404-082537.291213            && sh ms_total_even_odd_numreq.sh 20240404-082537.291213            && sh latency_cdf.sh 20240404-082537.291213
DONE
PARSING 20240404-082537.291213 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-082537.291213
DONE
PARSING 20240404-082537.291213 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-082537.291213
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-082537.291213, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-082802.523617
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-082802.523617, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2645585)
KILLED CAPYBARA PROCESSES
PARSING 20240404-082802.523617 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-082802.523617            && sh ms_avg_99p_lat.sh 20240404-082802.523617            && sh ms_total_even_odd_numreq.sh 20240404-082802.523617            && sh latency_cdf.sh 20240404-082802.523617
DONE
PARSING 20240404-082802.523617 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-082802.523617
DONE
PARSING 20240404-082802.523617 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-082802.523617
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-082802.523617, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-082919.063490
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-082919.063490, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2647178)
KILLED CAPYBARA PROCESSES
PARSING 20240404-082919.063490 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-082919.063490            && sh ms_avg_99p_lat.sh 20240404-082919.063490            && sh ms_total_even_odd_numreq.sh 20240404-082919.063490            && sh latency_cdf.sh 20240404-082919.063490
DONE
PARSING 20240404-082919.063490 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-082919.063490
DONE
PARSING 20240404-082919.063490 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-082919.063490
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-082919.063490, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-083027.455391
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-083027.455391, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2648724)
KILLED CAPYBARA PROCESSES
PARSING 20240404-083027.455391 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-083027.455391            && sh ms_avg_99p_lat.sh 20240404-083027.455391            && sh ms_total_even_odd_numreq.sh 20240404-083027.455391            && sh latency_cdf.sh 20240404-083027.455391
DONE
PARSING 20240404-083027.455391 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-083027.455391
DONE
PARSING 20240404-083027.455391 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-083027.455391
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-083027.455391, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-083122.711552
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-083122.711552, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2650237)
KILLED CAPYBARA PROCESSES
PARSING 20240404-083122.711552 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-083122.711552            && sh ms_avg_99p_lat.sh 20240404-083122.711552            && sh ms_total_even_odd_numreq.sh 20240404-083122.711552            && sh latency_cdf.sh 20240404-083122.711552
DONE
PARSING 20240404-083122.711552 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-083122.711552
DONE
PARSING 20240404-083122.711552 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-083122.711552
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-083122.711552, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-083216.443490
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-083216.443490, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2651774)
KILLED CAPYBARA PROCESSES
PARSING 20240404-083216.443490 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-083216.443490            && sh ms_avg_99p_lat.sh 20240404-083216.443490            && sh ms_total_even_odd_numreq.sh 20240404-083216.443490            && sh latency_cdf.sh 20240404-083216.443490
DONE
PARSING 20240404-083216.443490 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-083216.443490
DONE
PARSING 20240404-083216.443490 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-083216.443490
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-083216.443490, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-083609.966680
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-083609.966680, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2653739)
KILLED CAPYBARA PROCESSES
PARSING 20240404-083609.966680 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-083609.966680            && sh ms_avg_99p_lat.sh 20240404-083609.966680            && sh ms_total_even_odd_numreq.sh 20240404-083609.966680            && sh latency_cdf.sh 20240404-083609.966680
DONE
PARSING 20240404-083609.966680 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-083609.966680
DONE
PARSING 20240404-083609.966680 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-083609.966680
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-083609.966680, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-083734.575880
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-083734.575880, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2655359)
KILLED CAPYBARA PROCESSES
PARSING 20240404-083734.575880 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-083734.575880            && sh ms_avg_99p_lat.sh 20240404-083734.575880            && sh ms_total_even_odd_numreq.sh 20240404-083734.575880            && sh latency_cdf.sh 20240404-083734.575880
DONE
PARSING 20240404-083734.575880 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-083734.575880
DONE
PARSING 20240404-083734.575880 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-083734.575880
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-083734.575880, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-083851.251950
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-083851.251950, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2656938)
KILLED CAPYBARA PROCESSES
PARSING 20240404-083851.251950 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-083851.251950            && sh ms_avg_99p_lat.sh 20240404-083851.251950            && sh ms_total_even_odd_numreq.sh 20240404-083851.251950            && sh latency_cdf.sh 20240404-083851.251950
DONE
PARSING 20240404-083851.251950 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-083851.251950
DONE
PARSING 20240404-083851.251950 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-083851.251950
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-083851.251950, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-084059.790840
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-084059.790840, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2658887)
dpdk-ctrl.elf killed (pid 3471588)
KILLED CAPYBARA PROCESSES
PARSING 20240404-084059.790840 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-084059.790840            && sh ms_avg_99p_lat.sh 20240404-084059.790840            && sh ms_total_even_odd_numreq.sh 20240404-084059.790840            && sh latency_cdf.sh 20240404-084059.790840
DONE
PARSING 20240404-084059.790840 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-084059.790840
DONE
PARSING 20240404-084059.790840 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-084059.790840
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-084059.790840, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-084149.054607
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-084149.054607, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2660421)
KILLED CAPYBARA PROCESSES
PARSING 20240404-084149.054607 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-084149.054607            && sh ms_avg_99p_lat.sh 20240404-084149.054607            && sh ms_total_even_odd_numreq.sh 20240404-084149.054607            && sh latency_cdf.sh 20240404-084149.054607
DONE
PARSING 20240404-084149.054607 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-084149.054607
DONE
PARSING 20240404-084149.054607 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-084149.054607
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-084149.054607, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-084307.171504
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-084307.171504, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2662008)
KILLED CAPYBARA PROCESSES
PARSING 20240404-084307.171504 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-084307.171504            && sh ms_avg_99p_lat.sh 20240404-084307.171504            && sh ms_total_even_odd_numreq.sh 20240404-084307.171504            && sh latency_cdf.sh 20240404-084307.171504
DONE
PARSING 20240404-084307.171504 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-084307.171504
DONE
PARSING 20240404-084307.171504 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-084307.171504
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-084307.171504, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-084419.846969
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-084419.846969, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2663602)
KILLED CAPYBARA PROCESSES
PARSING 20240404-084419.846969 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-084419.846969            && sh ms_avg_99p_lat.sh 20240404-084419.846969            && sh ms_total_even_odd_numreq.sh 20240404-084419.846969            && sh latency_cdf.sh 20240404-084419.846969
DONE
PARSING 20240404-084419.846969 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-084419.846969
DONE
PARSING 20240404-084419.846969 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-084419.846969
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-084419.846969, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-084549.123397
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-084549.123397, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2665250)
KILLED CAPYBARA PROCESSES
PARSING 20240404-084549.123397 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-084549.123397            && sh ms_avg_99p_lat.sh 20240404-084549.123397            && sh ms_total_even_odd_numreq.sh 20240404-084549.123397            && sh latency_cdf.sh 20240404-084549.123397
DONE
PARSING 20240404-084549.123397 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-084549.123397
DONE
PARSING 20240404-084549.123397 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-084549.123397
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-084549.123397, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-084759.271475
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-084759.271475, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2666957)
KILLED CAPYBARA PROCESSES
PARSING 20240404-084759.271475 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-084759.271475            && sh ms_avg_99p_lat.sh 20240404-084759.271475            && sh ms_total_even_odd_numreq.sh 20240404-084759.271475            && sh latency_cdf.sh 20240404-084759.271475
DONE
PARSING 20240404-084759.271475 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-084759.271475
DONE
PARSING 20240404-084759.271475 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-084759.271475
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-084759.271475, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-085159.228157
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-085159.228157, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2668903)
KILLED CAPYBARA PROCESSES
PARSING 20240404-085159.228157 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-085159.228157            && sh ms_avg_99p_lat.sh 20240404-085159.228157            && sh ms_total_even_odd_numreq.sh 20240404-085159.228157            && sh latency_cdf.sh 20240404-085159.228157
DONE
PARSING 20240404-085159.228157 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-085159.228157
DONE
PARSING 20240404-085159.228157 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-085159.228157
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-085159.228157, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-085235.968088
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-085235.968088, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2670353)
KILLED CAPYBARA PROCESSES
PARSING 20240404-085235.968088 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-085235.968088            && sh ms_avg_99p_lat.sh 20240404-085235.968088            && sh ms_total_even_odd_numreq.sh 20240404-085235.968088            && sh latency_cdf.sh 20240404-085235.968088
DONE
PARSING 20240404-085235.968088 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-085235.968088
DONE
PARSING 20240404-085235.968088 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-085235.968088
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-085235.968088, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-085546.752002
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-085546.752002, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2672162)
KILLED CAPYBARA PROCESSES
PARSING 20240404-085546.752002 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-085546.752002            && sh ms_avg_99p_lat.sh 20240404-085546.752002            && sh ms_total_even_odd_numreq.sh 20240404-085546.752002            && sh latency_cdf.sh 20240404-085546.752002
DONE
PARSING 20240404-085546.752002 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-085546.752002
DONE
PARSING 20240404-085546.752002 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-085546.752002
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-085546.752002, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-085701.923900
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-085701.923900, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2673768)
KILLED CAPYBARA PROCESSES
PARSING 20240404-085701.923900 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-085701.923900            && sh ms_avg_99p_lat.sh 20240404-085701.923900            && sh ms_total_even_odd_numreq.sh 20240404-085701.923900            && sh latency_cdf.sh 20240404-085701.923900
DONE
PARSING 20240404-085701.923900 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-085701.923900
DONE
PARSING 20240404-085701.923900 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-085701.923900
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-085701.923900, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-085802.107403
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-085802.107403, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2675320)
KILLED CAPYBARA PROCESSES
PARSING 20240404-085802.107403 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-085802.107403            && sh ms_avg_99p_lat.sh 20240404-085802.107403            && sh ms_total_even_odd_numreq.sh 20240404-085802.107403            && sh latency_cdf.sh 20240404-085802.107403
DONE
PARSING 20240404-085802.107403 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-085802.107403
DONE
PARSING 20240404-085802.107403 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-085802.107403
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-085802.107403, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-085844.059176
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-085844.059176, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2676806)
KILLED CAPYBARA PROCESSES
PARSING 20240404-085844.059176 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-085844.059176            && sh ms_avg_99p_lat.sh 20240404-085844.059176            && sh ms_total_even_odd_numreq.sh 20240404-085844.059176            && sh latency_cdf.sh 20240404-085844.059176
DONE
PARSING 20240404-085844.059176 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-085844.059176
DONE
PARSING 20240404-085844.059176 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-085844.059176
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-085844.059176, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-090058.707324
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-090058.707324, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2678526)
KILLED CAPYBARA PROCESSES
PARSING 20240404-090058.707324 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-090058.707324            && sh ms_avg_99p_lat.sh 20240404-090058.707324            && sh ms_total_even_odd_numreq.sh 20240404-090058.707324            && sh latency_cdf.sh 20240404-090058.707324
DONE
PARSING 20240404-090058.707324 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-090058.707324
DONE
PARSING 20240404-090058.707324 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-090058.707324
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-090058.707324, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240404-090158.527889
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240404-090158.527889, 2, 100, 0, 100000, 0, 10, N/A



iokerneld killed (pid 2680059)
KILLED CAPYBARA PROCESSES
PARSING 20240404-090158.527889 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240404-090158.527889            && sh ms_avg_99p_lat.sh 20240404-090158.527889            && sh ms_total_even_odd_numreq.sh 20240404-090158.527889            && sh latency_cdf.sh 20240404-090158.527889
DONE
PARSING 20240404-090158.527889 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240404-090158.527889
DONE
PARSING 20240404-090158.527889 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240404-090158.527889
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240404-090158.527889, 2, 100, 0, 100000, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-055827.112174
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


277543    120808    74265    52584    40231    32325    26866    22888    19871    17511    15619    14070    12782    11694    10765    9962    9263    8649    8106    7622    7189    6798    6445    6124    5831    5563    5317    5090    4880    4685    4505    4336    4179    4032    3894    3765    3643    3528    3420    3317    3221    3129    3042    2959    2880    2805    2734    2665    2600    2538    2478    2421    2367    2314    2264    2215    2169    2124    2081    2039    1999    1960    1923    1887    1852    1819    1786    1755    1724    1695    1666    1638    1611    1585    1560    1535    1511    1488    1466    1444    1422    1402    1381    1362    1342    1324    1305    1288    1270    1253    1237    1221    1205    1190    1175    1160    1146    1132    1118    1104    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-055827.112174, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998029, 998018, 0, 93, 10.0, 18.0, 45.0, 72.0, 93.0, 1712469521, 1712469521572089346



iokerneld killed (pid 3192986)
KILLED CAPYBARA PROCESSES
PARSING 20240407-055827.112174 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-055827.112174            && sh ms_avg_99p_lat.sh 20240407-055827.112174            && sh ms_total_even_odd_numreq.sh 20240407-055827.112174            && sh latency_cdf.sh 20240407-055827.112174
DONE
PARSING 20240407-055827.112174 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-055827.112174
DONE
PARSING 20240407-055827.112174 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-055827.112174
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 688, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 520, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-055827.112174' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-055827.112174, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998029, 998018, 0, 93, 10.0, 18.0, 45.0, 72.0, 93.0, 1712469521, 1712469521572089346

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-084312.431495
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


277543    120808    74265    52584    40231    32325    26866    22888    19871    17511    15619    14070    12782    11694    10765    9962    9263    8649    8106    7622    7189    6798    6445    6124    5831    5563    5317    5090    4880    4685    4505    4336    4179    4032    3894    3765    3643    3528    3420    3317    3221    3129    3042    2959    2880    2805    2734    2665    2600    2538    2478    2421    2367    2314    2264    2215    2169    2124    2081    2039    1999    1960    1923    1887    1852    1819    1786    1755    1724    1695    1666    1638    1611    1585    1560    1535    1511    1488    1466    1444    1422    1402    1381    1362    1342    1324    1305    1288    1270    1253    1237    1221    1205    1190    1175    1160    1146    1132    1118    1104    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-084312.431495, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998072, 998062, 0, 56, 9.0, 17.0, 42.0, 68.0, 84.0, 1712479407, 1712479407032669016



iokerneld killed (pid 3215718)
KILLED CAPYBARA PROCESSES
PARSING 20240407-084312.431495 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-084312.431495            && sh ms_avg_99p_lat.sh 20240407-084312.431495            && sh ms_total_even_odd_numreq.sh 20240407-084312.431495            && sh latency_cdf.sh 20240407-084312.431495
DONE
PARSING 20240407-084312.431495 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-084312.431495
DONE
PARSING 20240407-084312.431495 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-084312.431495
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-084312.431495, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998072, 998062, 0, 56, 9.0, 17.0, 42.0, 68.0, 84.0, 1712479407, 1712479407032669016

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-085423.123036
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-085423.123036, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3218529)
KILLED CAPYBARA PROCESSES
PARSING 20240407-085423.123036 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-085423.123036            && sh ms_avg_99p_lat.sh 20240407-085423.123036            && sh ms_total_even_odd_numreq.sh 20240407-085423.123036            && sh latency_cdf.sh 20240407-085423.123036
DONE
PARSING 20240407-085423.123036 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-085423.123036
DONE
PARSING 20240407-085423.123036 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-085423.123036
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-085423.123036, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-091712.466641
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-091712.466641, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3222724)
KILLED CAPYBARA PROCESSES
PARSING 20240407-091712.466641 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-091712.466641            && sh ms_avg_99p_lat.sh 20240407-091712.466641            && sh ms_total_even_odd_numreq.sh 20240407-091712.466641            && sh latency_cdf.sh 20240407-091712.466641
DONE
PARSING 20240407-091712.466641 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-091712.466641
DONE
PARSING 20240407-091712.466641 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-091712.466641
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-091712.466641, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-102618.815850
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-102618.815850, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3232619)
KILLED CAPYBARA PROCESSES
PARSING 20240407-102618.815850 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-102618.815850            && sh ms_avg_99p_lat.sh 20240407-102618.815850            && sh ms_total_even_odd_numreq.sh 20240407-102618.815850            && sh latency_cdf.sh 20240407-102618.815850
DONE
PARSING 20240407-102618.815850 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-102618.815850
ERROR: cat: /homes/inho/capybara-data/20240407-102618.815850.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240407-102618.815850.server_reply_10001: No such file or directory



PARSING 20240407-102618.815850 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-102618.815850
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 688, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 520, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-102618.815850' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-102618.815850, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-102652.122712
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-102652.122712, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3233865)
KILLED CAPYBARA PROCESSES
PARSING 20240407-102652.122712 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-102652.122712            && sh ms_avg_99p_lat.sh 20240407-102652.122712            && sh ms_total_even_odd_numreq.sh 20240407-102652.122712            && sh latency_cdf.sh 20240407-102652.122712
DONE
PARSING 20240407-102652.122712 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-102652.122712
DONE
PARSING 20240407-102652.122712 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-102652.122712
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-102652.122712, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-102734.643366
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-102734.643366, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3235341)
KILLED CAPYBARA PROCESSES
PARSING 20240407-102734.643366 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-102734.643366            && sh ms_avg_99p_lat.sh 20240407-102734.643366            && sh ms_total_even_odd_numreq.sh 20240407-102734.643366            && sh latency_cdf.sh 20240407-102734.643366
DONE
PARSING 20240407-102734.643366 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-102734.643366
DONE
PARSING 20240407-102734.643366 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-102734.643366
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-102734.643366, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-103251.262802
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-103251.262802, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3237383)
KILLED CAPYBARA PROCESSES
PARSING 20240407-103251.262802 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-103251.262802            && sh ms_avg_99p_lat.sh 20240407-103251.262802            && sh ms_total_even_odd_numreq.sh 20240407-103251.262802            && sh latency_cdf.sh 20240407-103251.262802
DONE
PARSING 20240407-103251.262802 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-103251.262802
DONE
PARSING 20240407-103251.262802 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-103251.262802
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-103251.262802, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-103354.998587
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-103354.998587, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3238902)
KILLED CAPYBARA PROCESSES
PARSING 20240407-103354.998587 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-103354.998587            && sh ms_avg_99p_lat.sh 20240407-103354.998587            && sh ms_total_even_odd_numreq.sh 20240407-103354.998587            && sh latency_cdf.sh 20240407-103354.998587
DONE
PARSING 20240407-103354.998587 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-103354.998587
DONE
PARSING 20240407-103354.998587 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-103354.998587
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-103354.998587, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-103650.302969
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-103650.302969, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3240654)
KILLED CAPYBARA PROCESSES
PARSING 20240407-103650.302969 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-103650.302969            && sh ms_avg_99p_lat.sh 20240407-103650.302969            && sh ms_total_even_odd_numreq.sh 20240407-103650.302969            && sh latency_cdf.sh 20240407-103650.302969
DONE
PARSING 20240407-103650.302969 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-103650.302969
DONE
PARSING 20240407-103650.302969 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-103650.302969
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-103650.302969, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-104013.327812
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-104013.327812, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3242467)
KILLED CAPYBARA PROCESSES
PARSING 20240407-104013.327812 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-104013.327812            && sh ms_avg_99p_lat.sh 20240407-104013.327812            && sh ms_total_even_odd_numreq.sh 20240407-104013.327812            && sh latency_cdf.sh 20240407-104013.327812
DONE
PARSING 20240407-104013.327812 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-104013.327812
DONE
PARSING 20240407-104013.327812 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-104013.327812
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-104013.327812, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-130457.487911
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-130457.487911, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3261846)
KILLED CAPYBARA PROCESSES
PARSING 20240407-130457.487911 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-130457.487911            && sh ms_avg_99p_lat.sh 20240407-130457.487911            && sh ms_total_even_odd_numreq.sh 20240407-130457.487911            && sh latency_cdf.sh 20240407-130457.487911
DONE
PARSING 20240407-130457.487911 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-130457.487911
DONE
PARSING 20240407-130457.487911 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-130457.487911
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-130457.487911, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-131159.962872
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-131159.962872, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3266032)
KILLED CAPYBARA PROCESSES
PARSING 20240407-131159.962872 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-131159.962872            && sh ms_avg_99p_lat.sh 20240407-131159.962872            && sh ms_total_even_odd_numreq.sh 20240407-131159.962872            && sh latency_cdf.sh 20240407-131159.962872
DONE
PARSING 20240407-131159.962872 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-131159.962872
DONE
PARSING 20240407-131159.962872 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-131159.962872
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-131159.962872, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-131748.015704
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-131748.015704, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3268148)
KILLED CAPYBARA PROCESSES
PARSING 20240407-131748.015704 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-131748.015704            && sh ms_avg_99p_lat.sh 20240407-131748.015704            && sh ms_total_even_odd_numreq.sh 20240407-131748.015704            && sh latency_cdf.sh 20240407-131748.015704
DONE
PARSING 20240407-131748.015704 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-131748.015704
DONE
PARSING 20240407-131748.015704 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-131748.015704
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-131748.015704, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-132308.499551
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-132308.499551, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3270194)
KILLED CAPYBARA PROCESSES
PARSING 20240407-132308.499551 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-132308.499551            && sh ms_avg_99p_lat.sh 20240407-132308.499551            && sh ms_total_even_odd_numreq.sh 20240407-132308.499551            && sh latency_cdf.sh 20240407-132308.499551
DONE
PARSING 20240407-132308.499551 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-132308.499551
DONE
PARSING 20240407-132308.499551 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-132308.499551
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-132308.499551, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240407-132833.943043
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240407-132833.943043, 4, 100, 0, 0, 0, 10, N/A



iokerneld killed (pid 3272246)
KILLED CAPYBARA PROCESSES
PARSING 20240407-132833.943043 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240407-132833.943043            && sh ms_avg_99p_lat.sh 20240407-132833.943043            && sh ms_total_even_odd_numreq.sh 20240407-132833.943043            && sh latency_cdf.sh 20240407-132833.943043
DONE
PARSING 20240407-132833.943043 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240407-132833.943043
DONE
PARSING 20240407-132833.943043 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240407-132833.943043
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240407-132833.943043, 4, 100, 0, 0, 0, 10, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-045802.278541
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


277543    120808    74265    52584    40231    32325    26866    22888    19871    17511    15619    14070    12782    11694    10765    9962    9263    8649    8106    7622    7189    6798    6445    6124    5831    5563    5317    5090    4880    4685    4505    4336    4179    4032    3894    3765    3643    3528    3420    3317    3221    3129    3042    2959    2880    2805    2734    2665    2600    2538    2478    2421    2367    2314    2264    2215    2169    2124    2081    2039    1999    1960    1923    1887    1852    1819    1786    1755    1724    1695    1666    1638    1611    1585    1560    1535    1511    1488    1466    1444    1422    1402    1381    1362    1342    1324    1305    1288    1270    1253    1237    1221    1205    1190    1175    1160    1146    1132    1118    1104    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-045802.278541, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998075, 998065, 0, 55, 10.0, 17.0, 42.0, 67.0, 91.0, 1712552296, 1712552296646257767



iokerneld killed (pid 3407908)
KILLED CAPYBARA PROCESSES
PARSING 20240408-045802.278541 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-045802.278541            && sh ms_avg_99p_lat.sh 20240408-045802.278541            && sh ms_total_even_odd_numreq.sh 20240408-045802.278541            && sh latency_cdf.sh 20240408-045802.278541
DONE
PARSING 20240408-045802.278541 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-045802.278541
DONE
PARSING 20240408-045802.278541 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-045802.278541
Traceback (most recent call last):
  File "run_eval.py", line 755, in <module>
    run_eval()
  File "run_eval.py", line 688, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 520, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-045802.278541' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-045802.278541, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998075, 998065, 0, 55, 10.0, 17.0, 42.0, 67.0, 91.0, 1712552296, 1712552296646257767

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-063933.759572
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


277543    120808    74265    52584    40231    32325    26866    22888    19871    17511    15619    14070    12782    11694    10765    9962    9263    8649    8106    7622    7189    6798    6445    6124    5831    5563    5317    5090    4880    4685    4505    4336    4179    4032    3894    3765    3643    3528    3420    3317    3221    3129    3042    2959    2880    2805    2734    2665    2600    2538    2478    2421    2367    2314    2264    2215    2169    2124    2081    2039    1999    1960    1923    1887    1852    1819    1786    1755    1724    1695    1666    1638    1611    1585    1560    1535    1511    1488    1466    1444    1422    1402    1381    1362    1342    1324    1305    1288    1270    1253    1237    1221    1205    1190    1175    1160    1146    1132    1118    1104    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-063933.759572, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998073, 998065, 0, 53, 9.0, 17.0, 40.0, 64.0, 87.0, 1712558384, 1712558384811637615



iokerneld killed (pid 3440410)
KILLED CAPYBARA PROCESSES
PARSING 20240408-063933.759572 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-063933.759572            && sh ms_avg_99p_lat.sh 20240408-063933.759572            && sh ms_total_even_odd_numreq.sh 20240408-063933.759572            && sh latency_cdf.sh 20240408-063933.759572
DONE
PARSING 20240408-063933.759572 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-063933.759572
DONE
PARSING 20240408-063933.759572 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-063933.759572
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-063933.759572, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998073, 998065, 0, 53, 9.0, 17.0, 40.0, 64.0, 87.0, 1712558384, 1712558384811637615

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-064230.263368
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


277543    120808    74265    52584    40231    32325    26866    22888    19871    17511    15619    14070    12782    11694    10765    9962    9263    8649    8106    7622    7189    6798    6445    6124    5831    5563    5317    5090    4880    4685    4505    4336    4179    4032    3894    3765    3643    3528    3420    3317    3221    3129    3042    2959    2880    2805    2734    2665    2600    2538    2478    2421    2367    2314    2264    2215    2169    2124    2081    2039    1999    1960    1923    1887    1852    1819    1786    1755    1724    1695    1666    1638    1611    1585    1560    1535    1511    1488    1466    1444    1422    1402    1381    1362    1342    1324    1305    1288    1270    1253    1237    1221    1205    1190    1175    1160    1146    1132    1118    1104    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-064230.263368, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998052, 998041, 0, 73, 9.0, 17.0, 40.0, 65.0, 82.0, 1712558561, 1712558561233248432



iokerneld killed (pid 3442370)
KILLED CAPYBARA PROCESSES
PARSING 20240408-064230.263368 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-064230.263368            && sh ms_avg_99p_lat.sh 20240408-064230.263368            && sh ms_total_even_odd_numreq.sh 20240408-064230.263368            && sh latency_cdf.sh 20240408-064230.263368
DONE
PARSING 20240408-064230.263368 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-064230.263368
DONE
PARSING 20240408-064230.263368 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-064230.263368
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-064230.263368, 4, 100, 0, 0, 0, 10, exponential, 1000000, 998052, 998041, 0, 73, 9.0, 17.0, 40.0, 65.0, 82.0, 1712558561, 1712558561233248432

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-065751.643590
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 18


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-065751.643590, 4, 100, 0, 0, 0, 2, exponential, 10, 18, 18, 0, 0, 12.0, 59.0, 76.0, 76.0, 76.0, 1712559482, 1712559482581114022



iokerneld killed (pid 3445940)
KILLED CAPYBARA PROCESSES
PARSING 20240408-065751.643590 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-065751.643590            && sh ms_avg_99p_lat.sh 20240408-065751.643590            && sh ms_total_even_odd_numreq.sh 20240408-065751.643590            && sh latency_cdf.sh 20240408-065751.643590
ERROR: cat: /homes/inho/capybara-data/20240408-065751.643590.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-065751.643590.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-065751.643590.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-065751.643590.latency_trace: No such file or directory



PARSING 20240408-065751.643590 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-065751.643590
ERROR: cat: /homes/inho/capybara-data/20240408-065751.643590.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-065751.643590.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-065751.643590.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-065751.643590.server_reply' for reading (No such file or directory)



PARSING 20240408-065751.643590 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-065751.643590
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-065751.643590, 4, 100, 0, 0, 0, 2, exponential, 10, 18, 18, 0, 0, 12.0, 59.0, 76.0, 76.0, 76.0, 1712559482, 1712559482581114022

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-070455.895686
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 14


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-070455.895686, 4, 100, 0, 0, 0, 2, exponential, 10, 14, 14, 0, 0, 11.0, 66.0, 67.0, 67.0, 67.0, 1712559906, 1712559906813243182



iokerneld killed (pid 3448931)
KILLED CAPYBARA PROCESSES
PARSING 20240408-070455.895686 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-070455.895686            && sh ms_avg_99p_lat.sh 20240408-070455.895686            && sh ms_total_even_odd_numreq.sh 20240408-070455.895686            && sh latency_cdf.sh 20240408-070455.895686
ERROR: cat: /homes/inho/capybara-data/20240408-070455.895686.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-070455.895686.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-070455.895686.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-070455.895686.latency_trace: No such file or directory



PARSING 20240408-070455.895686 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-070455.895686
ERROR: cat: /homes/inho/capybara-data/20240408-070455.895686.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-070455.895686.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-070455.895686.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-070455.895686.server_reply' for reading (No such file or directory)



PARSING 20240408-070455.895686 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-070455.895686
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-070455.895686, 4, 100, 0, 0, 0, 2, exponential, 10, 14, 14, 0, 0, 11.0, 66.0, 67.0, 67.0, 67.0, 1712559906, 1712559906813243182

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-070706.119168
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-070706.119168, 4, 100, 0, 0, 0, 2, exponential, 10, 8, 8, 0, 0, 11.0, 88.0, 88.0, 88.0, 88.0, 1712560037, 1712560037030443556



iokerneld killed (pid 3450591)
KILLED CAPYBARA PROCESSES
PARSING 20240408-070706.119168 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-070706.119168            && sh ms_avg_99p_lat.sh 20240408-070706.119168            && sh ms_total_even_odd_numreq.sh 20240408-070706.119168            && sh latency_cdf.sh 20240408-070706.119168
ERROR: cat: /homes/inho/capybara-data/20240408-070706.119168.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-070706.119168.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-070706.119168.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-070706.119168.latency_trace: No such file or directory



PARSING 20240408-070706.119168 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-070706.119168
ERROR: cat: /homes/inho/capybara-data/20240408-070706.119168.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-070706.119168.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-070706.119168.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-070706.119168.server_reply' for reading (No such file or directory)



PARSING 20240408-070706.119168 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-070706.119168
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-070706.119168, 4, 100, 0, 0, 0, 2, exponential, 10, 8, 8, 0, 0, 11.0, 88.0, 88.0, 88.0, 88.0, 1712560037, 1712560037030443556

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-071030.771213
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-071030.771213, 4, 100, 0, 0, 0, 2, exponential, 10, 2, 2, 0, 0, 11.0, 11.0, 11.0, 11.0, 11.0, 1712560241, 1712560241678970333



iokerneld killed (pid 3452413)
KILLED CAPYBARA PROCESSES
PARSING 20240408-071030.771213 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-071030.771213            && sh ms_avg_99p_lat.sh 20240408-071030.771213            && sh ms_total_even_odd_numreq.sh 20240408-071030.771213            && sh latency_cdf.sh 20240408-071030.771213
ERROR: cat: /homes/inho/capybara-data/20240408-071030.771213.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-071030.771213.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071030.771213.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071030.771213.latency_trace: No such file or directory



PARSING 20240408-071030.771213 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-071030.771213
ERROR: cat: /homes/inho/capybara-data/20240408-071030.771213.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-071030.771213.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-071030.771213.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-071030.771213.server_reply' for reading (No such file or directory)



PARSING 20240408-071030.771213 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-071030.771213
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-071030.771213, 4, 100, 0, 0, 0, 2, exponential, 10, 2, 2, 0, 0, 11.0, 11.0, 11.0, 11.0, 11.0, 1712560241, 1712560241678970333

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-071123.391425
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 7


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-071123.391425, 4, 10, 0, 0, 0, 2, exponential, 10, 12, 7, 4, 0, 49.0, inf, inf, inf, inf, 1712560294, 1712560294237045393



iokerneld killed (pid 3453957)
KILLED CAPYBARA PROCESSES
PARSING 20240408-071123.391425 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-071123.391425            && sh ms_avg_99p_lat.sh 20240408-071123.391425            && sh ms_total_even_odd_numreq.sh 20240408-071123.391425            && sh latency_cdf.sh 20240408-071123.391425
ERROR: cat: /homes/inho/capybara-data/20240408-071123.391425.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-071123.391425.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071123.391425.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071123.391425.latency_trace: No such file or directory



PARSING 20240408-071123.391425 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-071123.391425
ERROR: cat: /homes/inho/capybara-data/20240408-071123.391425.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-071123.391425.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-071123.391425.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-071123.391425.server_reply' for reading (No such file or directory)



PARSING 20240408-071123.391425 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-071123.391425
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-071123.391425, 4, 10, 0, 0, 0, 2, exponential, 10, 12, 7, 4, 0, 49.0, inf, inf, inf, inf, 1712560294, 1712560294237045393

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-071614.127664
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-071614.127664, 4, 10, 0, 0, 0, 2, exponential, 10, 6, 6, 0, 0, 10.0, 11.0, 11.0, 11.0, 11.0, 1712560584, 1712560584961302636



iokerneld killed (pid 3458616)
KILLED CAPYBARA PROCESSES
PARSING 20240408-071614.127664 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-071614.127664            && sh ms_avg_99p_lat.sh 20240408-071614.127664            && sh ms_total_even_odd_numreq.sh 20240408-071614.127664            && sh latency_cdf.sh 20240408-071614.127664
ERROR: cat: /homes/inho/capybara-data/20240408-071614.127664.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-071614.127664.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071614.127664.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071614.127664.latency_trace: No such file or directory



PARSING 20240408-071614.127664 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-071614.127664
ERROR: cat: /homes/inho/capybara-data/20240408-071614.127664.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-071614.127664.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-071614.127664.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-071614.127664.server_reply' for reading (No such file or directory)



PARSING 20240408-071614.127664 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-071614.127664
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-071614.127664, 4, 10, 0, 0, 0, 2, exponential, 10, 6, 6, 0, 0, 10.0, 11.0, 11.0, 11.0, 11.0, 1712560584, 1712560584961302636

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-071651.755352
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-071651.755352, 4, 10, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712560622



iokerneld killed (pid 3460095)
KILLED CAPYBARA PROCESSES
PARSING 20240408-071651.755352 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-071651.755352            && sh ms_avg_99p_lat.sh 20240408-071651.755352            && sh ms_total_even_odd_numreq.sh 20240408-071651.755352            && sh latency_cdf.sh 20240408-071651.755352
ERROR: cat: /homes/inho/capybara-data/20240408-071651.755352.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-071651.755352.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071651.755352.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071651.755352.latency_trace: No such file or directory



PARSING 20240408-071651.755352 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-071651.755352
ERROR: cat: /homes/inho/capybara-data/20240408-071651.755352.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-071651.755352.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-071651.755352.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-071651.755352.server_reply' for reading (No such file or directory)



PARSING 20240408-071651.755352 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-071651.755352
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-071651.755352, 4, 10, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712560622

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-071726.355712
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 7


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-071726.355712, 4, 10, 0, 0, 0, 2, exponential, 10, 12, 7, 4, 0, 57.0, inf, inf, inf, inf, 1712560660, 1712560660791835534



iokerneld killed (pid 3461559)
KILLED CAPYBARA PROCESSES
PARSING 20240408-071726.355712 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-071726.355712            && sh ms_avg_99p_lat.sh 20240408-071726.355712            && sh ms_total_even_odd_numreq.sh 20240408-071726.355712            && sh latency_cdf.sh 20240408-071726.355712
ERROR: cat: /homes/inho/capybara-data/20240408-071726.355712.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-071726.355712.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071726.355712.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-071726.355712.latency_trace: No such file or directory



PARSING 20240408-071726.355712 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-071726.355712
ERROR: cat: /homes/inho/capybara-data/20240408-071726.355712.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-071726.355712.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-071726.355712.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-071726.355712.server_reply' for reading (No such file or directory)



PARSING 20240408-071726.355712 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-071726.355712
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-071726.355712, 4, 10, 0, 0, 0, 2, exponential, 10, 12, 7, 4, 0, 57.0, inf, inf, inf, inf, 1712560660, 1712560660791835534

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-072125.751066
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-072125.751066, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712560900



iokerneld killed (pid 3463452)
KILLED CAPYBARA PROCESSES
PARSING 20240408-072125.751066 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-072125.751066            && sh ms_avg_99p_lat.sh 20240408-072125.751066            && sh ms_total_even_odd_numreq.sh 20240408-072125.751066            && sh latency_cdf.sh 20240408-072125.751066
ERROR: cat: /homes/inho/capybara-data/20240408-072125.751066.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-072125.751066.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-072125.751066.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-072125.751066.latency_trace: No such file or directory



PARSING 20240408-072125.751066 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-072125.751066
ERROR: cat: /homes/inho/capybara-data/20240408-072125.751066.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-072125.751066.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-072125.751066.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-072125.751066.server_reply' for reading (No such file or directory)



PARSING 20240408-072125.751066 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-072125.751066
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-072125.751066, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712560900

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-072250.839955
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-072250.839955, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712560985



iokerneld killed (pid 3465048)
KILLED CAPYBARA PROCESSES
PARSING 20240408-072250.839955 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-072250.839955            && sh ms_avg_99p_lat.sh 20240408-072250.839955            && sh ms_total_even_odd_numreq.sh 20240408-072250.839955            && sh latency_cdf.sh 20240408-072250.839955
ERROR: cat: /homes/inho/capybara-data/20240408-072250.839955.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-072250.839955.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-072250.839955.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-072250.839955.latency_trace: No such file or directory



PARSING 20240408-072250.839955 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-072250.839955
ERROR: cat: /homes/inho/capybara-data/20240408-072250.839955.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-072250.839955.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-072250.839955.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-072250.839955.server_reply' for reading (No such file or directory)



PARSING 20240408-072250.839955 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-072250.839955
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-072250.839955, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712560985

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-114741.162980
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-114741.162980, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712576872



iokerneld killed (pid 3515542)
KILLED CAPYBARA PROCESSES
PARSING 20240408-114741.162980 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-114741.162980            && sh ms_avg_99p_lat.sh 20240408-114741.162980            && sh ms_total_even_odd_numreq.sh 20240408-114741.162980            && sh latency_cdf.sh 20240408-114741.162980
ERROR: cat: /homes/inho/capybara-data/20240408-114741.162980.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-114741.162980.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-114741.162980.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-114741.162980.latency_trace: No such file or directory



PARSING 20240408-114741.162980 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-114741.162980
ERROR: cat: /homes/inho/capybara-data/20240408-114741.162980.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-114741.162980.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-114741.162980.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-114741.162980.server_reply' for reading (No such file or directory)



PARSING 20240408-114741.162980 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-114741.162980
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-114741.162980, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712576872

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-114813.938752
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-114813.938752, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712576908



iokerneld killed (pid 3516999)
KILLED CAPYBARA PROCESSES
PARSING 20240408-114813.938752 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-114813.938752            && sh ms_avg_99p_lat.sh 20240408-114813.938752            && sh ms_total_even_odd_numreq.sh 20240408-114813.938752            && sh latency_cdf.sh 20240408-114813.938752
ERROR: cat: /homes/inho/capybara-data/20240408-114813.938752.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-114813.938752.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-114813.938752.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-114813.938752.latency_trace: No such file or directory



PARSING 20240408-114813.938752 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-114813.938752
ERROR: cat: /homes/inho/capybara-data/20240408-114813.938752.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-114813.938752.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-114813.938752.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-114813.938752.server_reply' for reading (No such file or directory)



PARSING 20240408-114813.938752 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-114813.938752
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-114813.938752, 4, 1, 0, 0, 0, 2, exponential, 10, 0, 0, 0, 1712576908

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-115406.887025
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-115406.887025, 4, 1, 0, 0, 0, 2, exponential, 10, 24, 24, 0, 0, 106.0, 117.0, 120.0, 120.0, 120.0, 1712577261, 1712577261346434230



iokerneld killed (pid 3519534)
KILLED CAPYBARA PROCESSES
PARSING 20240408-115406.887025 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-115406.887025            && sh ms_avg_99p_lat.sh 20240408-115406.887025            && sh ms_total_even_odd_numreq.sh 20240408-115406.887025            && sh latency_cdf.sh 20240408-115406.887025
ERROR: cat: /homes/inho/capybara-data/20240408-115406.887025.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-115406.887025.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-115406.887025.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-115406.887025.latency_trace: No such file or directory



PARSING 20240408-115406.887025 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-115406.887025
ERROR: cat: /homes/inho/capybara-data/20240408-115406.887025.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-115406.887025.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-115406.887025.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-115406.887025.server_reply' for reading (No such file or directory)



PARSING 20240408-115406.887025 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-115406.887025
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-115406.887025, 4, 1, 0, 0, 0, 2, exponential, 10, 24, 24, 0, 0, 106.0, 117.0, 120.0, 120.0, 120.0, 1712577261, 1712577261346434230

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-120254.875187
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-120254.875187, 4, 1, 0, 0, 0, 5, exponential, 10, 24, 24, 0, 0, 105.0, 117.0, 118.0, 118.0, 118.0, 1712577789, 1712577789365170128



iokerneld killed (pid 3522078)
KILLED CAPYBARA PROCESSES
PARSING 20240408-120254.875187 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-120254.875187            && sh ms_avg_99p_lat.sh 20240408-120254.875187            && sh ms_total_even_odd_numreq.sh 20240408-120254.875187            && sh latency_cdf.sh 20240408-120254.875187
ERROR: cat: /homes/inho/capybara-data/20240408-120254.875187.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-120254.875187.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120254.875187.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120254.875187.latency_trace: No such file or directory



PARSING 20240408-120254.875187 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-120254.875187
ERROR: cat: /homes/inho/capybara-data/20240408-120254.875187.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-120254.875187.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-120254.875187.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-120254.875187.server_reply' for reading (No such file or directory)



PARSING 20240408-120254.875187 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-120254.875187
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-120254.875187, 4, 1, 0, 0, 0, 5, exponential, 10, 24, 24, 0, 0, 105.0, 117.0, 118.0, 118.0, 118.0, 1712577789, 1712577789365170128

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-120527.674957
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-120527.674957, 4, 1, 0, 0, 0, 5, exponential, 10, 24, 24, 0, 0, 105.0, 118.0, 118.0, 118.0, 118.0, 1712577938, 1712577938691278191



iokerneld killed (pid 3523775)
KILLED CAPYBARA PROCESSES
PARSING 20240408-120527.674957 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-120527.674957            && sh ms_avg_99p_lat.sh 20240408-120527.674957            && sh ms_total_even_odd_numreq.sh 20240408-120527.674957            && sh latency_cdf.sh 20240408-120527.674957
ERROR: cat: /homes/inho/capybara-data/20240408-120527.674957.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-120527.674957.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120527.674957.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120527.674957.latency_trace: No such file or directory



PARSING 20240408-120527.674957 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-120527.674957
ERROR: cat: /homes/inho/capybara-data/20240408-120527.674957.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-120527.674957.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-120527.674957.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-120527.674957.server_reply' for reading (No such file or directory)



PARSING 20240408-120527.674957 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-120527.674957
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-120527.674957, 4, 1, 0, 0, 0, 5, exponential, 10, 24, 24, 0, 0, 105.0, 118.0, 118.0, 118.0, 118.0, 1712577938, 1712577938691278191

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-120651.127870
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-120651.127870, 4, 1, 0, 0, 0, 10, exponential, 10, 0, 0, 0, 1712578022



iokerneld killed (pid 3525349)
KILLED CAPYBARA PROCESSES
PARSING 20240408-120651.127870 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-120651.127870            && sh ms_avg_99p_lat.sh 20240408-120651.127870            && sh ms_total_even_odd_numreq.sh 20240408-120651.127870            && sh latency_cdf.sh 20240408-120651.127870
ERROR: cat: /homes/inho/capybara-data/20240408-120651.127870.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-120651.127870.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120651.127870.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120651.127870.latency_trace: No such file or directory



PARSING 20240408-120651.127870 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-120651.127870
ERROR: cat: /homes/inho/capybara-data/20240408-120651.127870.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-120651.127870.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-120651.127870.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-120651.127870.server_reply' for reading (No such file or directory)



PARSING 20240408-120651.127870 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-120651.127870
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-120651.127870' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-120651.127870, 4, 1, 0, 0, 0, 10, exponential, 10, 0, 0, 0, 1712578022

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-120737.411311
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-120737.411311, 4, 1, 0, 0, 0, 10, exponential, 10, 24, 24, 0, 0, 104.0, 113.0, 119.0, 119.0, 119.0, 1712578068, 1712578068465541016



iokerneld killed (pid 3526655)
KILLED CAPYBARA PROCESSES
PARSING 20240408-120737.411311 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-120737.411311            && sh ms_avg_99p_lat.sh 20240408-120737.411311            && sh ms_total_even_odd_numreq.sh 20240408-120737.411311            && sh latency_cdf.sh 20240408-120737.411311
ERROR: cat: /homes/inho/capybara-data/20240408-120737.411311.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-120737.411311.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120737.411311.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-120737.411311.latency_trace: No such file or directory



PARSING 20240408-120737.411311 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-120737.411311
ERROR: cat: /homes/inho/capybara-data/20240408-120737.411311.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-120737.411311.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-120737.411311.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-120737.411311.server_reply' for reading (No such file or directory)



PARSING 20240408-120737.411311 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-120737.411311
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-120737.411311, 4, 1, 0, 0, 0, 10, exponential, 10, 24, 24, 0, 0, 104.0, 113.0, 119.0, 119.0, 119.0, 1712578068, 1712578068465541016

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-121120.247572
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-121120.247572, 4, 1, 0, 0, 0, 10, exponential, 10, 24, 24, 0, 0, 105.0, 116.0, 116.0, 116.0, 116.0, 1712578291, 1712578291290793537



iokerneld killed (pid 3528506)
KILLED CAPYBARA PROCESSES
PARSING 20240408-121120.247572 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-121120.247572            && sh ms_avg_99p_lat.sh 20240408-121120.247572            && sh ms_total_even_odd_numreq.sh 20240408-121120.247572            && sh latency_cdf.sh 20240408-121120.247572
ERROR: cat: /homes/inho/capybara-data/20240408-121120.247572.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-121120.247572.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-121120.247572.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-121120.247572.latency_trace: No such file or directory



PARSING 20240408-121120.247572 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-121120.247572
ERROR: cat: /homes/inho/capybara-data/20240408-121120.247572.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-121120.247572.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-121120.247572.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-121120.247572.server_reply' for reading (No such file or directory)



PARSING 20240408-121120.247572 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-121120.247572
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-121120.247572' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-121120.247572, 4, 1, 0, 0, 0, 10, exponential, 10, 24, 24, 0, 0, 105.0, 116.0, 116.0, 116.0, 116.0, 1712578291, 1712578291290793537

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-121504.015218
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240408-121504.015218, 4, 1, 0, 0, 0, 10, exponential, 7, 0, 0, 0, 1712578514



iokerneld killed (pid 3530171)
KILLED CAPYBARA PROCESSES
PARSING 20240408-121504.015218 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-121504.015218            && sh ms_avg_99p_lat.sh 20240408-121504.015218            && sh ms_total_even_odd_numreq.sh 20240408-121504.015218            && sh latency_cdf.sh 20240408-121504.015218
ERROR: cat: /homes/inho/capybara-data/20240408-121504.015218.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-121504.015218.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-121504.015218.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-121504.015218.latency_trace: No such file or directory



PARSING 20240408-121504.015218 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-121504.015218
ERROR: cat: /homes/inho/capybara-data/20240408-121504.015218.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-121504.015218.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-121504.015218.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-121504.015218.server_reply' for reading (No such file or directory)



PARSING 20240408-121504.015218 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-121504.015218
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-121504.015218' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-121504.015218, 4, 1, 0, 0, 0, 10, exponential, 7, 0, 0, 0, 1712578514

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-121535.347239
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 14


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-121535.347239, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 14, 0, 0, 106.0, 115.0, 120.0, 120.0, 120.0, 1712578546, 1712578546259532604



iokerneld killed (pid 3531435)
KILLED CAPYBARA PROCESSES
PARSING 20240408-121535.347239 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-121535.347239            && sh ms_avg_99p_lat.sh 20240408-121535.347239            && sh ms_total_even_odd_numreq.sh 20240408-121535.347239            && sh latency_cdf.sh 20240408-121535.347239
ERROR: cat: /homes/inho/capybara-data/20240408-121535.347239.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-121535.347239.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-121535.347239.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-121535.347239.latency_trace: No such file or directory



PARSING 20240408-121535.347239 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-121535.347239
ERROR: cat: /homes/inho/capybara-data/20240408-121535.347239.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-121535.347239.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-121535.347239.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-121535.347239.server_reply' for reading (No such file or directory)



PARSING 20240408-121535.347239 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-121535.347239
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-121535.347239' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-121535.347239, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 14, 0, 0, 106.0, 115.0, 120.0, 120.0, 120.0, 1712578546, 1712578546259532604

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-122005.147796
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-122005.147796, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 107.0, inf, inf, inf, inf, 1712578816, 1712578816142444690



iokerneld killed (pid 3533390)
KILLED CAPYBARA PROCESSES
PARSING 20240408-122005.147796 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-122005.147796            && sh ms_avg_99p_lat.sh 20240408-122005.147796            && sh ms_total_even_odd_numreq.sh 20240408-122005.147796            && sh latency_cdf.sh 20240408-122005.147796
ERROR: cat: /homes/inho/capybara-data/20240408-122005.147796.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-122005.147796.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-122005.147796.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-122005.147796.latency_trace: No such file or directory



PARSING 20240408-122005.147796 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-122005.147796
ERROR: cat: /homes/inho/capybara-data/20240408-122005.147796.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-122005.147796.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-122005.147796.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-122005.147796.server_reply' for reading (No such file or directory)



PARSING 20240408-122005.147796 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-122005.147796
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-122005.147796' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-122005.147796, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 107.0, inf, inf, inf, inf, 1712578816, 1712578816142444690

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-122730.147429
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-122730.147429, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 106.0, inf, inf, inf, inf, 1712579264, 1712579264706953550



iokerneld killed (pid 3535602)
KILLED CAPYBARA PROCESSES
PARSING 20240408-122730.147429 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-122730.147429            && sh ms_avg_99p_lat.sh 20240408-122730.147429            && sh ms_total_even_odd_numreq.sh 20240408-122730.147429            && sh latency_cdf.sh 20240408-122730.147429
ERROR: cat: /homes/inho/capybara-data/20240408-122730.147429.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-122730.147429.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-122730.147429.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-122730.147429.latency_trace: No such file or directory



PARSING 20240408-122730.147429 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-122730.147429
ERROR: cat: /homes/inho/capybara-data/20240408-122730.147429.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-122730.147429.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-122730.147429.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-122730.147429.server_reply' for reading (No such file or directory)



PARSING 20240408-122730.147429 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-122730.147429
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-122730.147429' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-122730.147429, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 106.0, inf, inf, inf, inf, 1712579264, 1712579264706953550

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-122913.491398
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 14


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-122913.491398, 4, 1, 0, 0, 0, 100, exponential, 7, 14, 14, 0, 0, 103.0, 107.0, 108.0, 108.0, 108.0, 1712579367, 1712579368015637677



iokerneld killed (pid 3537036)
KILLED CAPYBARA PROCESSES
PARSING 20240408-122913.491398 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-122913.491398            && sh ms_avg_99p_lat.sh 20240408-122913.491398            && sh ms_total_even_odd_numreq.sh 20240408-122913.491398            && sh latency_cdf.sh 20240408-122913.491398
ERROR: cat: /homes/inho/capybara-data/20240408-122913.491398.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-122913.491398.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-122913.491398.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-122913.491398.latency_trace: No such file or directory



PARSING 20240408-122913.491398 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-122913.491398
ERROR: cat: /homes/inho/capybara-data/20240408-122913.491398.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-122913.491398.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-122913.491398.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-122913.491398.server_reply' for reading (No such file or directory)



PARSING 20240408-122913.491398 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-122913.491398
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-122913.491398' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-122913.491398, 4, 1, 0, 0, 0, 100, exponential, 7, 14, 14, 0, 0, 103.0, 107.0, 108.0, 108.0, 108.0, 1712579367, 1712579368015637677

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-123407.979639
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-123407.979639, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 106.0, inf, inf, inf, inf, 1712579658, 1712579658948412146



iokerneld killed (pid 3538869)
KILLED CAPYBARA PROCESSES
PARSING 20240408-123407.979639 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-123407.979639            && sh ms_avg_99p_lat.sh 20240408-123407.979639            && sh ms_total_even_odd_numreq.sh 20240408-123407.979639            && sh latency_cdf.sh 20240408-123407.979639
ERROR: cat: /homes/inho/capybara-data/20240408-123407.979639.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-123407.979639.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-123407.979639.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-123407.979639.latency_trace: No such file or directory



PARSING 20240408-123407.979639 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-123407.979639
ERROR: cat: /homes/inho/capybara-data/20240408-123407.979639.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-123407.979639.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-123407.979639.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-123407.979639.server_reply' for reading (No such file or directory)



PARSING 20240408-123407.979639 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-123407.979639
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-123407.979639' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-123407.979639, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 106.0, inf, inf, inf, inf, 1712579658, 1712579658948412146

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-123734.318625
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-123734.318625, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 105.0, inf, inf, inf, inf, 1712579865, 1712579865228962004



iokerneld killed (pid 3540491)
KILLED CAPYBARA PROCESSES
PARSING 20240408-123734.318625 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-123734.318625            && sh ms_avg_99p_lat.sh 20240408-123734.318625            && sh ms_total_even_odd_numreq.sh 20240408-123734.318625            && sh latency_cdf.sh 20240408-123734.318625
ERROR: cat: /homes/inho/capybara-data/20240408-123734.318625.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-123734.318625.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-123734.318625.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-123734.318625.latency_trace: No such file or directory



PARSING 20240408-123734.318625 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-123734.318625
ERROR: cat: /homes/inho/capybara-data/20240408-123734.318625.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-123734.318625.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-123734.318625.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-123734.318625.server_reply' for reading (No such file or directory)



PARSING 20240408-123734.318625 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-123734.318625
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-123734.318625' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-123734.318625, 4, 1, 0, 0, 0, 10, exponential, 7, 14, 23, 5, 0, 105.0, inf, inf, inf, inf, 1712579865, 1712579865228962004

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240408-124116.739642
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 20


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240408-124116.739642, 4, 1, 0, 0, 0, 2, exponential, 10, 24, 24, 0, 0, 105.0, 121.0, 123.0, 123.0, 123.0, 1712580091, 1712580091462153667



iokerneld killed (pid 3542402)
KILLED CAPYBARA PROCESSES
PARSING 20240408-124116.739642 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240408-124116.739642            && sh ms_avg_99p_lat.sh 20240408-124116.739642            && sh ms_total_even_odd_numreq.sh 20240408-124116.739642            && sh latency_cdf.sh 20240408-124116.739642
ERROR: cat: /homes/inho/capybara-data/20240408-124116.739642.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240408-124116.739642.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-124116.739642.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240408-124116.739642.latency_trace: No such file or directory



PARSING 20240408-124116.739642 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240408-124116.739642
ERROR: cat: /homes/inho/capybara-data/20240408-124116.739642.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240408-124116.739642.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240408-124116.739642.server_reply_10001: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240408-124116.739642.server_reply' for reading (No such file or directory)



PARSING 20240408-124116.739642 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240408-124116.739642
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240408-124116.739642, 4, 1, 0, 0, 0, 2, exponential, 10, 24, 24, 0, 0, 105.0, 121.0, 123.0, 123.0, 123.0, 1712580091, 1712580091462153667

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-094303.916021
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-094303.916021, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 3700513)
KILLED CAPYBARA PROCESSES
PARSING 20240409-094303.916021 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-094303.916021            && sh ms_avg_99p_lat.sh 20240409-094303.916021            && sh ms_total_even_odd_numreq.sh 20240409-094303.916021            && sh latency_cdf.sh 20240409-094303.916021
DONE
PARSING 20240409-094303.916021 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-094303.916021
DONE
PARSING 20240409-094303.916021 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-094303.916021
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-094303.916021, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-120135.031506
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-120135.031506, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3721209)
KILLED CAPYBARA PROCESSES
PARSING 20240409-120135.031506 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-120135.031506            && sh ms_avg_99p_lat.sh 20240409-120135.031506            && sh ms_total_even_odd_numreq.sh 20240409-120135.031506            && sh latency_cdf.sh 20240409-120135.031506
DONE
PARSING 20240409-120135.031506 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-120135.031506
DONE
PARSING 20240409-120135.031506 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-120135.031506
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-120135.031506, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-121050.003494
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3594122 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=100000 MAX_PROACTIVE_MIGS=0 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240409-121050.003494.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-121050.003494, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3723757)
KILLED CAPYBARA PROCESSES
PARSING 20240409-121050.003494 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-121050.003494            && sh ms_avg_99p_lat.sh 20240409-121050.003494            && sh ms_total_even_odd_numreq.sh 20240409-121050.003494            && sh latency_cdf.sh 20240409-121050.003494
DONE
PARSING 20240409-121050.003494 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-121050.003494
DONE
PARSING 20240409-121050.003494 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-121050.003494
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-121050.003494, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-121319.619654
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-121319.619654, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3725493)
KILLED CAPYBARA PROCESSES
PARSING 20240409-121319.619654 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-121319.619654            && sh ms_avg_99p_lat.sh 20240409-121319.619654            && sh ms_total_even_odd_numreq.sh 20240409-121319.619654            && sh latency_cdf.sh 20240409-121319.619654
DONE
PARSING 20240409-121319.619654 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-121319.619654
DONE
PARSING 20240409-121319.619654 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-121319.619654
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-121319.619654, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-121921.099962
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-121921.099962, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3727655)
KILLED CAPYBARA PROCESSES
PARSING 20240409-121921.099962 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-121921.099962            && sh ms_avg_99p_lat.sh 20240409-121921.099962            && sh ms_total_even_odd_numreq.sh 20240409-121921.099962            && sh latency_cdf.sh 20240409-121921.099962
DONE
PARSING 20240409-121921.099962 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-121921.099962
DONE
PARSING 20240409-121921.099962 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-121921.099962
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-121921.099962, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-125112.014659
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-125112.014659, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3733382)
KILLED CAPYBARA PROCESSES
PARSING 20240409-125112.014659 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-125112.014659            && sh ms_avg_99p_lat.sh 20240409-125112.014659            && sh ms_total_even_odd_numreq.sh 20240409-125112.014659            && sh latency_cdf.sh 20240409-125112.014659
DONE
PARSING 20240409-125112.014659 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-125112.014659
DONE
PARSING 20240409-125112.014659 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-125112.014659
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-125112.014659, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-125316.283253
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-125316.283253, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3735117)
KILLED CAPYBARA PROCESSES
PARSING 20240409-125316.283253 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-125316.283253            && sh ms_avg_99p_lat.sh 20240409-125316.283253            && sh ms_total_even_odd_numreq.sh 20240409-125316.283253            && sh latency_cdf.sh 20240409-125316.283253
DONE
PARSING 20240409-125316.283253 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-125316.283253
DONE
PARSING 20240409-125316.283253 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-125316.283253
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-125316.283253, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-125510.332355
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-125510.332355, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3736767)
KILLED CAPYBARA PROCESSES
PARSING 20240409-125510.332355 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-125510.332355            && sh ms_avg_99p_lat.sh 20240409-125510.332355            && sh ms_total_even_odd_numreq.sh 20240409-125510.332355            && sh latency_cdf.sh 20240409-125510.332355
DONE
PARSING 20240409-125510.332355 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-125510.332355
DONE
PARSING 20240409-125510.332355 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-125510.332355
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-125510.332355, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-130308.083954
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-130308.083954, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3739237)
KILLED CAPYBARA PROCESSES
PARSING 20240409-130308.083954 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-130308.083954            && sh ms_avg_99p_lat.sh 20240409-130308.083954            && sh ms_total_even_odd_numreq.sh 20240409-130308.083954            && sh latency_cdf.sh 20240409-130308.083954
DONE
PARSING 20240409-130308.083954 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-130308.083954
DONE
PARSING 20240409-130308.083954 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-130308.083954
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-130308.083954, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240409-130537.203658
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240409-130537.203658, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3740963)
KILLED CAPYBARA PROCESSES
PARSING 20240409-130537.203658 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240409-130537.203658            && sh ms_avg_99p_lat.sh 20240409-130537.203658            && sh ms_total_even_odd_numreq.sh 20240409-130537.203658            && sh latency_cdf.sh 20240409-130537.203658
DONE
PARSING 20240409-130537.203658 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240409-130537.203658
DONE
PARSING 20240409-130537.203658 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240409-130537.203658
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240409-130537.203658, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-035308.795108
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-035308.795108, 4, 100, 0, 100000, 0, 0, N/A



iokerneld killed (pid 3851483)
KILLED CAPYBARA PROCESSES
PARSING 20240410-035308.795108 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-035308.795108            && sh ms_avg_99p_lat.sh 20240410-035308.795108            && sh ms_total_even_odd_numreq.sh 20240410-035308.795108            && sh latency_cdf.sh 20240410-035308.795108
DONE
PARSING 20240410-035308.795108 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-035308.795108
DONE
PARSING 20240410-035308.795108 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-035308.795108
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-035308.795108, 4, 100, 0, 100000, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-035520.679602
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-035520.679602, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 3853197)
KILLED CAPYBARA PROCESSES
PARSING 20240410-035520.679602 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-035520.679602            && sh ms_avg_99p_lat.sh 20240410-035520.679602            && sh ms_total_even_odd_numreq.sh 20240410-035520.679602            && sh latency_cdf.sh 20240410-035520.679602
DONE
PARSING 20240410-035520.679602 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-035520.679602
DONE
PARSING 20240410-035520.679602 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-035520.679602
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-035520.679602, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-035713.615405
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-035713.615405, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 3854839)
KILLED CAPYBARA PROCESSES
PARSING 20240410-035713.615405 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-035713.615405            && sh ms_avg_99p_lat.sh 20240410-035713.615405            && sh ms_total_even_odd_numreq.sh 20240410-035713.615405            && sh latency_cdf.sh 20240410-035713.615405
DONE
PARSING 20240410-035713.615405 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-035713.615405
DONE
PARSING 20240410-035713.615405 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-035713.615405
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-035713.615405, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-035804.011622
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3609066 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-035804.011622.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-035804.011622, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3856347)
KILLED CAPYBARA PROCESSES
PARSING 20240410-035804.011622 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-035804.011622            && sh ms_avg_99p_lat.sh 20240410-035804.011622            && sh ms_total_even_odd_numreq.sh 20240410-035804.011622            && sh latency_cdf.sh 20240410-035804.011622
DONE
PARSING 20240410-035804.011622 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-035804.011622
DONE
PARSING 20240410-035804.011622 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-035804.011622
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-035804.011622, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-035842.939054
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3610237 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-035842.939054.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-035842.939054, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3857819)
KILLED CAPYBARA PROCESSES
PARSING 20240410-035842.939054 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-035842.939054            && sh ms_avg_99p_lat.sh 20240410-035842.939054            && sh ms_total_even_odd_numreq.sh 20240410-035842.939054            && sh latency_cdf.sh 20240410-035842.939054
DONE
PARSING 20240410-035842.939054 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-035842.939054
DONE
PARSING 20240410-035842.939054 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-035842.939054
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-035842.939054, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-035941.127251
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3611409 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=3 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10002 > /homes/inho/capybara-data/20240410-035941.127251.be2 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-035941.127251, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3859335)
KILLED CAPYBARA PROCESSES
PARSING 20240410-035941.127251 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-035941.127251            && sh ms_avg_99p_lat.sh 20240410-035941.127251            && sh ms_total_even_odd_numreq.sh 20240410-035941.127251            && sh latency_cdf.sh 20240410-035941.127251
DONE
PARSING 20240410-035941.127251 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-035941.127251
DONE
PARSING 20240410-035941.127251 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-035941.127251
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-035941.127251, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-040018.055588
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3612560 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-040018.055588.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-040018.055588, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3860806)
KILLED CAPYBARA PROCESSES
PARSING 20240410-040018.055588 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-040018.055588            && sh ms_avg_99p_lat.sh 20240410-040018.055588            && sh ms_total_even_odd_numreq.sh 20240410-040018.055588            && sh latency_cdf.sh 20240410-040018.055588
DONE
PARSING 20240410-040018.055588 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-040018.055588
DONE
PARSING 20240410-040018.055588 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-040018.055588
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-040018.055588, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-041050.342594
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3613765 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-041050.342594.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-041050.342594, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3863573)
KILLED CAPYBARA PROCESSES
PARSING 20240410-041050.342594 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-041050.342594            && sh ms_avg_99p_lat.sh 20240410-041050.342594            && sh ms_total_even_odd_numreq.sh 20240410-041050.342594            && sh latency_cdf.sh 20240410-041050.342594
DONE
PARSING 20240410-041050.342594 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-041050.342594
DONE
PARSING 20240410-041050.342594 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-041050.342594
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-041050.342594, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-041233.086693
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3614953 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-041233.086693.be1 2>&1
bash: line 1: 3614955 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=4 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10003 > /homes/inho/capybara-data/20240410-041233.086693.be3 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-041233.086693, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3865199)
KILLED CAPYBARA PROCESSES
PARSING 20240410-041233.086693 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-041233.086693            && sh ms_avg_99p_lat.sh 20240410-041233.086693            && sh ms_total_even_odd_numreq.sh 20240410-041233.086693            && sh latency_cdf.sh 20240410-041233.086693
DONE
PARSING 20240410-041233.086693 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-041233.086693
DONE
PARSING 20240410-041233.086693 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-041233.086693
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-041233.086693, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-043730.307453
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3620225 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-043730.307453.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-043730.307453, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3870624)
KILLED CAPYBARA PROCESSES
PARSING 20240410-043730.307453 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-043730.307453            && sh ms_avg_99p_lat.sh 20240410-043730.307453            && sh ms_total_even_odd_numreq.sh 20240410-043730.307453            && sh latency_cdf.sh 20240410-043730.307453
DONE
PARSING 20240410-043730.307453 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-043730.307453
DONE
PARSING 20240410-043730.307453 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-043730.307453
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-043730.307453, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-061542.206529
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3629469 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=4 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10003 > /homes/inho/capybara-data/20240410-061542.206529.be3 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-061542.206529, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3889133)
KILLED CAPYBARA PROCESSES
PARSING 20240410-061542.206529 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-061542.206529            && sh ms_avg_99p_lat.sh 20240410-061542.206529            && sh ms_total_even_odd_numreq.sh 20240410-061542.206529            && sh latency_cdf.sh 20240410-061542.206529
DONE
PARSING 20240410-061542.206529 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-061542.206529
DONE
PARSING 20240410-061542.206529 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-061542.206529
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-061542.206529, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-061746.635707
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3630653 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-061746.635707.be1 2>&1
bash: line 1: 3630654 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=3 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10002 > /homes/inho/capybara-data/20240410-061746.635707.be2 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-061746.635707, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3890954)
KILLED CAPYBARA PROCESSES
PARSING 20240410-061746.635707 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-061746.635707            && sh ms_avg_99p_lat.sh 20240410-061746.635707            && sh ms_total_even_odd_numreq.sh 20240410-061746.635707            && sh latency_cdf.sh 20240410-061746.635707
DONE
PARSING 20240410-061746.635707 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-061746.635707
DONE
PARSING 20240410-061746.635707 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-061746.635707
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-061746.635707, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-064759.559356
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3631968 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-064759.559356.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-064759.559356, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3896332)
KILLED CAPYBARA PROCESSES
PARSING 20240410-064759.559356 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-064759.559356            && sh ms_avg_99p_lat.sh 20240410-064759.559356            && sh ms_total_even_odd_numreq.sh 20240410-064759.559356            && sh latency_cdf.sh 20240410-064759.559356
DONE
PARSING 20240410-064759.559356 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-064759.559356
DONE
PARSING 20240410-064759.559356 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-064759.559356
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-064759.559356, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-065117.182844
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3633171 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-065117.182844.be0 2>&1
bash: line 1: 3633172 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-065117.182844.be1 2>&1
bash: line 1: 3633174 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=4 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10003 > /homes/inho/capybara-data/20240410-065117.182844.be3 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-065117.182844, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3898280)
KILLED CAPYBARA PROCESSES
PARSING 20240410-065117.182844 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-065117.182844            && sh ms_avg_99p_lat.sh 20240410-065117.182844            && sh ms_total_even_odd_numreq.sh 20240410-065117.182844            && sh latency_cdf.sh 20240410-065117.182844
DONE
PARSING 20240410-065117.182844 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-065117.182844
DONE
PARSING 20240410-065117.182844 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-065117.182844
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-065117.182844' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-065117.182844, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-065538.787574
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3634196 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=4 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10003 > /homes/inho/capybara-data/20240410-065538.787574.be3 2>&1
bash: line 1: 3634193 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-065538.787574.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-065538.787574, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3900049)
KILLED CAPYBARA PROCESSES
PARSING 20240410-065538.787574 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-065538.787574            && sh ms_avg_99p_lat.sh 20240410-065538.787574            && sh ms_total_even_odd_numreq.sh 20240410-065538.787574            && sh latency_cdf.sh 20240410-065538.787574
DONE
PARSING 20240410-065538.787574 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-065538.787574
DONE
PARSING 20240410-065538.787574 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-065538.787574
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-065538.787574, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-070226.691333
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3635396 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=3 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10002 > /homes/inho/capybara-data/20240410-070226.691333.be2 2>&1
bash: line 1: 3635394 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-070226.691333.be0 2>&1
bash: line 1: 3635395 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-070226.691333.be1 2>&1
bash: line 1: 3635397 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=4 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10003 > /homes/inho/capybara-data/20240410-070226.691333.be3 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-070226.691333, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3902479)
KILLED CAPYBARA PROCESSES
PARSING 20240410-070226.691333 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-070226.691333            && sh ms_avg_99p_lat.sh 20240410-070226.691333            && sh ms_total_even_odd_numreq.sh 20240410-070226.691333            && sh latency_cdf.sh 20240410-070226.691333
DONE
PARSING 20240410-070226.691333 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-070226.691333
DONE
PARSING 20240410-070226.691333 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-070226.691333
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-070226.691333' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-070226.691333, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-070446.282834
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3636412 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-070446.282834.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-070446.282834, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3904122)
KILLED CAPYBARA PROCESSES
PARSING 20240410-070446.282834 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-070446.282834            && sh ms_avg_99p_lat.sh 20240410-070446.282834            && sh ms_total_even_odd_numreq.sh 20240410-070446.282834            && sh latency_cdf.sh 20240410-070446.282834
DONE
PARSING 20240410-070446.282834 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-070446.282834
DONE
PARSING 20240410-070446.282834 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-070446.282834
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-070446.282834, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-070556.011363
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3637582 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-070556.011363.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-070556.011363, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3905804)
KILLED CAPYBARA PROCESSES
PARSING 20240410-070556.011363 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-070556.011363            && sh ms_avg_99p_lat.sh 20240410-070556.011363            && sh ms_total_even_odd_numreq.sh 20240410-070556.011363            && sh latency_cdf.sh 20240410-070556.011363
DONE
PARSING 20240410-070556.011363 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-070556.011363
DONE
PARSING 20240410-070556.011363 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-070556.011363
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-070556.011363, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-070633.767142
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3638733 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-070633.767142.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-070633.767142, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3907260)
KILLED CAPYBARA PROCESSES
PARSING 20240410-070633.767142 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-070633.767142            && sh ms_avg_99p_lat.sh 20240410-070633.767142            && sh ms_total_even_odd_numreq.sh 20240410-070633.767142            && sh latency_cdf.sh 20240410-070633.767142
DONE
PARSING 20240410-070633.767142 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-070633.767142
DONE
PARSING 20240410-070633.767142 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-070633.767142
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-070633.767142, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-070943.739465
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3639917 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-070943.739465.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-070943.739465, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3909082)
KILLED CAPYBARA PROCESSES
PARSING 20240410-070943.739465 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-070943.739465            && sh ms_avg_99p_lat.sh 20240410-070943.739465            && sh ms_total_even_odd_numreq.sh 20240410-070943.739465            && sh latency_cdf.sh 20240410-070943.739465
DONE
PARSING 20240410-070943.739465 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-070943.739465
ERROR: cat: /homes/inho/capybara-data/20240410-070943.739465.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-070943.739465.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-070943.739465.server_reply_10003: No such file or directory



PARSING 20240410-070943.739465 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-070943.739465
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-070943.739465, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-071743.954988
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-071743.954988, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3911542)
KILLED CAPYBARA PROCESSES
PARSING 20240410-071743.954988 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-071743.954988            && sh ms_avg_99p_lat.sh 20240410-071743.954988            && sh ms_total_even_odd_numreq.sh 20240410-071743.954988            && sh latency_cdf.sh 20240410-071743.954988
DONE
PARSING 20240410-071743.954988 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-071743.954988
ERROR: cat: /homes/inho/capybara-data/20240410-071743.954988.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-071743.954988.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-071743.954988.server_reply_10003: No such file or directory



PARSING 20240410-071743.954988 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-071743.954988
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-071743.954988, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-071853.943932
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3642343 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-071853.943932.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-071853.943932, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3913087)
KILLED CAPYBARA PROCESSES
PARSING 20240410-071853.943932 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-071853.943932            && sh ms_avg_99p_lat.sh 20240410-071853.943932            && sh ms_total_even_odd_numreq.sh 20240410-071853.943932            && sh latency_cdf.sh 20240410-071853.943932
DONE
PARSING 20240410-071853.943932 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-071853.943932
ERROR: cat: /homes/inho/capybara-data/20240410-071853.943932.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-071853.943932.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-071853.943932.server_reply_10003: No such file or directory



PARSING 20240410-071853.943932 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-071853.943932
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-071853.943932, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-072230.599418
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3643538 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-072230.599418.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-072230.599418, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3915070)
KILLED CAPYBARA PROCESSES
PARSING 20240410-072230.599418 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-072230.599418            && sh ms_avg_99p_lat.sh 20240410-072230.599418            && sh ms_total_even_odd_numreq.sh 20240410-072230.599418            && sh latency_cdf.sh 20240410-072230.599418
DONE
PARSING 20240410-072230.599418 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-072230.599418
ERROR: cat: /homes/inho/capybara-data/20240410-072230.599418.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-072230.599418.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-072230.599418.server_reply_10003: No such file or directory



PARSING 20240410-072230.599418 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-072230.599418
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-072230.599418, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-072507.919784
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3644729 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-072507.919784.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-072507.919784, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3917767)
dpdk-ctrl.elf killed (pid 3644637)
KILLED CAPYBARA PROCESSES
PARSING 20240410-072507.919784 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-072507.919784            && sh ms_avg_99p_lat.sh 20240410-072507.919784            && sh ms_total_even_odd_numreq.sh 20240410-072507.919784            && sh latency_cdf.sh 20240410-072507.919784
DONE
PARSING 20240410-072507.919784 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-072507.919784
ERROR: cat: /homes/inho/capybara-data/20240410-072507.919784.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-072507.919784.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-072507.919784.server_reply_10003: No such file or directory



PARSING 20240410-072507.919784 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-072507.919784
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-072507.919784, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-073347.443749
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3645935 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-073347.443749.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-073347.443749, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3920468)
KILLED CAPYBARA PROCESSES
PARSING 20240410-073347.443749 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-073347.443749            && sh ms_avg_99p_lat.sh 20240410-073347.443749            && sh ms_total_even_odd_numreq.sh 20240410-073347.443749            && sh latency_cdf.sh 20240410-073347.443749
DONE
PARSING 20240410-073347.443749 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-073347.443749
ERROR: cat: /homes/inho/capybara-data/20240410-073347.443749.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-073347.443749.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-073347.443749.server_reply_10003: No such file or directory



PARSING 20240410-073347.443749 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-073347.443749
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-073347.443749, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-073606.355376
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3647127 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-073606.355376.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-073606.355376, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3922304)
KILLED CAPYBARA PROCESSES
PARSING 20240410-073606.355376 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-073606.355376            && sh ms_avg_99p_lat.sh 20240410-073606.355376            && sh ms_total_even_odd_numreq.sh 20240410-073606.355376            && sh latency_cdf.sh 20240410-073606.355376
DONE
PARSING 20240410-073606.355376 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-073606.355376
ERROR: cat: /homes/inho/capybara-data/20240410-073606.355376.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-073606.355376.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-073606.355376.server_reply_10003: No such file or directory



PARSING 20240410-073606.355376 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-073606.355376
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-073606.355376, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-074020.118930
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3648327 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-074020.118930.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-074020.118930, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3924480)
KILLED CAPYBARA PROCESSES
PARSING 20240410-074020.118930 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-074020.118930            && sh ms_avg_99p_lat.sh 20240410-074020.118930            && sh ms_total_even_odd_numreq.sh 20240410-074020.118930            && sh latency_cdf.sh 20240410-074020.118930
DONE
PARSING 20240410-074020.118930 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-074020.118930
ERROR: cat: /homes/inho/capybara-data/20240410-074020.118930.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-074020.118930.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-074020.118930.server_reply_10003: No such file or directory



PARSING 20240410-074020.118930 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-074020.118930
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-074020.118930, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-080902.791984
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3649566 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-080902.791984.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-080902.791984, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3929625)
KILLED CAPYBARA PROCESSES
PARSING 20240410-080902.791984 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-080902.791984            && sh ms_avg_99p_lat.sh 20240410-080902.791984            && sh ms_total_even_odd_numreq.sh 20240410-080902.791984            && sh latency_cdf.sh 20240410-080902.791984
DONE
PARSING 20240410-080902.791984 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-080902.791984
ERROR: cat: /homes/inho/capybara-data/20240410-080902.791984.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-080902.791984.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-080902.791984.server_reply_10003: No such file or directory



PARSING 20240410-080902.791984 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-080902.791984
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-080902.791984, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-081801.164082
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3650815 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-081801.164082.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-081801.164082, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3932535)
KILLED CAPYBARA PROCESSES
PARSING 20240410-081801.164082 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-081801.164082            && sh ms_avg_99p_lat.sh 20240410-081801.164082            && sh ms_total_even_odd_numreq.sh 20240410-081801.164082            && sh latency_cdf.sh 20240410-081801.164082
DONE
PARSING 20240410-081801.164082 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-081801.164082
ERROR: cat: /homes/inho/capybara-data/20240410-081801.164082.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-081801.164082.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-081801.164082.server_reply_10003: No such file or directory



PARSING 20240410-081801.164082 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-081801.164082
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-081801.164082, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-082425.887540
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3652005 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-082425.887540.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-082425.887540, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3935052)
KILLED CAPYBARA PROCESSES
PARSING 20240410-082425.887540 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-082425.887540            && sh ms_avg_99p_lat.sh 20240410-082425.887540            && sh ms_total_even_odd_numreq.sh 20240410-082425.887540            && sh latency_cdf.sh 20240410-082425.887540
DONE
PARSING 20240410-082425.887540 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-082425.887540
ERROR: cat: /homes/inho/capybara-data/20240410-082425.887540.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-082425.887540.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-082425.887540.server_reply_10003: No such file or directory



PARSING 20240410-082425.887540 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-082425.887540
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-082425.887540, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-082957.383301
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3653356 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-082957.383301.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-082957.383301, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3937710)
KILLED CAPYBARA PROCESSES
PARSING 20240410-082957.383301 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-082957.383301            && sh ms_avg_99p_lat.sh 20240410-082957.383301            && sh ms_total_even_odd_numreq.sh 20240410-082957.383301            && sh latency_cdf.sh 20240410-082957.383301
DONE
PARSING 20240410-082957.383301 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-082957.383301
ERROR: cat: /homes/inho/capybara-data/20240410-082957.383301.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-082957.383301.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-082957.383301.server_reply_10003: No such file or directory



PARSING 20240410-082957.383301 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-082957.383301
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-082957.383301, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-094820.983956
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3656034 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-094820.983956.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-094820.983956, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3948874)
KILLED CAPYBARA PROCESSES
PARSING 20240410-094820.983956 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-094820.983956            && sh ms_avg_99p_lat.sh 20240410-094820.983956            && sh ms_total_even_odd_numreq.sh 20240410-094820.983956            && sh latency_cdf.sh 20240410-094820.983956
DONE
PARSING 20240410-094820.983956 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-094820.983956
ERROR: cat: /homes/inho/capybara-data/20240410-094820.983956.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-094820.983956.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-094820.983956.server_reply_10003: No such file or directory



PARSING 20240410-094820.983956 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-094820.983956
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-094820.983956, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-094937.187295
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3657446 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-094937.187295.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-094937.187295, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3950549)
KILLED CAPYBARA PROCESSES
PARSING 20240410-094937.187295 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-094937.187295            && sh ms_avg_99p_lat.sh 20240410-094937.187295            && sh ms_total_even_odd_numreq.sh 20240410-094937.187295            && sh latency_cdf.sh 20240410-094937.187295
DONE
PARSING 20240410-094937.187295 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-094937.187295
ERROR: cat: /homes/inho/capybara-data/20240410-094937.187295.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-094937.187295.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-094937.187295.server_reply_10003: No such file or directory



PARSING 20240410-094937.187295 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-094937.187295
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-094937.187295, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-095205.490619
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3658613 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-095205.490619.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-095205.490619, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3952250)
KILLED CAPYBARA PROCESSES
PARSING 20240410-095205.490619 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-095205.490619            && sh ms_avg_99p_lat.sh 20240410-095205.490619            && sh ms_total_even_odd_numreq.sh 20240410-095205.490619            && sh latency_cdf.sh 20240410-095205.490619
DONE
PARSING 20240410-095205.490619 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-095205.490619
ERROR: cat: /homes/inho/capybara-data/20240410-095205.490619.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-095205.490619.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-095205.490619.server_reply_10003: No such file or directory



PARSING 20240410-095205.490619 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-095205.490619
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-095205.490619, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-095843.531644
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3659803 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-095843.531644.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-095843.531644, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3954472)
KILLED CAPYBARA PROCESSES
PARSING 20240410-095843.531644 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-095843.531644            && sh ms_avg_99p_lat.sh 20240410-095843.531644            && sh ms_total_even_odd_numreq.sh 20240410-095843.531644            && sh latency_cdf.sh 20240410-095843.531644
DONE
PARSING 20240410-095843.531644 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-095843.531644
ERROR: cat: /homes/inho/capybara-data/20240410-095843.531644.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-095843.531644.server_reply_10002: No such file or directory



PARSING 20240410-095843.531644 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-095843.531644
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-095843.531644, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-113337.203952
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-113337.203952, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3967659)
KILLED CAPYBARA PROCESSES
PARSING 20240410-113337.203952 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-113337.203952            && sh ms_avg_99p_lat.sh 20240410-113337.203952            && sh ms_total_even_odd_numreq.sh 20240410-113337.203952            && sh latency_cdf.sh 20240410-113337.203952
DONE
PARSING 20240410-113337.203952 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-113337.203952
ERROR: cat: /homes/inho/capybara-data/20240410-113337.203952.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-113337.203952.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-113337.203952.server_reply_10003: No such file or directory



PARSING 20240410-113337.203952 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-113337.203952
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-113337.203952, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-114307.851511
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3664564 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-114307.851511.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-114307.851511, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3970457)
KILLED CAPYBARA PROCESSES
PARSING 20240410-114307.851511 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-114307.851511            && sh ms_avg_99p_lat.sh 20240410-114307.851511            && sh ms_total_even_odd_numreq.sh 20240410-114307.851511            && sh latency_cdf.sh 20240410-114307.851511
DONE
PARSING 20240410-114307.851511 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-114307.851511
DONE
PARSING 20240410-114307.851511 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-114307.851511
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-114307.851511, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-114847.995207
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3669307 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240410-114847.995207.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-114847.995207, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3974670)
KILLED CAPYBARA PROCESSES
PARSING 20240410-114847.995207 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-114847.995207            && sh ms_avg_99p_lat.sh 20240410-114847.995207            && sh ms_total_even_odd_numreq.sh 20240410-114847.995207            && sh latency_cdf.sh 20240410-114847.995207
DONE
PARSING 20240410-114847.995207 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-114847.995207
DONE
PARSING 20240410-114847.995207 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-114847.995207
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-114847.995207, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-114930.375436
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3670470 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=3 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10002 > /homes/inho/capybara-data/20240410-114930.375436.be2 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-114930.375436, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3976151)
KILLED CAPYBARA PROCESSES
PARSING 20240410-114930.375436 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-114930.375436            && sh ms_avg_99p_lat.sh 20240410-114930.375436            && sh ms_total_even_odd_numreq.sh 20240410-114930.375436            && sh latency_cdf.sh 20240410-114930.375436
DONE
PARSING 20240410-114930.375436 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-114930.375436
DONE
PARSING 20240410-114930.375436 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-114930.375436
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-114930.375436, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-121635.759188
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-121635.759188, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3981303)
KILLED CAPYBARA PROCESSES
PARSING 20240410-121635.759188 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-121635.759188            && sh ms_avg_99p_lat.sh 20240410-121635.759188            && sh ms_total_even_odd_numreq.sh 20240410-121635.759188            && sh latency_cdf.sh 20240410-121635.759188
DONE
PARSING 20240410-121635.759188 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-121635.759188
ERROR: cat: /homes/inho/capybara-data/20240410-121635.759188.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-121635.759188.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-121635.759188.server_reply_10003: No such file or directory



PARSING 20240410-121635.759188 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-121635.759188
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-121635.759188, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-121726.067106
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-121726.067106, 4, 12, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3982794)
KILLED CAPYBARA PROCESSES
PARSING 20240410-121726.067106 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-121726.067106            && sh ms_avg_99p_lat.sh 20240410-121726.067106            && sh ms_total_even_odd_numreq.sh 20240410-121726.067106            && sh latency_cdf.sh 20240410-121726.067106
DONE
PARSING 20240410-121726.067106 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-121726.067106
ERROR: cat: /homes/inho/capybara-data/20240410-121726.067106.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240410-121726.067106.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240410-121726.067106.server_reply_10003: No such file or directory



PARSING 20240410-121726.067106 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-121726.067106
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-121726.067106, 4, 12, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-121829.311802
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-121829.311802, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3984424)
KILLED CAPYBARA PROCESSES
PARSING 20240410-121829.311802 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-121829.311802            && sh ms_avg_99p_lat.sh 20240410-121829.311802            && sh ms_total_even_odd_numreq.sh 20240410-121829.311802            && sh latency_cdf.sh 20240410-121829.311802
DONE
PARSING 20240410-121829.311802 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-121829.311802
DONE
PARSING 20240410-121829.311802 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-121829.311802
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-121829.311802, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122006.100038
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3676187 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-122006.100038.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122006.100038, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3986043)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122006.100038 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122006.100038            && sh ms_avg_99p_lat.sh 20240410-122006.100038            && sh ms_total_even_odd_numreq.sh 20240410-122006.100038            && sh latency_cdf.sh 20240410-122006.100038
DONE
PARSING 20240410-122006.100038 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122006.100038
DONE
PARSING 20240410-122006.100038 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122006.100038
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122006.100038, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122238.671072
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122238.671072, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3987953)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122238.671072 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122238.671072            && sh ms_avg_99p_lat.sh 20240410-122238.671072            && sh ms_total_even_odd_numreq.sh 20240410-122238.671072            && sh latency_cdf.sh 20240410-122238.671072
DONE
PARSING 20240410-122238.671072 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122238.671072
DONE
PARSING 20240410-122238.671072 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122238.671072
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122238.671072, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122343.735888
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122343.735888, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 3989512)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122343.735888 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122343.735888            && sh ms_avg_99p_lat.sh 20240410-122343.735888            && sh ms_total_even_odd_numreq.sh 20240410-122343.735888            && sh latency_cdf.sh 20240410-122343.735888
DONE
PARSING 20240410-122343.735888 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122343.735888
DONE
PARSING 20240410-122343.735888 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122343.735888
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122343.735888, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122504.788108
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122504.788108, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 3991258)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122504.788108 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122504.788108            && sh ms_avg_99p_lat.sh 20240410-122504.788108            && sh ms_total_even_odd_numreq.sh 20240410-122504.788108            && sh latency_cdf.sh 20240410-122504.788108
DONE
PARSING 20240410-122504.788108 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122504.788108
DONE
PARSING 20240410-122504.788108 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122504.788108
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122504.788108, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122547.691313
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3680855 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240410-122547.691313.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122547.691313, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3992762)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122547.691313 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122547.691313            && sh ms_avg_99p_lat.sh 20240410-122547.691313            && sh ms_total_even_odd_numreq.sh 20240410-122547.691313            && sh latency_cdf.sh 20240410-122547.691313
DONE
PARSING 20240410-122547.691313 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122547.691313
DONE
PARSING 20240410-122547.691313 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122547.691313
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122547.691313, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122657.010826
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122657.010826, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3994467)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122657.010826 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122657.010826            && sh ms_avg_99p_lat.sh 20240410-122657.010826            && sh ms_total_even_odd_numreq.sh 20240410-122657.010826            && sh latency_cdf.sh 20240410-122657.010826
DONE
PARSING 20240410-122657.010826 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122657.010826
DONE
PARSING 20240410-122657.010826 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122657.010826
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122657.010826, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-122922.084091
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-122922.084091, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3996189)
KILLED CAPYBARA PROCESSES
PARSING 20240410-122922.084091 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-122922.084091            && sh ms_avg_99p_lat.sh 20240410-122922.084091            && sh ms_total_even_odd_numreq.sh 20240410-122922.084091            && sh latency_cdf.sh 20240410-122922.084091
DONE
PARSING 20240410-122922.084091 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-122922.084091
DONE
PARSING 20240410-122922.084091 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-122922.084091
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-122922.084091, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-123317.351944
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-123317.351944, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 3998314)
KILLED CAPYBARA PROCESSES
PARSING 20240410-123317.351944 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-123317.351944            && sh ms_avg_99p_lat.sh 20240410-123317.351944            && sh ms_total_even_odd_numreq.sh 20240410-123317.351944            && sh latency_cdf.sh 20240410-123317.351944
DONE
PARSING 20240410-123317.351944 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-123317.351944
DONE
PARSING 20240410-123317.351944 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-123317.351944
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-123317.351944, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-124229.146586
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-124229.146586, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4003783)
KILLED CAPYBARA PROCESSES
PARSING 20240410-124229.146586 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-124229.146586            && sh ms_avg_99p_lat.sh 20240410-124229.146586            && sh ms_total_even_odd_numreq.sh 20240410-124229.146586            && sh latency_cdf.sh 20240410-124229.146586
DONE
PARSING 20240410-124229.146586 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-124229.146586
DONE
PARSING 20240410-124229.146586 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-124229.146586
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-124229.146586, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-124842.655503
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-124842.655503, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4006142)
KILLED CAPYBARA PROCESSES
PARSING 20240410-124842.655503 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-124842.655503            && sh ms_avg_99p_lat.sh 20240410-124842.655503            && sh ms_total_even_odd_numreq.sh 20240410-124842.655503            && sh latency_cdf.sh 20240410-124842.655503
DONE
PARSING 20240410-124842.655503 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-124842.655503
DONE
PARSING 20240410-124842.655503 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-124842.655503
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-124842.655503, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-132118.994924
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-132118.994924, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4011960)
KILLED CAPYBARA PROCESSES
PARSING 20240410-132118.994924 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-132118.994924            && sh ms_avg_99p_lat.sh 20240410-132118.994924            && sh ms_total_even_odd_numreq.sh 20240410-132118.994924            && sh latency_cdf.sh 20240410-132118.994924
DONE
PARSING 20240410-132118.994924 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-132118.994924
DONE
PARSING 20240410-132118.994924 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-132118.994924
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-132118.994924, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-132626.431334
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-132626.431334, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4014034)
KILLED CAPYBARA PROCESSES
PARSING 20240410-132626.431334 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-132626.431334            && sh ms_avg_99p_lat.sh 20240410-132626.431334            && sh ms_total_even_odd_numreq.sh 20240410-132626.431334            && sh latency_cdf.sh 20240410-132626.431334
DONE
PARSING 20240410-132626.431334 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-132626.431334
DONE
PARSING 20240410-132626.431334 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-132626.431334
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-132626.431334, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-132833.086930
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-132833.086930, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4015732)
KILLED CAPYBARA PROCESSES
PARSING 20240410-132833.086930 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-132833.086930            && sh ms_avg_99p_lat.sh 20240410-132833.086930            && sh ms_total_even_odd_numreq.sh 20240410-132833.086930            && sh latency_cdf.sh 20240410-132833.086930
DONE
PARSING 20240410-132833.086930 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-132833.086930
DONE
PARSING 20240410-132833.086930 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-132833.086930
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-132833.086930, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-133441.427687
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-133441.427687, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4017938)
KILLED CAPYBARA PROCESSES
PARSING 20240410-133441.427687 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-133441.427687            && sh ms_avg_99p_lat.sh 20240410-133441.427687            && sh ms_total_even_odd_numreq.sh 20240410-133441.427687            && sh latency_cdf.sh 20240410-133441.427687
DONE
PARSING 20240410-133441.427687 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-133441.427687
DONE
PARSING 20240410-133441.427687 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-133441.427687
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-133441.427687, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-134014.763078
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-134014.763078, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 4020043)
KILLED CAPYBARA PROCESSES
PARSING 20240410-134014.763078 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-134014.763078            && sh ms_avg_99p_lat.sh 20240410-134014.763078            && sh ms_total_even_odd_numreq.sh 20240410-134014.763078            && sh latency_cdf.sh 20240410-134014.763078
DONE
PARSING 20240410-134014.763078 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-134014.763078
DONE
PARSING 20240410-134014.763078 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-134014.763078
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-134014.763078, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-134703.510965
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-134703.510965, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4022314)
KILLED CAPYBARA PROCESSES
PARSING 20240410-134703.510965 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-134703.510965            && sh ms_avg_99p_lat.sh 20240410-134703.510965            && sh ms_total_even_odd_numreq.sh 20240410-134703.510965            && sh latency_cdf.sh 20240410-134703.510965
DONE
PARSING 20240410-134703.510965 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-134703.510965
DONE
PARSING 20240410-134703.510965 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-134703.510965
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-134703.510965, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-135940.883053
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-135940.883053, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4025298)
KILLED CAPYBARA PROCESSES
PARSING 20240410-135940.883053 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-135940.883053            && sh ms_avg_99p_lat.sh 20240410-135940.883053            && sh ms_total_even_odd_numreq.sh 20240410-135940.883053            && sh latency_cdf.sh 20240410-135940.883053
DONE
PARSING 20240410-135940.883053 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-135940.883053
DONE
PARSING 20240410-135940.883053 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-135940.883053
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-135940.883053, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-140425.020005
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-140425.020005, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4027329)
KILLED CAPYBARA PROCESSES
PARSING 20240410-140425.020005 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-140425.020005            && sh ms_avg_99p_lat.sh 20240410-140425.020005            && sh ms_total_even_odd_numreq.sh 20240410-140425.020005            && sh latency_cdf.sh 20240410-140425.020005
DONE
PARSING 20240410-140425.020005 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-140425.020005
DONE
PARSING 20240410-140425.020005 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-140425.020005
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-140425.020005, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-140807.263885
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-140807.263885, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4029209)
KILLED CAPYBARA PROCESSES
PARSING 20240410-140807.263885 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-140807.263885            && sh ms_avg_99p_lat.sh 20240410-140807.263885            && sh ms_total_even_odd_numreq.sh 20240410-140807.263885            && sh latency_cdf.sh 20240410-140807.263885
DONE
PARSING 20240410-140807.263885 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-140807.263885
DONE
PARSING 20240410-140807.263885 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-140807.263885
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-140807.263885, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-141203.655883
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-141203.655883, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4031107)
KILLED CAPYBARA PROCESSES
PARSING 20240410-141203.655883 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-141203.655883            && sh ms_avg_99p_lat.sh 20240410-141203.655883            && sh ms_total_even_odd_numreq.sh 20240410-141203.655883            && sh latency_cdf.sh 20240410-141203.655883
DONE
PARSING 20240410-141203.655883 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-141203.655883
DONE
PARSING 20240410-141203.655883 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-141203.655883
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-141203.655883, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-141605.747766
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-141605.747766, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4033032)
KILLED CAPYBARA PROCESSES
PARSING 20240410-141605.747766 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-141605.747766            && sh ms_avg_99p_lat.sh 20240410-141605.747766            && sh ms_total_even_odd_numreq.sh 20240410-141605.747766            && sh latency_cdf.sh 20240410-141605.747766
DONE
PARSING 20240410-141605.747766 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-141605.747766
DONE
PARSING 20240410-141605.747766 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-141605.747766
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-141605.747766, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-141919.136080
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-141919.136080, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4034854)
KILLED CAPYBARA PROCESSES
PARSING 20240410-141919.136080 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-141919.136080            && sh ms_avg_99p_lat.sh 20240410-141919.136080            && sh ms_total_even_odd_numreq.sh 20240410-141919.136080            && sh latency_cdf.sh 20240410-141919.136080
DONE
PARSING 20240410-141919.136080 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-141919.136080
DONE
PARSING 20240410-141919.136080 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-141919.136080
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-141919.136080, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-142236.435101
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-142236.435101, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4036692)
KILLED CAPYBARA PROCESSES
PARSING 20240410-142236.435101 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-142236.435101            && sh ms_avg_99p_lat.sh 20240410-142236.435101            && sh ms_total_even_odd_numreq.sh 20240410-142236.435101            && sh latency_cdf.sh 20240410-142236.435101
DONE
PARSING 20240410-142236.435101 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-142236.435101
DONE
PARSING 20240410-142236.435101 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-142236.435101
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-142236.435101, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-143027.447397
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-143027.447397, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4039104)
KILLED CAPYBARA PROCESSES
PARSING 20240410-143027.447397 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-143027.447397            && sh ms_avg_99p_lat.sh 20240410-143027.447397            && sh ms_total_even_odd_numreq.sh 20240410-143027.447397            && sh latency_cdf.sh 20240410-143027.447397
DONE
PARSING 20240410-143027.447397 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-143027.447397
DONE
PARSING 20240410-143027.447397 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-143027.447397
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-143027.447397, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-143351.599428
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-143351.599428, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4040933)
KILLED CAPYBARA PROCESSES
PARSING 20240410-143351.599428 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-143351.599428            && sh ms_avg_99p_lat.sh 20240410-143351.599428            && sh ms_total_even_odd_numreq.sh 20240410-143351.599428            && sh latency_cdf.sh 20240410-143351.599428
DONE
PARSING 20240410-143351.599428 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-143351.599428
DONE
PARSING 20240410-143351.599428 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-143351.599428
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-143351.599428, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240410-143658.499102
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240410-143658.499102, 4, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 4042757)
KILLED CAPYBARA PROCESSES
PARSING 20240410-143658.499102 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240410-143658.499102            && sh ms_avg_99p_lat.sh 20240410-143658.499102            && sh ms_total_even_odd_numreq.sh 20240410-143658.499102            && sh latency_cdf.sh 20240410-143658.499102
DONE
PARSING 20240410-143658.499102 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240410-143658.499102
DONE
PARSING 20240410-143658.499102 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240410-143658.499102
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240410-143658.499102, 4, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-043545.439175
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-043545.439175, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4148288)
KILLED CAPYBARA PROCESSES
PARSING 20240411-043545.439175 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-043545.439175            && sh ms_avg_99p_lat.sh 20240411-043545.439175            && sh ms_total_even_odd_numreq.sh 20240411-043545.439175            && sh latency_cdf.sh 20240411-043545.439175
DONE
PARSING 20240411-043545.439175 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-043545.439175
DONE
PARSING 20240411-043545.439175 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-043545.439175
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-043545.439175, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-043624.703254
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-043624.703254, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4149762)
KILLED CAPYBARA PROCESSES
PARSING 20240411-043624.703254 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-043624.703254            && sh ms_avg_99p_lat.sh 20240411-043624.703254            && sh ms_total_even_odd_numreq.sh 20240411-043624.703254            && sh latency_cdf.sh 20240411-043624.703254
DONE
PARSING 20240411-043624.703254 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-043624.703254
DONE
PARSING 20240411-043624.703254 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-043624.703254
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-043624.703254, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-044159.119606
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-044159.119606, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4151854)
KILLED CAPYBARA PROCESSES
PARSING 20240411-044159.119606 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-044159.119606            && sh ms_avg_99p_lat.sh 20240411-044159.119606            && sh ms_total_even_odd_numreq.sh 20240411-044159.119606            && sh latency_cdf.sh 20240411-044159.119606
DONE
PARSING 20240411-044159.119606 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-044159.119606
DONE
PARSING 20240411-044159.119606 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-044159.119606
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-044159.119606, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-044234.415411
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3718917 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240411-044234.415411.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-044234.415411, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4153302)
KILLED CAPYBARA PROCESSES
PARSING 20240411-044234.415411 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-044234.415411            && sh ms_avg_99p_lat.sh 20240411-044234.415411            && sh ms_total_even_odd_numreq.sh 20240411-044234.415411            && sh latency_cdf.sh 20240411-044234.415411
DONE
PARSING 20240411-044234.415411 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-044234.415411
DONE
PARSING 20240411-044234.415411 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-044234.415411
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-044234.415411, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-044311.011323
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3720291 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-044311.011323.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-044311.011323, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4154754)
KILLED CAPYBARA PROCESSES
PARSING 20240411-044311.011323 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-044311.011323            && sh ms_avg_99p_lat.sh 20240411-044311.011323            && sh ms_total_even_odd_numreq.sh 20240411-044311.011323            && sh latency_cdf.sh 20240411-044311.011323
DONE
PARSING 20240411-044311.011323 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-044311.011323
DONE
PARSING 20240411-044311.011323 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-044311.011323
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-044311.011323, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-044435.367617
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3721471 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240411-044435.367617.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-044435.367617, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4156313)
KILLED CAPYBARA PROCESSES
PARSING 20240411-044435.367617 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-044435.367617            && sh ms_avg_99p_lat.sh 20240411-044435.367617            && sh ms_total_even_odd_numreq.sh 20240411-044435.367617            && sh latency_cdf.sh 20240411-044435.367617
DONE
PARSING 20240411-044435.367617 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-044435.367617
DONE
PARSING 20240411-044435.367617 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-044435.367617
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-044435.367617, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-045237.551713
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3722672 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-045237.551713.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-045237.551713, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4158941)
KILLED CAPYBARA PROCESSES
PARSING 20240411-045237.551713 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-045237.551713            && sh ms_avg_99p_lat.sh 20240411-045237.551713            && sh ms_total_even_odd_numreq.sh 20240411-045237.551713            && sh latency_cdf.sh 20240411-045237.551713
DONE
PARSING 20240411-045237.551713 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-045237.551713
DONE
PARSING 20240411-045237.551713 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-045237.551713
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-045237.551713, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-050635.368301
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3723902 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=3 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10002 > /homes/inho/capybara-data/20240411-050635.368301.be2 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-050635.368301, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4162267)
KILLED CAPYBARA PROCESSES
PARSING 20240411-050635.368301 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-050635.368301            && sh ms_avg_99p_lat.sh 20240411-050635.368301            && sh ms_total_even_odd_numreq.sh 20240411-050635.368301            && sh latency_cdf.sh 20240411-050635.368301
DONE
PARSING 20240411-050635.368301 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-050635.368301
DONE
PARSING 20240411-050635.368301 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-050635.368301
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-050635.368301, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-051251.180602
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3725098 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240411-051251.180602.be1 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-051251.180602, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4164620)
KILLED CAPYBARA PROCESSES
PARSING 20240411-051251.180602 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-051251.180602            && sh ms_avg_99p_lat.sh 20240411-051251.180602            && sh ms_total_even_odd_numreq.sh 20240411-051251.180602            && sh latency_cdf.sh 20240411-051251.180602
DONE
PARSING 20240411-051251.180602 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-051251.180602
DONE
PARSING 20240411-051251.180602 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-051251.180602
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-051251.180602, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-051727.439612
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3726286 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-051727.439612.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-051727.439612, 4, 100, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4166795)
KILLED CAPYBARA PROCESSES
PARSING 20240411-051727.439612 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-051727.439612            && sh ms_avg_99p_lat.sh 20240411-051727.439612            && sh ms_total_even_odd_numreq.sh 20240411-051727.439612            && sh latency_cdf.sh 20240411-051727.439612
DONE
PARSING 20240411-051727.439612 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-051727.439612
DONE
PARSING 20240411-051727.439612 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-051727.439612
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-051727.439612, 4, 100, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-051935.882900
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:444:13:
assertion failed: s.len() >= 2 && s.len() <= 3
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4168686 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=10 --threads=4 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=90000:10000,270000:10000,450000:10000,630000:10000,810000:10000/90000:50000/90000:50000/90000:50000 --exptid=/homes/inho/capybara-data/20240411-051935.882900 > /homes/inho/capybara-data/20240411-051935.882900.client
================ TEST COMPLETE =================

[RESULT]20240411-051935.882900, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4168457)
KILLED CAPYBARA PROCESSES
PARSING 20240411-051935.882900 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-051935.882900            && sh ms_avg_99p_lat.sh 20240411-051935.882900            && sh ms_total_even_odd_numreq.sh 20240411-051935.882900            && sh latency_cdf.sh 20240411-051935.882900
ERROR: cat: /homes/inho/capybara-data/20240411-051935.882900.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.latency_trace: No such file or directory



PARSING 20240411-051935.882900 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-051935.882900
ERROR: cat: /homes/inho/capybara-data/20240411-051935.882900.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240411-051935.882900.server_reply_10003: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240411-051935.882900.server_reply' for reading (No such file or directory)



PARSING 20240411-051935.882900 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-051935.882900
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-051935.882900' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-051935.882900, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-052128.179601
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:444:13:
assertion failed: s.len() >= 2 && s.len() <= 3
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 4171420 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=10 --threads=4 --runtime=1 --discard_pct=10 --output=trace --rampup=0 --loadshift=90000:10000,270000:10000,450000:10000,630000:10000,810000:10000/90000:50000/90000:50000/90000:50000 --exptid=/homes/inho/capybara-data/20240411-052128.179601 > /homes/inho/capybara-data/20240411-052128.179601.client
================ TEST COMPLETE =================

[RESULT]20240411-052128.179601, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4171190)
KILLED CAPYBARA PROCESSES
PARSING 20240411-052128.179601 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-052128.179601            && sh ms_avg_99p_lat.sh 20240411-052128.179601            && sh ms_total_even_odd_numreq.sh 20240411-052128.179601            && sh latency_cdf.sh 20240411-052128.179601
ERROR: cat: /homes/inho/capybara-data/20240411-052128.179601.request_sched: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.latency_trace: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.latency_trace: No such file or directory



PARSING 20240411-052128.179601 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-052128.179601
ERROR: cat: /homes/inho/capybara-data/20240411-052128.179601.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240411-052128.179601.server_reply_10003: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240411-052128.179601.server_reply' for reading (No such file or directory)



PARSING 20240411-052128.179601 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-052128.179601
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-052128.179601' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-052128.179601, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-052232.215956
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3729481 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-052232.215956.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-052232.215956, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4172540)
KILLED CAPYBARA PROCESSES
PARSING 20240411-052232.215956 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-052232.215956            && sh ms_avg_99p_lat.sh 20240411-052232.215956            && sh ms_total_even_odd_numreq.sh 20240411-052232.215956            && sh latency_cdf.sh 20240411-052232.215956
DONE
PARSING 20240411-052232.215956 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-052232.215956
DONE
PARSING 20240411-052232.215956 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-052232.215956
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-052232.215956, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-052440.578926
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3730660 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-052440.578926.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-052440.578926, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4174333)
KILLED CAPYBARA PROCESSES
PARSING 20240411-052440.578926 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-052440.578926            && sh ms_avg_99p_lat.sh 20240411-052440.578926            && sh ms_total_even_odd_numreq.sh 20240411-052440.578926            && sh latency_cdf.sh 20240411-052440.578926
DONE
PARSING 20240411-052440.578926 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-052440.578926
DONE
PARSING 20240411-052440.578926 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-052440.578926
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-052440.578926, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-052613.863122
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3731843 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-052613.863122.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-052613.863122, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4176095)
KILLED CAPYBARA PROCESSES
PARSING 20240411-052613.863122 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-052613.863122            && sh ms_avg_99p_lat.sh 20240411-052613.863122            && sh ms_total_even_odd_numreq.sh 20240411-052613.863122            && sh latency_cdf.sh 20240411-052613.863122
DONE
PARSING 20240411-052613.863122 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-052613.863122
DONE
PARSING 20240411-052613.863122 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-052613.863122
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-052613.863122, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-052823.166979
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3733026 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-052823.166979.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-052823.166979, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4177902)
KILLED CAPYBARA PROCESSES
PARSING 20240411-052823.166979 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-052823.166979            && sh ms_avg_99p_lat.sh 20240411-052823.166979            && sh ms_total_even_odd_numreq.sh 20240411-052823.166979            && sh latency_cdf.sh 20240411-052823.166979
DONE
PARSING 20240411-052823.166979 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-052823.166979
DONE
PARSING 20240411-052823.166979 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-052823.166979
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-052823.166979, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-053041.155429
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3734205 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-053041.155429.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-053041.155429, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 4179734)
KILLED CAPYBARA PROCESSES
PARSING 20240411-053041.155429 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-053041.155429            && sh ms_avg_99p_lat.sh 20240411-053041.155429            && sh ms_total_even_odd_numreq.sh 20240411-053041.155429            && sh latency_cdf.sh 20240411-053041.155429
DONE
PARSING 20240411-053041.155429 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-053041.155429
DONE
PARSING 20240411-053041.155429 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-053041.155429
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-053041.155429, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-081837.619553
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3741863 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240411-081837.619553.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-081837.619553, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 14086)
KILLED CAPYBARA PROCESSES
PARSING 20240411-081837.619553 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-081837.619553            && sh ms_avg_99p_lat.sh 20240411-081837.619553            && sh ms_total_even_odd_numreq.sh 20240411-081837.619553            && sh latency_cdf.sh 20240411-081837.619553
DONE
PARSING 20240411-081837.619553 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-081837.619553
DONE
PARSING 20240411-081837.619553 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-081837.619553
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-081837.619553, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-104510.511455
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-104510.511455, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 66030)
KILLED CAPYBARA PROCESSES
PARSING 20240411-104510.511455 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-104510.511455            && sh ms_avg_99p_lat.sh 20240411-104510.511455            && sh ms_total_even_odd_numreq.sh 20240411-104510.511455            && sh latency_cdf.sh 20240411-104510.511455
DONE
PARSING 20240411-104510.511455 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-104510.511455
DONE
PARSING 20240411-104510.511455 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-104510.511455
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-104510.511455, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-110239.219153
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
4 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-110239.219153, 4, 4, 0, 0, 100000, 0, N/A



iokerneld killed (pid 69646)
KILLED CAPYBARA PROCESSES
PARSING 20240411-110239.219153 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240411-110239.219153            && sh ms_avg_99p_lat.sh 20240411-110239.219153            && sh ms_total_even_odd_numreq.sh 20240411-110239.219153            && sh latency_cdf.sh 20240411-110239.219153
DONE
PARSING 20240411-110239.219153 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240411-110239.219153
DONE
PARSING 20240411-110239.219153 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240411-110239.219153
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-110239.219153, 4, 4, 0, 0, 100000, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115503.364290
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern


5284    2300    1414    1001    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115503.364290, 2, 4, 0, 0, 100000, 0, exponential, 10000, 10003, 10003, 0, 0, 14.0, 15.0, 16.0, 17.0, 20.0, 1712836520, 0



iokerneld killed (pid 78177)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115533.983272
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern


31707    13801    8484    6007    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115533.983272, 2, 4, 0, 0, 100000, 0, exponential, 60000, 59876, 59875, 0, 0, 14.0, 16.0, 18.0, 21.0, 27.0, 1712836550, 0



iokerneld killed (pid 79055)
dpdk-ctrl.elf killed (pid 2776260)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115748.675703
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8941


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115748.675703, 2, 100, 0, 0, 100000, 0, exponential, 10000, 9317, 9317, 0, 0, 15.0, 16.0, 18.0, 20.0, 34.0, 1712836685, 0



iokerneld killed (pid 80288)
dpdk-ctrl.elf killed (pid 2776818)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115819.215306
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 53641


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115819.215306, 2, 100, 0, 0, 100000, 0, exponential, 60000, 58035, 58034, 0, 1, 15.0, 18.0, 20.0, 24.0, 27.0, 1712836715, 0



iokerneld killed (pid 81184)
dpdk-ctrl.elf killed (pid 2777367)
dpdk-ctrl.elf killed (pid 3774564)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115849.831367
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 98524


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115849.831367, 2, 100, 0, 0, 100000, 0, exponential, 110000, 107213, 107212, 0, 0, 16.0, 20.0, 25.0, 31.0, 37.0, 1712836746, 0



iokerneld killed (pid 82061)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115920.426900
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 143394


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115920.426900, 2, 100, 0, 0, 100000, 0, exponential, 160000, 156063, 156061, 0, 4, 17.0, 23.0, 34.0, 45.0, 57.0, 1712836777, 0



iokerneld killed (pid 82948)
dpdk-ctrl.elf killed (pid 2778461)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-115951.083728
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 188004


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-115951.083728, 2, 100, 0, 0, 100000, 0, exponential, 210000, 204856, 204852, 0, 6, 20.0, 32.0, 54.0, 79.0, 104.0, 1712836807, 0



iokerneld killed (pid 83875)
dpdk-ctrl.elf killed (pid 2779006)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120021.767714
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 232991


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120021.767714, 2, 100, 0, 0, 100000, 0, exponential, 260000, 253617, 253608, 0, 6, 27.0, 68.0, 139.0, 230.0, 285.0, 1712836838, 0



iokerneld killed (pid 84767)
dpdk-ctrl.elf killed (pid 2779555)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120052.486519
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3777693 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120052.486519.be0 2>&1
bash: line 1: 2780187 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120052.486519.fe 2>&1
bash: line 1: 3777694 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10001 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120052.486519.be1 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120052.486519, 2, 100, 0, 0, 100000, 0, exponential, 310000, 0, 0, 0, 1712836869



iokerneld killed (pid 85650)
dpdk-ctrl.elf killed (pid 2780100)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120124.236093
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3778303 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120124.236093.be0 2>&1
bash: line 1: 2780735 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120124.236093.fe 2>&1
bash: line 1: 3778304 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10001 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120124.236093.be1 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120124.236093, 2, 100, 0, 0, 100000, 0, exponential, 360000, 0, 0, 0, 1712836901



iokerneld killed (pid 86533)
dpdk-ctrl.elf killed (pid 2780650)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120155.999217
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3778926 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10001 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120155.999217.be1 2>&1
bash: line 1: 2781295 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120155.999217.fe 2>&1
bash: line 1: 3778925 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120155.999217.be0 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120155.999217, 2, 100, 0, 0, 100000, 0, exponential, 410000, 0, 0, 0, 1712836932



iokerneld killed (pid 87421)
dpdk-ctrl.elf killed (pid 2781209)
dpdk-ctrl.elf killed (pid 3778835)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120227.807913
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2781847 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120227.807913.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120227.807913, 2, 100, 0, 0, 100000, 0, exponential, 460000, 0, 0, 0, 1712836964



iokerneld killed (pid 88356)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120259.571390
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2782436 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120259.571390.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120259.571390, 2, 100, 0, 0, 100000, 0, exponential, 510000, 0, 0, 0, 1712836996



iokerneld killed (pid 89239)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-115748.675703, 2, 100, 0, 0, 100000, 0, exponential, 10000, 9317, 9317, 0, 0, 15.0, 16.0, 18.0, 20.0, 34.0, 1712836685, 0
20240411-115819.215306, 2, 100, 0, 0, 100000, 0, exponential, 60000, 58035, 58034, 0, 1, 15.0, 18.0, 20.0, 24.0, 27.0, 1712836715, 0
20240411-115849.831367, 2, 100, 0, 0, 100000, 0, exponential, 110000, 107213, 107212, 0, 0, 16.0, 20.0, 25.0, 31.0, 37.0, 1712836746, 0
20240411-115920.426900, 2, 100, 0, 0, 100000, 0, exponential, 160000, 156063, 156061, 0, 4, 17.0, 23.0, 34.0, 45.0, 57.0, 1712836777, 0
20240411-115951.083728, 2, 100, 0, 0, 100000, 0, exponential, 210000, 204856, 204852, 0, 6, 20.0, 32.0, 54.0, 79.0, 104.0, 1712836807, 0
20240411-120021.767714, 2, 100, 0, 0, 100000, 0, exponential, 260000, 253617, 253608, 0, 6, 27.0, 68.0, 139.0, 230.0, 285.0, 1712836838, 0
20240411-120052.486519, 2, 100, 0, 0, 100000, 0, exponential, 310000, 0, 0, 0, 1712836869
20240411-120124.236093, 2, 100, 0, 0, 100000, 0, exponential, 360000, 0, 0, 0, 1712836901
20240411-120155.999217, 2, 100, 0, 0, 100000, 0, exponential, 410000, 0, 0, 0, 1712836932
20240411-120227.807913, 2, 100, 0, 0, 100000, 0, exponential, 460000, 0, 0, 0, 1712836964
20240411-120259.571390, 2, 100, 0, 0, 100000, 0, exponential, 510000, 0, 0, 0, 1712836996

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120443.915997
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120502.024115
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120549.207498
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8941


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120549.207498, 1, 100, 0, 0, 100000, 0, exponential, 10000, 9317, 9317, 0, 0, 15.0, 16.0, 18.0, 19.0, 20.0, 1712837166, 0



iokerneld killed (pid 92688)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120620.291846
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 53642


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120620.291846, 1, 100, 0, 0, 100000, 0, exponential, 60000, 58036, 58035, 0, 0, 15.0, 18.0, 21.0, 24.0, 27.0, 1712837197, 0



iokerneld killed (pid 93580)
dpdk-ctrl.elf killed (pid 2786342)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120651.434934
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 98523


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120651.434934, 1, 100, 0, 0, 100000, 0, exponential, 110000, 107212, 107211, 0, 1, 16.0, 20.0, 27.0, 35.0, 42.0, 1712837228, 0



iokerneld killed (pid 94458)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120722.599783
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 143395


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120722.599783, 1, 100, 0, 0, 100000, 0, exponential, 160000, 156065, 156062, 0, 3, 18.0, 26.0, 40.0, 55.0, 78.0, 1712837259, 0



iokerneld killed (pid 95357)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120753.655553
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 188008


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120753.655553, 1, 100, 0, 0, 100000, 0, exponential, 210000, 204860, 204856, 0, 2, 21.0, 42.0, 77.0, 125.0, 191.0, 1712837290, 0



iokerneld killed (pid 96249)
dpdk-ctrl.elf killed (pid 2787982)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120824.775022
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3786678 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120824.775022.be0 2>&1
bash: line 1: 2788613 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120824.775022.fe 2>&1
Total # latencies: 192827


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-120824.775022, 1, 100, 0, 0, 100000, 0, exponential, 260000, 253619, 252178, 40166, 4, 114.0, inf, inf, inf, inf, 1712837321, 0



iokerneld killed (pid 97138)
dpdk-ctrl.elf killed (pid 2788527)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120856.879071
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3787281 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120856.879071.be0 2>&1
bash: line 1: 2789163 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120856.879071.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120856.879071, 1, 100, 0, 0, 100000, 0, exponential, 310000, 0, 0, 0, 1712837354



iokerneld killed (pid 98027)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-120928.987224
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3787886 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120928.987224.be0 2>&1
bash: line 1: 2789709 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-120928.987224.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-120928.987224, 1, 100, 0, 0, 100000, 0, exponential, 360000, 0, 0, 0, 1712837386



dpdk-ctrl.elf killed (pid 2789624)
iokerneld killed (pid 98922)
dpdk-ctrl.elf killed (pid 3787799)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121002.283400
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121002.283400, 1, 100, 0, 0, 100000, 0, exponential, 10000, 9775, 9775, 0, 0, 15.0, 16.0, 18.0, 19.0, 22.0, 1712837420, 0



iokerneld killed (pid 99875)
dpdk-ctrl.elf killed (pid 2790170)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121042.463312
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 539366


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121042.463312, 1, 100, 0, 0, 100000, 0, exponential, 60000, 59243, 59242, 0, 5, 15.0, 18.0, 21.0, 25.0, 31.0, 1712837460, 0



iokerneld killed (pid 100777)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121122.655445
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988936


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121122.655445, 1, 100, 0, 0, 100000, 0, exponential, 110000, 109009, 109009, 0, 4, 16.0, 20.0, 27.0, 35.0, 45.0, 1712837500, 0



iokerneld killed (pid 101683)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121202.831914
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438521


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121202.831914, 1, 100, 0, 0, 100000, 0, exponential, 160000, 158658, 158657, 0, 13, 17.0, 25.0, 39.0, 55.0, 70.0, 1712837541, 0



iokerneld killed (pid 102592)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121243.091405
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1888187


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121243.091405, 1, 100, 0, 0, 100000, 0, exponential, 210000, 208646, 208646, 0, 15, 21.0, 42.0, 76.0, 109.0, 139.0, 1712837581, 0



iokerneld killed (pid 103499)
dpdk-ctrl.elf killed (pid 2792354)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121323.355126
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2792986 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121323.355126.fe 2>&1
bash: line 1: 3791491 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121323.355126.be0 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-121323.355126, 1, 100, 0, 0, 100000, 0, exponential, 260000, 0, 0, 0, 1712837620



iokerneld killed (pid 104405)
dpdk-ctrl.elf killed (pid 2792901)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121404.602950
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3792104 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121404.602950.be0 2>&1
bash: line 1: 2793533 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121404.602950.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-121404.602950, 1, 100, 0, 0, 100000, 0, exponential, 310000, 0, 0, 0, 1712837661



iokerneld killed (pid 105313)
dpdk-ctrl.elf killed (pid 2793448)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121445.890460
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3792711 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121445.890460.be0 2>&1
bash: line 1: 2794081 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121445.890460.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-121445.890460, 1, 100, 0, 0, 100000, 0, exponential, 360000, 0, 0, 0, 1712837703



iokerneld killed (pid 106221)
dpdk-ctrl.elf killed (pid 2793996)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121527.119421
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3793321 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121527.119421.be0 2>&1
bash: line 1: 2794628 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121527.119421.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-121527.119421, 1, 100, 0, 0, 100000, 0, exponential, 410000, 0, 0, 0, 1712837744



iokerneld killed (pid 107136)
dpdk-ctrl.elf killed (pid 2794543)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121608.458544
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2795178 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121608.458544.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-121608.458544, 1, 100, 0, 0, 100000, 0, exponential, 460000, 0, 0, 0, 1712837785



iokerneld killed (pid 108047)
dpdk-ctrl.elf killed (pid 2795093)
dpdk-ctrl.elf killed (pid 3793845)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121649.819297
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 2795727 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240411-121649.819297.fe 2>&1
================ TEST COMPLETE =================

[RESULT]20240411-121649.819297, 1, 100, 0, 0, 100000, 0, exponential, 510000, 0, 0, 0, 1712837827



iokerneld killed (pid 108960)
dpdk-ctrl.elf killed (pid 2795642)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-121002.283400, 1, 100, 0, 0, 100000, 0, exponential, 10000, 9775, 9775, 0, 0, 15.0, 16.0, 18.0, 19.0, 22.0, 1712837420, 0
20240411-121042.463312, 1, 100, 0, 0, 100000, 0, exponential, 60000, 59243, 59242, 0, 5, 15.0, 18.0, 21.0, 25.0, 31.0, 1712837460, 0
20240411-121122.655445, 1, 100, 0, 0, 100000, 0, exponential, 110000, 109009, 109009, 0, 4, 16.0, 20.0, 27.0, 35.0, 45.0, 1712837500, 0
20240411-121202.831914, 1, 100, 0, 0, 100000, 0, exponential, 160000, 158658, 158657, 0, 13, 17.0, 25.0, 39.0, 55.0, 70.0, 1712837541, 0
20240411-121243.091405, 1, 100, 0, 0, 100000, 0, exponential, 210000, 208646, 208646, 0, 15, 21.0, 42.0, 76.0, 109.0, 139.0, 1712837581, 0
20240411-121323.355126, 1, 100, 0, 0, 100000, 0, exponential, 260000, 0, 0, 0, 1712837620
20240411-121404.602950, 1, 100, 0, 0, 100000, 0, exponential, 310000, 0, 0, 0, 1712837661
20240411-121445.890460, 1, 100, 0, 0, 100000, 0, exponential, 360000, 0, 0, 0, 1712837703
20240411-121527.119421, 1, 100, 0, 0, 100000, 0, exponential, 410000, 0, 0, 0, 1712837744
20240411-121608.458544, 1, 100, 0, 0, 100000, 0, exponential, 460000, 0, 0, 0, 1712837785
20240411-121649.819297, 1, 100, 0, 0, 100000, 0, exponential, 510000, 0, 0, 0, 1712837827

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121813.335260
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1977637


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121813.335260, 1, 100, 0, 0, 100000, 0, exponential, 220000, 218797, 218797, 0, 14, 23.0, 49.0, 92.0, 140.0, 239.0, 1712837911, 0



iokerneld killed (pid 111398)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121853.755923
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2067410


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121853.755923, 1, 100, 0, 0, 100000, 0, exponential, 230000, 228686, 228686, 0, 23, 26.0, 62.0, 121.0, 188.0, 250.0, 1712837952, 0



iokerneld killed (pid 112305)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-121934.186898
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2157390


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-121934.186898, 1, 100, 0, 0, 100000, 0, exponential, 240000, 238529, 238529, 0, 17, 31.0, 85.0, 175.0, 272.0, 384.0, 1712837992, 0



iokerneld killed (pid 113222)
dpdk-ctrl.elf killed (pid 2799450)
dpdk-ctrl.elf killed (pid 3798447)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240411-122014.727217
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2247256


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240411-122014.727217, 1, 100, 0, 0, 100000, 0, exponential, 250000, 248540, 248539, 0, 18, 41.0, 135.0, 297.0, 494.0, 682.0, 1712838033, 0



iokerneld killed (pid 114127)
dpdk-ctrl.elf killed (pid 2799994)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240411-121813.335260, 1, 100, 0, 0, 100000, 0, exponential, 220000, 218797, 218797, 0, 14, 23.0, 49.0, 92.0, 140.0, 239.0, 1712837911, 0
20240411-121853.755923, 1, 100, 0, 0, 100000, 0, exponential, 230000, 228686, 228686, 0, 23, 26.0, 62.0, 121.0, 188.0, 250.0, 1712837952, 0
20240411-121934.186898, 1, 100, 0, 0, 100000, 0, exponential, 240000, 238529, 238529, 0, 17, 31.0, 85.0, 175.0, 272.0, 384.0, 1712837992, 0
20240411-122014.727217, 1, 100, 0, 0, 100000, 0, exponential, 250000, 248540, 248539, 0, 18, 41.0, 135.0, 297.0, 494.0, 682.0, 1712838033, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032213.527920
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1977633


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032213.527920, 2, 100, 0, 0, 100000, 0, exponential, 220000, 218797, 218796, 0, 18, 20.0, 34.0, 60.0, 85.0, 108.0, 1712892151, 0



iokerneld killed (pid 226362)
dpdk-ctrl.elf killed (pid 2803160)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032253.990972
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2067417


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032253.990972, 2, 100, 0, 0, 100000, 0, exponential, 230000, 228687, 228687, 0, 16, 21.0, 38.0, 70.0, 101.0, 126.0, 1712892192, 0



iokerneld killed (pid 227274)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032334.455675
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2157386


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032334.455675, 2, 100, 0, 0, 100000, 0, exponential, 240000, 238529, 238528, 0, 21, 22.0, 45.0, 85.0, 130.0, 177.0, 1712892232, 0



iokerneld killed (pid 228193)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032414.987664
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2247252


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032414.987664, 2, 100, 0, 0, 100000, 0, exponential, 250000, 248539, 248539, 0, 22, 29.0, 72.0, 146.0, 231.0, 287.0, 1712892273, 0



iokerneld killed (pid 229103)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-032213.527920, 2, 100, 0, 0, 100000, 0, exponential, 220000, 218797, 218796, 0, 18, 20.0, 34.0, 60.0, 85.0, 108.0, 1712892151, 0
20240412-032253.990972, 2, 100, 0, 0, 100000, 0, exponential, 230000, 228687, 228687, 0, 16, 21.0, 38.0, 70.0, 101.0, 126.0, 1712892192, 0
20240412-032334.455675, 2, 100, 0, 0, 100000, 0, exponential, 240000, 238529, 238528, 0, 21, 22.0, 45.0, 85.0, 130.0, 177.0, 1712892232, 0
20240412-032414.987664, 2, 100, 0, 0, 100000, 0, exponential, 250000, 248539, 248539, 0, 22, 29.0, 72.0, 146.0, 231.0, 287.0, 1712892273, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032600.567206
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2336938


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032600.567206, 2, 100, 0, 0, 100000, 0, exponential, 260000, 258561, 258558, 0, 28, 27.0, 71.0, 148.0, 233.0, 317.0, 1712892378, 0



iokerneld killed (pid 230968)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032641.039761
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2427722


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032641.039761, 2, 100, 0, 0, 100000, 0, exponential, 270000, 268613, 268612, 0, 22, 33.0, 100.0, 226.0, 346.0, 452.0, 1712892419, 0



iokerneld killed (pid 231876)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-032600.567206, 2, 100, 0, 0, 100000, 0, exponential, 260000, 258561, 258558, 0, 28, 27.0, 71.0, 148.0, 233.0, 317.0, 1712892378, 0
20240412-032641.039761, 2, 100, 0, 0, 100000, 0, exponential, 270000, 268613, 268612, 0, 22, 33.0, 100.0, 226.0, 346.0, 452.0, 1712892419, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032743.207084
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2517872


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032743.207084, 2, 100, 0, 0, 100000, 0, exponential, 280000, 278625, 278624, 0, 30, 50.0, 188.0, 432.0, 709.0, 939.0, 1712892481, 0



iokerneld killed (pid 233465)
dpdk-ctrl.elf killed (pid 2808366)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032823.746997
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 3808606 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10001 10.0.1.8:10000 > /homes/inho/capybara-data/20240412-032823.746997.be1 2>&1
bash: line 1: 2808997 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node8_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-fe.elf 10.0.1.8:10000 > /homes/inho/capybara-data/20240412-032823.746997.fe 2>&1
bash: line 1: 3808605 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=100000 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.3 THRESHOLD_EPSILON=0.05 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/proxy-server-be.elf 10.0.1.9:10000 10.0.1.8:10000 > /homes/inho/capybara-data/20240412-032823.746997.be0 2>&1
Total # latencies: 70958


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032823.746997, 2, 100, 0, 0, 100000, 0, exponential, 290000, 263320, 246011, 119566, 2417536, inf, inf, inf, inf, inf, 1712892522, 0



iokerneld killed (pid 234372)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-032743.207084, 2, 100, 0, 0, 100000, 0, exponential, 280000, 278625, 278624, 0, 30, 50.0, 188.0, 432.0, 709.0, 939.0, 1712892481, 0
20240412-032823.746997, 2, 100, 0, 0, 100000, 0, exponential, 290000, 263320, 246011, 119566, 2417536, inf, inf, inf, inf, inf, 1712892522, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-032932.191470
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-032932.191470, 2, 100, 0, 0, 100000, 0, exponential, 10000, 9775, 9775, 0, 0, 15.0, 16.0, 18.0, 19.0, 22.0, 1712892590, 0



iokerneld killed (pid 235985)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-033012.703509
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 539370


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-033012.703509, 2, 100, 0, 0, 100000, 0, exponential, 60000, 59243, 59243, 0, 1, 15.0, 17.0, 20.0, 24.0, 29.0, 1712892631, 0



iokerneld killed (pid 236888)
dpdk-ctrl.elf killed (pid 2810690)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-033053.258566
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 988934


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-033053.258566, 2, 100, 0, 0, 100000, 0, exponential, 110000, 109009, 109009, 0, 6, 16.0, 19.0, 25.0, 31.0, 41.0, 1712892671, 0



iokerneld killed (pid 237801)
dpdk-ctrl.elf killed (pid 2811238)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-033133.807544
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1438524


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-033133.807544, 2, 100, 0, 0, 100000, 0, exponential, 160000, 158658, 158658, 0, 10, 17.0, 23.0, 33.0, 46.0, 63.0, 1712892712, 0



iokerneld killed (pid 238713)
dpdk-ctrl.elf killed (pid 2811786)
dpdk-ctrl.elf killed (pid 3811668)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-033214.406815
SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1888181


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-033214.406815, 2, 100, 0, 0, 100000, 0, exponential, 210000, 208646, 208645, 0, 21, 19.0, 31.0, 53.0, 74.0, 95.0, 1712892753, 0



iokerneld killed (pid 239622)
dpdk-ctrl.elf killed (pid 2812332)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-032932.191470, 2, 100, 0, 0, 100000, 0, exponential, 10000, 9775, 9775, 0, 0, 15.0, 16.0, 18.0, 19.0, 22.0, 1712892590, 0
20240412-033012.703509, 2, 100, 0, 0, 100000, 0, exponential, 60000, 59243, 59243, 0, 1, 15.0, 17.0, 20.0, 24.0, 29.0, 1712892631, 0
20240412-033053.258566, 2, 100, 0, 0, 100000, 0, exponential, 110000, 109009, 109009, 0, 6, 16.0, 19.0, 25.0, 31.0, 41.0, 1712892671, 0
20240412-033133.807544, 2, 100, 0, 0, 100000, 0, exponential, 160000, 158658, 158658, 0, 10, 17.0, 23.0, 33.0, 46.0, 63.0, 1712892712, 0
20240412-033214.406815, 2, 100, 0, 0, 100000, 0, exponential, 210000, 208646, 208645, 0, 21, 19.0, 31.0, 53.0, 74.0, 95.0, 1712892753, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-034503.167088
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'thread '<unnamed>main' panicked at ' panicked at src/main.rssrc/main.rs::911911::thread '8383:
:
<unnamed>called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }' panicked at 

src/main.rsnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
bash: line 1: 243282 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=100000 --threads=100 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240412-034503.167088 > /homes/inho/capybara-data/20240412-034503.167088.client
================ TEST COMPLETE =================

[RESULT]20240412-034503.167088, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 243056)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-034630.607610
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread 'main' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 244354 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=100000 --threads=100 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240412-034630.607610 > /homes/inho/capybara-data/20240412-034630.607610.client
================ TEST COMPLETE =================

[RESULT]20240412-034630.607610, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 244126)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-034701.383358
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-034824.575523
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
thread '<unnamed>' panicked at src/main.rs:911:83:
called `Result::unwrap()` on an `Err` value: Os { code: -110, kind: Uncategorized, message: "Unknown error -110" }
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
bash: line 1: 245694 Aborted                 sudo numactl -m0 /homes/inho/Capybara/caladan/apps/synthetic/target/release/synthetic 10.0.1.8:10000 --config /homes/inho/Capybara/caladan/client.config --mode runtime-client --protocol=http --transport=tcp --samples=1 --pps=100000 --threads=100 --runtime=10 --discard_pct=10 --output=trace --rampup=0 --exptid=/homes/inho/capybara-data/20240412-034824.575523 > /homes/inho/capybara-data/20240412-034824.575523.client
================ TEST COMPLETE =================

[RESULT]20240412-034824.575523, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 245468)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-034932.755343
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 899028


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-034932.755343, 2, 100, 0, 0, 0, 0, exponential, 100000, 98973, 98973, 0, 7, 8.0, 9.0, 10.0, 11.0, 13.0, 1712893788, 0



iokerneld killed (pid 246489)
dpdk-ctrl.elf killed (pid 3816173)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035010.079389
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1797703


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035010.079389, 2, 100, 0, 0, 0, 0, exponential, 200000, 198540, 198540, 0, 28, 8.0, 9.0, 11.0, 12.0, 14.0, 1712893825, 0



iokerneld killed (pid 247386)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035047.611578
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697541


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035047.611578, 2, 100, 0, 0, 0, 0, exponential, 300000, 298434, 298433, 0, 17, 8.0, 10.0, 11.0, 13.0, 16.0, 1712893862, 0



iokerneld killed (pid 248282)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035125.090989
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3598118


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035125.090989, 2, 100, 0, 0, 0, 0, exponential, 400000, 398317, 398317, 0, 41, 8.0, 10.0, 12.0, 15.0, 18.0, 1712893900, 0



iokerneld killed (pid 249182)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035202.575052
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4497914


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035202.575052, 2, 100, 0, 0, 0, 0, exponential, 500000, 497942, 497941, 0, 62, 8.0, 10.0, 13.0, 16.0, 20.0, 1712893937, 0



iokerneld killed (pid 250084)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035240.123354
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5396781


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035240.123354, 2, 100, 0, 0, 0, 0, exponential, 600000, 597717, 597716, 0, 66, 9.0, 11.0, 14.0, 18.0, 24.0, 1712893975, 0



iokerneld killed (pid 250985)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035317.731767
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6296428


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035317.731767, 2, 100, 0, 0, 0, 0, exponential, 700000, 697191, 697191, 0, 141, 9.0, 12.0, 16.0, 21.0, 28.0, 1712894013, 0



iokerneld killed (pid 251889)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035355.463451
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 7196616


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035355.463451, 2, 100, 0, 0, 0, 0, exponential, 800000, 797049, 797048, 0, 296, 9.0, 13.0, 18.0, 25.0, 38.0, 1712894051, 0



iokerneld killed (pid 252789)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035433.291726
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8096377


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035433.291726, 2, 100, 0, 0, 0, 0, exponential, 900000, 896777, 896776, 0, 600, 10.0, 14.0, 21.0, 31.0, 46.0, 1712894088, 0



iokerneld killed (pid 253685)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035511.115614
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8994821


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035511.115614, 2, 100, 0, 0, 0, 0, exponential, 1000000, 997066, 997065, 0, 780, 11.0, 17.0, 27.0, 40.0, 61.0, 1712894126, 0



iokerneld killed (pid 254590)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035549.067692
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9895236


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035549.067692, 2, 100, 0, 0, 0, 0, exponential, 1100000, 1097084, 1097083, 0, 1494, 12.0, 21.0, 37.0, 62.0, 121.0, 1712894164, 0



iokerneld killed (pid 255486)
dpdk-ctrl.elf killed (pid 3822211)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-034932.755343, 2, 100, 0, 0, 0, 0, exponential, 100000, 98973, 98973, 0, 7, 8.0, 9.0, 10.0, 11.0, 13.0, 1712893788, 0
20240412-035010.079389, 2, 100, 0, 0, 0, 0, exponential, 200000, 198540, 198540, 0, 28, 8.0, 9.0, 11.0, 12.0, 14.0, 1712893825, 0
20240412-035047.611578, 2, 100, 0, 0, 0, 0, exponential, 300000, 298434, 298433, 0, 17, 8.0, 10.0, 11.0, 13.0, 16.0, 1712893862, 0
20240412-035125.090989, 2, 100, 0, 0, 0, 0, exponential, 400000, 398317, 398317, 0, 41, 8.0, 10.0, 12.0, 15.0, 18.0, 1712893900, 0
20240412-035202.575052, 2, 100, 0, 0, 0, 0, exponential, 500000, 497942, 497941, 0, 62, 8.0, 10.0, 13.0, 16.0, 20.0, 1712893937, 0
20240412-035240.123354, 2, 100, 0, 0, 0, 0, exponential, 600000, 597717, 597716, 0, 66, 9.0, 11.0, 14.0, 18.0, 24.0, 1712893975, 0
20240412-035317.731767, 2, 100, 0, 0, 0, 0, exponential, 700000, 697191, 697191, 0, 141, 9.0, 12.0, 16.0, 21.0, 28.0, 1712894013, 0
20240412-035355.463451, 2, 100, 0, 0, 0, 0, exponential, 800000, 797049, 797048, 0, 296, 9.0, 13.0, 18.0, 25.0, 38.0, 1712894051, 0
20240412-035433.291726, 2, 100, 0, 0, 0, 0, exponential, 900000, 896777, 896776, 0, 600, 10.0, 14.0, 21.0, 31.0, 46.0, 1712894088, 0
20240412-035511.115614, 2, 100, 0, 0, 0, 0, exponential, 1000000, 997066, 997065, 0, 780, 11.0, 17.0, 27.0, 40.0, 61.0, 1712894126, 0
20240412-035549.067692, 2, 100, 0, 0, 0, 0, exponential, 1100000, 1097084, 1097083, 0, 1494, 12.0, 21.0, 37.0, 62.0, 121.0, 1712894164, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035715.779877
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 10794312


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035715.779877, 2, 100, 0, 0, 0, 0, exponential, 1200000, 1196702, 1196700, 0, 1752, 16.0, 34.0, 74.0, 141.0, 243.0, 1712894251, 0



iokerneld killed (pid 257881)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035753.934505
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11244340


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035753.934505, 2, 100, 0, 0, 0, 0, exponential, 1250000, 1246637, 1246624, 0, 1837, 28.0, 88.0, 237.0, 461.0, 749.0, 1712894289, 0



iokerneld killed (pid 258781)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035832.167246
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11693621


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035832.167246, 2, 100, 0, 0, 0, 0, exponential, 1300000, 1296650, 1296639, 0, 2220, 64.0, 203.0, 487.0, 939.0, 1745.0, 1712894327, 0



iokerneld killed (pid 259681)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035910.259125
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 77398


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-035910.259125, 2, 100, 0, 0, 0, 0, exponential, 1350000, 454490, 247048, 67740, 7142212, 18416.0, inf, inf, inf, inf, 1712894365, 0



iokerneld killed (pid 260586)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-035949.071069
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-035949.071069, 2, 100, 0, 0, 0, 0, exponential, 1400000, 0, 0, 0, 1712894403



dpdk-ctrl.elf killed (pid 3827445)
iokerneld killed (pid 261487)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-035715.779877, 2, 100, 0, 0, 0, 0, exponential, 1200000, 1196702, 1196700, 0, 1752, 16.0, 34.0, 74.0, 141.0, 243.0, 1712894251, 0
20240412-035753.934505, 2, 100, 0, 0, 0, 0, exponential, 1250000, 1246637, 1246624, 0, 1837, 28.0, 88.0, 237.0, 461.0, 749.0, 1712894289, 0
20240412-035832.167246, 2, 100, 0, 0, 0, 0, exponential, 1300000, 1296650, 1296639, 0, 2220, 64.0, 203.0, 487.0, 939.0, 1745.0, 1712894327, 0
20240412-035910.259125, 2, 100, 0, 0, 0, 0, exponential, 1350000, 454490, 247048, 67740, 7142212, 18416.0, inf, inf, inf, inf, 1712894365, 0
20240412-035949.071069, 2, 100, 0, 0, 0, 0, exponential, 1400000, 0, 0, 0, 1712894403

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040240.111391
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 899024


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040240.111391, 2, 100, 0, 0, 0, 0, exponential, 100000, 98973, 98972, 0, 11, 8.0, 9.0, 11.0, 12.0, 14.0, 1712894575, 0



iokerneld killed (pid 263721)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040317.747966
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 1797711


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040317.747966, 2, 100, 0, 0, 0, 0, exponential, 200000, 198541, 198541, 0, 20, 9.0, 10.0, 12.0, 14.0, 16.0, 1712894613, 0



iokerneld killed (pid 264625)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040355.547886
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 2697532


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040355.547886, 2, 100, 0, 0, 0, 0, exponential, 300000, 298433, 298432, 0, 26, 9.0, 11.0, 13.0, 15.0, 18.0, 1712894651, 0



iokerneld killed (pid 265527)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040433.315703
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 3598114


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040433.315703, 2, 100, 0, 0, 0, 0, exponential, 400000, 398317, 398316, 0, 45, 9.0, 11.0, 14.0, 17.0, 21.0, 1712894688, 0



iokerneld killed (pid 266429)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040511.007560
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 4497917


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040511.007560, 2, 100, 0, 0, 0, 0, exponential, 500000, 497942, 497941, 0, 59, 9.0, 12.0, 15.0, 19.0, 25.0, 1712894726, 0



iokerneld killed (pid 267334)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040548.767380
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 5396731


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040548.767380, 2, 100, 0, 0, 0, 0, exponential, 600000, 597711, 597710, 0, 116, 10.0, 13.0, 17.0, 22.0, 31.0, 1712894764, 0



iokerneld killed (pid 268231)
dpdk-ctrl.elf killed (pid 3832307)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040626.471745
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 6296424


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040626.471745, 2, 100, 0, 0, 0, 0, exponential, 700000, 697191, 697190, 0, 145, 10.0, 14.0, 20.0, 27.0, 39.0, 1712894802, 0



iokerneld killed (pid 269126)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040704.334625
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 7196626


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040704.334625, 2, 100, 0, 0, 0, 0, exponential, 800000, 797050, 797049, 0, 286, 11.0, 16.0, 23.0, 33.0, 49.0, 1712894839, 0



iokerneld killed (pid 270022)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040742.207805
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8096466


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040742.207805, 2, 100, 0, 0, 0, 0, exponential, 900000, 896787, 896785, 0, 511, 12.0, 19.0, 30.0, 44.0, 64.0, 1712894877, 0



iokerneld killed (pid 270927)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040820.279364
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8994773


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040820.279364, 2, 100, 0, 0, 0, 0, exponential, 1000000, 997061, 997059, 0, 828, 14.0, 24.0, 40.0, 62.0, 90.0, 1712894915, 0



iokerneld killed (pid 271830)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040858.207371
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9895496


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040858.207371, 2, 100, 0, 0, 0, 0, exponential, 1100000, 1097113, 1097109, 0, 1234, 18.0, 34.0, 62.0, 99.0, 143.0, 1712894953, 0



iokerneld killed (pid 272728)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-040936.302929
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 10794145


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-040936.302929, 2, 100, 0, 0, 0, 0, exponential, 1200000, 1196684, 1196679, 0, 1919, 28.0, 61.0, 125.0, 206.0, 292.0, 1712894991, 0



iokerneld killed (pid 273630)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-041014.403532
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 11693376


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-041014.403532, 2, 100, 0, 0, 0, 0, exponential, 1300000, 1296622, 1296608, 0, 2465, 69.0, 185.0, 393.0, 661.0, 1019.0, 1712895030, 0



iokerneld killed (pid 274525)
dpdk-ctrl.elf killed (pid 3836550)
KILLED CAPYBARA PROCESSES
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-040240.111391, 2, 100, 0, 0, 0, 0, exponential, 100000, 98973, 98972, 0, 11, 8.0, 9.0, 11.0, 12.0, 14.0, 1712894575, 0
20240412-040317.747966, 2, 100, 0, 0, 0, 0, exponential, 200000, 198541, 198541, 0, 20, 9.0, 10.0, 12.0, 14.0, 16.0, 1712894613, 0
20240412-040355.547886, 2, 100, 0, 0, 0, 0, exponential, 300000, 298433, 298432, 0, 26, 9.0, 11.0, 13.0, 15.0, 18.0, 1712894651, 0
20240412-040433.315703, 2, 100, 0, 0, 0, 0, exponential, 400000, 398317, 398316, 0, 45, 9.0, 11.0, 14.0, 17.0, 21.0, 1712894688, 0
20240412-040511.007560, 2, 100, 0, 0, 0, 0, exponential, 500000, 497942, 497941, 0, 59, 9.0, 12.0, 15.0, 19.0, 25.0, 1712894726, 0
20240412-040548.767380, 2, 100, 0, 0, 0, 0, exponential, 600000, 597711, 597710, 0, 116, 10.0, 13.0, 17.0, 22.0, 31.0, 1712894764, 0
20240412-040626.471745, 2, 100, 0, 0, 0, 0, exponential, 700000, 697191, 697190, 0, 145, 10.0, 14.0, 20.0, 27.0, 39.0, 1712894802, 0
20240412-040704.334625, 2, 100, 0, 0, 0, 0, exponential, 800000, 797050, 797049, 0, 286, 11.0, 16.0, 23.0, 33.0, 49.0, 1712894839, 0
20240412-040742.207805, 2, 100, 0, 0, 0, 0, exponential, 900000, 896787, 896785, 0, 511, 12.0, 19.0, 30.0, 44.0, 64.0, 1712894877, 0
20240412-040820.279364, 2, 100, 0, 0, 0, 0, exponential, 1000000, 997061, 997059, 0, 828, 14.0, 24.0, 40.0, 62.0, 90.0, 1712894915, 0
20240412-040858.207371, 2, 100, 0, 0, 0, 0, exponential, 1100000, 1097113, 1097109, 0, 1234, 18.0, 34.0, 62.0, 99.0, 143.0, 1712894953, 0
20240412-040936.302929, 2, 100, 0, 0, 0, 0, exponential, 1200000, 1196684, 1196679, 0, 1919, 28.0, 61.0, 125.0, 206.0, 292.0, 1712894991, 0
20240412-041014.403532, 2, 100, 0, 0, 0, 0, exponential, 1300000, 1296622, 1296608, 0, 2465, 69.0, 185.0, 393.0, 661.0, 1019.0, 1712895030, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-062838.667610
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-062838.667610, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712903333



iokerneld killed (pid 298454)
KILLED CAPYBARA PROCESSES
PARSING 20240412-062838.667610 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
 1712903332406090987,SEND_PREPARE_MIG,(10.0.1.7:101)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-062838.667610, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712903333

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-063539.071115
SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-063547.591381
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-063547.591381, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712903762



iokerneld killed (pid 301032)
KILLED CAPYBARA PROCESSES
PARSING 20240412-063547.591381 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
 1712903760907518695,SEND_PREPARE_MIG,(10.0.1.7:101)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-063547.591381, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712903762

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-064057.678535
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-064057.678535, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904072



iokerneld killed (pid 303717)
KILLED CAPYBARA PROCESSES
PARSING 20240412-064057.678535 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
 1712904070961084809,SEND_PREPARE_MIG,(10.0.1.7:101)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-064057.678535, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904072

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-064410.871492
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-064410.871492, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904265



iokerneld killed (pid 306207)
KILLED CAPYBARA PROCESSES
PARSING 20240412-064410.871492 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 0 2 
 1712904264236717397,SEND_PREPARE_MIG,(10.0.1.7:101)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-064410.871492, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904265

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-064914.379253
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-064914.379253, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904568



iokerneld killed (pid 308264)
KILLED CAPYBARA PROCESSES
PARSING 20240412-064914.379253 migration delay
21799
CALCULATING 20240412-064914.379253 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-064914.379253
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-064914.379253, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904568

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-065159.823818
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-065159.823818, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904734



iokerneld killed (pid 310014)
KILLED CAPYBARA PROCESSES
PARSING 20240412-065159.823818 migration delay
21799
CALCULATING 20240412-065159.823818 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-065159.823818
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-065159.823818, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904734

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-065308.611839
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-065308.611839, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904803



iokerneld killed (pid 311563)
KILLED CAPYBARA PROCESSES
PARSING 20240412-065308.611839 migration delay
21799
CALCULATING 20240412-065308.611839 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-065308.611839
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-065308.611839, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904803

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-065446.946360
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-065446.946360, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904901



iokerneld killed (pid 313160)
KILLED CAPYBARA PROCESSES
PARSING 20240412-065446.946360 migration delay
21799
CALCULATING 20240412-065446.946360 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-065446.946360
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-065446.946360, 2, 1, 0, 0, 0, 0, exponential, 1, 0, 0, 0, 1712904901

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-070826.918961
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-070826.918961, 2, 101, 0, 0, 0, 10, exponential, 1, 0, 0, 0, 1712905721



iokerneld killed (pid 316727)
KILLED CAPYBARA PROCESSES
PARSING 20240412-070826.918961 migration delay
1799
CALCULATING 20240412-070826.918961 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-070826.918961
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-070826.918961, 2, 101, 0, 0, 0, 10, exponential, 1, 0, 0, 0, 1712905721

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-070957.423502
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-070957.423502, 2, 101, 0, 0, 0, 10, exponential, 360000, 0, 0, 0, 1712905811



iokerneld killed (pid 318338)
KILLED CAPYBARA PROCESSES
PARSING 20240412-070957.423502 migration delay
3488
CALCULATING 20240412-070957.423502 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-070957.423502
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-070957.423502, 2, 101, 0, 0, 0, 10, exponential, 360000, 0, 0, 0, 1712905811

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-071133.467751
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-071133.467751, 2, 101, 0, 0, 0, 2, exponential, 360000, 0, 0, 0, 1712905908



iokerneld killed (pid 319941)
KILLED CAPYBARA PROCESSES
PARSING 20240412-071133.467751 migration delay
3063
CALCULATING 20240412-071133.467751 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-071133.467751
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-071133.467751, 2, 101, 0, 0, 0, 2, exponential, 360000, 0, 0, 0, 1712905908

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-071702.351740
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 12956387


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-071702.351740, 2, 101, 0, 0, 0, 2, exponential, 360000, 359184, 359184, 0, 128, 9.0, 14.0, 46.0, 72.0, 547.0, 1712906240, 0



iokerneld killed (pid 322509)
KILLED CAPYBARA PROCESSES
PARSING 20240412-071702.351740 migration delay
[PANIC] migration step is wrong!: prev {}, current {} 1 1 
 1712906236869965989,INIT_MIG,(10.0.1.7:254)
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-071702.351740, 2, 101, 0, 0, 0, 2, exponential, 360000, 359184, 359184, 0, 128, 9.0, 14.0, 46.0, 72.0, 547.0, 1712906240, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-072325.643955
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 12956202


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-072325.643955, 2, 101, 0, 0, 0, 10, exponential, 360000, 359179, 359179, 0, 313, 8.0, 11.0, 23.0, 54.0, 77.0, 1712906624, 0



dpdk-ctrl.elf killed (pid 3853430)
iokerneld killed (pid 324755)
KILLED CAPYBARA PROCESSES
PARSING 20240412-072325.643955 migration delay
14076
CALCULATING 20240412-072325.643955 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-072325.643955
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-072325.643955, 2, 101, 0, 0, 0, 10, exponential, 360000, 359179, 359179, 0, 313, 8.0, 11.0, 23.0, 54.0, 77.0, 1712906624, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-072556.923994
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 16195583


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-072556.923994, 2, 101, 0, 0, 0, 10, exponential, 600000, 598877, 598877, 0, 592, 9.0, 13.0, 43.0, 72.0, 111.0, 1712906774, 0



iokerneld killed (pid 326603)
KILLED CAPYBARA PROCESSES
PARSING 20240412-072556.923994 migration delay
17659
CALCULATING 20240412-072556.923994 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-072556.923994
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-072556.923994, 2, 101, 0, 0, 0, 10, exponential, 600000, 598877, 598877, 0, 592, 9.0, 13.0, 43.0, 72.0, 111.0, 1712906774, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-072729.959757
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 15116235


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-072729.959757, 2, 101, 0, 0, 0, 10, exponential, 840000, 838262, 838261, 0, 1192, 11.0, 23.0, 70.0, 111.0, 168.0, 1712906866, 0



iokerneld killed (pid 328249)
KILLED CAPYBARA PROCESSES
PARSING 20240412-072729.959757 migration delay
16463
CALCULATING 20240412-072729.959757 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-072729.959757
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-072729.959757, 2, 101, 0, 0, 0, 10, exponential, 840000, 838262, 838261, 0, 1192, 11.0, 23.0, 70.0, 111.0, 168.0, 1712906866, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-072846.795874
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9714874


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-072846.795874, 2, 101, 0, 0, 0, 10, exponential, 1080000, 1076976, 1076969, 0, 1186, 25.0, 70.0, 150.0, 236.0, 328.0, 1712906942, 0



iokerneld killed (pid 329850)
KILLED CAPYBARA PROCESSES
PARSING 20240412-072846.795874 migration delay
10521
CALCULATING 20240412-072846.795874 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-072846.795874
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-072846.795874, 2, 101, 0, 0, 0, 10, exponential, 1080000, 1076976, 1076969, 0, 1186, 25.0, 70.0, 150.0, 236.0, 328.0, 1712906942, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-073417.215567
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9714969


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-073417.215567, 2, 101, 0, 0, 0, 10, exponential, 1080000, 1076987, 1076980, 0, 1091, 18.0, 38.0, 74.0, 131.0, 430.0, 1712907272, 0



iokerneld killed (pid 332013)
KILLED CAPYBARA PROCESSES
PARSING 20240412-073417.215567 migration delay
10521
CALCULATING 20240412-073417.215567 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-073417.215567
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-073417.215567, 2, 101, 0, 0, 0, 10, exponential, 1080000, 1076987, 1076980, 0, 1091, 18.0, 38.0, 74.0, 131.0, 430.0, 1712907272, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-073627.027989
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 15116259


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-073627.027989, 2, 101, 0, 0, 0, 10, exponential, 840000, 838263, 838262, 0, 1168, 11.0, 17.0, 27.0, 41.0, 83.0, 1712907403, 0



iokerneld killed (pid 333686)
KILLED CAPYBARA PROCESSES
PARSING 20240412-073627.027989 migration delay
16463
CALCULATING 20240412-073627.027989 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-073627.027989
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-073627.027989, 2, 101, 0, 0, 0, 10, exponential, 840000, 838263, 838262, 0, 1168, 11.0, 17.0, 27.0, 41.0, 83.0, 1712907403, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-073725.336041
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 16195487


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-073725.336041, 2, 101, 0, 0, 0, 10, exponential, 600000, 598874, 598874, 0, 688, 9.0, 12.0, 17.0, 23.0, 39.0, 1712907462, 0



iokerneld killed (pid 335193)
KILLED CAPYBARA PROCESSES
PARSING 20240412-073725.336041 migration delay
17659
CALCULATING 20240412-073725.336041 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-073725.336041
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-073725.336041, 2, 101, 0, 0, 0, 10, exponential, 600000, 598874, 598874, 0, 688, 9.0, 12.0, 17.0, 23.0, 39.0, 1712907462, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-073837.806534
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 12956158


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-073837.806534, 2, 101, 0, 0, 0, 10, exponential, 360000, 359178, 359178, 0, 357, 8.0, 10.0, 13.0, 16.0, 23.0, 1712907536, 0



iokerneld killed (pid 336746)
KILLED CAPYBARA PROCESSES
PARSING 20240412-073837.806534 migration delay
14076
CALCULATING 20240412-073837.806534 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-073837.806534
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-073837.806534, 2, 101, 0, 0, 0, 10, exponential, 360000, 359178, 359178, 0, 357, 8.0, 10.0, 13.0, 16.0, 23.0, 1712907536, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-141126.459353
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240412-141126.459353, 2, 101, 0, 0, 0, 10, exponential, 1080000, 0, 0, 0, 1712931101



iokerneld killed (pid 401186)
KILLED CAPYBARA PROCESSES
PARSING 20240412-141126.459353 migration delay
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 758, in run_eval
    parse_mig_delay(experiment_id)
  File "run_eval.py", line 352, in parse_mig_delay
    step_idx = steps.index(step)
ValueError: 'SEND_MIG_REJECTED' is not in list
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-141126.459353, 2, 101, 0, 0, 0, 10, exponential, 1080000, 0, 0, 0, 1712931101

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-141546.351725
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9714640


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-141546.351725, 2, 101, 0, 0, 0, 10, exponential, 1080000, 1076950, 1076944, 0, 1420, 16.0, 30.0, 52.0, 82.0, 135.0, 1712931362, 0



iokerneld killed (pid 403218)
KILLED CAPYBARA PROCESSES
PARSING 20240412-141546.351725 migration delay
10520
CALCULATING 20240412-141546.351725 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-141546.351725
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-141546.351725, 2, 101, 0, 0, 0, 10, exponential, 1080000, 1076950, 1076944, 0, 1420, 16.0, 30.0, 52.0, 82.0, 135.0, 1712931362, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-141920.160222
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 15116699


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-141920.160222, 2, 101, 0, 0, 0, 10, exponential, 840000, 838287, 838287, 0, 728, 10.0, 16.0, 24.0, 35.0, 124.0, 1712931576, 0



iokerneld killed (pid 405194)
KILLED CAPYBARA PROCESSES
PARSING 20240412-141920.160222 migration delay
16463
CALCULATING 20240412-141920.160222 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-141920.160222
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-141920.160222, 2, 101, 0, 0, 0, 10, exponential, 840000, 838287, 838287, 0, 728, 10.0, 16.0, 24.0, 35.0, 124.0, 1712931576, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-142103.951637
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 16195889


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-142103.951637, 2, 101, 0, 0, 0, 10, exponential, 600000, 598889, 598888, 0, 286, 9.0, 12.0, 16.0, 21.0, 38.0, 1712931681, 0



iokerneld killed (pid 406812)
KILLED CAPYBARA PROCESSES
PARSING 20240412-142103.951637 migration delay
17659
CALCULATING 20240412-142103.951637 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-142103.951637
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-142103.951637, 2, 101, 0, 0, 0, 10, exponential, 600000, 598889, 598888, 0, 286, 9.0, 12.0, 16.0, 21.0, 38.0, 1712931681, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240412-142213.691512
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 12956234


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240412-142213.691512, 2, 101, 0, 0, 0, 10, exponential, 360000, 359180, 359180, 0, 281, 8.0, 10.0, 13.0, 15.0, 22.0, 1712931752, 0



iokerneld killed (pid 408364)
KILLED CAPYBARA PROCESSES
PARSING 20240412-142213.691512 migration delay
14076
CALCULATING 20240412-142213.691512 mig_delay CDF
Executing command: cd /homes/inho/Capybara/capybara/eval && bash mig_delay_cdf_avg_minmax_stddev.sh 20240412-142213.691512
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240412-142213.691512, 2, 101, 0, 0, 0, 10, exponential, 360000, 359180, 359180, 0, 281, 8.0, 10.0, 13.0, 15.0, 22.0, 1712931752, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 1000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-071917.879717
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8941


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-071917.879717, 1, 100, 0, 0, 1, exponential, 1000, 931, 931, 0, 0, 27.0, 29.0, 31.0, 39911.0, 300123.0, 1713165576, 0



iokerneld killed (pid 890787)
dpdk-ctrl.elf killed (pid 2856985)
dpdk-ctrl.elf killed (pid 3883576)
prism-be-http.e killed (pid 3883667)
prism-fe.elf killed (pid 2857072)
KILLED CAPYBARA PROCESSES
PARSING 20240415-071917.879717 scheduler overhead
19165
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-071917.879717, 1, 100, 0, 0, 1, exponential, 1000, 931, 931, 0, 0, 27.0, 29.0, 31.0, 39911.0, 300123.0, 1713165576, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 1000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-080644.055157
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8941


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-080644.055157, 1, 100, 0, 0, 1, exponential, 1000, 931, 931, 0, 0, 27.0, 29.0, 31.0, 40005.0, 300217.0, 1713168422, 0



dpdk-ctrl.elf killed (pid 2858119)
iokerneld killed (pid 904847)
dpdk-ctrl.elf killed (pid 3884840)
prism-fe.elf killed (pid 2858207)
prism-be-http.e killed (pid 3884930)
KILLED CAPYBARA PROCESSES
PARSING 20240415-080644.055157 scheduler overhead
19165
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-080644.055157, 1, 100, 0, 0, 1, exponential, 1000, 931, 931, 0, 0, 27.0, 29.0, 31.0, 40005.0, 300217.0, 1713168422, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-080804.175026
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-080813.375053
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-080911.347581
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 996


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-080911.347581, 1, 100, 0, 0, 1, exponential, 100, 99, 99, 0, 2, 27.0, 28.0, 659.0, 757.0, 757.0, 1713168569, 0



iokerneld killed (pid 907140)
dpdk-ctrl.elf killed (pid 2859636)
dpdk-ctrl.elf killed (pid 3886354)
prism-be-http.e killed (pid 3886442)
prism-fe.elf killed (pid 2859722)
KILLED CAPYBARA PROCESSES
PARSING 20240415-080911.347581 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 1100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-080947.043784
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 9890


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-080947.043784, 1, 100, 0, 0, 1, exponential, 1100, 1036, 1036, 0, 0, 27.0, 27.0, 29.0, 31048.0, 296891.0, 1713168605, 0



iokerneld killed (pid 908021)
dpdk-ctrl.elf killed (pid 2860175)
dpdk-ctrl.elf killed (pid 3886934)
prism-be-http.e killed (pid 3887024)
prism-fe.elf killed (pid 2860261)
KILLED CAPYBARA PROCESSES
PARSING 20240415-080947.043784 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 2100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081022.790945
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 18820


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081022.790945, 1, 100, 0, 0, 1, exponential, 2100, 1995, 1937, 0, 0, 26.0, 27.0, 29.0, 16293.0, 300273.0, 1713168641, 0



iokerneld killed (pid 908898)
dpdk-ctrl.elf killed (pid 2860718)
dpdk-ctrl.elf killed (pid 3887515)
prism-fe.elf killed (pid 2860804)
prism-be-http.e killed (pid 3887605)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081022.790945 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 3100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081058.563949
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 27746


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081058.563949, 1, 100, 0, 0, 1, exponential, 3100, 2971, 2971, 0, 0, 27.0, 27.0, 30.0, 40276.0, 173637.0, 1713168677, 0



iokerneld killed (pid 909786)
dpdk-ctrl.elf killed (pid 2861260)
dpdk-ctrl.elf killed (pid 3888095)
prism-be-http.e killed (pid 3888184)
prism-fe.elf killed (pid 2861346)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081058.563949 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 4100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081134.311232
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 36654


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081134.311232, 1, 100, 0, 0, 1, exponential, 4100, 3943, 3943, 0, 1, 27.0, 28.0, 31.0, 46108.0, 127545.0, 1713168713, 0



iokerneld killed (pid 910678)
dpdk-ctrl.elf killed (pid 2861801)
dpdk-ctrl.elf killed (pid 3888672)
prism-be-http.e killed (pid 3888761)
prism-fe.elf killed (pid 2861887)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081134.311232 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 5100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081210.271780
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 45505


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081210.271780, 1, 100, 0, 0, 1, exponential, 5100, 4890, 4748, 0, 0, 26.0, 28.0, 31.0, 41444.0, 102543.0, 1713168749, 0



iokerneld killed (pid 911569)
dpdk-ctrl.elf killed (pid 2862341)
dpdk-ctrl.elf killed (pid 3889255)
prism-be-http.e killed (pid 3889344)
prism-fe.elf killed (pid 2862427)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081210.271780 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 6100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081246.083101
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 54551


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081246.083101, 1, 100, 0, 0, 1, exponential, 6100, 5899, 5899, 0, 0, 27.0, 28.0, 31.0, 34787.0, 79786.0, 1713168784, 0



iokerneld killed (pid 912458)
dpdk-ctrl.elf killed (pid 2862883)
dpdk-ctrl.elf killed (pid 3889836)
prism-fe.elf killed (pid 2862969)
prism-be-http.e killed (pid 3889926)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081246.083101 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 7100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081321.895487
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 63516


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081321.895487, 1, 100, 0, 0, 1, exponential, 7100, 6881, 6881, 0, 1, 26.0, 28.0, 32.0, 30554.0, 67391.0, 1713168820, 0



iokerneld killed (pid 913332)
dpdk-ctrl.elf killed (pid 2863422)
dpdk-ctrl.elf killed (pid 3890423)
prism-fe.elf killed (pid 2863508)
prism-be-http.e killed (pid 3890513)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081321.895487 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 8100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081357.740080
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 72424


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081357.740080, 1, 100, 0, 0, 1, exponential, 8100, 7843, 7843, 0, 0, 26.0, 28.0, 32.0, 27650.0, 55534.0, 1713168856, 0



iokerneld killed (pid 914203)
dpdk-ctrl.elf killed (pid 2863962)
dpdk-ctrl.elf killed (pid 3891004)
prism-be-http.e killed (pid 3891092)
prism-fe.elf killed (pid 2864048)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081357.740080 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 9100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081433.615579
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 81364


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081433.615579, 1, 100, 0, 0, 1, exponential, 9100, 8843, 8843, 0, 1, 27.0, 28.0, 33.0, 26978.0, 53852.0, 1713168892, 0



iokerneld killed (pid 915078)
dpdk-ctrl.elf killed (pid 2864501)
dpdk-ctrl.elf killed (pid 3891585)
prism-be-http.e killed (pid 3891675)
prism-fe.elf killed (pid 2864587)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081433.615579 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 10100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081509.483762
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 90431


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081509.483762, 1, 100, 0, 0, 1, exponential, 10100, 9873, 9585, 0, 0, 27.0, 28.0, 34.0, 27855.0, 52050.0, 1713168928, 0



iokerneld killed (pid 915968)
dpdk-ctrl.elf killed (pid 2865038)
dpdk-ctrl.elf killed (pid 3892165)
prism-be-http.e killed (pid 3892254)
prism-fe.elf killed (pid 2865124)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081509.483762 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-080911.347581, 1, 100, 0, 0, 1, exponential, 100, 99, 99, 0, 2, 27.0, 28.0, 659.0, 757.0, 757.0, 1713168569, 0
20240415-080947.043784, 1, 100, 0, 0, 1, exponential, 1100, 1036, 1036, 0, 0, 27.0, 27.0, 29.0, 31048.0, 296891.0, 1713168605, 0
20240415-081022.790945, 1, 100, 0, 0, 1, exponential, 2100, 1995, 1937, 0, 0, 26.0, 27.0, 29.0, 16293.0, 300273.0, 1713168641, 0
20240415-081058.563949, 1, 100, 0, 0, 1, exponential, 3100, 2971, 2971, 0, 0, 27.0, 27.0, 30.0, 40276.0, 173637.0, 1713168677, 0
20240415-081134.311232, 1, 100, 0, 0, 1, exponential, 4100, 3943, 3943, 0, 1, 27.0, 28.0, 31.0, 46108.0, 127545.0, 1713168713, 0
20240415-081210.271780, 1, 100, 0, 0, 1, exponential, 5100, 4890, 4748, 0, 0, 26.0, 28.0, 31.0, 41444.0, 102543.0, 1713168749, 0
20240415-081246.083101, 1, 100, 0, 0, 1, exponential, 6100, 5899, 5899, 0, 0, 27.0, 28.0, 31.0, 34787.0, 79786.0, 1713168784, 0
20240415-081321.895487, 1, 100, 0, 0, 1, exponential, 7100, 6881, 6881, 0, 1, 26.0, 28.0, 32.0, 30554.0, 67391.0, 1713168820, 0
20240415-081357.740080, 1, 100, 0, 0, 1, exponential, 8100, 7843, 7843, 0, 0, 26.0, 28.0, 32.0, 27650.0, 55534.0, 1713168856, 0
20240415-081433.615579, 1, 100, 0, 0, 1, exponential, 9100, 8843, 8843, 0, 1, 27.0, 28.0, 33.0, 26978.0, 53852.0, 1713168892, 0
20240415-081509.483762, 1, 100, 0, 0, 1, exponential, 10100, 9873, 9585, 0, 0, 27.0, 28.0, 34.0, 27855.0, 52050.0, 1713168928, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 10100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081752.219544
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 90431


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081752.219544, 1, 100, 0, 0, 1, exponential, 10100, 9873, 9585, 0, 0, 26.0, 28.0, 34.0, 26761.0, 51799.0, 1713169091, 0



iokerneld killed (pid 918535)
dpdk-ctrl.elf killed (pid 2867749)
dpdk-ctrl.elf killed (pid 3894947)
prism-be-http.e killed (pid 3895037)
prism-fe.elf killed (pid 2867836)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081752.219544 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 12100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081828.163303
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 108352


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081828.163303, 1, 100, 0, 0, 1, exponential, 12100, 11806, 11806, 0, 1, 27.0, 29.0, 35.0, 25630.0, 47260.0, 1713169127, 0



iokerneld killed (pid 919410)
dpdk-ctrl.elf killed (pid 2868293)
dpdk-ctrl.elf killed (pid 3895533)
prism-be-http.e killed (pid 3895623)
prism-fe.elf killed (pid 2868379)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081828.163303 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 14100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081904.022616
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 126475


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081904.022616, 1, 100, 0, 0, 1, exponential, 14100, 13756, 13333, 0, 1, 27.0, 29.0, 38.0, 25784.0, 46557.0, 1713169163, 0



iokerneld killed (pid 920298)
dpdk-ctrl.elf killed (pid 2868834)
dpdk-ctrl.elf killed (pid 3896115)
prism-be-http.e killed (pid 3896204)
prism-fe.elf killed (pid 2868920)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081904.022616 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 16100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-081939.963183
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 144306


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-081939.963183, 1, 100, 0, 0, 1, exponential, 16100, 15701, 15210, 0, 0, 27.0, 30.0, 42.0, 23130.0, 39390.0, 1713169198, 0



iokerneld killed (pid 921218)
dpdk-ctrl.elf killed (pid 2869414)
dpdk-ctrl.elf killed (pid 3896736)
prism-be-http.e killed (pid 3896826)
prism-fe.elf killed (pid 2869500)
KILLED CAPYBARA PROCESSES
PARSING 20240415-081939.963183 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 18100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082015.942650
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 162322


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-082015.942650, 1, 100, 0, 0, 1, exponential, 18100, 17690, 17690, 0, 1, 27.0, 30.0, 46.0, 20749.0, 34634.0, 1713169234, 0



iokerneld killed (pid 922092)
dpdk-ctrl.elf killed (pid 2869956)
dpdk-ctrl.elf killed (pid 3897320)
prism-be-http.e killed (pid 3897410)
prism-fe.elf killed (pid 2870042)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082015.942650 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 20100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082051.867552
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 180010


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-082051.867552, 1, 100, 0, 0, 1, exponential, 20100, 19615, 19615, 0, 1, 27.0, 31.0, 100.0, 19234.0, 33851.0, 1713169270, 0



iokerneld killed (pid 922968)
dpdk-ctrl.elf killed (pid 2870495)
dpdk-ctrl.elf killed (pid 3897903)
prism-be-http.e killed (pid 3897992)
prism-fe.elf killed (pid 2870581)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082051.867552 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 22100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082127.763226
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-082127.763226, 1, 100, 0, 0, 1, exponential, 22100, 0, 0, 0, 1713169305



iokerneld killed (pid 923840)
dpdk-ctrl.elf killed (pid 2871036)
dpdk-ctrl.elf killed (pid 3898486)
prism-be-http.e killed (pid 3898575)
prism-fe.elf killed (pid 2871122)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082127.763226 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 24100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082204.690890
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-082204.690890, 1, 100, 0, 0, 1, exponential, 24100, 0, 0, 0, 1713169342



iokerneld killed (pid 924721)
dpdk-ctrl.elf killed (pid 2871578)
dpdk-ctrl.elf killed (pid 3899069)
prism-be-http.e killed (pid 3899158)
prism-fe.elf killed (pid 2871664)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082204.690890 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 26100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082241.631779
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-082241.631779, 1, 100, 0, 0, 1, exponential, 26100, 0, 0, 0, 1713169379



iokerneld killed (pid 925598)
dpdk-ctrl.elf killed (pid 2872119)
dpdk-ctrl.elf killed (pid 3899648)
prism-be-http.e killed (pid 3899738)
prism-fe.elf killed (pid 2872205)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082241.631779 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 28100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082318.611797
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-082318.611797, 1, 100, 0, 0, 1, exponential, 28100, 0, 0, 0, 1713169416



iokerneld killed (pid 926471)
dpdk-ctrl.elf killed (pid 2872661)
dpdk-ctrl.elf killed (pid 3900231)
prism-be-http.e killed (pid 3900320)
prism-fe.elf killed (pid 2872747)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082318.611797 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 30100
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082355.647005
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-082355.647005, 1, 100, 0, 0, 1, exponential, 30100, 0, 0, 0, 1713169453



iokerneld killed (pid 927349)
dpdk-ctrl.elf killed (pid 2873199)
dpdk-ctrl.elf killed (pid 3900812)
prism-be-http.e killed (pid 3900900)
prism-fe.elf killed (pid 2873285)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082355.647005 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-081752.219544, 1, 100, 0, 0, 1, exponential, 10100, 9873, 9585, 0, 0, 26.0, 28.0, 34.0, 26761.0, 51799.0, 1713169091, 0
20240415-081828.163303, 1, 100, 0, 0, 1, exponential, 12100, 11806, 11806, 0, 1, 27.0, 29.0, 35.0, 25630.0, 47260.0, 1713169127, 0
20240415-081904.022616, 1, 100, 0, 0, 1, exponential, 14100, 13756, 13333, 0, 1, 27.0, 29.0, 38.0, 25784.0, 46557.0, 1713169163, 0
20240415-081939.963183, 1, 100, 0, 0, 1, exponential, 16100, 15701, 15210, 0, 0, 27.0, 30.0, 42.0, 23130.0, 39390.0, 1713169198, 0
20240415-082015.942650, 1, 100, 0, 0, 1, exponential, 18100, 17690, 17690, 0, 1, 27.0, 30.0, 46.0, 20749.0, 34634.0, 1713169234, 0
20240415-082051.867552, 1, 100, 0, 0, 1, exponential, 20100, 19615, 19615, 0, 1, 27.0, 31.0, 100.0, 19234.0, 33851.0, 1713169270, 0
20240415-082127.763226, 1, 100, 0, 0, 1, exponential, 22100, 0, 0, 0, 1713169305
20240415-082204.690890, 1, 100, 0, 0, 1, exponential, 24100, 0, 0, 0, 1713169342
20240415-082241.631779, 1, 100, 0, 0, 1, exponential, 26100, 0, 0, 0, 1713169379
20240415-082318.611797, 1, 100, 0, 0, 1, exponential, 28100, 0, 0, 0, 1713169416
20240415-082355.647005, 1, 100, 0, 0, 1, exponential, 30100, 0, 0, 0, 1713169453

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 20500
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082617.795712
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 183576


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-082617.795712, 1, 100, 0, 0, 1, exponential, 20500, 20004, 19424, 0, 1, 27.0, 31.0, 102.0, 19786.0, 31148.0, 1713169596, 0



iokerneld killed (pid 929857)
dpdk-ctrl.elf killed (pid 2875899)
dpdk-ctrl.elf killed (pid 3903589)
prism-be-http.e killed (pid 3903679)
prism-fe.elf killed (pid 2875985)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082617.795712 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 21000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082653.823521
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 188009


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-082653.823521, 1, 100, 0, 0, 1, exponential, 21000, 20486, 20486, 0, 1, 27.0, 31.0, 102.0, 18989.0, 30619.0, 1713169632, 0



iokerneld killed (pid 930728)
dpdk-ctrl.elf killed (pid 2876438)
dpdk-ctrl.elf killed (pid 3904172)
prism-be-http.e killed (pid 3904261)
prism-fe.elf killed (pid 2876524)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082653.823521 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 21500
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082729.891389
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-082729.891389, 1, 100, 0, 0, 1, exponential, 21500, 0, 0, 0, 1713169668



iokerneld killed (pid 931605)
dpdk-ctrl.elf killed (pid 2876981)
dpdk-ctrl.elf killed (pid 3904752)
prism-be-http.e killed (pid 3904840)
prism-fe.elf killed (pid 2877067)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082729.891389 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 1
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 22000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-082806.931608
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
1 Backend is running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 142321


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-082806.931608, 1, 100, 0, 0, 1, exponential, 22000, 21476, 21347, 54650, 200, 28.0, inf, inf, inf, inf, 1713169706, 0



iokerneld killed (pid 932486)
dpdk-ctrl.elf killed (pid 2877522)
dpdk-ctrl.elf killed (pid 3905334)
prism-be-http.e killed (pid 3905421)
prism-fe.elf killed (pid 2877608)
KILLED CAPYBARA PROCESSES
PARSING 20240415-082806.931608 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-082617.795712, 1, 100, 0, 0, 1, exponential, 20500, 20004, 19424, 0, 1, 27.0, 31.0, 102.0, 19786.0, 31148.0, 1713169596, 0
20240415-082653.823521, 1, 100, 0, 0, 1, exponential, 21000, 20486, 20486, 0, 1, 27.0, 31.0, 102.0, 18989.0, 30619.0, 1713169632, 0
20240415-082729.891389, 1, 100, 0, 0, 1, exponential, 21500, 0, 0, 0, 1713169668
20240415-082806.931608, 1, 100, 0, 0, 1, exponential, 22000, 21476, 21347, 54650, 200, 28.0, inf, inf, inf, inf, 1713169706, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 1000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083000.003382
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 8941


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083000.003382, 2, 100, 0, 0, 1, exponential, 1000, 931, 931, 0, 0, 23.0, 24.0, 25.0, 93.0, 276894.0, 1713169818, 0



iokerneld killed (pid 934324)
dpdk-ctrl.elf killed (pid 2879068)
dpdk-ctrl.elf killed (pid 3906949)
prism-be-http.e killed (pid 3907040)
prism-be-http.e killed (pid 3907041)
prism-fe.elf killed (pid 2879155)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083000.003382 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 4000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083036.071447
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 35776


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083036.071447, 2, 100, 0, 0, 1, exponential, 4000, 3851, 3851, 0, 0, 23.0, 24.0, 25.0, 33837.0, 121652.0, 1713169855, 0



iokerneld killed (pid 935215)
dpdk-ctrl.elf killed (pid 2879609)
dpdk-ctrl.elf killed (pid 3907537)
prism-be-http.e killed (pid 3907629)
prism-be-http.e killed (pid 3907630)
prism-fe.elf killed (pid 2879695)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083036.071447 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 7000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083112.122935
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 62628


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083112.122935, 2, 100, 0, 0, 1, exponential, 7000, 6776, 6776, 0, 2, 23.0, 24.0, 26.0, 27286.0, 65999.0, 1713169891, 0



iokerneld killed (pid 936109)
dpdk-ctrl.elf killed (pid 2880152)
dpdk-ctrl.elf killed (pid 3908129)
prism-fe.elf killed (pid 2880238)
prism-be-http.e killed (pid 3908220)
prism-be-http.e killed (pid 3908221)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083112.122935 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 10000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083148.290995
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 89500


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083148.290995, 2, 100, 0, 0, 1, exponential, 10000, 9775, 9775, 0, 0, 23.0, 24.0, 26.0, 23184.0, 48606.0, 1713169927, 0



iokerneld killed (pid 936998)
dpdk-ctrl.elf killed (pid 2880691)
dpdk-ctrl.elf killed (pid 3908715)
prism-be-http.e killed (pid 3908806)
prism-be-http.e killed (pid 3908807)
prism-fe.elf killed (pid 2880777)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083148.290995 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 13000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083224.411241
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 116523


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083224.411241, 2, 100, 0, 0, 1, exponential, 13000, 12693, 12693, 0, 0, 23.0, 24.0, 27.0, 20649.0, 40247.0, 1713169963, 0



iokerneld killed (pid 937888)
dpdk-ctrl.elf killed (pid 2881231)
dpdk-ctrl.elf killed (pid 3909302)
prism-be-http.e killed (pid 3909392)
prism-be-http.e killed (pid 3909393)
prism-fe.elf killed (pid 2881317)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083224.411241 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 16000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083300.571297
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 143398


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083300.571297, 2, 100, 0, 0, 1, exponential, 16000, 15606, 15119, 0, 0, 23.0, 24.0, 27.0, 20269.0, 36712.0, 1713169999, 0



iokerneld killed (pid 938770)
dpdk-ctrl.elf killed (pid 2881772)
dpdk-ctrl.elf killed (pid 3909887)
prism-be-http.e killed (pid 3909981)
prism-be-http.e killed (pid 3909982)
prism-fe.elf killed (pid 2881858)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083300.571297 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 19000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083336.723387
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 145400


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083336.723387, 2, 100, 0, 0, 1, exponential, 19000, 18552, 18410, 24877, 11, 23.0, inf, inf, inf, inf, 1713170035, 0



iokerneld killed (pid 939647)
dpdk-ctrl.elf killed (pid 2882312)
dpdk-ctrl.elf killed (pid 3910478)
prism-fe.elf killed (pid 2882398)
prism-be-http.e killed (pid 3910570)
prism-be-http.e killed (pid 3910571)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083336.723387 scheduler overhead
1
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 22000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083413.890867
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 142416


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083413.890867, 2, 100, 0, 0, 1, exponential, 22000, 21493, 21261, 54710, 45, 23.0, inf, inf, inf, inf, 1713170073, 0



iokerneld killed (pid 940526)
dpdk-ctrl.elf killed (pid 2882853)
dpdk-ctrl.elf killed (pid 3911071)
prism-be-http.e killed (pid 3911161)
prism-be-http.e killed (pid 3911162)
prism-fe.elf killed (pid 2882939)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083413.890867 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-083000.003382, 2, 100, 0, 0, 1, exponential, 1000, 931, 931, 0, 0, 23.0, 24.0, 25.0, 93.0, 276894.0, 1713169818, 0
20240415-083036.071447, 2, 100, 0, 0, 1, exponential, 4000, 3851, 3851, 0, 0, 23.0, 24.0, 25.0, 33837.0, 121652.0, 1713169855, 0
20240415-083112.122935, 2, 100, 0, 0, 1, exponential, 7000, 6776, 6776, 0, 2, 23.0, 24.0, 26.0, 27286.0, 65999.0, 1713169891, 0
20240415-083148.290995, 2, 100, 0, 0, 1, exponential, 10000, 9775, 9775, 0, 0, 23.0, 24.0, 26.0, 23184.0, 48606.0, 1713169927, 0
20240415-083224.411241, 2, 100, 0, 0, 1, exponential, 13000, 12693, 12693, 0, 0, 23.0, 24.0, 27.0, 20649.0, 40247.0, 1713169963, 0
20240415-083300.571297, 2, 100, 0, 0, 1, exponential, 16000, 15606, 15119, 0, 0, 23.0, 24.0, 27.0, 20269.0, 36712.0, 1713169999, 0
20240415-083336.723387, 2, 100, 0, 0, 1, exponential, 19000, 18552, 18410, 24877, 11, 23.0, inf, inf, inf, inf, 1713170035, 0
20240415-083413.890867, 2, 100, 0, 0, 1, exponential, 22000, 21493, 21261, 54710, 45, 23.0, inf, inf, inf, inf, 1713170073, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 50000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083538.822655
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
================ TEST COMPLETE =================

[RESULT]20240415-083538.822655, 2, 100, 0, 0, 1, exponential, 50000, 0, 0, 0, 1713170157



iokerneld killed (pid 942688)
dpdk-ctrl.elf killed (pid 2885056)
dpdk-ctrl.elf killed (pid 3913352)
prism-be-http.e killed (pid 3913442)
prism-be-http.e killed (pid 3913443)
prism-fe.elf killed (pid 2885143)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083538.822655 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-083538.822655, 2, 100, 0, 0, 1, exponential, 50000, 0, 0, 0, 1713170157

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 20000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083812.027548
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 144407


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083812.027548, 2, 100, 0, 0, 1, exponential, 20000, 19527, 19374, 34720, 19, 23.0, inf, inf, inf, inf, 1713170311, 0



iokerneld killed (pid 944362)
dpdk-ctrl.elf killed (pid 2886116)
dpdk-ctrl.elf killed (pid 3914492)
prism-be-http.e killed (pid 3914584)
prism-be-http.e killed (pid 3914585)
prism-fe.elf killed (pid 2886202)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083812.027548 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-083812.027548, 2, 100, 0, 0, 1, exponential, 20000, 19527, 19374, 34720, 19, 23.0, inf, inf, inf, inf, 1713170311, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 20000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083913.115415
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 144414


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083913.115415, 2, 100, 0, 0, 1, exponential, 20000, 19527, 19359, 34713, 19, 23.0, inf, inf, inf, inf, 1713170372, 0



iokerneld killed (pid 945833)
dpdk-ctrl.elf killed (pid 2887170)
dpdk-ctrl.elf killed (pid 3915614)
prism-be-http.e killed (pid 3915704)
prism-be-http.e killed (pid 3915705)
prism-fe.elf killed (pid 2887256)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083913.115415 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-083913.115415, 2, 100, 0, 0, 1, exponential, 20000, 19527, 19359, 34713, 19, 23.0, inf, inf, inf, inf, 1713170372, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================
NUM_BACKENDS: 2
SERVER_APP: http-server
REPEAT: 0
RECV_QUEUE_THRESHOLD: 100
MIG_DELAY: 0
MAX_STAT_MIGS: 0
MIG_PER_N: 1
RATE: 20000
NUM_CONNECTIONS: 100
RUNTIME: 10
RUN ID: 20240415-083959.162893
TCPDUMP: False
EVAL_MIG_LATENCY: False
EVAL_POLL_INTERVAL: False
EVAL_LATENCY_TRACE: False
NUM_THREAD: 1

SETUP SWITCH
RUNNING FRONTEND
Frontend dpdk-ctrl is running
Frontend is running
RUNNING BACKENDS
Backend dpdk-ctrl is running
2 Backends are running
iokerneld is running
Running w/o On/Off pattern
Total # latencies: 144411


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240415-083959.162893, 2, 100, 0, 0, 1, exponential, 20000, 19525, 19328, 34695, 40, 23.0, inf, inf, inf, inf, 1713170418, 0



iokerneld killed (pid 947264)
dpdk-ctrl.elf killed (pid 2888221)
dpdk-ctrl.elf killed (pid 3916733)
prism-be-http.e killed (pid 3916824)
prism-be-http.e killed (pid 3916825)
prism-fe.elf killed (pid 2888307)
KILLED CAPYBARA PROCESSES
PARSING 20240415-083959.162893 scheduler overhead
1
KILLED CAPYBARA PROCESSES
EXITING





ID, #BEs, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240415-083959.162893, 2, 100, 0, 0, 1, exponential, 20000, 19525, 19328, 34695, 40, 23.0, inf, inf, inf, inf, 1713170418, 0

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-140243.407611
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern
bash: line 1: 4000380 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=0 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.35 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=2 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10001 > /homes/inho/capybara-data/20240419-140243.407611.be1 2>&1
bash: line 1: 4000379 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=0 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.35 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240419-140243.407611.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-140243.407611, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1765618)
KILLED CAPYBARA PROCESSES
PARSING 20240419-140243.407611 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-140243.407611            && sh ms_avg_99p_lat.sh 20240419-140243.407611            && sh ms_total_even_odd_numreq.sh 20240419-140243.407611            && sh latency_cdf.sh 20240419-140243.407611
DONE
PARSING 20240419-140243.407611 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-140243.407611
ERROR: cat: /homes/inho/capybara-data/20240419-140243.407611.server_reply: No such file or directory
cat: /homes/inho/capybara-data/20240419-140243.407611.server_reply_10000: No such file or directory
cat: /homes/inho/capybara-data/20240419-140243.407611.server_reply_10001: No such file or directory
cat: /homes/inho/capybara-data/20240419-140243.407611.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-140243.407611.server_reply_10003: No such file or directory
awk: fatal: cannot open file `/homes/inho/capybara-data/20240419-140243.407611.server_reply' for reading (No such file or directory)



PARSING 20240419-140243.407611 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-140243.407611
Traceback (most recent call last):
  File "run_eval.py", line 837, in <module>
    run_eval()
  File "run_eval.py", line 770, in run_eval
    parse_rps_signal(experiment_id)
  File "run_eval.py", line 602, in parse_rps_signal
    result = subprocess.run(
  File "/usr/lib/python3.8/subprocess.py", line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command 'cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-140243.407611' returned non-zero exit status 2.
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-140243.407611, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-140423.811426
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-140423.811426, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1767197)
KILLED CAPYBARA PROCESSES
PARSING 20240419-140423.811426 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-140423.811426            && sh ms_avg_99p_lat.sh 20240419-140423.811426            && sh ms_total_even_odd_numreq.sh 20240419-140423.811426            && sh latency_cdf.sh 20240419-140423.811426
DONE
PARSING 20240419-140423.811426 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-140423.811426
ERROR: cat: /homes/inho/capybara-data/20240419-140423.811426.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-140423.811426.server_reply_10003: No such file or directory



PARSING 20240419-140423.811426 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-140423.811426
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-140423.811426, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-141413.631973
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-141413.631973, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1769949)
KILLED CAPYBARA PROCESSES
PARSING 20240419-141413.631973 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-141413.631973            && sh ms_avg_99p_lat.sh 20240419-141413.631973            && sh ms_total_even_odd_numreq.sh 20240419-141413.631973            && sh latency_cdf.sh 20240419-141413.631973
DONE
PARSING 20240419-141413.631973 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-141413.631973
ERROR: cat: /homes/inho/capybara-data/20240419-141413.631973.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-141413.631973.server_reply_10003: No such file or directory



PARSING 20240419-141413.631973 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-141413.631973
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-141413.631973, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-141726.311738
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-141726.311738, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1771773)
KILLED CAPYBARA PROCESSES
PARSING 20240419-141726.311738 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-141726.311738            && sh ms_avg_99p_lat.sh 20240419-141726.311738            && sh ms_total_even_odd_numreq.sh 20240419-141726.311738            && sh latency_cdf.sh 20240419-141726.311738
DONE
PARSING 20240419-141726.311738 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-141726.311738
ERROR: cat: /homes/inho/capybara-data/20240419-141726.311738.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-141726.311738.server_reply_10003: No such file or directory



PARSING 20240419-141726.311738 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-141726.311738
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-141726.311738, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-142037.399062
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-142037.399062, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1773584)
KILLED CAPYBARA PROCESSES
PARSING 20240419-142037.399062 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-142037.399062            && sh ms_avg_99p_lat.sh 20240419-142037.399062            && sh ms_total_even_odd_numreq.sh 20240419-142037.399062            && sh latency_cdf.sh 20240419-142037.399062
DONE
PARSING 20240419-142037.399062 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-142037.399062
ERROR: cat: /homes/inho/capybara-data/20240419-142037.399062.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-142037.399062.server_reply_10003: No such file or directory



PARSING 20240419-142037.399062 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-142037.399062
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-142037.399062, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-142254.867478
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-142254.867478, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1775286)
KILLED CAPYBARA PROCESSES
PARSING 20240419-142254.867478 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-142254.867478            && sh ms_avg_99p_lat.sh 20240419-142254.867478            && sh ms_total_even_odd_numreq.sh 20240419-142254.867478            && sh latency_cdf.sh 20240419-142254.867478
DONE
PARSING 20240419-142254.867478 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-142254.867478
ERROR: cat: /homes/inho/capybara-data/20240419-142254.867478.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-142254.867478.server_reply_10003: No such file or directory



PARSING 20240419-142254.867478 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-142254.867478
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-142254.867478, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-142827.686921
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-142827.686921, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1777398)
KILLED CAPYBARA PROCESSES
PARSING 20240419-142827.686921 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-142827.686921            && sh ms_avg_99p_lat.sh 20240419-142827.686921            && sh ms_total_even_odd_numreq.sh 20240419-142827.686921            && sh latency_cdf.sh 20240419-142827.686921
DONE
PARSING 20240419-142827.686921 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-142827.686921
ERROR: cat: /homes/inho/capybara-data/20240419-142827.686921.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-142827.686921.server_reply_10003: No such file or directory



PARSING 20240419-142827.686921 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-142827.686921
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-142827.686921, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-143129.923550
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-143129.923550, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1779192)
KILLED CAPYBARA PROCESSES
PARSING 20240419-143129.923550 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-143129.923550            && sh ms_avg_99p_lat.sh 20240419-143129.923550            && sh ms_total_even_odd_numreq.sh 20240419-143129.923550            && sh latency_cdf.sh 20240419-143129.923550
DONE
PARSING 20240419-143129.923550 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-143129.923550
ERROR: cat: /homes/inho/capybara-data/20240419-143129.923550.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-143129.923550.server_reply_10003: No such file or directory



PARSING 20240419-143129.923550 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-143129.923550
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-143129.923550, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-143325.775618
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-143325.775618, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1780844)
KILLED CAPYBARA PROCESSES
PARSING 20240419-143325.775618 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-143325.775618            && sh ms_avg_99p_lat.sh 20240419-143325.775618            && sh ms_total_even_odd_numreq.sh 20240419-143325.775618            && sh latency_cdf.sh 20240419-143325.775618
DONE
PARSING 20240419-143325.775618 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-143325.775618
ERROR: cat: /homes/inho/capybara-data/20240419-143325.775618.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-143325.775618.server_reply_10003: No such file or directory



PARSING 20240419-143325.775618 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-143325.775618
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-143325.775618, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-143541.011549
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-143541.011549, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1782543)
KILLED CAPYBARA PROCESSES
PARSING 20240419-143541.011549 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-143541.011549            && sh ms_avg_99p_lat.sh 20240419-143541.011549            && sh ms_total_even_odd_numreq.sh 20240419-143541.011549            && sh latency_cdf.sh 20240419-143541.011549
DONE
PARSING 20240419-143541.011549 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-143541.011549
ERROR: cat: /homes/inho/capybara-data/20240419-143541.011549.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-143541.011549.server_reply_10003: No such file or directory



PARSING 20240419-143541.011549 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-143541.011549
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-143541.011549, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-143919.728243
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-143919.728243, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1784579)
KILLED CAPYBARA PROCESSES
PARSING 20240419-143919.728243 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-143919.728243            && sh ms_avg_99p_lat.sh 20240419-143919.728243            && sh ms_total_even_odd_numreq.sh 20240419-143919.728243            && sh latency_cdf.sh 20240419-143919.728243
DONE
PARSING 20240419-143919.728243 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-143919.728243
ERROR: cat: /homes/inho/capybara-data/20240419-143919.728243.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-143919.728243.server_reply_10003: No such file or directory



PARSING 20240419-143919.728243 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-143919.728243
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-143919.728243, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-144620.439123
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


277543    120808    74265    52584    40231    32325    26866    22888    19871    17511    15619    14070    12782    11694    10765    9962    9263    8649    8106    7622    7189    6798    6445    6124    5831    5563    5317    5090    4880    4685    4505    4336    4179    4032    3894    3765    3643    3528    3420    3317    3221    3129    3042    2959    2880    2805    2734    2665    2600    2538    2478    2421    2367    2314    2264    2215    2169    2124    2081    2039    1999    1960    1923    1887    1852    1819    1786    1755    1724    1695    1666    1638    1611    1585    1560    1535    1511    1488    1466    1444    1422    1402    1381    1362    1342    1324    1305    1288    1270    1253    1237    1221    1205    1190    1175    1160    1146    1132    1118    1104    

bash: line 1: 4013233 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=0 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.35 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240419-144620.439123.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-144620.439123, 2, 100, 0, 0, 0, 0, exponential, 1000000, 820058, 817149, 48154, 318449, 13.0, 11361.0, inf, inf, inf, 1713537994, 1713537994888742162



iokerneld killed (pid 1786871)
KILLED CAPYBARA PROCESSES
PARSING 20240419-144620.439123 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-144620.439123            && sh ms_avg_99p_lat.sh 20240419-144620.439123            && sh ms_total_even_odd_numreq.sh 20240419-144620.439123            && sh latency_cdf.sh 20240419-144620.439123
DONE
PARSING 20240419-144620.439123 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-144620.439123
ERROR: cat: /homes/inho/capybara-data/20240419-144620.439123.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-144620.439123.server_reply_10003: No such file or directory



PARSING 20240419-144620.439123 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-144620.439123
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-144620.439123, 2, 100, 0, 0, 0, 0, exponential, 1000000, 820058, 817149, 48154, 318449, 13.0, 11361.0, inf, inf, inf, 1713537994, 1713537994888742162

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-144717.439552
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


260891    113559    69809    49429    37817    30386    25254    21515    18679    16461    14682    13226    12015    10992    10119    9365    8708    8130    7620    7165    6757    6390    6058    5757    5481    5229    4998    4784    4587    4404    4234    4076    3928    3790    3660    3539    3424    3316    3215    3118    3027    2941    2859    2781    2707    2637    2570    2505    2444    2386    2330    2276    2224    2175    2128    2082    2038    1996    1956    1917    1879    1843    1808    1774    1741    1710    1679    1649    1621    1593    1566    1540    1515    1490    1466    1443    1421    1399    1378    1357    1337    1317    1298    1280    1262    1244    1227    1210    1194    1178    1163    1147    1133    1118    1104    1090    1077    1064    1051    1038    

bash: line 1: 4014371 Aborted                 sudo -E CAPY_LOG=all LIBOS=catnip RECV_QUEUE_LEN_THRESHOLD=20 MIG_DELAY=0 MAX_REACTIVE_MIGS=0 MAX_PROACTIVE_MIGS=0 MIG_PER_N=0 SESSION_DATA_SIZE=0 MIN_THRESHOLD=50 RPS_THRESHOLD=0.35 THRESHOLD_EPSILON=0.1 MTU=1500 MSS=1500 NUM_CORES=4 RUST_BACKTRACE=full CORE_ID=1 CONFIG_PATH=/homes/inho/Capybara/capybara/config/node9_config.yaml LD_LIBRARY_PATH=/homes/inho/lib:/homes/inho/lib/x86_64-linux-gnu PKG_CONFIG_PATH=/homes/inho/lib/x86_64-linux-gnu/pkgconfig numactl -m0 /homes/inho/Capybara/capybara/bin/examples/rust/http-server.elf 10.0.1.9:10000 > /homes/inho/capybara-data/20240419-144717.439552.be0 2>&1


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-144717.439552, 2, 100, 0, 0, 0, 0, exponential, 940000, 790179, 786808, 47762, 298131, 13.0, 10168.0, inf, inf, inf, 1713538051, 1713538051849539649



iokerneld killed (pid 1788389)
KILLED CAPYBARA PROCESSES
PARSING 20240419-144717.439552 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-144717.439552            && sh ms_avg_99p_lat.sh 20240419-144717.439552            && sh ms_total_even_odd_numreq.sh 20240419-144717.439552            && sh latency_cdf.sh 20240419-144717.439552
DONE
PARSING 20240419-144717.439552 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-144717.439552
ERROR: cat: /homes/inho/capybara-data/20240419-144717.439552.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-144717.439552.server_reply_10003: No such file or directory



PARSING 20240419-144717.439552 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-144717.439552
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-144717.439552, 2, 100, 0, 0, 0, 0, exponential, 940000, 790179, 786808, 47762, 298131, 13.0, 10168.0, inf, inf, inf, 1713538051, 1713538051849539649

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-144811.871688
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


249789    108727    66838    47326    36208    29093    24180    20599    17884    15760    14057    12663    11503    10524    9688    8966    8337    7784    7295    6860    6470    6118    5800    5512    5248    5007    4785    4581    4392    4217    4054    3902    3761    3629    3505    3388    3278    3175    3078    2986    2898    2816    2737    2663    2592    2525    2460    2399    2340    2284    2230    2179    2130    2083    2037    1994    1952    1911    1873    1835    1799    1764    1731    1698    1667    1637    1607    1579    1552    1525    1499    1474    1450    1427    1404    1382    1360    1339    1319    1299    1280    1261    1243    1225    1208    1191    1175    1159    1143    1128    1113    1099    1084    1071    1057    1044    1031    1018    1006    994    



 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-144811.871688, 2, 100, 0, 0, 0, 0, exponential, 900000, 775151, 774717, 0, 111182, 13.0, 8765.0, 9347.0, 9974.0, 10241.0, 1713538106, 1713538106391112472



iokerneld killed (pid 1789897)
KILLED CAPYBARA PROCESSES
PARSING 20240419-144811.871688 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-144811.871688            && sh ms_avg_99p_lat.sh 20240419-144811.871688            && sh ms_total_even_odd_numreq.sh 20240419-144811.871688            && sh latency_cdf.sh 20240419-144811.871688
DONE
PARSING 20240419-144811.871688 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-144811.871688
ERROR: cat: /homes/inho/capybara-data/20240419-144811.871688.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-144811.871688.server_reply_10003: No such file or directory



PARSING 20240419-144811.871688 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-144811.871688
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-144811.871688, 2, 100, 0, 0, 0, 0, exponential, 900000, 775151, 774717, 0, 111182, 13.0, 8765.0, 9347.0, 9974.0, 10241.0, 1713538106, 1713538106391112472

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-145029.359658
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-145029.359658, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1791608)
KILLED CAPYBARA PROCESSES
PARSING 20240419-145029.359658 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-145029.359658            && sh ms_avg_99p_lat.sh 20240419-145029.359658            && sh ms_total_even_odd_numreq.sh 20240419-145029.359658            && sh latency_cdf.sh 20240419-145029.359658
DONE
PARSING 20240419-145029.359658 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-145029.359658
ERROR: cat: /homes/inho/capybara-data/20240419-145029.359658.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-145029.359658.server_reply_10003: No such file or directory



PARSING 20240419-145029.359658 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-145029.359658
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-145029.359658, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-145312.011685
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-145312.011685, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1793383)
KILLED CAPYBARA PROCESSES
PARSING 20240419-145312.011685 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-145312.011685            && sh ms_avg_99p_lat.sh 20240419-145312.011685            && sh ms_total_even_odd_numreq.sh 20240419-145312.011685            && sh latency_cdf.sh 20240419-145312.011685
DONE
PARSING 20240419-145312.011685 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-145312.011685
ERROR: cat: /homes/inho/capybara-data/20240419-145312.011685.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-145312.011685.server_reply_10003: No such file or directory



PARSING 20240419-145312.011685 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-145312.011685
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-145312.011685, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-150349.387696
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-150349.387696, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1796193)
KILLED CAPYBARA PROCESSES
PARSING 20240419-150349.387696 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-150349.387696            && sh ms_avg_99p_lat.sh 20240419-150349.387696            && sh ms_total_even_odd_numreq.sh 20240419-150349.387696            && sh latency_cdf.sh 20240419-150349.387696
DONE
PARSING 20240419-150349.387696 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-150349.387696
ERROR: cat: /homes/inho/capybara-data/20240419-150349.387696.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-150349.387696.server_reply_10003: No such file or directory



PARSING 20240419-150349.387696 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-150349.387696
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-150349.387696, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-151655.087666
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-151655.087666, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1799250)
KILLED CAPYBARA PROCESSES
PARSING 20240419-151655.087666 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-151655.087666            && sh ms_avg_99p_lat.sh 20240419-151655.087666            && sh ms_total_even_odd_numreq.sh 20240419-151655.087666            && sh latency_cdf.sh 20240419-151655.087666
DONE
PARSING 20240419-151655.087666 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-151655.087666
ERROR: cat: /homes/inho/capybara-data/20240419-151655.087666.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-151655.087666.server_reply_10003: No such file or directory



PARSING 20240419-151655.087666 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-151655.087666
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-151655.087666, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-151823.375201
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-151823.375201, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1800857)
KILLED CAPYBARA PROCESSES
PARSING 20240419-151823.375201 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-151823.375201            && sh ms_avg_99p_lat.sh 20240419-151823.375201            && sh ms_total_even_odd_numreq.sh 20240419-151823.375201            && sh latency_cdf.sh 20240419-151823.375201
DONE
PARSING 20240419-151823.375201 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-151823.375201
ERROR: cat: /homes/inho/capybara-data/20240419-151823.375201.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-151823.375201.server_reply_10003: No such file or directory



PARSING 20240419-151823.375201 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-151823.375201
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-151823.375201, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
KILLED CAPYBARA PROCESSES
================ RUNNING TEST =================


EXPTID: 20240419-151930.063386
SETUP SWITCH
RUNNING BACKENDS
be-dpdk-ctrl is running
2 backends are running
iokerneld is running
Running w/o On/Off pattern


 Writing data into files...
================ TEST COMPLETE =================

[RESULT]20240419-151930.063386, 2, 100, 0, 0, 0, 0, N/A



iokerneld killed (pid 1802390)
KILLED CAPYBARA PROCESSES
PARSING 20240419-151930.063386 latency_trace
Executing command: cd /homes/inho/Capybara/capybara/eval            && sh parse_request_sched.sh 20240419-151930.063386            && sh ms_avg_99p_lat.sh 20240419-151930.063386            && sh ms_total_even_odd_numreq.sh 20240419-151930.063386            && sh latency_cdf.sh 20240419-151930.063386
DONE
PARSING 20240419-151930.063386 server reply
Executing command: cd /homes/inho/Capybara/capybara/eval && sh parse_server_reply.sh 20240419-151930.063386
ERROR: cat: /homes/inho/capybara-data/20240419-151930.063386.server_reply_10002: No such file or directory
cat: /homes/inho/capybara-data/20240419-151930.063386.server_reply_10003: No such file or directory



PARSING 20240419-151930.063386 RPS SIGNAL
Executing command: cd /homes/inho/Capybara/capybara/eval && sh workload_gap_cdf.sh 20240419-151930.063386
DONE
KILLED CAPYBARA PROCESSES
EXITING





ID, #BE, #CONN, MIG_DELAY, TOTAL_#_MIG, MIG_PER_N, Distribution, RPS, Target, Actual, Dropped, Never Sent, Median, 90th, 99th, 99.9th, 99.99th, Start, StartTsc
20240419-151930.063386, 2, 100, 0, 0, 0, 0, N/A

KILLED CAPYBARA PROCESSES
Cleaning up...
